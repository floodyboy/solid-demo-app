System.register(["./CoreExtension-legacy-f23b096e.js"],(function(t,e){"use strict";var r,n,o,i,s,a,l,c,h,d,u,f,p,g,m,x,y,v,_,w,b;return{setters:[t=>{r=t.a,n=t.E,o=t.g,i=t.m,s=t.b,a=t.c,l=t.T,c=t.d,h=t.e,d=t.i,u=t.S,f=t.f,p=t.B,g=t.h,m=t.j,x=t.k,y=t.W,v=t.l,_=t.n,w=t.o,b=t.C}],execute:function(){const t=(t,e)=>t===e,T=Symbol("solid-proxy"),S=Symbol("solid-track"),C={equals:t};let R=it;const F=1,I=2,E={owned:null,cleanups:null,context:null,owner:null},z={};var N=null;let k,M=null,L=null,A=null,P=null,B=0;function D(t,e){const r=L,n=N,o=0===t.length,i=void 0===e?n:e,s=o?E:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=o?t:()=>t((()=>H((()=>ct(s)))));N=s,L=null;try{return ot(a,!0)}finally{L=r,N=n}}function $(t,e){const r={value:t,observers:null,observerSlots:null,comparator:(e=e?Object.assign({},C,e):C).equals||void 0};return[Z.bind(r),t=>("function"==typeof t&&(t=t(r.value)),tt(r,t))]}function Y(t,e,r){et(rt(t,e,!0,F))}function O(t,e,r){et(rt(t,e,!1,F))}function X(t,e,r){R=st;const n=rt(t,e,!1,F);r&&r.render||(n.user=!0),P?P.push(n):et(n)}function W(t,e,r){r=r?Object.assign({},C,r):C;const n=rt(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,et(n),Z.bind(n)}function j(t,e,r){let n,o,i;2===arguments.length&&"object"==typeof e||1===arguments.length?(n=!0,o=t,i=e||{}):(n=t,o=e,i=r||{});let s=null,a=z,l=!1,c="initialValue"in i,h="function"==typeof n&&W(n);const d=new Set,[u,f]=(i.storage||$)(i.initialValue),[p,g]=$(void 0),[m,x]=$(void 0,{equals:!1}),[y,v]=$(c?"ready":"unresolved");function _(t,e,r,n){return s===t&&(s=null,void 0!==n&&(c=!0),t!==a&&e!==a||!i.onHydrated||queueMicrotask((()=>i.onHydrated(n,{value:e}))),a=z,function(t,e){ot((()=>{void 0===e&&f((()=>t)),v(void 0!==e?"errored":c?"ready":"unresolved"),g(e);for(const t of d.keys())t.decrement();d.clear()}),!1)}(e,r)),e}function w(){const t=k,e=u(),r=p();if(void 0!==r&&!s)throw r;return L&&!L.user&&t&&Y((()=>{m(),s&&(t.resolved||d.has(t)||(t.increment(),d.add(t)))})),e}function b(t=!0){if(!1!==t&&l)return;l=!1;const e=h?h():n;if(null==e||!1===e)return void _(s,H(u));const r=a!==z?a:H((()=>o(e,{value:u(),refetching:t})));return(i=r)&&"object"==typeof i&&"then"in i?(s=r,"value"in r?("success"===r.status?_(s,r.value,void 0,e):_(s,void 0,void 0,e),r):(l=!0,queueMicrotask((()=>l=!1)),ot((()=>{v(c?"refreshing":"pending"),x()}),!1),r.then((t=>_(r,t,void 0,e)),(t=>_(r,void 0,ht(t),e))))):(_(s,r,void 0,e),r);var i}return Object.defineProperties(w,{state:{get:()=>y()},error:{get:()=>p()},loading:{get(){const t=y();return"pending"===t||"refreshing"===t}},latest:{get(){if(!c)return w();const t=p();if(t&&!s)throw t;return u()}}}),h?Y((()=>b(!1))):b(!1),[w,{refetch:b,mutate:f}]}function H(t){if(null===L)return t();const e=L;L=null;try{return t()}finally{L=e}}function U(t,e,r){const n=Array.isArray(t);let o,i=r&&r.defer;return r=>{let s;if(n){s=Array(t.length);for(let e=0;e<t.length;e++)s[e]=t[e]()}else s=t();if(i)return void(i=!1);const a=H((()=>e(s,o,r)));return o=s,a}}function G(t){X((()=>H(t)))}function K(t){return null===N||(null===N.cleanups?N.cleanups=[t]:N.cleanups.push(t)),t}function V(){return N}function q(t,e){const r=Symbol("context");return{id:r,Provider:ft(r),defaultValue:t}}function Q(t){return N&&N.context&&void 0!==N.context[t.id]?N.context[t.id]:t.defaultValue}function J(t){const e=W(t),r=W((()=>ut(e())));return r.toArray=()=>{const t=r();return Array.isArray(t)?t:null!=t?[t]:[]},r}function Z(){if(this.sources&&this.state)if(this.state===F)et(this);else{const t=A;A=null,ot((()=>at(this)),!1),A=t}if(L){const t=this.observers?this.observers.length:0;L.sources?(L.sources.push(this),L.sourceSlots.push(t)):(L.sources=[this],L.sourceSlots=[t]),this.observers?(this.observers.push(L),this.observerSlots.push(L.sources.length-1)):(this.observers=[L],this.observerSlots=[L.sources.length-1])}return this.value}function tt(t,e,r){let n=t.value;return t.comparator&&t.comparator(n,e)||(t.value=e,t.observers&&t.observers.length&&ot((()=>{for(let e=0;e<t.observers.length;e+=1){const r=t.observers[e],n=M&&M.running;n&&M.disposed.has(r),(n?r.tState:r.state)||(r.pure?A.push(r):P.push(r),r.observers&&lt(r)),n||(r.state=F)}if(A.length>1e6)throw A=[],new Error}),!1)),e}function et(t){if(!t.fn)return;ct(t);const e=N,r=L,n=B;L=N=t,function(t,e,r){let n;try{n=t.fn(e)}catch(o){return t.pure&&(t.state=F,t.owned&&t.owned.forEach(ct),t.owned=null),t.updatedAt=r+1,dt(o)}(!t.updatedAt||t.updatedAt<=r)&&(null!=t.updatedAt&&"observers"in t?tt(t,n):t.value=n,t.updatedAt=r)}(t,t.value,n),L=r,N=e}function rt(t,e,r,n=F,o){const i={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:N,context:N?N.context:null,pure:r};return null===N||N!==E&&(N.owned?N.owned.push(i):N.owned=[i]),i}function nt(t){if(0===t.state)return;if(t.state===I)return at(t);if(t.suspense&&H(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<B);)t.state&&e.push(t);for(let r=e.length-1;r>=0;r--)if((t=e[r]).state===F)et(t);else if(t.state===I){const r=A;A=null,ot((()=>at(t,e[0])),!1),A=r}}function ot(t,e){if(A)return t();let r=!1;e||(A=[]),P?r=!0:P=[],B++;try{const e=t();return function(t){if(A&&(it(A),A=null),t)return;const e=P;P=null,e.length&&ot((()=>R(e)),!1)}(r),e}catch(n){r||(P=null),A=null,dt(n)}}function it(t){for(let e=0;e<t.length;e++)nt(t[e])}function st(t){let e,r=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[r++]=n:nt(n)}for(e=0;e<r;e++)nt(t[e])}function at(t,e){t.state=0;for(let r=0;r<t.sources.length;r+=1){const n=t.sources[r];if(n.sources){const t=n.state;t===F?n!==e&&(!n.updatedAt||n.updatedAt<B)&&nt(n):t===I&&at(n,e)}}}function lt(t){for(let e=0;e<t.observers.length;e+=1){const r=t.observers[e];r.state||(r.state=I,r.pure?A.push(r):P.push(r),r.observers&&lt(r))}}function ct(t){let e;if(t.sources)for(;t.sources.length;){const e=t.sources.pop(),r=t.sourceSlots.pop(),n=e.observers;if(n&&n.length){const t=n.pop(),o=e.observerSlots.pop();r<n.length&&(t.sourceSlots[o]=r,n[r]=t,e.observerSlots[r]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ct(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function ht(t){return t instanceof Error?t:new Error("string"==typeof t?t:"Unknown error",{cause:t})}function dt(t,e=N){throw ht(t)}function ut(t){if("function"==typeof t&&!t.length)return ut(t());if(Array.isArray(t)){const e=[];for(let r=0;r<t.length;r++){const n=ut(t[r]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function ft(t,e){return function(e){let r;return O((()=>r=H((()=>(N.context={...N.context,[t]:e.value},J((()=>e.children)))))),void 0),r}}const pt=Symbol("fallback");function gt(t){for(let e=0;e<t.length;e++)t[e]()}function mt(t,e){return H((()=>t(e||{})))}function xt(){return!0}const yt={get:(t,e,r)=>e===T?r:t.get(e),has:(t,e)=>e===T||t.has(e),set:xt,deleteProperty:xt,getOwnPropertyDescriptor:(t,e)=>({configurable:!0,enumerable:!0,get:()=>t.get(e),set:xt,deleteProperty:xt}),ownKeys:t=>t.keys()};function vt(t){return(t="function"==typeof t?t():t)?t:{}}function _t(){for(let t=0,e=this.length;t<e;++t){const e=this[t]();if(void 0!==e)return e}}function wt(...t){let e=!1;for(let i=0;i<t.length;i++){const r=t[i];e=e||!!r&&T in r,t[i]="function"==typeof r?(e=!0,W(r)):r}if(e)return new Proxy({get(e){for(let r=t.length-1;r>=0;r--){const n=vt(t[r])[e];if(void 0!==n)return n}},has(e){for(let r=t.length-1;r>=0;r--)if(e in vt(t[r]))return!0;return!1},keys(){const e=[];for(let r=0;r<t.length;r++)e.push(...Object.keys(vt(t[r])));return[...new Set(e)]}},yt);const r={},n={},o=new Set;for(let i=t.length-1;i>=0;i--){const e=t[i];if(!e)continue;const s=Object.getOwnPropertyNames(e);for(let t=0,i=s.length;t<i;t++){const i=s[t];if("__proto__"===i||"constructor"===i)continue;const a=Object.getOwnPropertyDescriptor(e,i);if(o.has(i)){const t=n[i];t?a.get?t.push(a.get.bind(e)):void 0!==a.value&&t.push((()=>a.value)):void 0===r[i]&&(r[i]=a.value)}else a.get?(o.add(i),Object.defineProperty(r,i,{enumerable:!0,configurable:!0,get:_t.bind(n[i]=[a.get.bind(e)])})):(void 0!==a.value&&o.add(i),r[i]=a.value)}}return r}const bt=t=>`Stale read from <${t}>.`;function Tt(t){const e="fallback"in t&&{fallback:()=>t.fallback};return W(function(t,e,r={}){let n=[],o=[],i=[],s=0,a=e.length>1?[]:null;return K((()=>gt(i))),()=>{let l,c,h=t()||[];return h[S],H((()=>{let t,e,u,f,p,g,m,x,y,v=h.length;if(0===v)0!==s&&(gt(i),i=[],n=[],o=[],s=0,a&&(a=[])),r.fallback&&(n=[pt],o[0]=D((t=>(i[0]=t,r.fallback()))),s=1);else if(0===s){for(o=new Array(v),c=0;c<v;c++)n[c]=h[c],o[c]=D(d);s=v}else{for(u=new Array(v),f=new Array(v),a&&(p=new Array(v)),g=0,m=Math.min(s,v);g<m&&n[g]===h[g];g++);for(m=s-1,x=v-1;m>=g&&x>=g&&n[m]===h[x];m--,x--)u[x]=o[m],f[x]=i[m],a&&(p[x]=a[m]);for(t=new Map,e=new Array(x+1),c=x;c>=g;c--)y=h[c],l=t.get(y),e[c]=void 0===l?-1:l,t.set(y,c);for(l=g;l<=m;l++)y=n[l],c=t.get(y),void 0!==c&&-1!==c?(u[c]=o[l],f[c]=i[l],a&&(p[c]=a[l]),c=e[c],t.set(y,c)):i[l]();for(c=g;c<v;c++)c in u?(o[c]=u[c],i[c]=f[c],a&&(a[c]=p[c],a[c](c))):o[c]=D(d);o=o.slice(0,s=v),n=h.slice(0)}return o}));function d(t){if(i[c]=t,a){const[t,r]=$(c);return a[c]=r,e(h[c],t)}return e(h[c])}}}((()=>t.each),t.children,e||void 0))}function St(t){const e=t.keyed,r=W((()=>t.when),void 0,{equals:(t,r)=>e?t===r:!t==!r});return W((()=>{const n=r();if(n){const o=t.children;return"function"==typeof o&&o.length>0?H((()=>o(e?n:()=>{if(!H(r))throw bt("Show");return t.when}))):o}return t.fallback}),void 0,void 0)}const[Ct,Rt]=$(null),Ft=t=>(()=>{const e=er("text");return ir(e,t,!1),e})(),It=t=>(()=>{const e=er("node");return ir(e,t,!1),e})();class Et{releaseCallback;constructor(t){this.releaseCallback=t}}class zt extends Et{textureMap=new Map;zeroReferenceTextureSet=new Set;options;constructor(t,e){super(t),this.options={textureCleanupIntervalMs:e.textureCleanupIntervalMs??1e4,textureCleanupAgeThreadholdMs:e.textureCleanupAgeThreadholdMs??6e4},setInterval((()=>{const t=Date.now(),e=this.options.textureCleanupAgeThreadholdMs;for(const r of this.zeroReferenceTextureSet)t-r.lastUpdate>e&&(this.releaseCallback(r.id),this.textureMap.delete(r.id),this.zeroReferenceTextureSet.delete(r))}),this.options.textureCleanupIntervalMs)}registerTexture(t){const e=t.options?.id;if(r(e,"Texture must have an id to be registered"),!this.textureMap.has(e)){const t={id:e,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(e,t),this.zeroReferenceTextureSet.add(t)}}incrementTextureRefCount(t){const e=t.options?.id;r(e,"Texture must have an id to be registered");let n=this.textureMap.get(e);n||(this.registerTexture(t),n=this.textureMap.get(e)),r(n,"Texture must have been registered"),"SubTexture"===t.txType&&this.incrementTextureRefCount(t.props.texture),n.nodeRefCount++,n.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(n)&&this.zeroReferenceTextureSet.delete(n)}decrementTextureRefCount(t){const e=t.options?.id;r(e,"Texture must have an id to be registered");const n=this.textureMap.get(e);r(n,"Texture must have been registered"),n.nodeRefCount--,n.lastUpdate=Date.now(),0===n.nodeRefCount&&this.zeroReferenceTextureSet.add(n),"SubTexture"===t.txType&&this.decrementTextureRefCount(t.props.texture)}}class Nt extends Et{registry;constructor(t){super(t),this.registry=new FinalizationRegistry(t)}registerTexture(t){r(t.options?.id,"Texture must have an ID to be registered"),this.registry.register(t,t.options?.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class kt{root=null;driver;canvas;settings;nodes=new Map;nextTextureId=1;textureTracker;constructor(t,e,r){const n={appWidth:t.appWidth||1920,appHeight:t.appHeight||1080,deviceLogicalPixelRatio:t.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:t.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:t.clearColor??0,coreExtensionModule:t.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:t.experimental_FinalizationRegistryTextureUsageTracker??!1,textureCleanupOptions:t.textureCleanupOptions||{}};this.settings=n;const{appWidth:o,appHeight:i,deviceLogicalPixelRatio:s,devicePhysicalPixelRatio:a}=n,l=t=>{this.driver.releaseTexture(t)},c=n.experimental_FinalizationRegistryTextureUsageTracker&&"function"==typeof FinalizationRegistry;this.textureTracker=c?new Nt(l):new zt(l,this.settings.textureCleanupOptions);const h=o*s,d=i*s;this.driver=r;const u=document.createElement("canvas");let f;if(this.canvas=u,u.width=h*a,u.height=d*a,u.style.width=`${h}px`,u.style.height=`${d}px`,f="string"==typeof e?document.getElementById(e):e,!f)throw new Error("Could not find target element");r.onCreateNode=t=>{this.nodes.set(t.id,t)},r.onBeforeDestroyNode=t=>{this.nodes.delete(t.id)},f.appendChild(u)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(t){return this.driver.createNode(this.resolveNodeDefaults(t))}createTextNode(t){return this.driver.createTextNode({...this.resolveNodeDefaults(t),text:t.text??"",textRendererOverride:t.textRendererOverride??null,fontSize:t.fontSize??16,fontFamily:t.fontFamily??"sans-serif",fontStyle:t.fontStyle??"normal",fontWeight:t.fontWeight??"normal",fontStretch:t.fontStretch??"normal",textAlign:t.textAlign??"left",contain:t.contain??"none",scrollable:t.scrollable??!1,scrollY:t.scrollY??0,offsetY:t.offsetY??0,letterSpacing:t.letterSpacing??0,debug:t.debug??{}})}resolveNodeDefaults(t){const e=t.color??4294967295,r=t.colorTl??t.colorTop??t.colorLeft??e,n=t.colorTr??t.colorTop??t.colorRight??e,o=t.colorBl??t.colorBottom??t.colorLeft??e,i=t.colorBr??t.colorBottom??t.colorRight??e;return{x:t.x??0,y:t.y??0,width:t.width??0,height:t.height??0,alpha:t.alpha??1,clipping:t.clipping??!1,color:e,colorTop:t.colorTop??e,colorBottom:t.colorBottom??e,colorLeft:t.colorLeft??e,colorRight:t.colorRight??e,colorBl:o,colorBr:i,colorTl:r,colorTr:n,zIndex:t.zIndex??0,zIndexLocked:t.zIndexLocked??0,parent:t.parent??null,texture:t.texture??null,shader:t.shader??null,src:t.src??"",scale:t.scale??null,scaleX:t.scaleX??t.scale??1,scaleY:t.scaleY??t.scale??1,mount:t.mount??0,mountX:t.mountX??t.mount??0,mountY:t.mountY??t.mount??0,pivot:t.pivot??.5,pivotX:t.pivotX??t.pivot??.5,pivotY:t.pivotY??t.pivot??.5,rotation:t.rotation??0}}destroyNode(t){return this.driver.destroyNode(t)}createTexture(t,e,r){const n={descType:"texture",txType:t,props:e,options:{...r,id:this.nextTextureId++}};return this.textureTracker.registerTexture(n),n}createShader(t,e){return{descType:"shader",shType:t,props:e}}getNodeById(t){return this.nodes.get(t)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class Mt extends n{node;props;settings;propStartValues={};restoreValues={};progress=0;timingFunction;constructor(t,e,r){super(),this.node=t,this.props=e,this.settings=r,this.propStartValues={},Object.keys(e).forEach((e=>{this.propStartValues[e]=t[e]})),this.timingFunction=t=>t,r.easing&&"string"==typeof r.easing&&(this.timingFunction=o(r.easing))}reset(){this.progress=0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach((t=>{this.node[t]=this.propStartValues[t]}))}reverse(){this.progress=0,Object.keys(this.props).forEach((t=>{const e=this.props[t],r=this.propStartValues[t];this.props[t]=r,this.propStartValues[t]=e})),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(t,e,r){return(this.timingFunction(t)||t)*(r-e)+e}update(t){const{duration:e,loop:r,easing:n}=this.settings;e?(this.progress+=t/e,this.progress>1&&(this.progress=r?0:1,this.emit("finished",{})),Object.keys(this.props).forEach((t=>{const e=this.props[t],r=this.propStartValues[t],o=e;if(-1!==t.indexOf("color")){const e=n&&this.timingFunction(this.progress)||this.progress,s=i(r,o,e);this.node[t]=n?s:i(r,o,this.progress)}else this.node[t]=n?this.applyEasing(this.progress,r,o):r+(o-r)*this.progress}))):this.emit("finished",{})}}class Lt{manager;animation;stoppedPromise=null;stoppedResolve=null;constructor(t,e){this.manager=t,this.animation=e,this.state="stopped"}state;start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){this.makeStoppedPromise();const t=this.stoppedPromise;return r(t),t}makeStoppedPromise(){null===this.stoppedResolve&&(this.stoppedPromise=new Promise((t=>{this.stoppedResolve=t})))}finished(){r(this.stoppedResolve);const{loop:t,stopMethod:e}=this.animation.settings;if("reverse"===e)return this.animation.reverse(),void this.start();this.stoppedResolve(),this.stoppedResolve=null,t||this.manager.unregisterAnimation(this.animation)}}class At{data;constructor(t){t?(this.data=new Float32Array(9),this.data[0]=t[0],this.data[3]=t[3],this.data[6]=t[6],this.data[1]=t[1],this.data[4]=t[4],this.data[7]=t[7],this.data[2]=t[2],this.data[5]=t[5],this.data[8]=t[8]):this.data=new Float32Array(9)}static get temp(){return Pt}static multiply(t,e,r){const n=t.data[0]*e.data[0]+t.data[3]*e.data[1]+t.data[6]*e.data[2],o=t.data[0]*e.data[3]+t.data[3]*e.data[4]+t.data[6]*e.data[5],i=t.data[0]*e.data[6]+t.data[3]*e.data[7]+t.data[6]*e.data[8],s=t.data[1]*e.data[0]+t.data[4]*e.data[1]+t.data[7]*e.data[2],a=t.data[1]*e.data[3]+t.data[4]*e.data[4]+t.data[7]*e.data[5],l=t.data[1]*e.data[6]+t.data[4]*e.data[7]+t.data[7]*e.data[8],c=t.data[2]*e.data[0]+t.data[5]*e.data[1]+t.data[8]*e.data[2],h=t.data[2]*e.data[3]+t.data[5]*e.data[4]+t.data[8]*e.data[5],d=t.data[2]*e.data[6]+t.data[5]*e.data[7]+t.data[8]*e.data[8];return r||(r=new At),r.data[0]=n,r.data[3]=o,r.data[6]=i,r.data[1]=s,r.data[4]=a,r.data[7]=l,r.data[2]=c,r.data[5]=h,r.data[8]=d,r}static identity(t){return t||(t=new At),t.data[0]=1,t.data[3]=0,t.data[6]=0,t.data[1]=0,t.data[4]=1,t.data[7]=0,t.data[2]=0,t.data[5]=0,t.data[8]=1,t}static translate(t,e,r){return r||(r=new At),r.data[0]=1,r.data[3]=0,r.data[6]=t,r.data[1]=0,r.data[4]=1,r.data[7]=e,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}static scale(t,e,r){return r||(r=new At),r.data[0]=t,r.data[3]=0,r.data[6]=0,r.data[1]=0,r.data[4]=e,r.data[7]=0,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}static rotate(t,e){const r=Math.cos(t),n=Math.sin(t);return e||(e=new At),e.data[0]=r,e.data[3]=-n,e.data[6]=0,e.data[1]=n,e.data[4]=r,e.data[7]=0,e.data[2]=0,e.data[5]=0,e.data[8]=1,e}static copy(t,e,r){return e||(e=new At),e.data[0]=t.data[0],e.data[1]=t.data[1],e.data[2]=t.data[2],e.data[3]=t.data[3],e.data[4]=t.data[4],e.data[5]=t.data[5],e.data[6]=t.data[6],e.data[7]=t.data[7],e.data[8]=t.data[8],e}translate(t,e){return this.data[6]=this.data[0]*t+this.data[3]*e+this.data[6],this.data[7]=this.data[1]*t+this.data[4]*e+this.data[7],this}scale(t,e){return this.data[0]=this.data[0]*t,this.data[3]=this.data[3]*e,this.data[1]=this.data[1]*t,this.data[4]=this.data[4]*e,this}rotate(t){if(0===t||!(t%Math.PI*2))return this;const e=Math.cos(t),r=Math.sin(t),n=this.data[0]*e+this.data[3]*r,o=this.data[3]*e-this.data[0]*r,i=this.data[1]*e+this.data[4]*r,s=this.data[4]*e-this.data[1]*r;return this.data[0]=n,this.data[3]=o,this.data[1]=i,this.data[4]=s,this}multiply(t){return At.multiply(this,t,this)}get tx(){return this.data[6]}get ty(){return this.data[7]}get ta(){return this.data[0]}get tb(){return this.data[3]}get tc(){return this.data[1]}get td(){return this.data[4]}transformPoint(t,e){return[this.data[0]*t+this.data[3]*e+this.data[6],this.data[1]*t+this.data[4]*e+this.data[1]]}}const Pt=new At;class Bt extends n{stage;children=[];props;recalculationType=6;hasUpdates=!0;globalTransform;scaleRotateTransform;localTransform;isComplex=!1;constructor(t,e){super(),this.stage=t,this.props={...e,parent:null},this.parent=e.parent,this.updateScaleRotateTransform()}loadTexture(t,e,r=null){this.props.texture&&this.unloadTexture();const{txManager:n}=this.stage,o=n.loadTexture(t,e,r);this.props.texture=o,this.props.textureOptions=r,queueMicrotask((()=>{"loaded"===o.state?this.onTextureLoaded(o,o.dimensions):"failed"===o.state&&this.onTextureFailed(o,o.error),o.on("loaded",this.onTextureLoaded),o.on("failed",this.onTextureFailed)}))}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null}onTextureLoaded=(t,e)=>{this.emit("loaded",{type:"texture",dimensions:e})};onTextureFailed=(t,e)=>{this.emit("failed",{type:"texture",error:e})};loadShader(t,e){const n=this.stage.renderer.getShaderManager();r(n);const{shader:o,props:i}=n.loadShader(t,e);this.props.shader=o,this.props.shaderProps=i}setHasUpdates(){if(!this.props.alpha)return;this.hasUpdates=!0;let t=this?.props.parent;for(;t;)t.hasUpdates=!0,t=t?.props.parent}setRecalculationType(t){this.recalculationType|=t,this.setHasUpdates()}updateScaleRotateTransform(){this.setRecalculationType(4),this.scaleRotateTransform=At.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY),this.updateLocalTransform()}updateLocalTransform(){r(this.scaleRotateTransform),this.setRecalculationType(2);const t=this.props.pivotX*this.props.width,e=this.props.pivotY*this.props.height,n=this.props.mountX*this.props.width,o=this.props.mountY*this.props.height;this.localTransform=At.translate(t-n+this.props.x,e-o+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-t,-e)}update(t){r(this.localTransform);const e=this.parent?.globalTransform;this.globalTransform=e?At.copy(e,this.globalTransform).multiply(this.localTransform):At.copy(this.localTransform,this.globalTransform),this.children.length&&this.children.forEach((e=>{e.update(t)})),this.hasUpdates=!1,this.recalculationType=0}renderQuads(t,e){const{width:n,height:o,colorTl:i,colorTr:s,colorBl:a,colorBr:l,texture:c,textureOptions:h,shader:d,shaderProps:u}=this.props,{zIndex:f,worldAlpha:p,globalTransform:g}=this;r(g),t.addRenderable({width:n,height:o,colorTl:i,colorTr:s,colorBl:a,colorBr:l,texture:c,textureOptions:h,zIndex:f,shader:d,shaderProps:u,alpha:p,clippingRect:e,tx:g.tx,ty:g.ty,ta:g.ta,tb:g.tb,tc:g.tc,td:g.td})}get id(){return this.props.id}get x(){return this.props.x}set x(t){this.props.x!==t&&(this.props.x=t,this.updateLocalTransform())}get absX(){return this.props.x+(this.props.parent?.absX||this.props.parent?.globalTransform?.tx||0)}get absY(){return this.props.y+(this.props.parent?.absY??0)}get y(){return this.props.y}set y(t){this.props.y!==t&&(this.props.y=t,this.updateLocalTransform())}get width(){return this.props.width}set width(t){this.props.width!==t&&(this.props.width=t,this.updateLocalTransform())}get height(){return this.props.height}set height(t){this.props.height!==t&&(this.props.height=t,this.updateLocalTransform())}get scale(){return this.scaleX}set scale(t){this.scaleX=t,this.scaleY=t}get scaleX(){return this.props.scaleX}set scaleX(t){this.props.scaleX!==t&&(this.props.scaleX=t,this.updateScaleRotateTransform())}get scaleY(){return this.props.scaleY}set scaleY(t){this.props.scaleY!==t&&(this.props.scaleY=t,this.updateScaleRotateTransform())}get worldScaleX(){return this.props.scaleX*(this.props.parent?.worldScaleX??1)||this.props.scaleX}get worldScaleY(){return this.props.scaleY*(this.props.parent?.worldScaleY??1)||this.props.scaleY}get mount(){return this.props.mount}set mount(t){this.props.mountX=t,this.props.mountY=t,this.props.mount=t,this.updateLocalTransform()}get mountX(){return this.props.mountX}set mountX(t){this.props.mountX=t,this.updateLocalTransform()}get mountY(){return this.props.mountY}set mountY(t){this.props.mountY=t,this.updateLocalTransform()}get pivot(){return this.props.pivot}set pivot(t){this.props.pivotX===t&&this.props.pivotY===t||(this.props.pivotX=t,this.props.pivotY=t,this.updateLocalTransform())}get pivotX(){return this.props.pivotX}set pivotX(t){this.props.pivotX=t,this.updateLocalTransform()}get pivotY(){return this.props.pivotY}set pivotY(t){this.props.pivotY=t,this.updateLocalTransform()}get rotation(){return this.props.rotation}set rotation(t){this.props.rotation!==t&&(this.props.rotation=t,this.updateScaleRotateTransform())}get alpha(){return this.props.alpha}set alpha(t){this.props.alpha=t}get worldAlpha(){const t=this.props,e=t.parent;return t.alpha*(e?.worldAlpha||1)}get clipping(){return this.props.clipping}set clipping(t){this.props.clipping=t}get color(){return this.props.color}set color(t){this.props.colorTl===t&&this.props.colorTr===t&&this.props.colorBl===t&&this.props.colorBr===t||(this.colorTl=t,this.colorTr=t,this.colorBl=t,this.colorBr=t),this.props.color=t}get colorTop(){return this.props.colorTop}set colorTop(t){this.props.colorTl===t&&this.props.colorTr===t||(this.colorTl=t,this.colorTr=t),this.props.colorTop=t}get colorBottom(){return this.props.colorBottom}set colorBottom(t){this.props.colorBl===t&&this.props.colorBr===t||(this.colorBl=t,this.colorBr=t),this.props.colorBottom=t}get colorLeft(){return this.props.colorLeft}set colorLeft(t){this.props.colorTl===t&&this.props.colorBl===t||(this.colorTl=t,this.colorBl=t),this.props.colorLeft=t}get colorRight(){return this.props.colorRight}set colorRight(t){this.props.colorTr===t&&this.props.colorBr===t||(this.colorTr=t,this.colorBr=t),this.props.colorRight=t}get colorTl(){return this.props.colorTl}set colorTl(t){this.props.colorTl=t}get colorTr(){return this.props.colorTr}set colorTr(t){this.props.colorTr=t}get colorBl(){return this.props.colorBl}set colorBl(t){this.props.colorBl=t}get colorBr(){return this.props.colorBr}set colorBr(t){this.props.colorBr=t}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(t){this.props.zIndexLocked=t}get zIndex(){const t=this.props,e=t.zIndex||0,r=t.parent?.zIndex||0;return t.parent?.zIndexLocked?e<r?e:r:e}set zIndex(t){this.props.zIndex=t}get parent(){return this.props.parent}set parent(t){const e=this.props.parent;if(e!==t){if(this.props.parent=t,e){const t=e.children.indexOf(this);r(-1!==t,"CoreNode.parent: Node not found in old parent's children!"),e.children.splice(t,1)}t&&t.children.push(this),this.updateScaleRotateTransform()}}}let Dt=1;function $t(){return Dt++}class Yt extends n{rendererMain;stage;id;coreNode;_children=[];_src="";_parent=null;_texture=null;_shader=null;constructor(t,e,r,n){super(),this.rendererMain=e,this.stage=r,this.id=n?.id??$t(),this.coreNode=n||new Bt(this.stage,{id:this.id,x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=t.parent,this.shader=t.shader,this.texture=t.texture,this.src=t.src}get x(){return this.coreNode.x}set x(t){this.coreNode.x=t}get y(){return this.coreNode.y}set y(t){this.coreNode.y=t}get width(){return this.coreNode.width}set width(t){this.coreNode.width=t}get height(){return this.coreNode.height}set height(t){this.coreNode.height=t}get alpha(){return this.coreNode.alpha}set alpha(t){this.coreNode.alpha=t}get clipping(){return this.coreNode.clipping}set clipping(t){this.coreNode.clipping=t}get color(){return this.coreNode.color}set color(t){this.coreNode.color=t}get colorTop(){return this.coreNode.colorTop}set colorTop(t){this.coreNode.colorTop=t}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(t){this.coreNode.colorBottom=t}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(t){this.coreNode.colorLeft=t}get colorRight(){return this.coreNode.colorRight}set colorRight(t){this.coreNode.colorRight=t}get colorTl(){return this.coreNode.colorTl}set colorTl(t){this.coreNode.colorTl=t}get colorTr(){return this.coreNode.colorTr}set colorTr(t){this.coreNode.colorTr=t}get colorBl(){return this.coreNode.colorBl}set colorBl(t){this.coreNode.colorBl=t}get colorBr(){return this.coreNode.colorBr}set colorBr(t){this.coreNode.colorBr=t}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(t){null!==t&&(this.coreNode.scaleX=t,this.coreNode.scaleY=t)}get scaleX(){return this.coreNode.scaleX}set scaleX(t){this.coreNode.scaleX=t}get scaleY(){return this.coreNode.scaleY}set scaleY(t){this.coreNode.scaleY=t}get mount(){return this.coreNode.mount}set mount(t){this.coreNode.mount=t}get mountX(){return this.coreNode.mountX}set mountX(t){this.coreNode.mountX=t}get mountY(){return this.coreNode.mountY}set mountY(t){this.coreNode.mountY=t}get pivot(){return this.coreNode.pivot}set pivot(t){this.coreNode.pivot=t}get pivotX(){return this.coreNode.pivotX}set pivotX(t){this.coreNode.pivotX=t}get pivotY(){return this.coreNode.pivotY}set pivotY(t){this.coreNode.pivotY=t}get rotation(){return this.coreNode.rotation}set rotation(t){this.coreNode.rotation=t}get parent(){return this._parent}set parent(t){const e=this._parent;if(this._parent=t,this.coreNode.parent=t?.coreNode??null,e){const t=e.children.indexOf(this);r(-1!==t,"MainOnlyNode.parent: Node not found in old parent's children!"),e.children.splice(t,1)}t&&t.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(t){this.coreNode.zIndex=t}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(t){this.coreNode.zIndexLocked=t}get src(){return this._src}set src(t){this._src!==t&&(this._src=t,this.texture=t?this.rendererMain.createTexture("ImageTexture",{src:t}):null)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),t&&this.rendererMain.textureTracker.incrementTextureRefCount(t),this._texture=t,t?this.coreNode.loadTexture(t.txType,t.props,t.options):this.coreNode.unloadTexture())}onTextureLoaded=(t,e)=>{this.emit("loaded",e)};onTextureFailed=(t,e)=>{this.emit("failed",e)};get shader(){return this._shader}set shader(t){this._shader!==t&&(this._shader=t,t&&this.coreNode.loadShader(t.shType,t.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(t,e){const r=new Mt(this.coreNode,t,e);return new Lt(this.stage.animationManager,r)}}class Ot{root;constructor(t){this.root=t}getNodeByType(t){return[]}getNodeById(t){return null}update(t){this.root.update(t)}}class Xt extends s{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}static shaderSources={vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "}}class Wt extends s{supportsIndexedTextures=!0;constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]})}bindTextures(t){const{renderer:e,gl:r}=this;if(t.length>e.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${e.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);t.forEach(((t,e)=>{r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,t.ctxTexture)}));const n=Array.from(Array(t.length).keys());this.setUniform("u_textures[0]",n)}static shaderSources={vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:t=>`\n      #define txUnits ${t}\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${t}], int idx, vec2 uv) {\n        ${Array.from(Array(t).keys()).map((t=>`\n          ${0!==t?"else ":""}if (idx == ${t}) {\n            return texture2D(textures[${t}], uv);\n          }\n        `)).join("")}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `}}class jt{priority=1;name="";ref;target;passParameters="";declaredUniforms="";uniformInfo={};static uniforms={};static methods;static onShaderMask;static onColorize;static onEffectMask;static getEffectKey(t){return""}static getMethodParameters(t,e){const r=[];for(const n in t){const o=t[n];let i="";o.size&&(i=`[${o.size(e)}]`),r.push(`${o.type} ${n}${i}`)}return r.join(",")}constructor(t){const{ref:e,target:r,props:n={}}=t;this.ref=e,this.target=r;const o={},i=[];let s="";const a=this.constructor.uniforms||{};for(const l in a){const t=a[l],r=t.type,c=`${e}_${l}`;let h="";t.size&&(h=`[${t.size(n)}]`),i.push(c),s+=`uniform ${r} ${c}${h};`,o[l]={name:c,uniform:a[l].method}}this.passParameters=i.join(","),this.declaredUniforms=s,this.uniformInfo=o}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}class Ht extends jt{static z$__type__Props;name="radius";static getEffectKey(){return"radius"}static uniforms={radius:{value:0,method:"uniform4fv",type:"vec4",validator:t=>{let e=t;return Array.isArray(e)?2===e.length?e=[e[0],e[1],e[0],e[1]]:3===e.length?e=[e[0],e[1],e[2],e[0]]:4!==e.length&&(e=[e[0],e[0],e[0],e[0]]):"number"==typeof e&&(e=[e,e,e,e]),e}}};static methods={fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "};static resolveDefaults(t){return{radius:t.radius??10}}static onShaderMask="\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  ";static onEffectMask="\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  "}class Ut extends jt{static z$__type__Props;name="border";static getEffectKey(){return"border"}static resolveDefaults(t){return{width:t.width??10,color:t.color??4294967295}}static uniforms={width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>a(t),method:"uniform4fv",type:"vec4"}};static onEffectMask="\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  ";static onColorize="\n    return color;\n  "}class Gt extends jt{static z$__type__Props;name="linearGradient";static getEffectKey(t){return`linearGradient${t.colors.length}`}static resolveDefaults(t){const e=t.colors??[4278190080,4294967295];let r=t.stops;if(!r){r=[];const t=e.length-1;for(let n=0;n<e.length;n++)r.push(n*(1/t))}return{colors:e,stops:r,angle:t.angle??0}}static uniforms={angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:t=>t.map((t=>a(t))).reduce(((t,e)=>t.concat(e)),[]),size:t=>t.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(t,e)=>{const r=e.colors??[];let n=t;const o=t;if(0===n.length||n&&n.length!==r.length){for(let t=0;t<r.length;t++)n[t]?(o[t]=n[t],void 0===n[t-1]&&void 0!==o[t-2]&&(o[t-1]=o[t-2]+(n[t]-o[t-2])/2)):o[t]=t*(1/(r.length-1));n=o}return o},size:t=>t.colors.length,method:"uniform1fv",type:"float"}};static methods={fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "};static ColorLoop=t=>{let e="";for(let r=2;r<t;r++)e+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return e};static onColorize=t=>`\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ${t.colors.length||1}-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}class Kt extends jt{name="grayscale";static getEffectKey(){return"grayscale"}static onColorize="\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  "}class Vt extends jt{static z$__type__Props;name="borderRight";static getEffectKey(){return"borderRight"}static resolveDefaults(t){return{width:t.width??10,color:t.color??4294967295}}static uniforms={width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>a(t),method:"uniform4fv",type:"vec4"}};static methods={fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "};static onEffectMask="\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ";static onColorize="\n    return color;\n  "}class qt extends jt{static z$__type__Props;name="borderTop";static getEffectKey(){return"borderTop"}static resolveDefaults(t){return{width:t.width??10,color:t.color??4294967295}}static uniforms={width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>a(t),method:"uniform4fv",type:"vec4"}};static methods={fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "};static onEffectMask="\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ";static onColorize="\n    return color;\n  "}class Qt extends jt{static z$__type__Props;name="borderBottom";static getEffectKey(){return"borderBottom"}static resolveDefaults(t){return{width:t.width??10,color:t.color??4294967295}}static uniforms={width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>a(t),method:"uniform4fv",type:"vec4"}};static methods={fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "};static onEffectMask="\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ";static onColorize="\n    return color;\n  "}class Jt extends jt{static z$__type__Props;name="borderLeft";static getEffectKey(){return"borderLeft"}static resolveDefaults(t){return{width:t.width??10,color:t.color??4294967295}}static uniforms={width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>a(t),method:"uniform4fv",type:"vec4"}};static methods={fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "};static onEffectMask="\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  ";static onColorize="\n    return color;\n  "}class Zt extends jt{static z$__type__Props;name="glitch";static getEffectKey(t){return"glitch"}static resolveDefaults(t){return{amplitude:t.amplitude??.2,narrowness:t.narrowness??4,blockiness:t.blockiness??2,minimizer:t.minimizer??8,time:t.time??Date.now()}}static uniforms={amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:t=>(Date.now()-t)%1e3,type:"float"}};static methods={rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "};static onColorize="\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  "}class te extends jt{static z$__type__Props;name="fadeOut";static getEffectKey(){return"fadeOut"}static uniforms={fade:{value:0,method:"uniform4fv",type:"vec4",validator:t=>{let e=t;return Array.isArray(e)?2===e.length?e=[e[0],e[1],e[0],e[1]]:3===e.length?e=[e[0],e[1],e[2],e[0]]:4!==e.length&&(e=[e[0],e[0],e[0],e[0]]):"number"==typeof e&&(e=[e,e,e,e]),e}}};static resolveDefaults(t){return{fade:t.fade??10}}static onColorize="\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  "}class ee extends jt{static z$__type__Props;name="radialGradient";static getEffectKey(t){return`radialGradient${t.colors.length}`}static resolveDefaults(t){const e=t.colors??[4278190080,4294967295];let r=t.stops;if(!r){r=[];const t=e.length-1;for(let n=0;n<e.length;n++)r.push(n*(1/t))}return{colors:e,stops:r,width:t.width??0,height:t.height??t.width??0,pivot:t.pivot??[.5,.5]}}static uniforms={width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:t=>t.map((t=>a(t))).reduce(((t,e)=>t.concat(e)),[]),size:t=>t.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(t,e)=>{const r=e.colors??[];let n=t;const o=t;if(0===n.length||n&&n.length!==r.length){for(let t=0;t<r.length;t++)n[t]?(o[t]=n[t],void 0===n[t-1]&&void 0!==o[t-2]&&(o[t-1]=o[t-2]+(n[t]-o[t-2])/2)):o[t]=t*(1/(r.length-1));n=o}return o},size:t=>t.colors.length,method:"uniform1fv",type:"float"}};static onColorize=t=>`\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ${t.colors.length||1}-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}const re={radius:Ht,border:Ut,borderBottom:Qt,borderLeft:Jt,borderRight:Vt,borderTop:qt,fadeOut:te,linearGradient:Gt,radialGradient:ee,grayscale:Kt,glitch:Zt};class ne extends s{effects=[];constructor(t,e,r){const n=ne.createShader(e,r);super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...n.uniforms],shaderSources:{vertex:n.vertex,fragment:n.fragment}}),this.effects=n.effects}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){t.effects?.forEach(((t,e)=>{const r=this.effects[e],n=re[r.name],o=t.props??{},i=r.uniformInfo;Object.keys(o).forEach((t=>{const e=n.uniforms[t],r=i[t];let s=e.validator?e.validator(o[t],o):o[t];Array.isArray(s)&&(s=new Float32Array(s)),this.setUniform(r.name,s)}))}))}static createShader(t,e){const r={},n={};let o="";const i=[],s=[],a=t.effects.map((t=>{const n=e[t.type],a=n.getEffectKey(t.props||{});r[a]=r[a]?++r[a]:1;const l=r[a];1===l&&s.push({key:a,type:t.type,props:t.props});const c=new n({ref:`${a}${1===l?"":l}`,target:a,props:t.props});return o+=c.declaredUniforms,i.push(...Object.values(c.uniformInfo)),c}));let l="";s?.forEach((t=>{const r=e[t.type],o=r.resolveDefaults(t.props??{}),i=[];for(const e in r.methods){let t=e;const o=r.methods[e];n[e]&&n[e]!==o&&(t=ne.resolveMethodDuplicate(e,o,n)),n[t]=o.replace("function",t),i.push({m:e,cm:t})}let s=r.onShaderMask instanceof Function?r.onShaderMask(o):r.onShaderMask,a=r.onColorize instanceof Function?r.onColorize(o):r.onColorize,c=r.onEffectMask instanceof Function?r.onEffectMask(o):r.onEffectMask;i.forEach((t=>{const{m:e,cm:r}=t,n=new RegExp(`\\$${e}`,"g");s&&(s=s.replace(n,r)),a&&(a=a.replace(n,r)),c&&(c=c.replace(n,r))}));const h=r.getMethodParameters(r.uniforms,o),d=h.length>0?`, ${h}`:"";s&&(l+=`\n        float fx_${t.key}_onShaderMask(float shaderMask ${d}) {\n          ${s}\n        }\n        `),a&&(l+=`\n          vec4 fx_${t.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${d}) {\n            ${a}\n          }\n        `),c&&(l+=`\n          vec4 fx_${t.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${d}) {\n            ${c}\n          }\n        `)}));let c="";for(const u in n)c+=n[u];let h="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",d="\n\n    ";for(let u=0;u<a.length;u++){const t=a[u],e=t.passParameters.length>0?`, ${t.passParameters}`:"",r=re[t.name];r.onShaderMask&&(d+=`\n        shaderMask = fx_${t.target}_onShaderMask(shaderMask ${e});\n        `),r.onColorize&&(d+=`\n        maskColor = fx_${t.target}_onColorize(shaderMask, maskColor, shaderColor${e});\n        `),r.onEffectMask&&(h=`fx_${t.target}_onEffectMask(shaderMask, maskColor, shaderColor${e})`);const n=a[u+1];(void 0===n||re[n.name].onEffectMask)&&(d+=`\n          shaderColor = ${h};\n        `)}return{effects:a,uniforms:i,fragment:ne.fragment(o,c,l,d),vertex:ne.vertex()}}static resolveMethodDuplicate(t,e,r,n=0){const o=t+(n>0?n:"");return r[o]&&r[o]!==e?this.resolveMethodDuplicate(t,e,r,++n):o}static resolveDefaults(t,e){return{effects:(t.effects??[]).map((t=>({type:t.type,props:e[t.type].resolveDefaults(t.props||{})}))),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(t,e){let r="";return t.effects?.forEach((t=>{const n=e[t.type].getEffectKey(t.props||{});r+=`,${n}`})),`DynamicShader${r}`}static z$__type__Props;static vertex=()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ";static fragment=(t,e,r,n)=>`\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${t}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${e}\n\n    ${r}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${n}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `}class oe extends s{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static z$__type__Props;static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}static shaderSources={vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "}}const ie=new Float32Array([1,0,0,0,1,0,0,0,1]);class se extends s{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){const e=se.resolveDefaults(t);for(const r in e)if("transform"===r)this.setUniform("u_transform",!1,e[r]);else if("scrollY"===r)this.setUniform("u_scrollY",e[r]);else if("color"===r){const t=a(e.color);this.setUniform("u_color",t)}else"size"===r?this.setUniform("u_size",e[r]):"distanceRange"===r?this.setUniform("u_distanceRange",e[r]):"debug"===r&&this.setUniform("u_debug",e[r]?1:0)}static resolveDefaults(t={}){return{transform:t.transform??ie,scrollY:t.scrollY??0,color:t.color??4294967295,size:t.size??16,distanceRange:t.distanceRange??1,debug:t.debug??!1}}static shaderSources={vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "}}class ae{shCache=new Map;shConstructors={};attachedShader=null;effectConstructors={};renderer;constructor(){this.registerShaderType("DefaultShader",Xt),this.registerShaderType("DefaultShaderBatched",Wt),this.registerShaderType("RoundedRectangle",oe),this.registerShaderType("DynamicShader",ne),this.registerShaderType("SdfShader",se),this.registerEffectType("border",Ut),this.registerEffectType("borderBottom",Qt),this.registerEffectType("borderLeft",Jt),this.registerEffectType("borderRight",Vt),this.registerEffectType("borderTop",qt),this.registerEffectType("fadeOut",te),this.registerEffectType("linearGradient",Gt),this.registerEffectType("radialGradient",ee),this.registerEffectType("grayscale",Kt),this.registerEffectType("glitch",Zt),this.registerEffectType("radius",Ht)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const r=this.shConstructors[t];if(!r)throw new Error(`Shader type "${t}" is not registered`);if("DynamicShader"===t)return this.loadDynamicShader(e);const n=r.resolveDefaults(e),o=r.makeCacheKey(n)||r.name;if(o&&this.shCache.has(o))return{shader:this.shCache.get(o),props:n};const i=new r(this.renderer,e);return o&&this.shCache.set(o,i),{shader:i,props:n}}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=ne.resolveDefaults(t,this.effectConstructors),r=ne.makeCacheKey(e,this.effectConstructors);if(r&&this.shCache.has(r))return{shader:this.shCache.get(r),props:e};const n=new ne(this.renderer,t,this.effectConstructors);return r&&this.shCache.set(r,n),{shader:n,props:e}}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}class le{activeAnimations=new Set;registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach((e=>{e.update(t)}))}}class ce extends l{props;constructor(t,e){super(t),this.props=ce.resolveDefaults(e)}async getTextureData(){const{src:t,premultiplyAlpha:e}=this.props;if(!t)return{data:null};if(t instanceof ImageData)return{data:t,premultiplyAlpha:e};const r=await fetch(t),n=await r.blob();return{data:await createImageBitmap(n,{premultiplyAlpha:e?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}static makeCacheKey(t){const e=ce.resolveDefaults(t);return!(e.src instanceof ImageData)&&`ImageTexture,${e.src},${e.premultiplyAlpha}`}static resolveDefaults(t){return{src:t.src??"",premultiplyAlpha:t.premultiplyAlpha??!0}}static z$__type__Props}class he extends l{props;constructor(t,e){super(t),this.props=he.resolveDefaults(e)}async getTextureData(){const{width:t,height:e}=this.props,r=t*e*4,n=new Uint8ClampedArray(r);for(let o=0;o<r;o+=4){const t=Math.floor(256*Math.random());n[o]=t,n[o+1]=t,n[o+2]=t,n[o+3]=255}return{data:new ImageData(n,t,e)}}static makeCacheKey(t){const e=he.resolveDefaults(t);return`NoiseTexture,${e.width},${e.height},${e.cacheId}`}static resolveDefaults(t){return{width:t.width??128,height:t.height??128,cacheId:t.cacheId??0}}static z$__type__Props}class de{usedMemory=0;txConstructors={};textureKeyCache=new Map;textureIdCache=new Map;ctxTextureCache=new WeakMap;textureRefCountMap=new WeakMap;renderer;constructor(){this.registerTextureType("ImageTexture",ce),this.registerTextureType("ColorTexture",c),this.registerTextureType("NoiseTexture",he),this.registerTextureType("SubTexture",h)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e,r=null){const n=this.txConstructors[t];if(!n)throw new Error(`Texture type "${t}" is not registered`);let o;if(void 0!==r?.id&&this.textureIdCache.has(r.id)&&(o=this.textureIdCache.get(r.id)),!o){const t=r?.id,i=r?.cacheKey??n.makeCacheKey(e);o=i&&this.textureKeyCache.has(i)?this.textureKeyCache.get(i):new n(this,e),t&&this.addTextureIdToCache(t,i,o)}return r?.preload&&this.getCtxTexture(o).load(),o}addTextureIdToCache(t,e,r){const{textureIdCache:n,textureRefCountMap:o}=this;n.set(t,r),o.has(r)?o.get(r).count++:(o.set(r,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,r))}removeTextureIdFromCache(t){const{textureIdCache:e,textureRefCountMap:n}=this,o=e.get(t);if(o&&(e.delete(t),n.has(o))){const t=n.get(o);r(t),t.count--,0===t.count&&(n.delete(o),t.cacheKey&&this.textureKeyCache.delete(t.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);const e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}class ue{textRenderers;constructor(t){this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const r=this.textRenderers[e];r&&r.isFontFaceSupported(t)&&r.addFontFace(t)}}static resolveFontFace(t,e){return t.reduce(((t,r)=>{if(t)return t;const n=r[e.fontFamily];if(!n)return;const o=new Set(n);for(const i of o)i.descriptors.stretch===e.fontStretch&&i.descriptors.style===e.fontStyle&&i.descriptors.weight===e.fontWeight||o.delete(i);return o.values().next().value}),void 0)||[][0]}}const fe={x:(t,e)=>{t.props.x=e},y:(t,e)=>{t.props.y=e},width:(t,e)=>{t.props.width=e},height:(t,e)=>{t.props.height=e},color:(t,e)=>{t.props.color=e},zIndex:(t,e)=>{t.props.zIndex=e},fontFamily:(t,e)=>{t.props.fontFamily=e},fontWeight:(t,e)=>{t.props.fontWeight=e},fontStyle:(t,e)=>{t.props.fontStyle=e},fontStretch:(t,e)=>{t.props.fontStretch=e},fontSize:(t,e)=>{t.props.fontSize=e},scaleX:(t,e)=>{t.props.scaleX=e},scaleY:(t,e)=>{t.props.scaleY=e},text:(t,e)=>{t.props.text=e},textAlign:(t,e)=>{t.props.textAlign=e},contain:(t,e)=>{t.props.contain=e},offsetY:(t,e)=>{t.props.offsetY=e},scrollable:(t,e)=>{t.props.scrollable=e},scrollY:(t,e)=>{t.props.scrollY=e},letterSpacing:(t,e)=>{t.props.letterSpacing=e},debug:(t,e)=>{t.props.debug=e}};class pe{stage;set;constructor(t){this.stage=t,this.set=Object.freeze({...fe,...this.getPropertySetters()})}setStatus(t,e,r){t.status!==e&&(t.status=e,t.emitter.emit(e,r))}}class ge{iterator;peekBuffer=[];_lastIndex;constructor(t,e=0){this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*me(t,e=0){let r=e;for(;r<t.length;){const e=t.codePointAt(r);if(void 0===e)throw new Error("Invalid Unicode code point");yield e,r+=e<=65535?1:2}}function xe(t,e,n,o,i,s,a,l,c,h,d,u,f,p,g,m){r(p,"Font face must be loaded"),r(p.loaded,"Font face must be loaded"),r(p.data,"Font face must be loaded"),r(p.shaper,"Font face must be loaded");const x=p.data.info.size,y=l/x,v=s/y,_=c/y,w=u[t],b=w?.codepointIndex||0;let T=w?.maxX||0,S=w?.maxY||0,C=e,R=n,F=0;const I={codepointIndex:-1,bufferOffset:-1,xStart:-1},E=p.shaper,z={letterSpacing:_};let N,k=E.shapeText(z,new ge(me(o,b),b)),M=-1;const L=[],A=a/y,P=function(t,e,r){const n=r.shapeText(e,new ge(me(t,0),0));let o=0;for(const i of n)i.mapped&&(o+=i.xAdvance);return o}("...",z,E);let B=!0;for(;B;){const e="both"!==d||m||R+x+x<=A,r=e?v:v-P;let n=0;for(;(N=k.next())&&!N.done;){const i=N.value;if(t===u.length)u.push({codepointIndex:i.cluster,maxY:S,maxX:T});else if(t>u.length)throw new Error("Unexpected lineCache length");if(32===i.codepoint||10===i.codepoint?-1!==I.codepointIndex&&(I.codepointIndex=-1,n=C):-1===I.codepointIndex&&(I.codepointIndex=i.cluster,I.bufferOffset=F,I.xStart=n),i.mapped){const t=C+i.xOffset+i.width;if("none"!==d&&t>=r&&-1!==I.codepointIndex&&I.codepointIndex<i.cluster&&I.xStart>0){if(e){k=E.shapeText(z,new ge(me(o,I.codepointIndex),I.codepointIndex)),F=I.bufferOffset;break}k=E.shapeText(z,new ge(me("...",0),0)),C=I.xStart,F=I.bufferOffset}else{const t=C+i.xOffset,e=R+i.yOffset,r=!f||R+x>=f.y1/y,n=!f||R<=f.y2/y;if(r&&n){-1===M&&(M=F);const r=p.getAtlasEntry(i.glyphId),n=r.x/p.data.common.scaleW,o=r.y/p.data.common.scaleH,s=r.width/p.data.common.scaleW,a=r.height/p.data.common.scaleH;h[F++]=t,h[F++]=e,h[F++]=n,h[F++]=o,h[F++]=t+i.width,h[F++]=e,h[F++]=n+s,h[F++]=o,h[F++]=t,h[F++]=e+i.height,h[F++]=n,h[F++]=o+a,h[F++]=t+i.width,h[F++]=e+i.height,h[F++]=n+s,h[F++]=o+a}S=Math.max(S,e+i.height),C+=i.xAdvance,T=Math.max(T,C)}}else if(10===i.codepoint)break}-1!==M&&(L.push({bufferStart:M,bufferEnd:F}),M=-1),C=0,R+=x,t++,I.codepointIndex=-1,n=0,!g&&"both"===d&&f&&R>f.y2/y||N&&N.done?B=!1:"both"!==d||m||e||(B=!1)}if("center"===i){const t="none"===d?T:v;for(let e=0;e<L.length;e++){const r=L[e],n=(t-(h[r.bufferEnd-4]-h[r.bufferStart]))/2;for(let t=r.bufferStart;t<r.bufferEnd;t+=4)h[t]+=n}}else if("right"===i){const t="none"===d?T:v;for(let e=0;e<L.length;e++){const r=L[e],n=t-(r.bufferEnd===r.bufferStart?0:h[r.bufferEnd-4]-h[r.bufferStart]);for(let t=r.bufferStart;t<r.bufferEnd;t+=4)h[t]+=n}}return r(N),{bufferNumFloats:F,bufferNumQuads:F/16,layoutNumCharacters:N.done?o.length-b:N.value.cluster-b+1,fullyProcessed:!!N.done,maxX:T,maxY:S}}class ye extends pe{ssdfFontFamilies={};msdfFontFamilies={};sdfShader;constructor(t){super(t),this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader}getPropertySetters(){return{fontFamily:(t,e)=>{t.props.fontFamily=e,t.trFontFace=void 0,this.invalidateCache(t)},fontWeight:(t,e)=>{t.props.fontWeight=e,t.trFontFace=void 0,this.invalidateCache(t)},fontStyle:(t,e)=>{t.props.fontStyle=e,t.trFontFace=void 0,this.invalidateCache(t)},fontStretch:(t,e)=>{t.props.fontStretch=e,t.trFontFace=void 0,this.invalidateCache(t)},fontSize:(t,e)=>{t.props.fontSize=e,this.invalidateCache(t)},text:(t,e)=>{t.props.text=e,this.invalidateCache(t)},textAlign:(t,e)=>{t.props.textAlign=e,this.invalidateCache(t)},color:(t,e)=>{t.props.color=e},x:(t,e)=>{t.props.x=e},y:(t,e)=>{t.props.y=e},contain:(t,e)=>{t.props.contain=e,this.invalidateCache(t)},width:(t,e)=>{t.props.width=e,this.invalidateCache(t)},height:(t,e)=>{t.props.height=e,this.invalidateCache(t)},offsetY:(t,e)=>{t.props.offsetY=e,this.invalidateCache(t)},scrollable:(t,e)=>{t.props.scrollable=e,this.invalidateCache(t)},scrollY:(t,e)=>{t.props.scrollY=e},letterSpacing:(t,e)=>{t.props.letterSpacing=e,this.invalidateCache(t)},debug:(t,e)=>{t.props.debug=e}}}canRenderFont(t){const{fontFamily:e}=t;return e in this.ssdfFontFamilies||e in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===e}isFontFaceSupported(t){return t instanceof u}addFontFace(t){r(t instanceof u);const e=t.fontFamily,n="ssdf"===t.type?this.ssdfFontFamilies:"msdf"===t.type?this.msdfFontFamilies:void 0;if(!n)return void console.warn(`Invalid font face type: ${t.type}`);let o=n[e];o||(o=new Set,n[e]=o),o.add(t)}createState(t){return{props:t,status:"initialState",emitter:new n,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(t){performance.now();let{trFontFace:e}=t;const{textH:n,lineCache:o,debugData:i,forceFullLayoutCalc:s}=t;if(i.updateCount++,"initialState"===t.status&&this.setStatus(t,"loading"),!e&&(e=this.resolveFontFace(t.props),t.trFontFace=e,!e)){const e=`SdfTextRenderer: Could not resolve font face for family: '${t.props.fontFamily}'`;return console.error(e),void this.setStatus(t,"failed",new Error(e))}if(!e.loaded)return void e.on("loaded",(function r(){t.emitter.emit("fontLoaded",{}),e?.off("fontLoaded",r)}));r(e.data,"Font face data should be loaded");const{text:a,fontSize:l,x:c,y:h,contain:u,width:p,height:g,scrollable:m}=t.props,x="both"===u&&m?t.props.scrollY:0;let{renderWindow:y}=t;const v=e.data.info.size,_=l/v;t.distanceRange=_*e.data.distanceField.distanceRange;const w=24*a.length;let b=t.vertexBuffer;(!b||b.length<w)&&(b=new Float32Array(2*w));const T={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},S=f(T,{x1:c,y1:h,x2:"none"!==u?c+p:1/0,y2:"both"===u?h+g:1/0});if(!s&&y){if(c+y.x1<=S.x1&&c+y.x2>=S.x2&&h-x+y.y1<=S.y1&&h-x+y.y2>=S.y2)return;t.renderWindow=y=void 0}const{offsetY:C,textAlign:R}=t.props;if(!y){const t=S.y2-S.y1;y=function(t,e,r,n,o,i){const s=n*o,a=i.x1-t,l=i.y1-e;return d(i)?{x1:a,y1:l+r-s,x2:a+(i.x2-i.x1),y2:l+r+(i.y2-i.y1)+s}:{x1:0,y1:0,x2:0,y2:0}}(c,h,x,v,Math.ceil(t/v),S)}const F=function(t,e,r,n,o,i,s){let a=0;o&&(a=Math.min(Math.max(Math.floor(o.y1/t),0),i.length));const l=e/r+a*n;if(!(s&&l>=s/r))return{x:0,y:l,lineIndex:a}}(l,C,_,v,y,o,n);if(!F)return void this.setStatus(t,"loaded");const{letterSpacing:I}=t.props,E=xe(F.lineIndex,F.x,F.y,a,R,p,g,l,I,b,u,o,y,e,s,m);t.bufferUploaded=!1,t.bufferNumFloats=E.bufferNumFloats,t.bufferNumQuads=E.bufferNumQuads,t.vertexBuffer=b,t.renderWindow=y,i.lastLayoutNumCharacters=E.layoutNumCharacters,i.bufferSize=b.byteLength,E.fullyProcessed&&(t.textW=E.maxX*_,t.textH=E.maxY*_),this.setStatus(t,"loaded")}renderQuads(t,e,n,o){if(!t.vertexBuffer)return;performance.now();const{renderer:i}=this.stage;this.stage.options;const{fontSize:s,color:a,contain:l,scrollable:c,zIndex:h,debug:d}=t.props,u="both"===l&&c?t.props.scrollY:0,{textW:f=0,textH:x=0,distanceRange:y,vertexBuffer:v,bufferNumFloats:_,bufferUploaded:w,renderWindow:b,debugData:T,trFontFace:S}=t;let{webGlBuffers:C}=t;if(!C){const e=i.gl,n=4*Float32Array.BYTES_PER_ELEMENT,o=e.createBuffer();r(o),t.webGlBuffers=new p([{buffer:o,attributes:{a_position:{name:"a_position",size:2,type:e.FLOAT,normalized:!1,stride:n,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:e.FLOAT,normalized:!1,stride:n,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),t.bufferUploaded=!1,r(t.webGlBuffers),C=t.webGlBuffers}if(!w){const e=i.gl,r=C?.getBuffer("a_textureCoordinate")??null;e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,v,e.STATIC_DRAW),t.bufferUploaded=!0}r(S);const R=new g(i.gl,i.options,C,this.sdfShader,{transform:e.data,color:m(a,o),size:s/(S.data?.info.size||0),scrollY:u,distanceRange:y,debug:d.sdfShaderDebug},o,n,{height:x,width:f},0,h),F=t.trFontFace?.texture;r(F);const I=this.stage.txManager.getCtxTexture(F);R.addTexture(I),R.length=t.bufferNumFloats,R.numQuads=t.bufferNumQuads,i.addRenderable(R)}resolveFontFace(t){return ue.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],t)}invalidateCache(t){t.renderWindow=void 0,t.textH=void 0,t.textW=void 0,t.lineCache=[],this.setStatus(t,"loading")}}class ve{_canvas;_context;_settings;renderInfo;constructor(t,e){this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFace],e=[];for(let r=0,n=t.length;r<n;r++)"serif"===t[r]||"sans-serif"===t[r]?e.push(t[r]):e.push(`"${t[r]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${e.join(",")}`}_load(){if(document.fonts){const e=this._getFontSetting();try{if(!document.fonts.check(e,this._settings.text))return document.fonts.load(e,this._settings.text).catch((t=>{console.warn("[Lightning] Font load error",t,e)})).then((()=>{document.fonts.check(e,this._settings.text)||console.warn("[Lightning] Font not found",e)}))}catch(t){console.warn("[Lightning] Can't check font loading for "+e)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),r=this._settings.paddingLeft*e,n=this._settings.paddingRight*e,o=this._settings.fontSize*e;let i=null===this._settings.offsetY?null:this._settings.offsetY*e,s=(this._settings.lineHeight||o)*e;const a=this._settings.w*e,l=this._settings.h*e;let c=this._settings.wordWrapWidth*e;const h=this._settings.cutSx*e,d=this._settings.cutEx*e,u=this._settings.cutSy*e,f=this._settings.cutEy*e,p=(this._settings.letterSpacing||0)*e,g=this._settings.textIndent*e;this.setFontProperties();let m,x=a||2048/this.getPrecision(),y=x-r;if(y<10&&(x+=10-y,y=10),c||(c=y),this._settings.textOverflow&&!this._settings.wordWrap){let t;switch(this._settings.textOverflow){case"clip":t="";break;case"ellipsis":t=this._settings.maxLinesSuffix;break;default:t=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,c-g,t)}if(this._settings.wordWrap)m=this.wrapText(this._settings.text,c,p,g);else{m={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const t=m.l.length;for(let e=0;e<t-1;e++)m.n.push(e)}let v=m.l;if(this._settings.maxLines&&v.length>this._settings.maxLines){const e=v.slice(0,this._settings.maxLines);let r,n=null;if(this._settings.maxLinesSuffix){const t=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,r=this.wrapText(e[e.length-1],c-t,p,g);e[e.length-1]=`${r.l[0]}${this._settings.maxLinesSuffix}`,n=[r.l.length>1?r.l[1]:""]}else n=[""];const o=v.length;let i=0;const s=m.n.length;for(r=this._settings.maxLines;r<o;r++)n[i]+=`${n[i]?" ":""}${v[r]}`,r+1<s&&m.n[r+1]&&i++;t.remainingText=n.join("\n"),t.moreTextLines=!0,v=e}else t.moreTextLines=!1,t.remainingText="";let _=0;const w=[];for(let T=0;T<v.length;T++){const t=this.measureText(v[T],p)+(0===T?g:0);w.push(t),_=Math.max(_,t)}let b;if(t.lineWidths=w,a||(x=_+r+n,y=_),s=s||o,l)b=l;else{const t="bottom"!=this._settings.textBaseline?.5*o:0;b=s*(v.length-1)+t+Math.max(s,o)+(i||0)}return null===i&&(i=o),t.w=x,t.h=b,t.lines=v,t.precision=e,x||(x=1),b||(b=1),(h||d)&&(x=Math.min(x,d-h)),(u||f)&&(b=Math.min(b,f-u)),t.width=x,t.innerWidth=y,t.height=b,t.fontSize=o,t.cutSx=h,t.cutSy=u,t.cutEx=d,t.cutEy=f,t.lineHeight=s,t.lineWidths=w,t.offsetY=i,t.paddingLeft=r,t.paddingRight=n,t.letterSpacing=p,t.textIndent=g,t}draw(t,e){const r=this.getPrecision(),n=e?.lines||t.lines,o=e?.lineWidths||t.lineWidths,i=e?e.lines.length*t.lineHeight:t.height;let s,a;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(i),2048),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);const l=[];for(let h=0,d=n.length;h<d;h++)s=0===h?t.textIndent:0,a=h*t.lineHeight+t.offsetY,"middle"==this._settings.verticalAlign?a+=(t.lineHeight-t.fontSize)/2:"bottom"==this._settings.verticalAlign&&(a+=t.lineHeight-t.fontSize),"right"===this._settings.textAlign?s+=t.innerWidth-o[h]:"center"===this._settings.textAlign&&(s+=(t.innerWidth-o[h])/2),s+=t.paddingLeft,l.push({text:n[h],x:s,y:a,w:o[h]});if(this._settings.highlight){const e=this._settings.highlightColor,n=this._settings.highlightHeight*r||1.5*t.fontSize,o=this._settings.highlightOffset*r,i=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*r:t.paddingLeft,s=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*r:t.paddingRight;this._context.fillStyle=x(e);for(let r=0;r<l.length;r++){const e=l[r];this._context.fillRect(e.x-i,e.y-t.offsetY+o,e.w+s+i,n)}}let c=null;this._settings.shadow&&(c=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=x(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*r,this._context.shadowOffsetY=this._settings.shadowOffsetY*r,this._context.shadowBlur=this._settings.shadowBlur*r),this._context.fillStyle=x(this._settings.textColor);for(let h=0,d=l.length;h<d;h++){const e=l[h];if(0===t.letterSpacing)this._context.fillText(e.text,e.x,e.y);else{const r=e.text.split("");let n=e.x;for(let o=0,i=r.length;o<i;o++)this._context.fillText(r[o],n,e.y),n+=this.measureText(r[o],t.letterSpacing)}}c&&(this._context.shadowColor=c[0],this._context.shadowOffsetX=c[1],this._context.shadowOffsetY=c[2],this._context.shadowBlur=c[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}wrapWord(t,e,r){const n=this._context.measureText(r).width,o=t.length,i=this._context.measureText(t).width;if(i<=e)return t;let s=Math.floor(e*o/i),a=this._context.measureText(t.substring(0,s)).width+n;if(a>e)for(;s>0&&(a=this._context.measureText(t.substring(0,s)).width+n,a>e);)s-=1;else for(;s<o;){if(a=this._context.measureText(t.substring(0,s)).width+n,!(a<e)){s-=1;break}s+=1}return t.substring(0,s)+(e>=n?r:"")}wrapText(t,e,r,n=0){const o=t.split(/\r?\n/g);let i=[];const s=[];for(let a=0;a<o.length;a++){const t=[];let l="",c=e-n;const h=o[a].split(" ");for(let o=0;o<h.length;o++){const i=this.measureText(h[o],r),s=i+this.measureText(" ",r);0===o||s>c?(o>0&&(t.push(l),l=""),l+=h[o],c=e-i-(0===o?n:0)):(c-=s,l+=` ${h[o]}`)}t.push(l),l="",i=i.concat(t),a<o.length-1&&s.push(i.length)}return{l:i,n:s}}measureText(t,e=0){return e?t.split("").reduce(((t,r)=>t+this._context.measureText(r).width+e),0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const _e="undefined"==typeof self?globalThis:self,we=_e.document?.fonts||_e.fonts;class be extends pe{canvas;context;constructor(t){super(t),"undefined"!=typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let e=this.canvas.getContext("2d");e||(this.canvas=document.createElement("canvas"),e=this.canvas.getContext("2d")),r(e),this.context=e}getPropertySetters(){return{fontFamily:(t,e)=>{t.props.fontFamily=e,t.fontInfo=void 0,this.markForReload(t)},fontWeight:(t,e)=>{t.props.fontWeight=e,t.fontInfo=void 0,this.markForReload(t)},fontStyle:(t,e)=>{t.props.fontStyle=e,t.fontInfo=void 0,this.markForReload(t)},fontStretch:(t,e)=>{t.props.fontStretch=e,t.fontInfo=void 0,this.markForReload(t)},fontSize:(t,e)=>{t.props.fontSize=e,t.fontInfo=void 0,this.markForReload(t)},text:(t,e)=>{t.props.text=e,this.markForReload(t)},textAlign:(t,e)=>{t.props.textAlign=e,this.markForReload(t)},color:(t,e)=>{t.props.color=e,this.markForReload(t)},x:(t,e)=>{t.props.x=e},y:(t,e)=>{t.props.y=e},contain:(t,e)=>{t.props.contain=e,this.markForReload(t)},width:(t,e)=>{t.props.width=e,this.markForReload(t)},height:(t,e)=>{t.props.height=e,this.markForReload(t)},offsetY:(t,e)=>{t.props.offsetY=e,this.markForReload(t)},scrollY:(t,e)=>{t.props.scrollY=e},letterSpacing:(t,e)=>{t.props.letterSpacing=e,this.markForReload(t)}}}canRenderFont(t){return!0}isFontFaceSupported(t){return t instanceof y}addFontFace(t){r(t instanceof y),we.add(t.fontFace)}createState(t){return{props:t,status:"initialState",emitter:new n,canvasPages:void 0,lightning2TextRenderer:new ve(this.canvas,this.context),renderWindow:void 0,renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(t){if("initialState"===t.status&&this.setStatus(t,"loading"),!t.fontInfo){const e=function(t){const{fontFamily:e,fontStyle:r,fontWeight:n,fontStretch:o,fontSize:i}=t;return[r,n,o,`${i}px`,e].join(" ")}(t.props);if(t.fontInfo={cssString:e,loaded:!1},!t.fontInfo.loaded)return void we.load(e).then(this.onFontLoaded.bind(this,t,e)).catch(this.onFontLoadError.bind(this,t,e))}if(!t.fontInfo.loaded)return;if(!t.renderInfo){t.lightning2TextRenderer.settings={text:t.props.text,textAlign:t.props.textAlign,fontFace:t.props.fontFamily,fontSize:t.props.fontSize,fontStyle:[t.props.fontStretch,t.props.fontStyle,t.props.fontWeight].join(" "),textColor:a(t.props.color),offsetY:t.props.fontSize+t.props.offsetY,wordWrap:"none"!==t.props.contain,wordWrapWidth:"none"===t.props.contain?void 0:t.props.width,letterSpacing:t.props.letterSpacing};const e=performance.now();t.renderInfo=t.lightning2TextRenderer.calculateRenderInfo(),console.log("Render info calculated in",performance.now()-e,"ms"),t.textH=t.renderInfo.lineHeight*t.renderInfo.lines.length,t.textW=t.renderInfo.width,t.renderWindow=void 0}const{x:e,y:r,width:n,height:o,scrollY:i,contain:s}=t.props;let{renderWindow:l,canvasPages:c}=t;const h={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},d=f(h,{x1:e,y1:r,x2:"none"!==s?e+n:1/0,y2:"both"===s?r+o:1/0}),u=d.y2-d.y1,p=Math.ceil(u/t.renderInfo.lineHeight);if(l&&c){const n=e+l.x1,o=r-i+l.y1,s=e+l.x2,a=r-i+l.y2;if(n<=d.x1&&s>=d.x2&&o<=d.y1&&a>=d.y2)return;a<d.y2?(l.y1+=p*t.renderInfo.lineHeight,l.y2+=p*t.renderInfo.lineHeight,c.push(c.shift()),c[2].lineNumStart=c[1].lineNumStart+p,c[2].lineNumEnd=c[2].lineNumStart+p,c[2].valid=!1):o>d.y1&&(l.y1-=p*t.renderInfo.lineHeight,l.y2-=p*t.renderInfo.lineHeight,c.unshift(c.pop()),c[0].lineNumStart=c[1].lineNumStart-p,c[0].lineNumEnd=c[0].lineNumStart+p,c[0].valid=!1)}else{const e=t.renderInfo.lineHeight*p,r=Math.ceil(i/e)*p,o=r-p,s=r+p;c=[{texture:c?.[0].texture,lineNumStart:o,lineNumEnd:o+p,valid:!1},{texture:c?.[1].texture,lineNumStart:r,lineNumEnd:r+p,valid:!1},{texture:c?.[2].texture,lineNumStart:s,lineNumEnd:s+p,valid:!1}],t.canvasPages=c;const a=Math.ceil(i/e)*e;l={x1:0,y1:a-e,x2:n,y2:a+2*e}}t.renderWindow=l;const g=performance.now();for(const a of c)a.valid||(a.lineNumStart<0?(a.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),a.valid=!0):(t.lightning2TextRenderer.draw(t.renderInfo,{lines:t.renderInfo.lines.slice(a.lineNumStart,a.lineNumEnd),lineWidths:t.renderInfo.lineWidths.slice(a.lineNumStart,a.lineNumEnd)}),0!==this.canvas.width&&0!==this.canvas.height&&(a.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),a.valid=!0));console.log("pageDrawTime",performance.now()-g,"ms"),this.setStatus(t,"loaded")}renderQuads(t,e,n,o){const{stage:i}=this,{canvasPages:s,textW:a=0,textH:l=0,renderWindow:c}=t;if(!s||!c)return;const{x:h,y:d,scrollY:u,contain:f,width:p,height:g}=t.props,m={x:h,y:d,width:"none"!==f?p:a,height:"both"===f?g:l};v({x:0,y:0,width:i.options.appWidth,height:i.options.appHeight},m),r(s,"canvasPages is not defined"),r(c,"renderWindow is not defined");const x=(c.y2-c.y1)/3,{zIndex:y,color:w}=t.props,b=o*_(w);s[0].valid&&this.stage.renderer.addRenderable({alpha:b,clippingRect:n,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:s[0].texture?.dimensions?.width||0,height:s[0].texture?.dimensions?.height||0,texture:s[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:y,tx:e.tx,ty:e.ty-u+c.y1,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td}),s[1].valid&&this.stage.renderer.addRenderable({alpha:b,clippingRect:n,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:s[1].texture?.dimensions?.width||0,height:s[1].texture?.dimensions?.height||0,texture:s[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:y,tx:e.tx,ty:e.ty-u+c.y1+x,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td}),s[2].valid&&this.stage.renderer.addRenderable({alpha:b,clippingRect:n,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:s[2].texture?.dimensions?.width||0,height:s[2].texture?.dimensions?.height||0,texture:s[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:y,tx:e.tx,ty:e.ty-u+c.y1+x+x,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td})}markForReload(t){t.renderInfo=void 0,this.setStatus(t,"loading")}onFontLoaded(t,e){e===t.fontInfo?.cssString&&t.fontInfo&&(t.fontInfo.loaded=!0,this.updateState(t))}onFontLoadError(t,e,r){e===t.fontInfo?.cssString&&t.fontInfo&&(t.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${t.fontInfo.cssString}'`,r),this.updateState(t))}}class Te{options;animationManager;txManager;fontManager;textRenderers;shManager;renderer;scene;deltaTime=0;lastFrameTime=0;currentFrameTime=0;constructor(t){this.options=t;const{canvas:e,clearColor:n,rootId:o,debug:i,appWidth:s,appHeight:a}=t;this.txManager=new de,this.shManager=new ae,this.animationManager=new le,i?.monitorTextureCache&&setInterval((()=>{r(this.txManager);const t=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",t.idCacheSize),console.log("Texture Key Cache Size: ",t.keyCacheSize)}),1e3),this.renderer=new w({stage:this,canvas:e,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:n??4278190080,bufferMemory:2e6,txManager:this.txManager,shManager:this.shManager}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new be(this),sdf:new ye(this)},this.fontManager=new ue(this.textRenderers);const l=new Bt(this,{id:o,x:0,y:0,width:s,height:a,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.scene=new Ot(l),(t=>{const e=()=>{t.drawFrame(),requestAnimationFrame(e)};requestAnimationFrame(e)})(this)}drawFrame(){const{renderer:t,scene:e,animationManager:r}=this;e?.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=performance?performance.now():Date.now(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,r.update(this.deltaTime),t?.reset(),e?.root?.hasUpdates&&e?.root?.update(this.deltaTime),this.addQuads(e.root),t?.sortRenderables(),t?.render())}addQuads(t,e=null){r(this.renderer&&t.globalTransform);const n=t.globalTransform,o=0!==n.tb||0!==n.tc;let i=t.clipping&&!o?{x:n.tx,y:n.ty,width:t.width*n.ta,height:t.height*n.td}:null;e&&i?i=v(e,i):e&&(i=e),t.renderQuads(this.renderer,i),t.children.forEach((t=>{0!==t.worldAlpha&&this.addQuads(t,i)}))}resolveTextRenderer(t,e=null){let n=e,o=!1;if(n){const e=this.textRenderers[n];e?e.canRenderFont(t)||(console.warn(`Cannot use override text renderer '${n}' for font`,t),n=null,o=!0):(console.warn(`Text renderer override '${n}' not found.`),n=null,o=!0)}if(!n){for(const[e,r]of Object.entries(this.textRenderers))if("canvas"!==e&&r.canRenderFont(t)){n=e;break}n||(n="canvas")}o&&console.warn(`Falling back to text renderer ${String(n)}`);const i=this.textRenderers[n];return r(i,"resolvedTextRenderer undefined"),i}get root(){return this.scene?.root||null}}class Se extends Bt{textRenderer;trState;updateScheduled;_textRendererOverride=null;constructor(t,e){super(t,e),this.updateScheduled=!1,this._textRendererOverride=e.textRendererOverride;const{resolvedTextRenderer:r,textRendererState:n}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:e.width,height:e.height,textAlign:e.textAlign,color:e.color,zIndex:e.zIndex,contain:e.contain,scaleX:e.scaleX,scaleY:e.scaleY,scrollable:e.scrollable,scrollY:e.scrollY,offsetY:e.offsetY,letterSpacing:e.letterSpacing,debug:e.debug,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStretch:e.fontStretch,fontStyle:e.fontStyle,fontWeight:e.fontWeight,text:e.text},void 0);this.textRenderer=r,this.trState=n}onTextLoaded=()=>{const{contain:t}=this,e=this.trState.props.width,r=this.trState.props.height,n=this.trState.textW||0,o=this.trState.textH||0;"both"===t?(this.props.width=e,this.props.height=r):"width"===t?(this.props.width=e,this.props.height=o):"none"===t&&(this.props.width=n,this.props.height=o),this.updateLocalTransform(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})};onTextFailed=(t,e)=>{this.emit("failed",{type:"text",error:e})};get width(){return this.trState.props.width}set width(t){this.textRenderer.set.width(this.trState,t),this.updateText()}get height(){return this.trState.props.height}set height(t){this.textRenderer.set.height(this.trState,t),this.updateText()}get color(){return this.trState.props.color}set color(t){this.textRenderer.set.color(this.trState,t),this.updateText()}get text(){return this.trState.props.text}set text(t){this.textRenderer.set.text(this.trState,t),this.updateText()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(t){this._textRendererOverride=t;const{resolvedTextRenderer:e,textRendererState:r}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=e,this.trState=r}get fontSize(){return this.trState.props.fontSize}set fontSize(t){this.textRenderer.set.fontSize(this.trState,t),this.updateText()}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(t){this.textRenderer.set.fontFamily(this.trState,t),this.updateText()}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(t){this.textRenderer.set.fontStretch(this.trState,t),this.updateText()}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(t){this.textRenderer.set.fontStyle(this.trState,t),this.updateText()}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(t){this.textRenderer.set.fontWeight(this.trState,t),this.updateText()}get textAlign(){return this.trState.props.textAlign}set textAlign(t){this.textRenderer.set.textAlign(this.trState,t),this.updateText()}get contain(){return this.trState.props.contain}set contain(t){this.textRenderer.set.contain(this.trState,t),this.updateText()}get scrollable(){return this.trState.props.scrollable}set scrollable(t){this.textRenderer.set.scrollable(this.trState,t),this.updateText()}get scrollY(){return this.trState.props.scrollY}set scrollY(t){this.textRenderer.set.scrollY(this.trState,t),this.updateText()}get offsetY(){return this.trState.props.offsetY}set offsetY(t){this.textRenderer.set.offsetY(this.trState,t),this.updateText()}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(t){this.textRenderer.set.letterSpacing(this.trState,t),this.updateText()}get debug(){return this.trState.props.debug}set debug(t){this.textRenderer.set.debug(this.trState,t),this.updateText()}update(t){super.update(t),r(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty),"loading"===this.trState.status&&this.textRenderer.updateState(this.trState)}updateText(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>{this.updateScheduled=!1,this.textRenderer.updateState(this.trState)})))}renderQuads(t,e){r(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,e,this.worldAlpha)}resolveTextRendererAndState(t,e){const r=this.stage.resolveTextRenderer(t,this._textRendererOverride),n=r.createState(t);return e&&["loading","loaded","failed"].forEach((t=>{e.emitter.off(t)})),n.emitter.on("loading",(()=>{n.emitter.once("fontLoaded",(()=>{this.updateText()})),n.emitter.once("loaded",(()=>{n.emitter.off("fontLoaded")}))})),n.emitter.on("loaded",this.onTextLoaded),n.emitter.on("failed",this.onTextFailed),this.updateText(),{resolvedTextRenderer:r,textRendererState:n}}}class Ce extends Yt{constructor(t,e,r){super(t,e,r,new Se(r,{id:$t(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(t){this.coreNode.text=t}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(t){this.coreNode.textRendererOverride=t}get fontSize(){return this.coreNode.fontSize}set fontSize(t){this.coreNode.fontSize=t}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(t){this.coreNode.fontFamily=t}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(t){this.coreNode.fontWeight=t}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(t){this.coreNode.fontStretch=t}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(t){this.coreNode.fontStyle=t}get textAlign(){return this.coreNode.textAlign}set textAlign(t){this.coreNode.textAlign=t}get contain(){return this.coreNode.contain}set contain(t){this.coreNode.contain=t}get scrollable(){return this.coreNode.scrollable}set scrollable(t){this.coreNode.scrollable=t}get scrollY(){return this.coreNode.scrollY}set scrollY(t){this.coreNode.scrollY=t}get offsetY(){return this.coreNode.offsetY}set offsetY(t){this.coreNode.offsetY=t}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(t){this.coreNode.letterSpacing=t}get debug(){return this.coreNode.debug}set debug(t){this.coreNode.debug=t}}async function Re(t,r){let n;try{console.log("Loading core extension",t),n=await(o=()=>e.import(t),o())}catch(s){return console.error(`The core extension module at '${t}' could not be loaded.`),void console.error(s)}var o;if(!n.default)return void console.error(`The core extension module at '${t}' does not have a default export.`);const i=n.default;if(i.prototype instanceof b){const e=new i;try{await e.run(r)}catch(s){console.error(`The core extension at '${t}' threw an error.`),console.error(s)}}else console.error(`The core extension at '${t}' does not extend CoreExtension.`)}class Fe{root=null;stage=null;rendererMain=null;async init(t,e,n){this.stage=new Te({rootId:1,appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:n,debug:{monitorTextureCache:!1}}),this.rendererMain=t,r(this.stage.root);const o=new Yt(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=o,o.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,o)),this.onCreateNode(o),e.coreExtensionModule&&await Re(e.coreExtensionModule,this.stage)}createNode(t){r(this.rendererMain),r(this.stage);const e=new Yt(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(t){r(this.rendererMain),r(this.stage);const e=new Ce(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(t){t.destroy()}releaseTexture(t){const{stage:e}=this;r(e),e.txManager.removeTextureIdFromCache(t)}getRootNode(){return r(this.root),this.root}onCreateNode(t){throw new Error("Method not implemented.")}onBeforeDestroyNode(t){throw new Error("Method not implemented.")}}let Ie,Ee;const ze={appWidth:1920,appHeight:1080,deviceLogicalPixelRatio:.6666667,devicePhysicalPixelRatio:1,rootId:"app",threadXCoreWorkerUrl:void 0};function Ne(t={}){const e=new Fe,r={...ze,...t};return Ie=new kt({appWidth:r.appWidth,appHeight:r.appHeight,deviceLogicalPixelRatio:r.deviceLogicalPixelRatio,devicePhysicalPixelRatio:r.devicePhysicalPixelRatio,clearColor:r.clearColor,coreExtensionModule:r.coreExtensionModule},r.rootId,e),Ee=Ie.createShader.bind(Ie),Ie}class ke extends Array{_parent;constructor(t){super(),this._parent=t}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(t,e){if(e){const r=this.indexOf(e);this.splice(r,0,t)}else this.push(t);t.parent=this._parent,this._parent._isDirty=!0}remove(t){const e=this.indexOf(t);e>=0&&this.splice(e,1)}}const Me={debug:!1,driver:"main",animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}},Le="development"===e.meta.env?.MODE;function Ae(t,e,...r){Le&&(Me.debug||"object"==typeof e&&e.debug)&&console.log(t,e,...r)}function Pe(t){return"function"==typeof t}function Be(t){return Array.isArray(t)}class De extends Array{onChange;constructor(t,e=[]){return Be(e)?super(...e):"string"==typeof e?super(e):super(...Object.entries(e).filter((([t,e])=>e)).map((([t])=>t))),this.onChange=t,this}has(t){return this.indexOf(t)>=0}is(t){return this.indexOf(t)>=0}add(t){this.push(t),this.onChange()}toggle(t){this.has(t)?this.remove(t):this.add(t)}remove(t){const e=this.indexOf(t);e>=0&&(this.splice(e,1),this.onChange())}}const{animationSettings:$e}=Me;function Ye(t=""){return{set(e){"number"==typeof e&&(e={width:e,color:255}),this.effects={...this.effects||{},[`border${t}`]:e},this[`_border${t}`]=e},get(){return this[`_border${t}`]}}}const Oe=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],Xe=["clipping","contain","fontFamily","src","text","textAlign","texture"];class We extends Object{name;lng=null;selected=null;rendered;_undoStates;_renderProps;_effects;_parent=null;_shader;_style;_states;_animationSettings;_updateLayoutOn;_width;_height;_color;_borderRadius;_border;_borderLeft;_borderRight;_borderTop;_borderBottom;_animate;_autosized;_isDirty;_dom;children;constructor(t){super(),this.name=t,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new ke(this);for(const e of Oe)Object.defineProperty(this,e,{get(){return this[`_${e}`]||this.lng&&this.lng[e]},set(t){this[`_${e}`]=t,this._sendToLightningAnimatable(e,t)}});for(const e of Xe)Object.defineProperty(this,e,{get(){return this[`_${e}`]||this.lng&&this.lng[e]},set(t){this[`_${e}`]=t,this._sendToLightning(e,t)}});Object.defineProperties(this,{borderRadius:{set(t){this._borderRadius=t,this.effects={...this.effects||{},radius:{radius:t}}},get(){return this._borderRadius}},border:Ye(),borderLeft:Ye("Left"),borderRight:Ye("Right"),borderTop:Ye("Top"),borderBottom:Ye("Bottom")}),Object.defineProperties(this,{linearGradient:{set(t={}){this._linearGradient=t,this.effects={...this.effects||{},linearGradient:t}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(t){this._effects=t,this.shader=function(t){const e=[];for(const[r,n]of Object.entries(t))e.push({type:r,props:n});return Ee("DynamicShader",{effects:e})}(t)}get parent(){return this._parent}set parent(t){this._parent=t,this.rendered&&this.lng&&(this.lng.parent=t?.lng??null)}get shader(){return this._shader}set shader(t){Be(t)?this._shader=Ee(...t):this._shader=t,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(t,e){if(this.rendered&&this.lng){if(Be(e))return this.createAnimation({[t]:e[0]},e[1]).start();if(this._animate)return this.createAnimation({[t]:e}).start();this.lng[t]=e}else Be(e)&&(e=e[0]),this._renderProps[t]=e}_sendToLightning(t,e){this.rendered&&this.lng?this.lng[t]=e:this._renderProps[t]=e}createAnimation(t,e){return r(this.lng,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}setFocus(){this.rendered?Rt(this):this.autofocus=!0}isTextNode(){return"text"===this.name}_resizeOnTextLoad(){r(this.lng),this.lng.once("loaded",((t,e)=>{if("text"===e.type){const{dimensions:t}=e;this.width=t.width,this.height=t.height,r(this.parent),this.parent.updateLayout(this,t)}}))}getText(){return this.children.map((t=>t.text)).join("")}destroy(){this.lng&&Ie.destroyNode(this.lng)}set style(t){for(let e in t)"animate"===e&&(e="_animate"),this[e]||(this[e]=t[e]);this._style=t}get style(){return this._style}get hasChildren(){return this.children.length>0}set states(t){this._states=new De(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new De(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||$e}set animationSettings(t){this._animationSettings=t}get updateLayoutOn(){return this._updateLayoutOn}set updateLayoutOn(t){this._updateLayoutOn=t,queueMicrotask((()=>this.updateLayout()))}_applyZIndexToChildren(){const t=this.zIndex;r(t);const e=t>=1&&parseInt(""+t)===t?".":"";this.children.forEach(((r,n)=>{(!r.zIndex||r.zIndex<1)&&(r.zIndex=parseFloat(`${t}${e}${n+1}`))}))}updateLayout(t,e){this.hasChildren&&(Ae("Layout: ",this),Pe(this.onBeforeLayout)&&this.onBeforeLayout.call(this,t,e),"flex"===this.display&&function(t){const e=t.children.filter((t=>"TextNode"!==t.name)),n=t.flexDirection||"row",o="row"===n?"width":"height",i="row"===n?"height":"width",s="row"===n?"marginLeft":"marginTop",a="row"===n?"marginRight":"marginBottom",l="row"===n?"x":"y",c="row"===n?"y":"x",h=t[o]||0,d=t[i]||0,u=e.reduce(((t,e)=>t+(e[o]||0)),0),f=t.gap||0,p=e.length,g=t.justifyContent||"flexStart",m=t.alignItems,x=d&&m?t=>{"flexStart"===m?t[c]=0:"center"===m?t[c]=(d-(t[i]||0))/2:"flexEnd"===m&&(t[c]=d-(t[i]||0))}:t=>t;if("flexStart"===g){let t=0;e.forEach((e=>{e[l]=t+(e[s]||0),t+=(e[o]||0)+f+(e[s]||0)+(e[a]||0),x(e)}))}if("flexEnd"===g){let t=h;for(let n=p-1;n>=0;n--){const i=e[n];r(i),i[l]=t-(i[o]||0)-(i[a]||0),t-=(i[o]||0)+f+(i[s]||0)+(i[a]||0),x(i)}}if("center"===g){let t=(h-(u+f*(p-1)))/2;e.forEach((e=>{e[l]=t,t+=(e[o]||0)+f,x(e)}))}if("spaceBetween"===g){const t=(h-u)/(p-1);let r=0;e.forEach((e=>{e[l]=r,r+=(e[o]||0)+t,x(e)}))}if("spaceEvenly"===g){const t=(h-u)/(p+1);let r=t;e.forEach((e=>{e[l]=r,r+=(e[o]||0)+t,x(e)}))}}(this),Pe(this.onLayout)&&this.onLayout.call(this,t,e))}_stateChanged(){if(Ae("State Changed: ",this,this.states),this.forwardStates){const t=this.states.slice();this.children.forEach((e=>e.states=t))}const t=Me.stateMapperHook?.(this,this.states)||this.states;if(this._undoStates||this.style&&function(t,e){for(const r of e)if(r in t)return!0;return!1}(this.style,t)){this._undoStates=this._undoStates||{};let e={};for(const[r,o]of Object.entries(this._undoStates))t.includes(r)||(e={...e,...o});const n=t.reduce(((t,e)=>{const n=this.style[e];return n&&(t={...t,...n},this._undoStates&&!this._undoStates[e]&&(this._undoStates[e]={},Object.keys(n).forEach((t=>{r(this._undoStates),this._undoStates[e][t]=this[t]})))),t}),{});Object.assign(this,{...e,...n})}}render(){const t=this,e=this.parent;e?._isDirty&&(e.updateLayout(),e._applyZIndexToChildren(),e._isDirty=!1),t.updateLayout(),this.states.length&&this._stateChanged();let n=t._renderProps;e?.lng&&(n.parent=e.lng),t.isTextNode()?(n={...Me.fontSettings,...n,text:t.getText()},Ae("Rendering: ",this,n),t.lng=Ie.createTextNode(n),Pe(t.onLoad)&&t.lng.once("loaded",t.onLoad),t.width&&t.height||(t._autosized=!0,t._resizeOnTextLoad())):(n.src||n.texture||(r(e),isNaN(n.width)&&(n.width=(e.width||0)-n.x,t._width=n.width),isNaN(n.height)&&(n.height=(e.height||0)-n.y,t._height=n.height),n.color||(t._color=n.color=0)),Ae("Rendering: ",this,n),t.hasChildren&&t._applyZIndexToChildren(),t.lng=Ie.createNode(n),t.onFail&&t.lng.once("failed",t.onFail),t.onLoad&&t.lng.once("loaded",t.onLoad)),t.rendered=!0,t.autofocus&&t.setFocus(),delete this._renderProps}}function je(t){"TextNode"!==t.name&&(r(t instanceof We),t.render(),t.children.forEach((t=>je(t))))}const He=t=>{const e=Ne(t.options),n=e.init();let o;return X((()=>{n.then((()=>{r(o),o.lng=e.root,o.children.forEach(je),Pe(t.onFirstRender)&&t.onFirstRender(o)})).catch(console.error)})),(()=>{const e=er("canvas");return"function"==typeof o?lr(o,e):o=e,sr(e,"zIndex",.1),or(e,(()=>t.children)),e})()};function Ue({createElement:t,createTextNode:e,isTextNode:r,replaceText:n,insertNode:o,removeNode:i,setProperty:s,getParentNode:a,getFirstChild:l,getNextSibling:c}){function h(t,e,r,n){if(void 0===r||n||(n=[]),"function"!=typeof e)return d(t,e,n,r);O((n=>d(t,e(),n,r)),n)}function d(t,i,s,a,c){for(;"function"==typeof s;)s=s();if(i===s)return s;const h=typeof i,x=void 0!==a;if("string"===h||"number"===h)if("number"===h&&(i=i.toString()),x){let o=s[0];o&&r(o)?n(o,i):o=e(i),s=p(t,s,a,o)}else""!==s&&"string"==typeof s?n(l(t),s=i):(p(t,s,a,e(i)),s=i);else if(null==i||"boolean"===h)s=p(t,s,a);else{if("function"===h)return O((()=>{let e=i();for(;"function"==typeof e;)e=e();s=d(t,e,s,a)})),()=>s;if(Array.isArray(i)){const e=[];if(u(e,i,c))return O((()=>s=d(t,e,s,a,!0))),()=>s;if(0===e.length){const e=p(t,s,a);if(x)return s=e}else Array.isArray(s)?0===s.length?g(t,e,a):f(t,s,e):null==s||""===s?g(t,e):f(t,x&&s||[l(t)],e);s=e}else{if(Array.isArray(s)){if(x)return s=p(t,s,a,i);p(t,s,null,i)}else null!=s&&""!==s&&l(t)?m(t,i,l(t)):o(t,i);s=i}}return s}function u(t,r,n){let o=!1;for(let i=0,s=r.length;i<s;i++){let s,a=r[i];if(null==a||!0===a||!1===a);else if(Array.isArray(a))o=u(t,a)||o;else if("string"==(s=typeof a)||"number"===s)t.push(e(a));else if("function"===s)if(n){for(;"function"==typeof a;)a=a();o=u(t,Array.isArray(a)?a:[a])||o}else t.push(a),o=!0;else t.push(a)}return o}function f(t,e,r){let n=r.length,s=e.length,a=n,l=0,h=0,d=c(e[s-1]),u=null;for(;l<s||h<a;)if(e[l]!==r[h]){for(;e[s-1]===r[a-1];)s--,a--;if(s===l){const e=a<n?h?c(r[h-1]):r[a-h]:d;for(;h<a;)o(t,r[h++],e)}else if(a===h)for(;l<s;)u&&u.has(e[l])||i(t,e[l]),l++;else if(e[l]===r[a-1]&&r[h]===e[s-1]){const n=c(e[--s]);o(t,r[h++],c(e[l++])),o(t,r[--a],n),e[s]=r[a]}else{if(!u){u=new Map;let t=h;for(;t<a;)u.set(r[t],t++)}const n=u.get(e[l]);if(null!=n)if(h<n&&n<a){let i,c=l,d=1;for(;++c<s&&c<a&&null!=(i=u.get(e[c]))&&i===n+d;)d++;if(d>n-h){const i=e[l];for(;h<n;)o(t,r[h++],i)}else m(t,r[h++],e[l++])}else l++;else i(t,e[l++])}}else l++,h++}function p(t,r,n,s){if(void 0===n){let e;for(;e=l(t);)i(t,e);return s&&o(t,s),""}const c=s||e("");if(r.length){let e=!1;for(let s=r.length-1;s>=0;s--){const l=r[s];if(c!==l){const r=a(l)===t;e||s?r&&i(t,l):r?m(t,c,l):o(t,c,n)}else e=!0}}else o(t,c,n);return[c]}function g(t,e,r){for(let n=0,i=e.length;n<i;n++)o(t,e[n],r)}function m(t,e,r){o(t,e,r),i(t,r)}function x(t,e,r={},n){return e||(e={}),n||O((()=>r.children=d(t,e.children,r.children))),O((()=>e.ref&&e.ref(t))),O((()=>{for(const n in e){if("children"===n||"ref"===n)continue;const o=e[n];o!==r[n]&&(s(t,n,o,r[n]),r[n]=o)}})),r}return{render(t,e){let r;return D((n=>{r=n,h(e,t())})),r},insert:h,spread(t,e,r){"function"==typeof e?O((n=>x(t,e(),n,r))):x(t,e,void 0,r)},createElement:t,createTextNode:e,insertNode:o,setProp:(t,e,r,n)=>(s(t,e,r,n),r),mergeProps:wt,effect:O,memo:W,createComponent:mt,use:(t,e,r)=>H((()=>t(e,r)))}}const Ge={createElement(t){const e=new We(t);return Ie.root&&X((()=>e.render())),e},createTextNode:t=>({name:"TextNode",text:t,parent:null}),replaceText(t,e){Ae("Replace Text: ",t,e),t.text=e;const n=t.parent;r(n),n._autosized&&n._resizeOnTextLoad(),n.text=n.getText()},setProperty(t,e,r=!0){"animate"!==e?t[e]=r:t._animate=r},insertNode(t,e,r){Ae("INSERT: ",t,e,r),t&&(t.children.insert(e,r),"TextNode"===e.name&&t.isTextNode()&&(t._autosized&&t._resizeOnTextLoad(),t.text=t.getText()))},isTextNode:t=>t.isTextNode(),removeNode(t,e){Ae("REMOVE: ",t,e),t.children.remove(e),e instanceof We&&e.destroy()},getParentNode:t=>t.parent??void 0,getFirstChild:t=>t.children[0],getNextSibling(t){if(t.parent){const e=t.parent.children||[],r=e.indexOf(t)+1;if(r<e.length)return e[r]}}},Ke={...Ge,createElement(t){const e=document.createElement("div");"canvas"===t?(e.id="linspector",r(Ie.canvas.parentNode),Ie.canvas.parentNode.appendChild(e)):e.classList.add("lnode"),"text"===t&&e.classList.add("ltext");const n=Ge.createElement(t);if("canvas"!==t){const t=n.render;n.render=()=>{t.call(n),n.id&&(e.id=n.id),n.clipping&&(e.style.overflow="hidden"),e.style.width=n.width+"px",e.style.height=n.height+"px",e.style.top=n.y+"px",e.style.left=n.x+"px",e.style.zIndex=`${n.zIndex}`}}return n._dom=e,e.solid=n,n},setProperty(t,e,r=!0){"width"===e?t._dom.style.width=r+"px":"height"===e?t._dom.style.height=r+"px":"y"===e?t._dom.style.top=r+"px":"x"===e?t._dom.style.left=r+"px":"zIndex"===e&&(t._dom.style.zIndex=r),Ge.setProperty(t,e,r)},createTextNode(t){const e=document.createTextNode(t),r=Ge.createTextNode(t);return r._dom=e,r},replaceText(t,e){Ge.replaceText(t,e),t._dom.data=e},insertNode(t,e,r){t&&(r&&t._dom===r._dom.parentNode?t._dom.insertBefore(e._dom,r._dom):t._dom.appendChild(e._dom),Ge.insertNode(t,e,r))},removeNode(t,e){t._dom.removeChild(e._dom),Ge.removeNode(t,e)}},Ve="development"===e.meta.env?.MODE;Ve&&((t=>{const e=document.createElement("style");e.innerText=t,document.head.appendChild(e)})("\n    #linspector {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      zIndex: 5;\n      overflow: hidden;\n    }\n    div.lnode {\n      position: absolute;\n      display: inline-block;\n    }\n    .ltext {\n      visibility: hidden;\n    }\n  "),setTimeout((function(){!function(t){const e=t.getBoundingClientRect(),r=Ie.settings.deviceLogicalPixelRatio||1,n=document.getElementById("linspector");n.style.left=t.offsetLeft+"px",n.style.top=t.offsetTop+"px",n.style.width=Math.ceil(e.width/r)+"px",n.style.height=Math.ceil(e.height/r)+"px",n.style.transformOrigin="0 0 0",n.style.transform="scale("+r+","+r+")"}(Ie.canvas)}),1e3));const qe=function(t){const e=Ue(t);return e.mergeProps=wt,e}(Ve?Ke:Ge),Qe=qe.render,{effect:Je,memo:Ze,createComponent:tr,createElement:er,createTextNode:rr,insertNode:nr,insert:or,spread:ir,setProp:sr,mergeProps:ar,use:lr}=qe;function cr(t=""){return e=t,Number.isInteger(e)?t:"string"==typeof t?t.startsWith("#")?Number(t.replace("#","0x")+(7===t.length?"ff":"")):t.startsWith("0x")?Number(t):Number("0x"+(6===t.length?t+"ff":t)):0;var e}const hr="_$DX_DELEGATE";function dr(t){const e=`$$${t.type}`;let r=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==r&&Object.defineProperty(t,"target",{configurable:!0,value:r}),Object.defineProperty(t,"currentTarget",{configurable:!0,get:()=>r||document});r;){const n=r[e];if(n&&!r.disabled){const o=r[`${e}Data`];if(void 0!==o?n.call(r,o,t):n.call(r,t),t.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function ur(t,e){const r=function(t){try{return document.querySelector(t)}catch(e){return null}}(`#${t}`);r?r.scrollIntoView():e&&window.scrollTo(0,0)}function fr(){return function(t,e,r,n){let o=!1;const i=t=>"string"==typeof t?{value:t}:t,s=function([t,e],r,n){return[r?()=>r(t()):t,n?t=>e(n(t)):e]}($(i(t()),{equals:(t,e)=>t.value===e.value}),void 0,(t=>(!o&&e(t),t)));return r&&K(r(((e=t())=>{o=!0,s[1](i(e)),o=!1}))),{signal:s,utils:n}}((()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state})),(({value:t,replace:e,scroll:r,state:n})=>{e?window.history.replaceState(n,"",t):window.history.pushState(n,"",t),ur(window.location.hash.slice(1),r)}),(t=>{return e=window,r="popstate",n=()=>t(),e.addEventListener(r,n),()=>e.removeEventListener(r,n);var e,r,n}),{go:t=>window.history.go(t)})}const pr=/^(?:[a-z0-9]+:)?\/\//i,gr=/^\/+|(\/)\/+$/g;function mr(t,e=!1){const r=t.replace(gr,"$1");return r?e||/^[?#]/.test(r)?r:"/"+r:""}function xr(t,e,r){if(pr.test(e))return;const n=mr(t),o=r&&mr(r);let i="";return i=!o||e.startsWith("/")?n:0!==o.toLowerCase().indexOf(n.toLowerCase())?n+o:o,(i||"/")+mr(e,!i)}function yr(t,e){return mr(t).replace(/\/*(\*.*)?$/g,"")+mr(e)}function vr(t,e,r){const[n,o]=t.split("/*",2),i=n.split("/").filter(Boolean),s=i.length;return t=>{const n=t.split("/").filter(Boolean),a=n.length-s;if(a<0||a>0&&void 0===o&&!e)return null;const l={path:s?"":"/",params:{}},c=t=>void 0===r?void 0:r[t];for(let e=0;e<s;e++){const t=i[e],r=n[e],o=":"===t[0],s=o?t.slice(1):t;if(o&&_r(r,c(s)))l.params[s]=r;else if(o||!_r(r,t))return null;l.path+=`/${r}`}if(o){const t=a?n.slice(-a).join("/"):"";if(!_r(t,c(o)))return null;l.params[o]=t}return l}}function _r(t,e){const r=e=>0===e.localeCompare(t,void 0,{sensitivity:"base"});return void 0===e||("string"==typeof e?r(e):"function"==typeof e?e(t):Array.isArray(e)?e.some(r):e instanceof RegExp&&e.test(t))}function wr(t){const[e,r]=t.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce(((t,e)=>t+(e.startsWith(":")?2:3)),n.length-(void 0===r?0:1))}function br(t){const e=new Map,r=V();return new Proxy({},{get:(n,o)=>(e.has(o)||function(t,e){const r=N,n=L;N=t,L=null;try{return ot(e,!0)}catch(o){dt(o)}finally{N=r,L=n}}(r,(()=>e.set(o,W((()=>t()[o]))))),e.get(o)()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),ownKeys:()=>Reflect.ownKeys(t())})}function Tr(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let r=t.slice(0,e.index),n=t.slice(e.index+e[0].length);const o=[r,r+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)o.push(r+=e[1]),n=n.slice(e[0].length);return Tr(n).reduce(((t,e)=>[...t,...o.map((t=>t+e))]),[])}const Sr=q(),Cr=q(),Rr=()=>function(t,e){if(null==t)throw new Error(e);return t}(Q(Sr),"Make sure your app is wrapped in a <Router />");let Fr;const Ir=()=>Fr||Q(Cr)||Rr().base,Er=()=>Rr().navigatorFactory(),zr=()=>Ir().params;function Nr(t,e="",r){const{component:n,data:o,children:i}=t,s=!i||Array.isArray(i)&&!i.length,a={key:t,element:n?()=>mt(n,{}):()=>{const{element:e}=t;return void 0===e&&r?mt(r,{}):e},preload:t.component?n.preload:t.preload,data:o};return Mr(t.path).reduce(((r,n)=>{for(const o of Tr(n)){const n=yr(e,o),i=s?n:n.split("/*",1)[0];r.push({...a,originalPath:o,pattern:i,matcher:vr(i,!s,t.matchFilters)})}return r}),[])}function kr(t,e=0){return{routes:t,score:1e4*wr(t[t.length-1])-e,matcher(e){const r=[];for(let n=t.length-1;n>=0;n--){const o=t[n],i=o.matcher(e);if(!i)return null;r.unshift({...i,route:o})}return r}}}function Mr(t){return Array.isArray(t)?t:[t]}function Lr(t,e="",r,n=[],o=[]){const i=Mr(t);for(let s=0,a=i.length;s<a;s++){const t=i[s];if(t&&"object"==typeof t&&t.hasOwnProperty("path")){const i=Nr(t,e,r);for(const e of i){n.push(e);const i=Array.isArray(t.children)&&0===t.children.length;if(t.children&&!i)Lr(t.children,e.pattern,r,n,o);else{const t=kr([...n],o.length);o.push(t)}n.pop()}}}return n.length?o:o.sort(((t,e)=>e.score-t.score))}function Ar(t,e="",r,n){const{signal:[o,i],utils:s={}}=function(t){return t?Array.isArray(t)?{signal:t}:t:{signal:$({value:""})}}(t),a=s.parsePath||(t=>t),l=s.renderPath||(t=>t),c=s.beforeLeave||function(){let t=new Set,e=!1;return{subscribe:function(e){return t.add(e),()=>t.delete(e)},confirm:function(r,n){if(e)return!(e=!1);const o={to:r,options:n,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const i of t)i.listener({...o,from:i.location,retry:t=>{t&&(e=!0),i.navigate(r,n)}});return!o.defaultPrevented}}}(),h=xr("",e);if(void 0===h)throw new Error(`${h} is not a valid base path`);h&&!o().value&&i({value:h,replace:!0,scroll:!1});const[d,u]=$(!1),f=async t=>{u(!0);try{await function(t){const e=L,r=N;return Promise.resolve().then((()=>{L=e,N=r,ot(t,!1),L=N=null}))}(t)}finally{u(!1)}},[p,g]=$(o().value),[m,x]=$(o().state),y=function(t,e){const r=new URL("http://sar"),n=W((e=>{const n=t();try{return new URL(n,r)}catch(o){return console.error(`Invalid path ${n}`),e}}),r,{equals:(t,e)=>t.href===e.href}),o=W((()=>n().pathname)),i=W((()=>n().search),!0),s=W((()=>n().hash)),a=W((()=>""));return{get pathname(){return o()},get search(){return i()},get hash(){return s()},get state(){return e()},get key(){return a()},query:br(U(i,(()=>function(t){const e={};return t.searchParams.forEach(((t,r)=>{e[r]=t})),e}(n()))))}}(p,m),v=[],_={pattern:h,params:{},path:()=>h,outlet:()=>null,resolvePath:t=>xr(h,t)};if(r)try{Fr=_,_.data=r({data:void 0,params:{},location:y,navigate:b(_)})}finally{Fr=void 0}function w(t,e,r){H((()=>{if("number"==typeof e)return void(e&&(s.go?c.confirm(e,r)&&s.go(e):console.warn("Router integration does not support relative routing")));const{replace:n,resolve:o,scroll:a,state:l}={replace:!1,resolve:!0,scroll:!0,...r},h=o?t.resolvePath(e):xr("",e);if(void 0===h)throw new Error(`Path '${e}' is not a routable path`);if(v.length>=100)throw new Error("Too many redirects");const d=p();if((h!==d||l!==m())&&c.confirm(h,r)){const t=v.push({value:d,replace:n,scroll:a,state:m()});f((()=>{g(h),x(l)})).then((()=>{v.length===t&&function(t){const e=v[0];e&&(t.value===e.value&&t.state===e.state||i({...t,replace:e.replace,scroll:e.scroll}),v.length=0)}({value:h,state:l})}))}}))}function b(t){return t=t||Q(Cr)||_,(e,r)=>w(t,e,r)}O((()=>{const{value:t,state:e}=o();H((()=>{t!==p()&&f((()=>{g(t),x(e)}))}))}));{function T(t){if(t.defaultPrevented||0!==t.button||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;const e=t.composedPath().find((t=>t instanceof Node&&"A"===t.nodeName.toUpperCase()));if(!e||!e.hasAttribute("link"))return;const r=e.href;if(e.target||!r&&!e.hasAttribute("state"))return;const n=(e.getAttribute("rel")||"").split(/\s+/);if(e.hasAttribute("download")||n&&n.includes("external"))return;const o=new URL(r);if(o.origin!==window.location.origin||h&&o.pathname&&!o.pathname.toLowerCase().startsWith(h.toLowerCase()))return;const i=a(o.pathname+o.search+o.hash),s=e.getAttribute("state");t.preventDefault(),w(_,i,{resolve:!1,replace:e.hasAttribute("replace"),scroll:!e.hasAttribute("noscroll"),state:s&&JSON.parse(s)})}!function(t,e=window.document){const r=e[hr]||(e[hr]=new Set);for(let n=0,o=t.length;n<o;n++){const o=t[n];r.has(o)||(r.add(o),e.addEventListener(o,dr))}}(["click"]),document.addEventListener("click",T),K((()=>document.removeEventListener("click",T)))}return{base:_,out:void 0,location:y,isRouting:d,renderPath:l,parsePath:a,navigatorFactory:b,beforeLeave:c}}function Pr(t,e,r,n,o){const{base:i,location:s,navigatorFactory:a}=t,{pattern:l,element:c,preload:h,data:d}=n().route,u=W((()=>n().path));h&&h();const f={parent:e,pattern:l,get child(){return r()},path:u,params:o,data:e.data,outlet:c,resolvePath:t=>xr(i.path(),t,u())};if(d)try{Fr=f,f.data=d({data:e.data,params:o,location:s,navigate:a(f)})}finally{Fr=void 0}return f}const Br=t=>{const{source:e,url:r,base:n,data:o,out:i}=t,s=Ar(e||fr(),n,o);return tr(Sr.Provider,{value:s,get children(){return t.children}})},Dr=t=>{const e=Rr(),r=Ir(),n=J((()=>t.children)),o=W((()=>Lr(n(),yr(r.pattern,t.base||""),Yr))),i=W((()=>function(t,e){for(let r=0,n=t.length;r<n;r++){const n=t[r].matcher(e);if(n)return n}return[]}(o(),e.location.pathname))),s=br((()=>{const t=i(),e={};for(let r=0;r<t.length;r++)Object.assign(e,t[r].params);return e}));e.out&&e.out.matches.push(i().map((({route:t,path:e,params:r})=>({originalPath:t.originalPath,pattern:t.pattern,path:e,params:r}))));const a=[];let l;const c=W(U(i,((t,n,o)=>{let h=n&&t.length===n.length;const d=[];for(let l=0,u=t.length;l<u;l++){const u=n&&n[l],f=t[l];o&&u&&f.route.key===u.route.key?d[l]=o[l]:(h=!1,a[l]&&a[l](),D((t=>{a[l]=t,d[l]=Pr(e,d[l-1]||r,(()=>c()[l+1]),(()=>i()[l]),s)})))}return a.splice(t.length).forEach((t=>t())),o&&h?o:(l=d[0],d)})));return tr(St,{get when(){return c()&&l},keyed:!0,children:t=>tr(Cr.Provider,{value:t,get children(){return t.outlet()}})})},$r=t=>{const e=J((()=>t.children));return wt(t,{get children(){return e()}})},Yr=()=>{const t=Ir();return tr(St,{get when(){return t.child},keyed:!0,children:t=>tr(Cr.Provider,{value:t,get children(){return t.outlet()}})})};var Or=K;function Xr(t,e=V()){let r,n,o=0;return()=>(o++,K((()=>{o--,queueMicrotask((()=>{!o&&n&&(n(),n=r=void 0)}))})),n||D((e=>r=t(n=e)),e),r)}var Wr=Xr((()=>{const[t,e]=$(null);var r,n,o,i;return r=window,n="keydown",o=t=>{e(t),setTimeout((()=>e(null)))},r.addEventListener(n,o,i),Or(r.removeEventListener.bind(r,n,o,i)),t}));function jr(t){return"function"==typeof t}function Hr(t,e){if(!t)throw new Error(e||"Assertion failed")}let Ur={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"};const[Gr,Kr]=$([]);function Vr(t,e){const r=e();let n,o,i,s;Array.isArray(r)?2===r.length?(n=s=r[0],o=i=r[1]):3===r.length?(n=r[0],o=i=r[1],s=r[2]):[n,i,s,o]=r:n=i=s=o=r,t.onBeforeLayout=(e,r)=>{if(r){t.width=t.children.reduce(((t,e)=>t+(e.width||0)),0)+o+i;const e=t.children[0];e&&(e.x=o,e.marginLeft=o),t.height=t.children.reduce(((t,e)=>(e.y=(e.y||0)+n,e.marginTop=n,t+(e.height||0))),0)+n+s}}}function qr(t){return function(){const e=this.children.length,r=this.wrap,n=this.selected;if("right"===t||"down"===t){do{if(this.selected=(this.selected||0)%e+1,this.selected>=e){if(!r){this.selected=null;break}this.selected=0}}while(this.children[this.selected]?.skipFocus)}else if("left"===t||"up"===t)do{if(this.selected=(this.selected||0)%e-1,this.selected<0){if(!r){this.selected=null;break}this.selected=e-1}}while(this.children[this.selected]?.skipFocus);if(null===this.selected)return this.selected=n,!1;const o=this.children[this.selected];if(Hr(o instanceof We),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,o,this.selected,n),this.plinko&&null!==n){const t=this.children[n];Hr(t instanceof We);const e=t.selected;o.selected=e}return Rt(o),!0}}function Qr(t){const e=qr("left"),r=qr("right");return(()=>{const n=er("node");return sr(n,"onLeft",e),sr(n,"onRight",r),sr(n,"selected",0),ir(n,ar({get onFocus(){return t.onFocus||(t=>{if(!t||!t.selected)return;const e=t.children[t.selected];e instanceof We&&e.setFocus()})}},t),!0),or(n,(()=>t.children)),n})()}function Jr(t){const e=qr("up"),r=qr("down");return(()=>{const n=er("node");return sr(n,"onUp",e),sr(n,"onDown",r),sr(n,"selected",0),ir(n,ar({get onFocus(){return t.onFocus||(t=>{if(!t||!t.selected)return;const e=t.children[t.selected];e instanceof We&&e.setFocus()})}},t),!0),or(n,(()=>t.children)),n})()}const Zr={flexRow:{display:"flex",flexDirection:"row",justifyContent:"flexStart"},flexColumn:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},layout:{screenW:1920,screenH:1080,marginX:120,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},color:{primary:"#00315c",focus:"#bdbdbd",container:"#004882"},typography:{display1:{fontFamily:"Ubuntu",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Ubuntu",fontSize:56,lineHeight:72},headline1:{fontFamily:"Ubuntu",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Ubuntu",fontSize:32,lineHeight:44},headline3:{fontFamily:"Ubuntu",fontSize:28,lineHeight:40},body1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40},body2:{fontFamily:"Ubuntu",fontSize:28,lineHeight:34},button1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40}}},tn={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:Zr.layout.screenW,height:600,y:560,x:0},Thumbnail:{width:185,height:278,scale:1,zIndex:2,focus:{scale:1.1}},FocusRing:{width:194,height:286,y:-5,x:-5},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:cr("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:cr("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:Zr.layout.screenW-2*Zr.layout.marginX,x:Zr.layout.marginX+Zr.layout.gutterX,y:48},Rect:{width:250,height:100,y:10,x:300,color:cr("#0000ff")},peopleBio:{...Zr.typography.body1,contain:"both",width:1500,height:400}},en={width:386,height:136,color:cr("#000000"),alpha:.3,borderRadius:30,border:{width:5,color:cr("#cc33ff")},scale:1,focus:{color:[cr("#58807d"),{duration:2e3}],scale:1.2,border:{width:5,color:cr("#ff0000")},alpha:[1,{duration:1500,delay:200,timing:"easy-in"}]},active:{color:cr("#33ff55")},disabled:{alpha:1}},rn={container:en,topBar:{color:cr("#00A699"),height:8,y:2,x:-4,width:en.width+8},text:{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:cr("#F6F6F9"),height:en.height,width:en.width,focus:{fontSize:64}}},nn=386,on=136,sn=(cr("#715cab"),cr("#5a39a2"),cr("#291d43"),{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:cr("#FFFFFF"),height:on,width:nn,focus:{fontSize:40},disabled:{color:cr("#909090")}});function an(t){return tr(It,ar(t,{animate:!0,get style(){return tn.Thumbnail}}))}function ln(t){return tr(It,ar(t,{get style(){return tn.FocusRing}}))}function cn(t){const[e,r]=function(t,...e){if(T in t){const r=new Set(e.length>1?e.flat():e[0]),n=e.map((e=>new Proxy({get:r=>e.includes(r)?t[r]:void 0,has:r=>e.includes(r)&&r in t,keys:()=>e.filter((e=>e in t))},yt)));return n.push(new Proxy({get:e=>r.has(e)?void 0:t[e],has:e=>!r.has(e)&&e in t,keys:()=>Object.keys(t).filter((t=>!r.has(t)))},yt)),n}const r={},n=e.map((()=>({})));for(const o of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,o),s=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const t of e)t.includes(o)&&(a=!0,s?n[l][o]=i.value:Object.defineProperty(n[l],o,i)),++l;a||(s?r[o]=i.value:Object.defineProperty(r,o,i))}return[...n,r]}(t,["items"]);return tr(Qr,ar(r,{get style(){return tn.Row},get children(){return tr(Tt,{get each(){return e.items},children:t=>tr(an,t)})}}))}const[hn,dn]=$(""),un="https://api.themoviedb.org/3";let fn,pn;const gn="w185",mn={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA"}};function xn(t,e=gn){return pn+e+t}function yn(t,e={}){return fetch(un+t,{...mn,...e}).then((t=>t.json()))}function vn(){return yn("/configuration").then((t=>(fn=t,pn=t.images?.secure_base_url,t)))}const _n={get:function(t,e={}){return fn?yn(t,e):vn().then((()=>yn(t,e)))},loadConfig:vn};function wn(t=[]){return t.map((t=>{return{src:xn(t.poster_path||t.profile_path),tileSrc:xn(t.backdrop_path||t.profile_path,"w300"),backdrop:xn(t.backdrop_path,"w1280"),href:`/solid-demo-app/entity/${t.media_type||"people"}/${t.id}`,shortTitle:(e=t.title||t.name,r=30,e.length>r?e.substring(0,r-3)+"...":e),title:t.title||t.name,data:t,entityInfo:{type:t.media_type||"people",id:t.id},heroContent:{title:t.title||t.name,description:t.overview}};var e,r}))}let bn=new Map;const Tn=new Map;function Sn(t){const[e,r]=$([]),[n,o]=$(1),[i,s]=$(!1),[a]=j(n,t);return Y((()=>{const t=a();t&&ot((()=>{0===t.length&&s(!0),r((e=>[...e,...t]))}),!1)})),{pages:e,page:n,setPage:o,setPages:r,end:i,setEnd:s}}const Cn=1100,Rn={...Zr.typography.display2,width:Cn,height:58,contain:"both"},Fn=t=>tr(Ft,ar(t,{style:Rn,get children(){return t.children}})),In={...Zr.typography.body1,width:Cn,height:72,contain:"both"},En={fontSize:20,lineHeight:20},zn=t=>tr(Ft,ar(t,{style:In,get children(){return t.children}})),Nn=t=>(()=>{const e=er("node");return lr(Vr,e,(()=>[8,15,13,15])),ir(e,ar(t,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),or(e,tr(Ft,{style:En,get children(){return t.children}})),e})(),kn=Zr.typography.body2,Mn=t=>tr(It,{get style(){return{...Zr.flexRow,gap:12,width:Cn,height:48}},get children(){return[tr(Ft,{style:kn,get children(){return t.metaText}}),tr(Tt,{get each(){return t.badges},children:t=>tr(Nn,{y:-5,children:t})}),Ze((()=>{return e=t.reviews,[tr(St,{get when(){return e?.rtCrit&&"0"!==e?.rtCrit},get children(){return[tr(It,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),tr(Ft,{style:kn,get children(){return e.rtCrit+"%"}})]}}),tr(St,{get when(){return e?.rtFan&&"0"!==e?.rtFan},get children(){return[tr(It,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),tr(Ft,{style:kn,get children(){return e.rtFan+"%"}})]}})];var e}))]}}),Ln=t=>tr(It,ar(t,{get style(){return{...Zr.flexColumn,width:Cn,height:160,gap:16}},get children(){return[tr(Fn,{get children(){return t.title}}),tr(zn,{get children(){return t.description}}),tr(Mn,{get metaText(){return t.metaText},get badges(){return t.badges},get reviews(){return t.reviews}})]}}));function An(t){const e=t%60;return Math.floor(t/60)+"h "+(e<10?"0":"")+e+"m"}function Pn(t){return t.split("-")[0]}function Bn({type:t,id:e}){return _n.get(`/${t}/${e}/recommendations`).then((({results:e})=>e.length?wn(e.slice(0,7)):_n.get(`/trending/${t}/week?page=1`).then((({results:t})=>wn(t.slice(0,7))))))}function Dn({type:t,id:e}){return _n.get(`/${t}/${e}/credits`).then((({cast:t})=>wn(t.slice(0,7))))}function $n({type:t,id:e}){let r="movie"===t?{rtCrit:86,rtFan:92}:{};return _n.get(`/${t}/${e}`).then((e=>({backgroundImage:xn(e.backdrop_path,"original"),heroContent:{title:e.title||e.name,description:e.overview,badges:["HD"],metaText:"movie"===t?An(e.runtime)+" - "+e.release_date:`${Pn(e.first_air_date)} - ${Pn(e.last_air_date)}`,reviews:r},...e})))}const Yn=()=>{const e=zr(),[n,o]=$(0),[i,s]=$();j(i,$n);const[a,l]=$({}),c=Er(),h=function(e,r=t,n){const o=new Map,i=rt((t=>{const n=e();for(const[e,i]of o.entries())if(r(e,n)!==r(e,t))for(const t of i.values())t.state=F,t.pure?A.push(t):P.push(t);return n}),void 0,!0,F);return et(i),t=>{const e=L;if(e){let r;(r=o.get(t))?r.add(e):o.set(t,r=new Set([e])),K((()=>{r.delete(e),!r.size&&o.delete(t)}))}return r(t,i.value)}}((()=>0)),d=W((()=>{return Sn((t=e.filter||"all",e=>{const r=`/trending/${t}/week?page=${e}`;if(bn.has(r))return bn.get(r);let n=_n.get(r).then((e=>{let r=e.results.filter((t=>!t.adult)),n=function(t,e=7){let r=[];for(let n=0,o=t.length;n<o;n+=e)r.push(t.slice(n,n+e));return r}((Tn.has(t)?Tn.get(t):[]).concat(wn(r)));return n[n.length-1].length<7?Tn.set(t,n.pop()):Tn.delete(t),n}));return bn.set(r,n),n}));var t}));function u(){this.children.selected?.setFocus(),o(-1*(this.y||0)+24);let t=d().pages().length;(0===t||this.parent.selected&&this.parent.selected>=t-2)&&d().setPage((t=>t+1))}function f(){let t=this.children.selected;r(t&&t.href),c(t.href)}return X(U(Ct,(t=>{t.backdrop&&dn(t.backdrop),t.heroContent&&l(t.heroContent)}),{defer:!0})),tr(St,{get when(){return d().pages().length},get children(){return[tr(Ln,ar({y:360,x:150},a)),tr(It,{clipping:!0,get style(){return tn.itemsContainer},get children(){return tr(Jr,{plinko:!0,announce:"All Trending - Week",animate:!0,get y(){return n()},get style(){return tn.Column},get children(){return tr(Tt,{get each(){return d().pages()},children:(t,e)=>tr(cn,{get autofocus(){return h(e())},items:t,onFocus:u,onEnter:f})})}})}})]}})},On=()=>[tr(Ft,{autofocus:!0,get style(){return tn.headlineText},children:"Learn more about Solid + Lightning through other pages:"}),tr(Ft,{get style(){return tn.headlineSubText},children:"Press B for buttons, T for Text pages, M for Browse, F for Flex, C for Column Flex"})],Xn=()=>{const t={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:cr("00000000")},e={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:cr("00000000")},r={fontSize:42},n={width:t.width,fontSize:26,contain:"width"},o={fontSize:26};return G((()=>{dn("0x000000ff")})),tr(It,{autofocus:!0,style:t,get children(){return[tr(Ft,{style:r,children:"Title of the Page"}),tr(Ft,{style:n,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),tr(It,{style:e,get children(){return[tr(Ft,{style:o,children:"Subline Text"}),tr(It,{width:28,height:28,src:"/assets/rt-popcorn.png"}),tr(Ft,{style:o,children:"More Text"})]}})]}})},Wn=()=>{function t(t,e){this.states.toggle("disabled")}const e={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:cr("00000000"),gap:26,y:400};function r(t){return tr(It,ar(t,{forwardStates:!0,animate:!0,get style(){return rn.container},get children(){return tr(Ft,{get style(){return rn.text},get children(){return t.children}})}}))}const n=t=>(()=>{const e=er("node");return lr(Vr,e,(()=>[10,15])),ir(e,ar(t,{get style(){return{color:cr("#000000be"),borderRadius:8,border:{width:2,color:cr("#ffffff")}}}}),!0),or(e,tr(Ft,{style:{fontSize:20},get children(){return t.children}})),e})();return[tr(Qr,{x:100,y:200,gap:5,style:e,get children(){return[tr(n,{children:"HD"}),tr(n,{children:"PG13"}),tr(n,{children:"NC17"}),tr(Ft,{fontSize:30,children:"I like bananas"}),tr(n,{children:"DOLBY"})]}}),tr(Qr,{x:100,gap:40,style:e,get children(){return[tr(r,{autofocus:!0,onEnter:t,children:"TV Shows"}),tr(r,{states:{active:!0,disabled:!1},children:"Movies"}),tr(r,{states:"active",children:"Sports"}),tr(r,{states:"disabled",children:"News"})]}})]},jn=()=>{const t={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:cr("#4dabf5")},e={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function r(t){return tr(It,ar(t,{style:{width:200,height:100,y:5,color:392801023}}))}const[n,o]=$(50);function i(){this.children.selected?.setFocus(),o(150+-1*(this.y||0))}G((()=>{dn("#333333")}));const s=50;return tr(Jr,{x:160,get y(){return n()},animate:!0,gap:30,height:850,get width(){return t.width},get style(){return tn.Column},get children(){return[tr(Ft,{style:e,children:"Flex Start"}),tr(Qr,{gap:s,style:t,onFocus:i,get children(){return[tr(r,{autofocus:!0}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Ft,{style:e,children:"Flex Start - Margin Left"}),tr(Qr,{gap:s,style:t,onFocus:i,get children(){return[tr(r,{marginLeft:100}),tr(r,{}),tr(r,{marginLeft:100}),tr(r,{}),tr(r,{})]}}),tr(Ft,{style:e,children:"Flex End"}),tr(Qr,{gap:s,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Ft,{style:e,children:"Flex End - Margin Right"}),tr(Qr,{gap:s,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[tr(r,{}),tr(r,{marginRight:100}),tr(r,{}),tr(r,{}),tr(r,{marginRight:100})]}}),tr(Ft,{style:e,children:"Center - No Margin Support"}),tr(Qr,{gap:s,justifyContent:"center",style:t,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Ft,{style:e,children:"Space Between - No Margin Support"}),tr(Qr,{gap:s,justifyContent:"spaceBetween",style:t,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Ft,{style:e,children:"Space Evenly - No Margin Support"}),tr(Qr,{gap:s,justifyContent:"spaceEvenly",style:t,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}})]}})},Hn=()=>{const t={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:cr("#4dabf5")},e={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function r(t){return tr(It,ar(t,{style:{width:200,height:100,y:5,color:392801023}}))}function n(){return Math.floor(91*Math.random())+10}const[o,i]=$(50);function s(){this.children.selected?.setFocus(),i(150+-1*(this.y||0))}G((()=>{dn("#333333")}));const a=50;return tr(Jr,{x:160,get y(){return o()},animate:!0,gap:30,height:850,get width(){return t.width},get style(){return tn.Column},get children(){return[tr(Ft,{style:e,children:"Flex Start - AlignItems: center"}),tr(Qr,{alignItems:"center",gap:a,style:t,onFocus:s,get children(){return[tr(r,{autofocus:!0,get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}})]}}),tr(Ft,{style:e,children:"Flex Start - Margin Left - AlignItems: flexStart"}),tr(Qr,{gap:a,alignItems:"flexStart",style:t,onFocus:s,get children(){return[tr(r,{marginLeft:100,get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{marginLeft:100,get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}})]}}),tr(Ft,{style:e,children:"Flex End - AlignItems: flexEnd"}),tr(Qr,{gap:a,justifyContent:"flexEnd",alignItems:"flexEnd",style:t,onFocus:s,get children(){return[tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}})]}}),tr(Ft,{style:e,children:"Flex End - Margin Right"}),tr(Qr,{gap:a,justifyContent:"flexEnd",style:t,onFocus:s,get children(){return[tr(r,{get height(){return n()}}),tr(r,{marginRight:100,get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{marginRight:100,get height(){return n()}})]}}),tr(Ft,{style:e,children:"Center - No Margin Support"}),tr(Qr,{gap:a,justifyContent:"center",style:t,onFocus:s,get children(){return[tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}})]}}),tr(Ft,{style:e,children:"Space Between - No Margin Support"}),tr(Qr,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:s,get children(){return[tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}})]}}),tr(Ft,{style:e,children:"Space Evenly - No Margin Support"}),tr(Qr,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:s,get children(){return[tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}}),tr(r,{get height(){return n()}})]}})]}})},Un=()=>{const t={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:cr("00000000")},e={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:cr("#4dabf5"),height:850,width:80};function r(t){const e={width:Math.floor(61*Math.random())+10,height:80,x:5,color:cr("#1769aa")};return tr(It,ar(t,{style:e}))}const[n,o]=$(50);function i(){this.children.selected?.setFocus(),o(150+-1*(this.y||0))}G((()=>{dn("#333333")}));const s=50;return[tr(Ft,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),tr(Qr,{gap:s,style:t,onFocus:i,get children(){return[tr(Jr,{gap:30,style:e,alignItems:"center",get children(){return[tr(r,{autofocus:!0}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,style:e,onFocus:i,alignItems:"flexStart",get children(){return[tr(r,{marginTop:100}),tr(r,{}),tr(r,{marginTop:100}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,alignItems:"flexEnd",justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{marginBottom:100}),tr(r,{}),tr(r,{}),tr(r,{marginBottom:100})]}}),tr(Jr,{gap:s,justifyContent:"center",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,justifyContent:"spaceBetween",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,justifyContent:"spaceEvenly",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}})]}})]},Gn=()=>{const t={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:cr("00000000")},e={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:cr("#4dabf5"),height:850,width:60};function r(t){const e={width:50,height:80,x:5,color:cr("#1769aa")};return tr(It,ar(t,{style:e}))}const[n,o]=$(50);function i(){this.children.selected?.setFocus(),o(150+-1*(this.y||0))}G((()=>{dn("#333333")}));const s=50;return[tr(Ft,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),tr(Qr,{gap:s,style:t,onFocus:i,get children(){return[tr(Jr,{gap:30,style:e,get children(){return[tr(r,{autofocus:!0}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,style:e,onFocus:i,get children(){return[tr(r,{marginTop:100}),tr(r,{}),tr(r,{marginTop:100}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{marginBottom:100}),tr(r,{}),tr(r,{}),tr(r,{marginBottom:100})]}}),tr(Jr,{gap:s,justifyContent:"center",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,justifyContent:"spaceBetween",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}}),tr(Jr,{gap:s,justifyContent:"spaceEvenly",style:e,onFocus:i,get children(){return[tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{}),tr(r,{})]}})]}})]},Kn=()=>{function t(t,e){this.states.toggle("disabled")}const e={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:cr("00000000"),gap:26,y:400,x:100},r={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},n=["RoundedRectangle",{radius:65}];function o(t){return tr(It,ar(t,{forwardStates:!0,animate:!0,style:r,shader:n,get children(){return tr(Ft,{style:sn,get children(){return t.children}})}}))}return tr(Qr,{style:e,get children(){return[tr(o,{autofocus:!0,onEnter:t,children:"Focused"}),tr(o,{states:{active:!0,disabled:!1},children:"Normal"}),tr(o,{states:"disabled",children:"Disabled"})]}})},Vn=()=>{const t=zr(),e=Er(),[n]=j((()=>({...t})),$n),[o]=j((()=>({...t})),Dn),[i]=j((()=>({...t})),Bn);X(U(n,(t=>{dn(t.backgroundImage)}),{defer:!0}));const s=600,a={color:cr("#000000"),alpha:0,width:1900,height:890,x:10,y:s,borderRadius:30};function l(){this.children.selected?.setFocus(),d.y=s,u.y=s,u.alpha=0}function c(){this.children.selected?.setFocus(),d.y=200,u.y=160,u.alpha=.9}function h(){let t=this.children.selected;r(t&&t.href),e(t.href)}let d,u;return tr(St,{get when(){return n()},keyed:!0,get children(){return[tr(Ln,ar({y:360,x:150},(()=>n().heroContent))),tr(Jr,{animate:!0,ref(t){"function"==typeof d?d(t):d=t},y:s,x:140,get style(){return tn.Column},get children(){return tr(St,{get when(){return Ze((()=>!!i()))()&&o()},get children(){return[tr(Ft,{skipFocus:!0,get style(){return tn.RowTitle},children:"Recommendations"}),tr(cn,{autofocus:!0,onFocus:l,onEnter:h,get items(){return i()}}),tr(Ft,{skipFocus:!0,get style(){return tn.RowTitle},children:"Cast and Crew"}),tr(cn,{onFocus:c,onEnter:h,get items(){return o()}})]}})}}),tr(It,{ref(t){"function"==typeof u?u(t):u=t},animate:!0,style:a})]}})};function qn({id:t}){return _n.get(`/person/${t}/combined_credits`).then((({cast:t})=>wn(t.slice(0,7))))}function Qn({id:t}){return _n.get(`/person/${t}`).then((t=>({backgroundImage:xn(t.profile_path,"original"),heroContent:{title:t.title||t.name,description:t.biography},...t})))}const Jn=()=>{const t=zr(),e=Er(),[n]=j((()=>({...t})),Qn),[o]=j((()=>({...t})),qn);X(U(n,(t=>{dn(t.backgroundImage)}),{defer:!0}));const i={color:cr("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function s(){let t=this.children.selected;r(t&&t.href),e(t.href)}return tr(St,{get when(){return n()},keyed:!0,get children(){return[tr(It,{x:150,y:200,get style(){return tn.Column},zIndex:3,get children(){return[tr(Ft,{get style(){return Zr.typography.display2},get children(){return n().name}}),tr(Ft,{get style(){return tn.peopleBio},get children(){return n().biography}})]}}),tr(It,{style:i}),tr(Jr,{y:670,x:140,get style(){return tn.Column},get children(){return tr(St,{get when(){return o()},get children(){return[tr(Ft,{skipFocus:!0,get style(){return tn.RowTitle},children:"Credits"}),tr(cn,{autofocus:!0,onEnter:s,get items(){return o()}})]}})}})]}})},Zn=()=>(()=>{const t=er("node");return sr(t,"style",{width:1920,height:1080,color:868483072}),t})();function to(){let t,e,r=0;const n={alpha:1,color:4294967295},o={duration:1e3,easing:"ease-in-out"};return X(U(hn,(n=>n.startsWith("#")?(t.color=n,t.src="",t.alpha=1,r=1,void(e.alpha=0)):(t.color=4294967295,0===r?(t.src=n,void(r=1)):1===r?(e.src=n,r=2,e.alpha=[1],void(t.alpha=[0])):void(2===r&&(t.src=n,r=1,t.alpha=1,e.alpha=0)))),{defer:!0})),tr(It,{width:1920,height:1080,get children(){return[tr(It,{ref(e){"function"==typeof t?t(e):t=e},animate:!0,animationSettings:o,style:n}),tr(It,{ref(t){"function"==typeof e?e(t):e=t},animate:!0,animationSettings:o,style:n,alpha:0}),tr(It,{get effects(){return{radialGradient:{colors:[124,124,cr(Zr.color.container)],stops:[0,.4,.9],height:800,width:1920,pivot:[.8,0]}}}})]}})}const eo={Column:{...Zr.flexColumn,width:320,height:600,y:360,gap:20,zIndex:101,x:[8,{duration:250,easing:"ease-in-out"}],focus:{x:[Zr.layout.marginX,{duration:250,easing:"ease-in-out"}]}},Gradient:{zIndex:99,linearGradient:{angle:(ro=270,ro*Math.PI/180),stops:[0,.4,.8],colors:[cr(Zr.color.primary),cr(Zr.color.primary),cr("#00000000")]},alpha:[0],focus:{width:1600,alpha:[1]},width:100,height:1080},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:cr(Zr.color.container)},active:{width:328,height:70}}};var ro;const no="/solid-demo-app/",oo=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:281,y:0}];function io(t){const e=function(t,e){const r=Ie.createTexture("ImageTexture",{src:t});return e.reduce(((t,e)=>{const{x:n,y:o,width:i,height:s}=e;return t[e.name]=Ie.createTexture("SubTexture",{texture:r,x:n,y:o,width:i,height:s}),t}),{})}(no+"assets/icons_white.png",oo);return tr(It,ar(t,{get texture(){return e[t.name]},get width(){return e[t.name].props.width},get height(){return e[t.name].props.height},get x(){return(100-(e[t.name].props.width||0))/2},get y(){return(100-(e[t.name].props.height||0))/2}}))}function so(t){return tr(It,ar(t,{forwardStates:!0,get style(){return eo.NavButton},get children(){return[tr(It,{y:-16,get children(){return tr(io,{scale:.5,get name(){return t.icon}})}}),tr(Ft,{get style(){return{...Zr.typography.button1,fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}}},get children(){return t.children}})]}}))}function ao(t){let e;const r=Er(),n="/solid-demo-app/";return[tr(Jr,ar(t,{onFocus:function(){e.states.add("focus"),this.children.forEach((t=>t.states.add("active"))),this.children.selected.setFocus()},onBlur:function(){e.states.remove("focus"),this.selected=0,this.children.forEach((t=>t.states.remove("active")))},get style(){return eo.Column},animate:!0,get children(){return[tr(so,{onEnter:()=>r(n+"browse/all"),icon:"trending",children:"Trending"}),tr(so,{icon:"movie",onEnter:()=>r(n+"browse/movie"),children:"Movies"}),tr(so,{icon:"tv",onEnter:()=>r(n+"browse/tv"),children:"TV"}),tr(so,{icon:"experiment",onEnter:()=>r(n+"examples"),children:"Examples"})]}})),tr(It,{ref(t){"function"==typeof e?e(t):e=t},get style(){return eo.Gradient}})]}const lo=()=>{((t={})=>{const e=Wr();Ur={...Ur,...t};const r=Object.entries(Ur);X(U(Ct,((t,e,r=[])=>{let n=t;const o=[];for(;n;)n.states.has("focus")||(n.states.add("focus"),jr(n.onFocus)&&n.onFocus.call(n,t,e??null)),o.push(n),n=n.parent??null;return r.forEach((r=>{o.includes(r)||(r.states.remove("focus"),jr(r.onBlur)&&r.onBlur.call(r,t,e??null))})),Kr(o),o}),{defer:!0})),X((()=>{const t=e();if(t){const e=r.find((([e,r])=>r===t.key));H((()=>{const r=Gr();for(const n of r){const r=e?e[0]:void 0;if(r){const e=n[`on${r}`];if(jr(e)&&!0===e.call(n,t,n))break}if(jr(n.onKeyPress)&&!0===n.onKeyPress.call(n,t,r,n))break}return!1}))}}))})({Menu:"m",Flex:"f",FlexSize:"s",FlexColumnSize:"x",FlexColumn:"c",Text:"t",Buttons:"b"});const t=Er();let e,n,o;X(U(Ct,(t=>{r(t),setTimeout((()=>{t.heroContent?(e.parent=t,e.alpha=1,e.width=t.width+10,e.height=t.height+10,e.zIndex=t.zIndex-1e-8):e.alpha=0}),10)}),{defer:!0}));const i="/solid-demo-app/";return tr(It,{ref(t){const e=window.APP;"function"==typeof e?e(t):window.APP=t},onLast:()=>history.back(),onText:()=>t(i+"text"),onFlex:()=>t(i+"flex"),onFlexSize:()=>t(i+"flexsize"),onFlexColumnSize:()=>t(i+"flexcolumnsize"),onFlexColumn:()=>t(i+"flexcolumn"),onButtons:()=>t(i+"buttons"),onMenu:()=>t(i),style:{width:1920,height:1080},onLeft:()=>{if(n.states.has("focus"))return!1;o=Ct(),n.setFocus()},onRight:()=>n.states.has("focus")&&o.setFocus(),get children(){return[tr(to,{}),tr(ln,{get color(){return cr(Zr.color.focus)},ref(t){"function"==typeof e?e(t):e=t}}),tr(Dr,{get children(){return tr($r,{path:i,get children(){return[tr($r,{path:"",component:Yn}),tr($r,{path:"examples",component:On}),tr($r,{path:"browse/:filter",component:Yn}),tr($r,{path:"text",component:Xn}),tr($r,{path:"buttons",component:Wn}),tr($r,{path:"flex",component:jn}),tr($r,{path:"flexsize",component:Hn}),tr($r,{path:"flexcolumnsize",component:Un}),tr($r,{path:"flexcolumn",component:Gn}),tr($r,{path:"buttonsmaterial",component:Kn}),tr($r,{path:"entity/people/:id",component:Jn}),tr($r,{path:"entity/:type/:id",component:Vn}),tr($r,{path:"*all",component:Zn})]}})}}),tr(ao,{ref(t){"function"==typeof n?n(t):n=t}})]}})},co=new URL("AppCoreExtensions-legacy-282736df.js",e.meta.url).href;Me.debug=!1,Me.fontSettings.fontFamily="Ubuntu",Me.fontSettings.color=cr("#ffffff"),Me.fontSettings.fontSize=100,Me.driver="main",Qe((()=>tr(He,{options:{coreExtensionModule:co,threadXCoreWorkerUrl:void 0},get children(){return tr(Br,{get children(){return tr(lo,{})}})}})))}}}));
//# sourceMappingURL=index-legacy-9c37524f.js.map
