var Nr=Object.defineProperty;var Pr=(r,n,t)=>n in r?Nr(r,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[n]=t;var d=(r,n,t)=>(Pr(r,typeof n!="symbol"?n+"":n,t),t);import{a as k,E as Wt,g as $r,m as An,i as Qn,b as me,c as Tt,T as Jn,d as Dr,e as Br,f as Yr,h as Xe,S as Mn,j as Zn,B as Or,k as Wr,l as Ur,n as Qe,W as Nn,o as Xr,p as jr,C as Hr}from"./CoreExtension-fb417e8a.js";function qs(){import.meta.url,import("_").catch(()=>1);async function*r(){}}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const tr=(r,n)=>r===n,Me=Symbol("solid-proxy"),Gr=Symbol("solid-track"),Ne={equals:tr};let er=ar;const pt=1,Pe=2,nr={owned:null,cleanups:null,context:null,owner:null},Je={};var P=null;let Ze=null,$=null,et=null,_t=null,je=0;function Zt(r,n){const t=$,e=P,o=r.length===0,i=n===void 0?e:n,s=o?nr:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=o?r:()=>r(()=>st(()=>Ge(s)));P=s,$=null;try{return St(l,!0)}finally{$=t,P=e}}function D(r,n){n=n?Object.assign({},Ne,n):Ne;const t={value:r,observers:null,observerSlots:null,comparator:n.equals||void 0},e=o=>(typeof o=="function"&&(o=o(t.value)),sr(t,o));return[ir.bind(t),e]}function on(r,n,t){const e=ye(r,n,!0,pt);Ut(e)}function vt(r,n,t){const e=ye(r,n,!1,pt);Ut(e)}function mt(r,n,t){er=eo;const e=ye(r,n,!1,pt);(!t||!t.render)&&(e.user=!0),_t?_t.push(e):Ut(e)}function J(r,n,t){t=t?Object.assign({},Ne,t):Ne;const e=ye(r,n,!0,0);return e.observers=null,e.observerSlots=null,e.comparator=t.equals||void 0,Ut(e),ir.bind(e)}function Vr(r){return r&&typeof r=="object"&&"then"in r}function Dt(r,n,t){let e,o,i;arguments.length===2&&typeof n=="object"||arguments.length===1?(e=!0,o=r,i=n||{}):(e=r,o=n,i=t||{});let s=null,l=Je,c=!1,h="initialValue"in i,u=typeof e=="function"&&J(e);const f=new Set,[g,v]=(i.storage||D)(i.initialValue),[w,_]=D(void 0),[b,T]=D(void 0,{equals:!1}),[p,x]=D(h?"ready":"unresolved");function m(S,y,R,E){return s===S&&(s=null,E!==void 0&&(h=!0),(S===l||y===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(E,{value:y})),l=Je,C(y,R)),y}function C(S,y){St(()=>{y===void 0&&v(()=>S),x(y!==void 0?"errored":h?"ready":"unresolved"),_(y);for(const R of f.keys())R.decrement();f.clear()},!1)}function F(){const S=Jr,y=g(),R=w();if(R!==void 0&&!s)throw R;return $&&!$.user&&S&&on(()=>{b(),s&&(S.resolved||f.has(S)||(S.increment(),f.add(S)))}),y}function I(S=!0){if(S!==!1&&c)return;c=!1;const y=u?u():e;if(y==null||y===!1){m(s,st(g));return}const R=l!==Je?l:st(()=>o(y,{value:g(),refetching:S}));return Vr(R)?(s=R,"value"in R?(R.status==="success"?m(s,R.value,void 0,y):m(s,void 0,void 0,y),R):(c=!0,queueMicrotask(()=>c=!1),St(()=>{x(h?"refreshing":"pending"),T()},!1),R.then(E=>m(R,E,void 0,y),E=>m(R,void 0,cr(E),y)))):(m(s,R,void 0,y),R)}return Object.defineProperties(F,{state:{get:()=>p()},error:{get:()=>w()},loading:{get(){const S=p();return S==="pending"||S==="refreshing"}},latest:{get(){if(!h)return F();const S=w();if(S&&!s)throw S;return g()}}}),u?on(()=>I(!1)):I(!1),[F,{refetch:I,mutate:v}]}function rr(r,n=tr,t){const e=new Map,o=ye(i=>{const s=r();for(const[l,c]of e.entries())if(n(l,s)!==n(l,i))for(const h of c.values())h.state=pt,h.pure?et.push(h):_t.push(h);return s},void 0,!0,pt);return Ut(o),i=>{const s=$;if(s){let l;(l=e.get(i))?l.add(s):e.set(i,l=new Set([s])),kt(()=>{l.delete(s),!l.size&&e.delete(i)})}return n(i,o.value)}}function Kr(r){return St(r,!1)}function st(r){if($===null)return r();const n=$;$=null;try{return r()}finally{$=n}}function Ft(r,n,t){const e=Array.isArray(r);let o,i=t&&t.defer;return s=>{let l;if(e){l=Array(r.length);for(let h=0;h<r.length;h++)l[h]=r[h]()}else l=r();if(i){i=!1;return}const c=st(()=>n(l,o,s));return o=l,c}}function xe(r){mt(()=>st(r))}function kt(r){return P===null||(P.cleanups===null?P.cleanups=[r]:P.cleanups.push(r)),r}function He(){return P}function qr(r,n){const t=P,e=$;P=r,$=null;try{return St(n,!0)}catch(o){Tn(o)}finally{P=t,$=e}}function Qr(r){const n=$,t=P;return Promise.resolve().then(()=>{$=n,P=t;let e;return St(r,!1),$=P=null,e?e.done:void 0})}function or(r,n){const t=Symbol("context");return{id:t,Provider:no(t),defaultValue:r}}function _n(r){return P&&P.context&&P.context[r.id]!==void 0?P.context[r.id]:r.defaultValue}function Sn(r){const n=J(r),t=J(()=>sn(n()));return t.toArray=()=>{const e=t();return Array.isArray(e)?e:e!=null?[e]:[]},t}let Jr;function ir(){if(this.sources&&this.state)if(this.state===pt)Ut(this);else{const r=et;et=null,St(()=>De(this),!1),et=r}if($){const r=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(r)):($.sources=[this],$.sourceSlots=[r]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function sr(r,n,t){let e=r.value;return(!r.comparator||!r.comparator(e,n))&&(r.value=n,r.observers&&r.observers.length&&St(()=>{for(let o=0;o<r.observers.length;o+=1){const i=r.observers[o],s=Ze&&Ze.running;s&&Ze.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?et.push(i):_t.push(i),i.observers&&lr(i)),s||(i.state=pt)}if(et.length>1e6)throw et=[],new Error},!1)),n}function Ut(r){if(!r.fn)return;Ge(r);const n=P,t=$,e=je;$=P=r,Zr(r,r.value,e),$=t,P=n}function Zr(r,n,t){let e;try{e=r.fn(n)}catch(o){return r.pure&&(r.state=pt,r.owned&&r.owned.forEach(Ge),r.owned=null),r.updatedAt=t+1,Tn(o)}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?sr(r,e):r.value=e,r.updatedAt=t)}function ye(r,n,t,e=pt,o){const i={fn:r,state:e,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:P,context:P?P.context:null,pure:t};return P===null||P!==nr&&(P.owned?P.owned.push(i):P.owned=[i]),i}function $e(r){if(r.state===0)return;if(r.state===Pe)return De(r);if(r.suspense&&st(r.suspense.inFallback))return r.suspense.effects.push(r);const n=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<je);)r.state&&n.push(r);for(let t=n.length-1;t>=0;t--)if(r=n[t],r.state===pt)Ut(r);else if(r.state===Pe){const e=et;et=null,St(()=>De(r,n[0]),!1),et=e}}function St(r,n){if(et)return r();let t=!1;n||(et=[]),_t?t=!0:_t=[],je++;try{const e=r();return to(t),e}catch(e){t||(_t=null),et=null,Tn(e)}}function to(r){if(et&&(ar(et),et=null),r)return;const n=_t;_t=null,n.length&&St(()=>er(n),!1)}function ar(r){for(let n=0;n<r.length;n++)$e(r[n])}function eo(r){let n,t=0;for(n=0;n<r.length;n++){const e=r[n];e.user?r[t++]=e:$e(e)}for(n=0;n<t;n++)$e(r[n])}function De(r,n){r.state=0;for(let t=0;t<r.sources.length;t+=1){const e=r.sources[t];if(e.sources){const o=e.state;o===pt?e!==n&&(!e.updatedAt||e.updatedAt<je)&&$e(e):o===Pe&&De(e,n)}}}function lr(r){for(let n=0;n<r.observers.length;n+=1){const t=r.observers[n];t.state||(t.state=Pe,t.pure?et.push(t):_t.push(t),t.observers&&lr(t))}}function Ge(r){let n;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),e=r.sourceSlots.pop(),o=t.observers;if(o&&o.length){const i=o.pop(),s=t.observerSlots.pop();e<o.length&&(i.sourceSlots[s]=e,o[e]=i,t.observerSlots[e]=s)}}if(r.owned){for(n=r.owned.length-1;n>=0;n--)Ge(r.owned[n]);r.owned=null}if(r.cleanups){for(n=r.cleanups.length-1;n>=0;n--)r.cleanups[n]();r.cleanups=null}r.state=0}function cr(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function Tn(r,n=P){throw cr(r)}function sn(r){if(typeof r=="function"&&!r.length)return sn(r());if(Array.isArray(r)){const n=[];for(let t=0;t<r.length;t++){const e=sn(r[t]);Array.isArray(e)?n.push.apply(n,e):n.push(e)}return n}return r}function no(r,n){return function(e){let o;return vt(()=>o=st(()=>(P.context={...P.context,[r]:e.value},Sn(()=>e.children))),void 0),o}}const ro=Symbol("fallback");function Pn(r){for(let n=0;n<r.length;n++)r[n]()}function oo(r,n,t={}){let e=[],o=[],i=[],s=0,l=n.length>1?[]:null;return kt(()=>Pn(i)),()=>{let c=r()||[],h,u;return c[Gr],st(()=>{let g=c.length,v,w,_,b,T,p,x,m,C;if(g===0)s!==0&&(Pn(i),i=[],e=[],o=[],s=0,l&&(l=[])),t.fallback&&(e=[ro],o[0]=Zt(F=>(i[0]=F,t.fallback())),s=1);else if(s===0){for(o=new Array(g),u=0;u<g;u++)e[u]=c[u],o[u]=Zt(f);s=g}else{for(_=new Array(g),b=new Array(g),l&&(T=new Array(g)),p=0,x=Math.min(s,g);p<x&&e[p]===c[p];p++);for(x=s-1,m=g-1;x>=p&&m>=p&&e[x]===c[m];x--,m--)_[m]=o[x],b[m]=i[x],l&&(T[m]=l[x]);for(v=new Map,w=new Array(m+1),u=m;u>=p;u--)C=c[u],h=v.get(C),w[u]=h===void 0?-1:h,v.set(C,u);for(h=p;h<=x;h++)C=e[h],u=v.get(C),u!==void 0&&u!==-1?(_[u]=o[h],b[u]=i[h],l&&(T[u]=l[h]),u=w[u],v.set(C,u)):i[h]();for(u=p;u<g;u++)u in _?(o[u]=_[u],i[u]=b[u],l&&(l[u]=T[u],l[u](u))):o[u]=Zt(f);o=o.slice(0,s=g),e=c.slice(0)}return o});function f(g){if(i[u]=g,l){const[v,w]=D(u);return l[u]=w,n(c[u],v)}return n(c[u])}}}function an(r,n){return st(()=>r(n||{}))}function be(){return!0}const ln={get(r,n,t){return n===Me?t:r.get(n)},has(r,n){return n===Me?!0:r.has(n)},set:be,deleteProperty:be,getOwnPropertyDescriptor(r,n){return{configurable:!0,enumerable:!0,get(){return r.get(n)},set:be,deleteProperty:be}},ownKeys(r){return r.keys()}};function tn(r){return(r=typeof r=="function"?r():r)?r:{}}function io(){for(let r=0,n=this.length;r<n;++r){const t=this[r]();if(t!==void 0)return t}}function bn(...r){let n=!1;for(let i=0;i<r.length;i++){const s=r[i];n=n||!!s&&Me in s,r[i]=typeof s=="function"?(n=!0,J(s)):s}if(n)return new Proxy({get(i){for(let s=r.length-1;s>=0;s--){const l=tn(r[s])[i];if(l!==void 0)return l}},has(i){for(let s=r.length-1;s>=0;s--)if(i in tn(r[s]))return!0;return!1},keys(){const i=[];for(let s=0;s<r.length;s++)i.push(...Object.keys(tn(r[s])));return[...new Set(i)]}},ln);const t={},e={},o=new Set;for(let i=r.length-1;i>=0;i--){const s=r[i];if(!s)continue;const l=Object.getOwnPropertyNames(s);for(let c=0,h=l.length;c<h;c++){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(s,u);if(!o.has(u))f.get?(o.add(u),Object.defineProperty(t,u,{enumerable:!0,configurable:!0,get:io.bind(e[u]=[f.get.bind(s)])})):(f.value!==void 0&&o.add(u),t[u]=f.value);else{const g=e[u];g?f.get?g.push(f.get.bind(s)):f.value!==void 0&&g.push(()=>f.value):t[u]===void 0&&(t[u]=f.value)}}}return t}function so(r,...n){if(Me in r){const o=new Set(n.length>1?n.flat():n[0]),i=n.map(s=>new Proxy({get(l){return s.includes(l)?r[l]:void 0},has(l){return s.includes(l)&&l in r},keys(){return s.filter(l=>l in r)}},ln));return i.push(new Proxy({get(s){return o.has(s)?void 0:r[s]},has(s){return o.has(s)?!1:s in r},keys(){return Object.keys(r).filter(s=>!o.has(s))}},ln)),i}const t={},e=n.map(()=>({}));for(const o of Object.getOwnPropertyNames(r)){const i=Object.getOwnPropertyDescriptor(r,o),s=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,c=0;for(const h of n)h.includes(o)&&(l=!0,s?e[c][o]=i.value:Object.defineProperty(e[c],o,i)),++c;l||(s?t[o]=i.value:Object.defineProperty(t,o,i))}return[...e,t]}const ao=r=>"Stale read from <".concat(r,">.");function Ve(r){const n="fallback"in r&&{fallback:()=>r.fallback};return J(oo(()=>r.each,r.children,n||void 0))}function Rt(r){const n=r.keyed,t=J(()=>r.when,void 0,{equals:(e,o)=>n?e===o:!e==!o});return J(()=>{const e=t();if(e){const o=r.children;return typeof o=="function"&&o.length>0?st(()=>o(n?e:()=>{if(!st(t))throw ao("Show");return r.when})):o}return r.fallback},void 0,void 0)}const lo=void 0,[Be,ur]=D(null);class hr{constructor(n){d(this,"releaseCallback");this.releaseCallback=n}}class co extends hr{constructor(t,e){var o,i;super(t);d(this,"textureMap",new Map);d(this,"zeroReferenceTextureSet",new Set);d(this,"options");this.options={textureCleanupIntervalMs:(o=e.textureCleanupIntervalMs)!=null?o:1e4,textureCleanupAgeThreadholdMs:(i=e.textureCleanupAgeThreadholdMs)!=null?i:6e4},setInterval(()=>{const s=Date.now(),l=this.options.textureCleanupAgeThreadholdMs;for(const c of this.zeroReferenceTextureSet)s-c.lastUpdate>l&&(this.releaseCallback(c.id),this.textureMap.delete(c.id),this.zeroReferenceTextureSet.delete(c))},this.options.textureCleanupIntervalMs)}registerTexture(t){var o;const e=(o=t.options)==null?void 0:o.id;if(k(e,"Texture must have an id to be registered"),!this.textureMap.has(e)){const i={id:e,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(e,i),this.zeroReferenceTextureSet.add(i)}}incrementTextureRefCount(t){var i;const e=(i=t.options)==null?void 0:i.id;k(e,"Texture must have an id to be registered");let o=this.textureMap.get(e);o||(this.registerTexture(t),o=this.textureMap.get(e)),k(o,"Texture must have been registered"),t.txType==="SubTexture"&&this.incrementTextureRefCount(t.props.texture),o.nodeRefCount++,o.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(o)&&this.zeroReferenceTextureSet.delete(o)}decrementTextureRefCount(t){var i;const e=(i=t.options)==null?void 0:i.id;k(e,"Texture must have an id to be registered");const o=this.textureMap.get(e);k(o,"Texture must have been registered"),o.nodeRefCount--,o.lastUpdate=Date.now(),o.nodeRefCount===0&&this.zeroReferenceTextureSet.add(o),t.txType==="SubTexture"&&this.decrementTextureRefCount(t.props.texture)}}class uo extends hr{constructor(t){super(t);d(this,"registry");this.registry=new FinalizationRegistry(t)}registerTexture(t){var e,o;k((e=t.options)==null?void 0:e.id,"Texture must have an ID to be registered"),this.registry.register(t,(o=t.options)==null?void 0:o.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class ho extends Wt{constructor(t,e,o){var b,T;super();d(this,"root",null);d(this,"driver");d(this,"canvas");d(this,"settings");d(this,"nodes",new Map);d(this,"nextTextureId",1);d(this,"textureTracker");const i={appWidth:t.appWidth||1920,appHeight:t.appHeight||1080,deviceLogicalPixelRatio:t.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:t.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(b=t.clearColor)!=null?b:0,coreExtensionModule:t.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(T=t.experimental_FinalizationRegistryTextureUsageTracker)!=null?T:!1,textureCleanupOptions:t.textureCleanupOptions||{},fpsUpdateInterval:t.fpsUpdateInterval||0};this.settings=i;const{appWidth:s,appHeight:l,deviceLogicalPixelRatio:c,devicePhysicalPixelRatio:h}=i,u=p=>{this.driver.releaseTexture(p)},f=i.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=f?new uo(u):new co(u,this.settings.textureCleanupOptions);const g=s*c,v=l*c;this.driver=o;const w=document.createElement("canvas");this.canvas=w,w.width=g*h,w.height=v*h,w.style.width="".concat(g,"px"),w.style.height="".concat(v,"px");let _;if(typeof e=="string"?_=document.getElementById(e):_=e,!_)throw new Error("Could not find target element");o.onCreateNode=p=>{this.nodes.set(p.id,p)},o.onBeforeDestroyNode=p=>{this.nodes.delete(p.id)},o.onFpsUpdate=p=>{this.emit("fpsUpdate",p)},_.appendChild(w)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(t){return this.driver.createNode(this.resolveNodeDefaults(t))}createTextNode(t){var e,o,i,s,l,c,h,u,f,g,v,w,_,b;return this.driver.createTextNode({...this.resolveNodeDefaults(t),text:(e=t.text)!=null?e:"",textRendererOverride:(o=t.textRendererOverride)!=null?o:null,fontSize:(i=t.fontSize)!=null?i:16,fontFamily:(s=t.fontFamily)!=null?s:"sans-serif",fontStyle:(l=t.fontStyle)!=null?l:"normal",fontWeight:(c=t.fontWeight)!=null?c:"normal",fontStretch:(h=t.fontStretch)!=null?h:"normal",textAlign:(u=t.textAlign)!=null?u:"left",contain:(f=t.contain)!=null?f:"none",scrollable:(g=t.scrollable)!=null?g:!1,scrollY:(v=t.scrollY)!=null?v:0,offsetY:(w=t.offsetY)!=null?w:0,letterSpacing:(_=t.letterSpacing)!=null?_:0,debug:(b=t.debug)!=null?b:{}})}resolveNodeDefaults(t){var c,h,u,f,g,v,w,_,b,T,p,x,m,C,F,I,S,y,R,E,z,L,B,O,H,U,at,Et,ne,we,_e,Mt,xt,ut,Z,Y,It,rt,zt,Se,Te,Nt,Pt,$t,re;const e=(c=t.color)!=null?c:4294967295,o=(f=(u=(h=t.colorTl)!=null?h:t.colorTop)!=null?u:t.colorLeft)!=null?f:e,i=(w=(v=(g=t.colorTr)!=null?g:t.colorTop)!=null?v:t.colorRight)!=null?w:e,s=(T=(b=(_=t.colorBl)!=null?_:t.colorBottom)!=null?b:t.colorLeft)!=null?T:e,l=(m=(x=(p=t.colorBr)!=null?p:t.colorBottom)!=null?x:t.colorRight)!=null?m:e;return{x:(C=t.x)!=null?C:0,y:(F=t.y)!=null?F:0,width:(I=t.width)!=null?I:0,height:(S=t.height)!=null?S:0,alpha:(y=t.alpha)!=null?y:1,clipping:(R=t.clipping)!=null?R:!1,color:e,colorTop:(E=t.colorTop)!=null?E:e,colorBottom:(z=t.colorBottom)!=null?z:e,colorLeft:(L=t.colorLeft)!=null?L:e,colorRight:(B=t.colorRight)!=null?B:e,colorBl:s,colorBr:l,colorTl:o,colorTr:i,zIndex:(O=t.zIndex)!=null?O:0,zIndexLocked:(H=t.zIndexLocked)!=null?H:0,parent:(U=t.parent)!=null?U:null,texture:(at=t.texture)!=null?at:null,shader:(Et=t.shader)!=null?Et:null,src:(ne=t.src)!=null?ne:"",scale:(we=t.scale)!=null?we:null,scaleX:(Mt=(_e=t.scaleX)!=null?_e:t.scale)!=null?Mt:1,scaleY:(ut=(xt=t.scaleY)!=null?xt:t.scale)!=null?ut:1,mount:(Z=t.mount)!=null?Z:0,mountX:(It=(Y=t.mountX)!=null?Y:t.mount)!=null?It:0,mountY:(zt=(rt=t.mountY)!=null?rt:t.mount)!=null?zt:0,pivot:(Se=t.pivot)!=null?Se:.5,pivotX:(Nt=(Te=t.pivotX)!=null?Te:t.pivot)!=null?Nt:.5,pivotY:($t=(Pt=t.pivotY)!=null?Pt:t.pivot)!=null?$t:.5,rotation:(re=t.rotation)!=null?re:0}}destroyNode(t){return this.driver.destroyNode(t)}createTexture(t,e,o){const i=this.nextTextureId++,s={descType:"texture",txType:t,props:e,options:{...o,id:i}};return this.textureTracker.registerTexture(s),s}createShader(t,e){return{descType:"shader",shType:t,props:e}}getNodeById(t){return this.nodes.get(t)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class fo extends Wt{constructor(t,e,o){super();d(this,"node");d(this,"props");d(this,"settings");d(this,"propStartValues",{});d(this,"restoreValues",{});d(this,"progress",0);d(this,"timingFunction");d(this,"propsList");this.node=t,this.props=e,this.settings=o,this.propStartValues={},this.propsList=Object.keys(e),this.propsList.forEach(i=>{this.propStartValues[i]=t[i]}),this.timingFunction=i=>i,o.easing&&typeof o.easing=="string"&&(this.timingFunction=$r(o.easing))}reset(){this.progress=0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(t=>{this.node[t]=this.propStartValues[t]})}reverse(){this.progress=0,Object.keys(this.props).forEach(t=>{const e=this.props[t],o=this.propStartValues[t];this.props[t]=o,this.propStartValues[t]=e}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(t,e,o){return(this.timingFunction(t)||t)*(o-e)+e}update(t){const{duration:e,loop:o,easing:i}=this.settings;if(!e){this.emit("finished",{});return}if(this.progress+=t/e,this.progress>1)return this.progress=o?0:1,this.emit("finished",{});for(let s=0;s<this.propsList.length;s++){const l=this.propsList[s],c=this.props[l],h=this.propStartValues[l],u=c;if(l.indexOf("color")!==-1){if(h===u){this.node[l]=h;continue}if(i){const f=this.timingFunction(this.progress)||this.progress,g=An(h,u,f);this.node[l]=g;continue}this.node[l]=An(h,u,this.progress);continue}if(i){this.node[l]=this.applyEasing(this.progress,h,u);continue}this.node[l]=h+(u-h)*this.progress}}}class go{constructor(n,t){d(this,"manager");d(this,"animation");d(this,"stoppedPromise",null);d(this,"stoppedResolve",null);d(this,"state");this.manager=n,this.animation=t,this.state="stopped"}start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){this.makeStoppedPromise();const n=this.stoppedPromise;return k(n),n}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(n=>{this.stoppedResolve=n}))}finished(){k(this.stoppedResolve);const{loop:n,stopMethod:t}=this.animation.settings;if(t==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!n&&this.manager.unregisterAnimation(this.animation)}}const G=0,V=3,nt=6,X=1,K=4,ot=7,ht=2,dt=5,ft=8;class ct{constructor(n){d(this,"data");n?(this.data=new Float32Array(9),this.data[G]=n[0],this.data[V]=n[3],this.data[nt]=n[6],this.data[X]=n[1],this.data[K]=n[4],this.data[ot]=n[7],this.data[ht]=n[2],this.data[dt]=n[5],this.data[ft]=n[8]):this.data=new Float32Array(9)}static get temp(){return po}static multiply(n,t,e){const o=n.data[G]*t.data[G]+n.data[V]*t.data[X]+n.data[nt]*t.data[ht],i=n.data[G]*t.data[V]+n.data[V]*t.data[K]+n.data[nt]*t.data[dt],s=n.data[G]*t.data[nt]+n.data[V]*t.data[ot]+n.data[nt]*t.data[ft],l=n.data[X]*t.data[G]+n.data[K]*t.data[X]+n.data[ot]*t.data[ht],c=n.data[X]*t.data[V]+n.data[K]*t.data[K]+n.data[ot]*t.data[dt],h=n.data[X]*t.data[nt]+n.data[K]*t.data[ot]+n.data[ot]*t.data[ft],u=n.data[ht]*t.data[G]+n.data[dt]*t.data[X]+n.data[ft]*t.data[ht],f=n.data[ht]*t.data[V]+n.data[dt]*t.data[K]+n.data[ft]*t.data[dt],g=n.data[ht]*t.data[nt]+n.data[dt]*t.data[ot]+n.data[ft]*t.data[ft];return e||(e=new ct),e.data[G]=o,e.data[V]=i,e.data[nt]=s,e.data[X]=l,e.data[K]=c,e.data[ot]=h,e.data[ht]=u,e.data[dt]=f,e.data[ft]=g,e}static identity(n){return n||(n=new ct),n.data[G]=1,n.data[V]=0,n.data[nt]=0,n.data[X]=0,n.data[K]=1,n.data[ot]=0,n.data[ht]=0,n.data[dt]=0,n.data[ft]=1,n}static translate(n,t,e){return e||(e=new ct),e.data[G]=1,e.data[V]=0,e.data[nt]=n,e.data[X]=0,e.data[K]=1,e.data[ot]=t,e.data[ht]=0,e.data[dt]=0,e.data[ft]=1,e}static scale(n,t,e){return e||(e=new ct),e.data[G]=n,e.data[V]=0,e.data[nt]=0,e.data[X]=0,e.data[K]=t,e.data[ot]=0,e.data[ht]=0,e.data[dt]=0,e.data[ft]=1,e}static rotate(n,t){const e=Math.cos(n),o=Math.sin(n);return t||(t=new ct),t.data[G]=e,t.data[V]=-o,t.data[nt]=0,t.data[X]=o,t.data[K]=e,t.data[ot]=0,t.data[ht]=0,t.data[dt]=0,t.data[ft]=1,t}static copy(n,t,e){return t||(t=new ct),t.data[0]=n.data[0],t.data[1]=n.data[1],t.data[2]=n.data[2],t.data[3]=n.data[3],t.data[4]=n.data[4],t.data[5]=n.data[5],t.data[6]=n.data[6],t.data[7]=n.data[7],t.data[8]=n.data[8],t}translate(n,t){return this.data[nt]=this.data[G]*n+this.data[V]*t+this.data[nt],this.data[ot]=this.data[X]*n+this.data[K]*t+this.data[ot],this}scale(n,t){return this.data[G]=this.data[G]*n,this.data[V]=this.data[V]*t,this.data[X]=this.data[X]*n,this.data[K]=this.data[K]*t,this}rotate(n){if(n===0||!(n%Math.PI*2))return this;const t=Math.cos(n),e=Math.sin(n),o=this.data[G]*t+this.data[V]*e,i=this.data[V]*t-this.data[G]*e,s=this.data[X]*t+this.data[K]*e,l=this.data[K]*t-this.data[X]*e;return this.data[G]=o,this.data[V]=i,this.data[X]=s,this.data[K]=l,this}multiply(n){return ct.multiply(this,n,this)}get tx(){return this.data[nt]}get ty(){return this.data[ot]}get ta(){return this.data[G]}get tb(){return this.data[V]}get tc(){return this.data[X]}get td(){return this.data[K]}transformPoint(n,t){return[this.data[G]*n+this.data[V]*t+this.data[nt],this.data[X]*n+this.data[K]*t+this.data[X]]}}const po=new ct;class Cn extends Wt{constructor(t,e){super();d(this,"stage");d(this,"children",[]);d(this,"props");d(this,"recalculationType",0);d(this,"hasUpdates",!0);d(this,"globalTransform");d(this,"scaleRotateTransform");d(this,"localTransform");d(this,"clippingRect",null);d(this,"parentClippingRect",null);d(this,"isComplex",!1);d(this,"onTextureLoaded",(t,e)=>{this.emit("loaded",{type:"texture",dimensions:e})});d(this,"onTextureFailed",(t,e)=>{this.emit("failed",{type:"texture",error:e})});this.stage=t,this.props={...e,parent:null},this.parent=e.parent,this.updateScaleRotateTransform()}loadTexture(t,e,o=null){this.props.texture&&this.unloadTexture();const{txManager:i}=this.stage,s=i.loadTexture(t,e,o);this.props.texture=s,this.props.textureOptions=o,queueMicrotask(()=>{s.state==="loaded"?this.onTextureLoaded(s,s.dimensions):s.state==="failed"&&this.onTextureFailed(s,s.error),s.on("loaded",this.onTextureLoaded),s.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null}loadShader(t,e){const o=this.stage.renderer.getShaderManager();k(o);const{shader:i,props:s}=o.loadShader(t,e);this.props.shader=i,this.props.shaderProps=s}setHasUpdates(){this.hasUpdates=!0}setChildrenHasUpdates(){this.children.forEach(t=>{t.setRecalculationType(2)})}setParentHasUpdates(){this.props.parent&&this.props.parent.setRecalculationType(1)}setRecalculationType(t){this.recalculationType|=t,this.setHasUpdates(),this.setParentHasUpdates(),t&4&&this.setChildrenHasUpdates()}sortChildren(){this.children.sort((t,e)=>t.zIndex-e.zIndex)}updateScaleRotateTransform(){this.setRecalculationType(4),this.scaleRotateTransform=ct.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY),this.updateLocalTransform()}updateLocalTransform(){k(this.scaleRotateTransform),this.setRecalculationType(2);const t=this.props.pivotX*this.props.width,e=this.props.pivotY*this.props.height,o=this.props.mountX*this.props.width,i=this.props.mountY*this.props.height;this.localTransform=ct.translate(t-o+this.props.x,e-i+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-t,-e)}update(t,e=null){var i;k(this.localTransform);const o=(i=this.parent)==null?void 0:i.globalTransform;o?this.globalTransform=ct.copy(o,this.globalTransform).multiply(this.localTransform):this.globalTransform=ct.copy(this.localTransform,this.globalTransform),this.calculateClippingRect(e),this.children.length&&this.children.forEach(s=>{s.update(t,this.clippingRect)}),this.recalculationType&8&&this.sortChildren(),this.hasUpdates=!1,this.recalculationType=0}calculateClippingRect(t=null){if(!this.globalTransform)return;if(!this.props.clipping&&!t){this.clippingRect=null;return}if(this.parentClippingRect===t&&this.clippingRect)return;const e=this.globalTransform,o=e.tb!==0||e.tc!==0;let i=this.props.clipping&&!o?{x:e.tx,y:e.ty,width:this.width*e.ta,height:this.height*e.td}:null;t&&i?i=Qn(t,i):t&&(i=t),this.parentClippingRect=t,this.clippingRect=i}renderQuads(t){const{width:e,height:o,colorTl:i,colorTr:s,colorBl:l,colorBr:c,texture:h,textureOptions:u,shader:f,shaderProps:g}=this.props,{zIndex:v,worldAlpha:w,globalTransform:_,clippingRect:b}=this;k(_),t.addQuad({width:e,height:o,colorTl:i,colorTr:s,colorBl:l,colorBr:c,texture:h,textureOptions:u,zIndex:v,shader:f,shaderProps:g,alpha:w,clippingRect:b,tx:_.tx,ty:_.ty,ta:_.ta,tb:_.tb,tc:_.tc,td:_.td})}get id(){return this.props.id}get x(){return this.props.x}set x(t){this.props.x!==t&&(this.props.x=t,this.updateLocalTransform())}get absX(){var t,e,o;return this.props.x+(((t=this.props.parent)==null?void 0:t.absX)||((o=(e=this.props.parent)==null?void 0:e.globalTransform)==null?void 0:o.tx)||0)}get absY(){var t,e;return this.props.y+((e=(t=this.props.parent)==null?void 0:t.absY)!=null?e:0)}get y(){return this.props.y}set y(t){this.props.y!==t&&(this.props.y=t,this.updateLocalTransform())}get width(){return this.props.width}set width(t){this.props.width!==t&&(this.props.width=t,this.updateLocalTransform())}get height(){return this.props.height}set height(t){this.props.height!==t&&(this.props.height=t,this.updateLocalTransform())}get scale(){return this.scaleX}set scale(t){this.scaleX=t,this.scaleY=t}get scaleX(){return this.props.scaleX}set scaleX(t){this.props.scaleX!==t&&(this.props.scaleX=t,this.updateScaleRotateTransform())}get scaleY(){return this.props.scaleY}set scaleY(t){this.props.scaleY!==t&&(this.props.scaleY=t,this.updateScaleRotateTransform())}get worldScaleX(){var t,e;return this.props.scaleX*((e=(t=this.props.parent)==null?void 0:t.worldScaleX)!=null?e:1)||this.props.scaleX}get worldScaleY(){var t,e;return this.props.scaleY*((e=(t=this.props.parent)==null?void 0:t.worldScaleY)!=null?e:1)||this.props.scaleY}get mount(){return this.props.mount}set mount(t){this.props.mountX=t,this.props.mountY=t,this.props.mount=t,this.updateLocalTransform()}get mountX(){return this.props.mountX}set mountX(t){this.props.mountX=t,this.updateLocalTransform()}get mountY(){return this.props.mountY}set mountY(t){this.props.mountY=t,this.updateLocalTransform()}get pivot(){return this.props.pivot}set pivot(t){(this.props.pivotX!==t||this.props.pivotY!==t)&&(this.props.pivotX=t,this.props.pivotY=t,this.updateLocalTransform())}get pivotX(){return this.props.pivotX}set pivotX(t){this.props.pivotX=t,this.updateLocalTransform()}get pivotY(){return this.props.pivotY}set pivotY(t){this.props.pivotY=t,this.updateLocalTransform()}get rotation(){return this.props.rotation}set rotation(t){this.props.rotation!==t&&(this.props.rotation=t,this.updateScaleRotateTransform())}get alpha(){return this.props.alpha}set alpha(t){this.props.alpha=t,this.setRecalculationType(1)}get worldAlpha(){const t=this.props,e=t.parent;return t.alpha*((e==null?void 0:e.worldAlpha)||1)}get clipping(){return this.props.clipping}set clipping(t){this.props.clipping=t,this.clippingRect=null,this.setRecalculationType(4)}get color(){return this.props.color}set color(t){(this.props.colorTl!==t||this.props.colorTr!==t||this.props.colorBl!==t||this.props.colorBr!==t)&&(this.colorTl=t,this.colorTr=t,this.colorBl=t,this.colorBr=t),this.props.color=t,this.setRecalculationType(2)}get colorTop(){return this.props.colorTop}set colorTop(t){(this.props.colorTl!==t||this.props.colorTr!==t)&&(this.colorTl=t,this.colorTr=t),this.props.colorTop=t,this.setRecalculationType(2)}get colorBottom(){return this.props.colorBottom}set colorBottom(t){(this.props.colorBl!==t||this.props.colorBr!==t)&&(this.colorBl=t,this.colorBr=t),this.props.colorBottom=t,this.setRecalculationType(2)}get colorLeft(){return this.props.colorLeft}set colorLeft(t){(this.props.colorTl!==t||this.props.colorBl!==t)&&(this.colorTl=t,this.colorBl=t),this.props.colorLeft=t,this.setRecalculationType(2)}get colorRight(){return this.props.colorRight}set colorRight(t){(this.props.colorTr!==t||this.props.colorBr!==t)&&(this.colorTr=t,this.colorBr=t),this.props.colorRight=t,this.setRecalculationType(2)}get colorTl(){return this.props.colorTl}set colorTl(t){this.props.colorTl=t,this.setRecalculationType(2)}get colorTr(){return this.props.colorTr}set colorTr(t){this.props.colorTr=t,this.setRecalculationType(2)}get colorBl(){return this.props.colorBl}set colorBl(t){this.props.colorBl=t,this.setRecalculationType(2)}get colorBr(){return this.props.colorBr}set colorBr(t){this.props.colorBr=t,this.setRecalculationType(2)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(t){this.props.zIndexLocked=t}get zIndex(){var i,s;const t=this.props,e=t.zIndex||0,o=((i=t.parent)==null?void 0:i.zIndex)||0;return(s=t.parent)!=null&&s.zIndexLocked?e<o?e:o:e}set zIndex(t){var e;this.props.zIndex=t,(e=this.props.parent)==null||e.setRecalculationType(8)}get parent(){return this.props.parent}set parent(t){const e=this.props.parent;if(e!==t){if(this.props.parent=t,e){const o=e.children.indexOf(this);k(o!==-1,"CoreNode.parent: Node not found in old parent's children!"),e.children.splice(o,1)}t&&(t.children.push(this),t.setRecalculationType(8)),this.updateScaleRotateTransform()}}}let mo=1;function Rn(){return mo++}class cn extends Wt{constructor(t,e,o,i){var s;super();d(this,"rendererMain");d(this,"stage");d(this,"id");d(this,"coreNode");d(this,"_children",[]);d(this,"_src","");d(this,"_parent",null);d(this,"_texture",null);d(this,"_shader",null);d(this,"onTextureLoaded",(t,e)=>{this.emit("loaded",e)});d(this,"onTextureFailed",(t,e)=>{this.emit("failed",e)});this.rendererMain=e,this.stage=o,this.id=(s=i==null?void 0:i.id)!=null?s:Rn(),this.coreNode=i||new Cn(this.stage,{id:this.id,x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=t.parent,this.shader=t.shader,this.texture=t.texture,this.src=t.src}get x(){return this.coreNode.x}set x(t){this.coreNode.x=t}get y(){return this.coreNode.y}set y(t){this.coreNode.y=t}get width(){return this.coreNode.width}set width(t){this.coreNode.width=t}get height(){return this.coreNode.height}set height(t){this.coreNode.height=t}get alpha(){return this.coreNode.alpha}set alpha(t){this.coreNode.alpha=t}get clipping(){return this.coreNode.clipping}set clipping(t){this.coreNode.clipping=t}get color(){return this.coreNode.color}set color(t){this.coreNode.color=t}get colorTop(){return this.coreNode.colorTop}set colorTop(t){this.coreNode.colorTop=t}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(t){this.coreNode.colorBottom=t}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(t){this.coreNode.colorLeft=t}get colorRight(){return this.coreNode.colorRight}set colorRight(t){this.coreNode.colorRight=t}get colorTl(){return this.coreNode.colorTl}set colorTl(t){this.coreNode.colorTl=t}get colorTr(){return this.coreNode.colorTr}set colorTr(t){this.coreNode.colorTr=t}get colorBl(){return this.coreNode.colorBl}set colorBl(t){this.coreNode.colorBl=t}get colorBr(){return this.coreNode.colorBr}set colorBr(t){this.coreNode.colorBr=t}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(t){t!==null&&(this.coreNode.scaleX=t,this.coreNode.scaleY=t)}get scaleX(){return this.coreNode.scaleX}set scaleX(t){this.coreNode.scaleX=t}get scaleY(){return this.coreNode.scaleY}set scaleY(t){this.coreNode.scaleY=t}get mount(){return this.coreNode.mount}set mount(t){this.coreNode.mount=t}get mountX(){return this.coreNode.mountX}set mountX(t){this.coreNode.mountX=t}get mountY(){return this.coreNode.mountY}set mountY(t){this.coreNode.mountY=t}get pivot(){return this.coreNode.pivot}set pivot(t){this.coreNode.pivot=t}get pivotX(){return this.coreNode.pivotX}set pivotX(t){this.coreNode.pivotX=t}get pivotY(){return this.coreNode.pivotY}set pivotY(t){this.coreNode.pivotY=t}get rotation(){return this.coreNode.rotation}set rotation(t){this.coreNode.rotation=t}get parent(){return this._parent}set parent(t){var o;const e=this._parent;if(this._parent=t,this.coreNode.parent=(o=t==null?void 0:t.coreNode)!=null?o:null,e){const i=e.children.indexOf(this);k(i!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),e.children.splice(i,1)}t&&t.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(t){this.coreNode.zIndex=t}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(t){this.coreNode.zIndexLocked=t}get src(){return this._src}set src(t){if(this._src!==t){if(this._src=t,!t){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:t})}}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),t&&this.rendererMain.textureTracker.incrementTextureRefCount(t),this._texture=t,t?this.coreNode.loadTexture(t.txType,t.props,t.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(t){this._shader!==t&&(this._shader=t,t&&this.coreNode.loadShader(t.shType,t.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(t,e){const o=new fo(this.coreNode,t,e);return new go(this.stage.animationManager,o)}}class xo{constructor(n){d(this,"root");this.root=n}getNodeByType(n){return[]}getNodeById(n){return null}update(n){this.root.update(n)}}const yo=r=>{const n=()=>{r.updateAnimations(),r.drawFrame(),requestAnimationFrame(n)};requestAnimationFrame(n)},vo=()=>performance?performance.now():Date.now();class dr extends me{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(n){const{gl:t}=this;t.getParameter(t.TEXTURE_BINDING_2D)!==n[0].ctxTexture&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n[0].ctxTexture))}}d(dr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class fr extends me{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});d(this,"supportsIndexedTextures",!0)}bindTextures(t){const{renderer:e,gl:o}=this;if(t.length>e.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(e.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));t.forEach((s,l)=>{o.activeTexture(o.TEXTURE0+l),o.bindTexture(o.TEXTURE_2D,s.ctxTexture)});const i=Array.from(Array(t.length).keys());this.setUniform("u_textures[0]",i)}}d(fr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:t=>"\n      #define txUnits ".concat(t,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(t,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(t).keys()).map(e=>"\n          ".concat(e!==0?"else ":"","if (idx == ").concat(e,") {\n            return texture2D(textures[").concat(e,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});class tt{constructor(n){d(this,"priority",1);d(this,"name","");d(this,"ref");d(this,"target");d(this,"passParameters","");d(this,"declaredUniforms","");d(this,"uniformInfo",{});const{ref:t,target:e,props:o={}}=n;this.ref=t,this.target=e;const i={},s=[];let l="";const c=this.constructor.uniforms||{};for(const h in c){const u=c[h],f=u.type,g="".concat(t,"_").concat(h);let v="";u.size&&(v="[".concat(u.size(o),"]")),s.push(g),l+="uniform ".concat(f," ").concat(g).concat(v,";"),i[h]={name:g,uniform:c[h].method}}this.passParameters=s.join(","),this.declaredUniforms=l,this.uniformInfo=i}static getEffectKey(n){return""}static getMethodParameters(n,t){const e=[];for(const o in n){const i=n[o];let s="";i.size&&(s="[".concat(i.size(t),"]")),e.push("".concat(i.type," ").concat(o).concat(s))}return e.join(",")}static resolveDefaults(n){return{}}static makeEffectKey(n){return!1}}d(tt,"uniforms",{}),d(tt,"methods"),d(tt,"onShaderMask"),d(tt,"onColorize"),d(tt,"onEffectMask");const bt=class bt extends me{constructor(t,e,o){const i=bt.createShader(e,o);super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});d(this,"effects",[]);this.effects=i.effects}bindTextures(t){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}bindProps(t){var o;const e=this.renderer.shManager.getRegisteredEffects();(o=t.effects)==null||o.forEach((i,s)=>{var f;const l=this.effects[s],c=e[l.name],h=(f=i.props)!=null?f:{},u=l.uniformInfo;Object.keys(h).forEach(g=>{const v=c.uniforms[g],w=u[g];let _=v.validator?v.validator(h[g],h):h[g];Array.isArray(_)&&(_=new Float32Array(_)),this.setUniform(w.name,_)})})}static createShader(t,e){const o={},i={};let s="";const l=[],c=[],h=t.effects.map(w=>{const _=e[w.type],b=_.getEffectKey(w.props||{});o[b]=o[b]?++o[b]:1;const T=o[b];T===1&&c.push({key:b,type:w.type,props:w.props});const p=new _({ref:"".concat(b).concat(T===1?"":T),target:b,props:w.props});return s+=p.declaredUniforms,l.push(...Object.values(p.uniformInfo)),p});let u="";c==null||c.forEach(w=>{var I;const _=e[w.type],b=_.resolveDefaults((I=w.props)!=null?I:{}),T=[];for(const S in _.methods){let y=S;const R=_.methods[S];i[S]&&i[S]!==R&&(y=bt.resolveMethodDuplicate(S,R,i)),i[y]=R.replace("function",y),T.push({m:S,cm:y})}let p=_.onShaderMask instanceof Function?_.onShaderMask(b):_.onShaderMask,x=_.onColorize instanceof Function?_.onColorize(b):_.onColorize,m=_.onEffectMask instanceof Function?_.onEffectMask(b):_.onEffectMask;T.forEach(S=>{const{m:y,cm:R}=S,E=new RegExp("\\$".concat(y),"g");p&&(p=p.replace(E,R)),x&&(x=x.replace(E,R)),m&&(m=m.replace(E,R))});const C=_.getMethodParameters(_.uniforms,b),F=C.length>0?", ".concat(C):"";p&&(u+="\n        float fx_".concat(w.key,"_onShaderMask(float shaderMask ").concat(F,") {\n          ").concat(p,"\n        }\n        ")),x&&(u+="\n          vec4 fx_".concat(w.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(F,") {\n            ").concat(x,"\n          }\n        ")),m&&(u+="\n          vec4 fx_".concat(w.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(F,") {\n            ").concat(m,"\n          }\n        "))});let f="";for(const w in i)f+=i[w];let g="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",v="\n\n    ";for(let w=0;w<h.length;w++){const _=h[w],b=_.passParameters.length>0?", ".concat(_.passParameters):"",T=e[_.name];T.onShaderMask&&(v+="\n        shaderMask = fx_".concat(_.target,"_onShaderMask(shaderMask ").concat(b,");\n        ")),T.onColorize&&(v+="\n        maskColor = fx_".concat(_.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(b,");\n        ")),T.onEffectMask&&(g="fx_".concat(_.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(b,")"));const p=h[w+1];(p===void 0||e[p.name].onEffectMask)&&(v+="\n          shaderColor = ".concat(g,";\n        "))}return{effects:h,uniforms:l,fragment:bt.fragment(s,f,u,v),vertex:bt.vertex()}}static resolveMethodDuplicate(t,e,o,i=0){const s=t+(i>0?i:"");return o[s]&&o[s]!==e?this.resolveMethodDuplicate(t,e,o,++i):s}static resolveDefaults(t,e){var o;return{effects:((o=t.effects)!=null?o:[]).map(i=>({type:i.type,props:e[i.type].resolveDefaults(i.props||{})})),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(t,e){var i;let o="";return(i=t.effects)==null||i.forEach(s=>{const c=e[s.type].getEffectKey(s.props||{});o+=",".concat(c)}),"DynamicShader".concat(o)}};d(bt,"z$__type__Props"),d(bt,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),d(bt,"fragment",(t,e,o,i)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(t,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(e,"\n\n    ").concat(o,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(i,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let Jt=bt;class un extends me{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(n){return{radius:n.radius||10,$dimensions:{width:0,height:0}}}bindTextures(n){const{gl:t}=this;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n[0].ctxTexture)}bindProps(n){this.setUniform("u_radius",n.radius)}canBatchShaderProps(n,t){return n.radius===t.radius&&n.$dimensions.width===t.$dimensions.width&&n.$dimensions.height===t.$dimensions.height}}d(un,"z$__type__Props"),d(un,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const wo=new Float32Array([1,0,0,0,1,0,0,0,1]),Ue=class Ue extends me{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(n){const{gl:t}=this;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n[0].ctxTexture)}bindProps(n){const t=Ue.resolveDefaults(n);for(const e in t)if(e==="transform")this.setUniform("u_transform",!1,t[e]);else if(e==="scrollY")this.setUniform("u_scrollY",t[e]);else if(e==="color"){const o=Tt(t.color);this.setUniform("u_color",o)}else e==="size"?this.setUniform("u_size",t[e]):e==="distanceRange"?this.setUniform("u_distanceRange",t[e]):e==="debug"&&this.setUniform("u_debug",t[e]?1:0)}static resolveDefaults(n={}){var t,e,o,i,s,l;return{transform:(t=n.transform)!=null?t:wo,scrollY:(e=n.scrollY)!=null?e:0,color:(o=n.color)!=null?o:4294967295,size:(i=n.size)!=null?i:16,distanceRange:(s=n.distanceRange)!=null?s:1,debug:(l=n.debug)!=null?l:!1}}};d(Ue,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let hn=Ue;class Xt extends tt{constructor(){super(...arguments);d(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(t){var e;return{radius:(e=t.radius)!=null?e:10}}}d(Xt,"z$__type__Props"),d(Xt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:t=>{let e=t;return Array.isArray(e)?e.length===2?e=[e[0],e[1],e[0],e[1]]:e.length===3?e=[e[0],e[1],e[2],e[0]]:e.length!==4&&(e=[e[0],e[0],e[0],e[0]]):typeof e=="number"&&(e=[e,e,e,e]),e}}}),d(Xt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),d(Xt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),d(Xt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class se extends tt{constructor(){super(...arguments);d(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(t){var e,o;return{width:(e=t.width)!=null?e:10,color:(o=t.color)!=null?o:4294967295}}}d(se,"z$__type__Props"),d(se,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>Tt(t),method:"uniform4fv",type:"vec4"}}),d(se,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  "),d(se,"onColorize","\n    return color;\n  ");class jt extends tt{constructor(){super(...arguments);d(this,"name","linearGradient")}static getEffectKey(t){return"linearGradient".concat(t.colors.length)}static resolveDefaults(t){var i,s;const e=(i=t.colors)!=null?i:[4278190080,4294967295];let o=t.stops;if(!o){o=[];const l=e.length-1;for(let c=0;c<e.length;c++)o.push(c*(1/l))}return{colors:e,stops:o,angle:(s=t.angle)!=null?s:0}}}d(jt,"z$__type__Props"),d(jt,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:t=>t.map(o=>Tt(o)).reduce((o,i)=>o.concat(i),[]),size:t=>t.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(t,e)=>{var l;const o=(l=e.colors)!=null?l:[];let i=t;const s=t;if(i.length===0||i&&i.length!==o.length){for(let c=0;c<o.length;c++)i[c]?(s[c]=i[c],i[c-1]===void 0&&s[c-2]!==void 0&&(s[c-1]=s[c-2]+(i[c]-s[c-2])/2)):s[c]=c*(1/(o.length-1));i=s}return s},size:t=>t.colors.length,method:"uniform1fv",type:"float"}}),d(jt,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),d(jt,"ColorLoop",t=>{let e="";for(let o=2;o<t;o++)e+="colorOut = mix(colorOut, colors[".concat(o,"], clamp((dist - stops[").concat(o-1,"]) / (stops[").concat(o,"] - stops[").concat(o-1,"]), 0.0, 1.0));");return e}),d(jt,"onColorize",t=>{const e=t.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(e,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class gr extends tt{constructor(){super(...arguments);d(this,"name","grayscale")}static getEffectKey(){return"grayscale"}}d(gr,"onColorize","\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  ");class Ht extends tt{constructor(){super(...arguments);d(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(t){var e,o;return{width:(e=t.width)!=null?e:10,color:(o=t.color)!=null?o:4294967295}}}d(Ht,"z$__type__Props"),d(Ht,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>Tt(t),method:"uniform4fv",type:"vec4"}}),d(Ht,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(Ht,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(Ht,"onColorize","\n    return color;\n  ");class Gt extends tt{constructor(){super(...arguments);d(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(t){var e,o;return{width:(e=t.width)!=null?e:10,color:(o=t.color)!=null?o:4294967295}}}d(Gt,"z$__type__Props"),d(Gt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>Tt(t),method:"uniform4fv",type:"vec4"}}),d(Gt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(Gt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(Gt,"onColorize","\n    return color;\n  ");class Vt extends tt{constructor(){super(...arguments);d(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(t){var e,o;return{width:(e=t.width)!=null?e:10,color:(o=t.color)!=null?o:4294967295}}}d(Vt,"z$__type__Props"),d(Vt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>Tt(t),method:"uniform4fv",type:"vec4"}}),d(Vt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(Vt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(Vt,"onColorize","\n    return color;\n  ");class Kt extends tt{constructor(){super(...arguments);d(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(t){var e,o;return{width:(e=t.width)!=null?e:10,color:(o=t.color)!=null?o:4294967295}}}d(Kt,"z$__type__Props"),d(Kt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>Tt(t),method:"uniform4fv",type:"vec4"}}),d(Kt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(Kt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(Kt,"onColorize","\n    return color;\n  ");class ae extends tt{constructor(){super(...arguments);d(this,"name","glitch")}static getEffectKey(t){return"glitch"}static resolveDefaults(t){var e,o,i,s,l;return{amplitude:(e=t.amplitude)!=null?e:.2,narrowness:(o=t.narrowness)!=null?o:4,blockiness:(i=t.blockiness)!=null?i:2,minimizer:(s=t.minimizer)!=null?s:8,time:(l=t.time)!=null?l:Date.now()}}}d(ae,"z$__type__Props"),d(ae,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:t=>(Date.now()-t)%1e3,type:"float"}}),d(ae,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),d(ae,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class Ie extends tt{constructor(){super(...arguments);d(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(t){var e;return{fade:(e=t.fade)!=null?e:10}}}d(Ie,"z$__type__Props"),d(Ie,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:t=>{let e=t;return Array.isArray(e)?e.length===2?e=[e[0],e[1],e[0],e[1]]:e.length===3?e=[e[0],e[1],e[2],e[0]]:e.length!==4&&(e=[e[0],e[0],e[0],e[0]]):typeof e=="number"&&(e=[e,e,e,e]),e}}}),d(Ie,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class ze extends tt{constructor(){super(...arguments);d(this,"name","radialGradient")}static getEffectKey(t){return"radialGradient".concat(t.colors.length)}static resolveDefaults(t){var i,s,l,c,h;const e=(i=t.colors)!=null?i:[4278190080,4294967295];let o=t.stops;if(!o){o=[];const u=e.length-1;for(let f=0;f<e.length;f++)o.push(f*(1/u))}return{colors:e,stops:o,width:(s=t.width)!=null?s:0,height:(c=(l=t.height)!=null?l:t.width)!=null?c:0,pivot:(h=t.pivot)!=null?h:[.5,.5]}}}d(ze,"z$__type__Props"),d(ze,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:t=>t.map(o=>Tt(o)).reduce((o,i)=>o.concat(i),[]),size:t=>t.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(t,e)=>{var l;const o=(l=e.colors)!=null?l:[];let i=t;const s=t;if(i.length===0||i&&i.length!==o.length){for(let c=0;c<o.length;c++)i[c]?(s[c]=i[c],i[c-1]===void 0&&s[c-2]!==void 0&&(s[c-1]=s[c-2]+(i[c]-s[c-2])/2)):s[c]=c*(1/(o.length-1));i=s}return s},size:t=>t.colors.length,method:"uniform1fv",type:"float"}}),d(ze,"onColorize",t=>{const e=t.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(e,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class qt extends tt{constructor(){super(...arguments);d(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(t){var e,o,i,s,l,c,h;return{width:(e=t.width)!=null?e:10,progress:(o=t.progress)!=null?o:.5,offset:(i=t.offset)!=null?i:0,range:(s=t.range)!=null?s:Math.PI*2,rounded:(l=t.rounded)!=null?l:!1,radius:(c=t.radius)!=null?c:1,color:(h=t.color)!=null?h:4294967295}}}d(qt,"z$__type__Props"),d(qt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:t=>t?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:t=>Tt(t),method:"uniform4fv",type:"vec4"}}),d(qt,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),d(qt,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),d(qt,"onColorize","\n    return color;\n  ");class _o{constructor(){d(this,"shCache",new Map);d(this,"shConstructors",{});d(this,"attachedShader",null);d(this,"effectConstructors",{});d(this,"renderer");this.registerShaderType("DefaultShader",dr),this.registerShaderType("DefaultShaderBatched",fr),this.registerShaderType("RoundedRectangle",un),this.registerShaderType("DynamicShader",Jt),this.registerShaderType("SdfShader",hn),this.registerEffectType("border",se),this.registerEffectType("borderBottom",Vt),this.registerEffectType("borderLeft",Kt),this.registerEffectType("borderRight",Ht),this.registerEffectType("borderTop",Gt),this.registerEffectType("fadeOut",Ie),this.registerEffectType("linearGradient",jt),this.registerEffectType("radialGradient",ze),this.registerEffectType("grayscale",gr),this.registerEffectType("glitch",ae),this.registerEffectType("radius",Xt),this.registerEffectType("radialProgress",qt)}registerShaderType(n,t){this.shConstructors[n]=t}registerEffectType(n,t){this.effectConstructors[n]=t}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(n,t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=this.shConstructors[n];if(!e)throw new Error('Shader type "'.concat(n,'" is not registered'));if(n==="DynamicShader")return this.loadDynamicShader(t);const o=e.resolveDefaults(t),i=e.makeCacheKey(o)||e.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:o};const s=new e(this.renderer,t);return i&&this.shCache.set(i,s),{shader:s,props:o}}loadDynamicShader(n){if(!this.renderer)throw new Error("Renderer is not been defined");const t=Jt.resolveDefaults(n,this.effectConstructors),e=Jt.makeCacheKey(t,this.effectConstructors);if(e&&this.shCache.has(e))return{shader:this.shCache.get(e),props:t};const o=new Jt(this.renderer,n,this.effectConstructors);return e&&this.shCache.set(e,o),{shader:o,props:t}}useShader(n){this.attachedShader!==n&&(this.attachedShader&&this.attachedShader.detach(),n.attach(),this.attachedShader=n)}}class So{constructor(){d(this,"activeAnimations",new Set)}registerAnimation(n){this.activeAnimations.add(n)}unregisterAnimation(n){this.activeAnimations.delete(n)}update(n){this.activeAnimations.forEach(t=>{t.update(n)})}}const de=class de extends Jn{constructor(t,e){super(t);d(this,"props");this.props=de.resolveDefaults(e)}async getTextureData(){const{src:t,premultiplyAlpha:e}=this.props;if(!t)return{data:null};if(t instanceof ImageData)return{data:t,premultiplyAlpha:e};const i=await(await fetch(t)).blob();return{data:await createImageBitmap(i,{premultiplyAlpha:e?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}static makeCacheKey(t){const e=de.resolveDefaults(t);return e.src instanceof ImageData?!1:"ImageTexture,".concat(e.src,",").concat(e.premultiplyAlpha)}static resolveDefaults(t){var e,o;return{src:(e=t.src)!=null?e:"",premultiplyAlpha:(o=t.premultiplyAlpha)!=null?o:!0}}};d(de,"z$__type__Props");let dn=de;const fe=class fe extends Jn{constructor(t,e){super(t);d(this,"props");this.props=fe.resolveDefaults(e)}async getTextureData(){const{width:t,height:e}=this.props,o=t*e*4,i=new Uint8ClampedArray(o);for(let s=0;s<o;s+=4){const l=Math.floor(Math.random()*256);i[s]=l,i[s+1]=l,i[s+2]=l,i[s+3]=255}return{data:new ImageData(i,t,e)}}static makeCacheKey(t){const e=fe.resolveDefaults(t);return"NoiseTexture,".concat(e.width,",").concat(e.height,",").concat(e.cacheId)}static resolveDefaults(t){var e,o,i;return{width:(e=t.width)!=null?e:128,height:(o=t.height)!=null?o:128,cacheId:(i=t.cacheId)!=null?i:0}}};d(fe,"z$__type__Props");let fn=fe;class To{constructor(){d(this,"usedMemory",0);d(this,"txConstructors",{});d(this,"textureKeyCache",new Map);d(this,"textureIdCache",new Map);d(this,"ctxTextureCache",new WeakMap);d(this,"textureRefCountMap",new WeakMap);d(this,"renderer");this.registerTextureType("ImageTexture",dn),this.registerTextureType("ColorTexture",Dr),this.registerTextureType("NoiseTexture",fn),this.registerTextureType("SubTexture",Br)}registerTextureType(n,t){this.txConstructors[n]=t}loadTexture(n,t,e=null){var s;const o=this.txConstructors[n];if(!o)throw new Error('Texture type "'.concat(n,'" is not registered'));let i;if((e==null?void 0:e.id)!==void 0&&this.textureIdCache.has(e.id)&&(i=this.textureIdCache.get(e.id)),!i){const l=e==null?void 0:e.id,c=(s=e==null?void 0:e.cacheKey)!=null?s:o.makeCacheKey(t);c&&this.textureKeyCache.has(c)?i=this.textureKeyCache.get(c):i=new o(this,t),l&&this.addTextureIdToCache(l,c,i)}return e!=null&&e.preload&&this.getCtxTexture(i).load(),i}addTextureIdToCache(n,t,e){const{textureIdCache:o,textureRefCountMap:i}=this;o.set(n,e),i.has(e)?i.get(e).count++:(i.set(e,{cacheKey:t,count:1}),t&&this.textureKeyCache.set(t,e))}removeTextureIdFromCache(n){const{textureIdCache:t,textureRefCountMap:e}=this,o=t.get(n);if(o&&(t.delete(n),e.has(o))){const i=e.get(o);k(i),i.count--,i.count===0&&(e.delete(o),i.cacheKey&&this.textureKeyCache.delete(i.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(n){if(this.ctxTextureCache.has(n))return this.ctxTextureCache.get(n);const t=this.renderer.createCtxTexture(n);return this.ctxTextureCache.set(n,t),t}}class pr{constructor(n){d(this,"textRenderers");this.textRenderers=n}addFontFace(n){for(const t in this.textRenderers){const e=this.textRenderers[t];e&&e.isFontFaceSupported(n)&&e.addFontFace(n)}}static resolveFontFace(n,t){const e=[];return n.reduce((i,s)=>{if(i)return i;const l=s[t.fontFamily];if(!l)return;const c=new Set(l);for(const h of c)(h.descriptors.stretch!==t.fontStretch||h.descriptors.style!==t.fontStyle||h.descriptors.weight!==t.fontWeight)&&c.delete(h);return c.values().next().value},void 0)||e[0]}}const bo={x:(r,n)=>{r.props.x=n},y:(r,n)=>{r.props.y=n},width:(r,n)=>{r.props.width=n},height:(r,n)=>{r.props.height=n},color:(r,n)=>{r.props.color=n},zIndex:(r,n)=>{r.props.zIndex=n},fontFamily:(r,n)=>{r.props.fontFamily=n},fontWeight:(r,n)=>{r.props.fontWeight=n},fontStyle:(r,n)=>{r.props.fontStyle=n},fontStretch:(r,n)=>{r.props.fontStretch=n},fontSize:(r,n)=>{r.props.fontSize=n},text:(r,n)=>{r.props.text=n},textAlign:(r,n)=>{r.props.textAlign=n},contain:(r,n)=>{r.props.contain=n},offsetY:(r,n)=>{r.props.offsetY=n},scrollable:(r,n)=>{r.props.scrollable=n},scrollY:(r,n)=>{r.props.scrollY=n},letterSpacing:(r,n)=>{r.props.letterSpacing=n},debug:(r,n)=>{r.props.debug=n}};class mr{constructor(n){d(this,"stage");d(this,"set");this.stage=n;const t={...bo,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(t).map(([e,o])=>[e,(i,s)=>{i.props[e]!==s&&o(i,s)}])))}setStatus(n,t,e){n.status!==t&&(n.status=t,n.emitter.emit(t,e))}scheduleUpdateState(n){n.updateScheduled||(n.updateScheduled=!0,queueMicrotask(()=>{n.updateScheduled=!1,this.updateState(n)}))}}const Co=24;function Ro(r,n,t,e,o,i,s){let l=0;o&&(l=Math.min(Math.max(Math.floor(o.y1/r),0),i.length));const c=0,h=n/t+l*e;if(!(s&&h>=s/t))return{x:c,y:h,lineIndex:l}}class ke{constructor(n,t=0){d(this,"iterator");d(this,"peekBuffer",[]);d(this,"_lastIndex");this.iterator=n,this.iterator=n,this._lastIndex=t-1,this.peekBuffer=[]}next(){const n=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return n.done?this._lastIndex=-1:this._lastIndex++,n}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const n=this.iterator.next();return this.peekBuffer.push(n),n}get lastIndex(){return this._lastIndex}}function*Le(r,n=0){let t=n;for(;t<r.length;){const e=r.codePointAt(t);if(e===void 0)throw new Error("Invalid Unicode code point");yield e,t+=e<=65535?1:2}}function Fo(r,n,t){const e=t.shapeText(n,new ke(Le(r,0),0));let o=0;for(const i of e)i.mapped&&(o+=i.xAdvance);return o}function Eo(r,n,t,e,o,i,s,l,c,h,u,f,g,v,w,_){k(v,"Font face must be loaded"),k(v.loaded,"Font face must be loaded"),k(v.data,"Font face must be loaded"),k(v.shaper,"Font face must be loaded");const b=v.data.info.size,T=l/b,p=i/T,x=c/T,m=f[r],C=(m==null?void 0:m.codepointIndex)||0,F=(m==null?void 0:m.maxX)||0,I=(m==null?void 0:m.maxY)||0;let S=F,y=I,R=n,E=t,z=0;const L={codepointIndex:-1,bufferOffset:-1,xStart:-1},B=v.shaper,O={letterSpacing:x};let H=B.shapeText(O,new ke(Le(e,C),C)),U,at=-1;const Et=[],ne="...",we=s/T,_e=Fo(ne,O,B);let Mt=!0;for(;Mt;){const xt=u!=="both"||_||E+b+b<=we,ut=xt?p:p-_e;let Z=0;for(;(U=H.next())&&!U.done;){const Y=U.value;if(r===f.length)f.push({codepointIndex:Y.cluster,maxY:y,maxX:S});else if(r>f.length)throw new Error("Unexpected lineCache length");if(Y.codepoint===32||Y.codepoint===10?L.codepointIndex!==-1&&(L.codepointIndex=-1,Z=R):L.codepointIndex===-1&&(L.codepointIndex=Y.cluster,L.bufferOffset=z,L.xStart=Z),Y.mapped){const It=R+Y.xOffset+Y.width;if(u!=="none"&&It>=ut&&L.codepointIndex!==-1&&L.codepointIndex<Y.cluster&&L.xStart>0)if(xt){H=B.shapeText(O,new ke(Le(e,L.codepointIndex),L.codepointIndex)),z=L.bufferOffset;break}else H=B.shapeText(O,new ke(Le(ne,0),0)),R=L.xStart,z=L.bufferOffset;else{const rt=R+Y.xOffset,zt=E+Y.yOffset,Se=g?E+b>=g.y1/T:!0,Te=g?E<=g.y2/T:!0;if(Se&&Te){at===-1&&(at=z);const Nt=v.getAtlasEntry(Y.glyphId),Pt=Nt.x/v.data.common.scaleW,$t=Nt.y/v.data.common.scaleH,re=Nt.width/v.data.common.scaleW,Ln=Nt.height/v.data.common.scaleH;h[z++]=rt,h[z++]=zt,h[z++]=Pt,h[z++]=$t,h[z++]=rt+Y.width,h[z++]=zt,h[z++]=Pt+re,h[z++]=$t,h[z++]=rt,h[z++]=zt+Y.height,h[z++]=Pt,h[z++]=$t+Ln,h[z++]=rt+Y.width,h[z++]=zt+Y.height,h[z++]=Pt+re,h[z++]=$t+Ln}y=Math.max(y,zt+Y.height),R+=Y.xAdvance,S=Math.max(S,R)}}else if(Y.codepoint===10)break}at!==-1&&(Et.push({bufferStart:at,bufferEnd:z}),at=-1),R=0,E+=b,r++,L.codepointIndex=-1,Z=0,(!w&&u==="both"&&g&&E>g.y2/T||U&&U.done||u==="both"&&!_&&!xt)&&(Mt=!1)}if(o==="center"){const xt=u==="none"?S:p;for(let ut=0;ut<Et.length;ut++){const Z=Et[ut],Y=h[Z.bufferEnd-4]-h[Z.bufferStart],It=(xt-Y)/2;for(let rt=Z.bufferStart;rt<Z.bufferEnd;rt+=4)h[rt]+=It}}else if(o==="right"){const xt=u==="none"?S:p;for(let ut=0;ut<Et.length;ut++){const Z=Et[ut],Y=Z.bufferEnd===Z.bufferStart?0:h[Z.bufferEnd-4]-h[Z.bufferStart],It=xt-Y;for(let rt=Z.bufferStart;rt<Z.bufferEnd;rt+=4)h[rt]+=It}}return k(U),{bufferNumFloats:z,bufferNumQuads:z/16,layoutNumCharacters:U.done?e.length-C:U.value.cluster-C+1,fullyProcessed:!!U.done,maxX:S,maxY:y}}function Io(r,n,t,e,o,i){const s=e*o,l=i.x1-r,c=i.y1-n;return Yr(i)?{x1:l,y1:c+t-s,x2:l+(i.x2-i.x1),y2:c+t+(i.y2-i.y1)+s}:{x1:0,y1:0,x2:0,y2:0}}const zo=Xe(0,0,0,0);class ko extends mr{constructor(t){super(t);d(this,"ssdfFontFamilies",{});d(this,"msdfFontFamilies",{});d(this,"sdfShader");d(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(t,e)=>{t.props.fontFamily=e,t.trFontFace=void 0,this.invalidateLayoutCache(t)},fontWeight:(t,e)=>{t.props.fontWeight=e,t.trFontFace=void 0,this.invalidateLayoutCache(t)},fontStyle:(t,e)=>{t.props.fontStyle=e,t.trFontFace=void 0,this.invalidateLayoutCache(t)},fontStretch:(t,e)=>{t.props.fontStretch=e,t.trFontFace=void 0,this.invalidateLayoutCache(t)},fontSize:(t,e)=>{t.props.fontSize=e,this.invalidateLayoutCache(t)},text:(t,e)=>{t.props.text=e,this.invalidateLayoutCache(t)},textAlign:(t,e)=>{t.props.textAlign=e,this.invalidateLayoutCache(t)},color:(t,e)=>{t.props.color=e},x:(t,e)=>{t.props.x=e,this.invalidateVisibleWindowCache(t)},y:(t,e)=>{t.props.y=e,this.invalidateVisibleWindowCache(t)},contain:(t,e)=>{t.props.contain=e,this.invalidateLayoutCache(t)},width:(t,e)=>{t.props.width=e,this.invalidateLayoutCache(t)},height:(t,e)=>{t.props.height=e,this.invalidateLayoutCache(t)},offsetY:(t,e)=>{t.props.offsetY=e,this.invalidateLayoutCache(t)},scrollable:(t,e)=>{t.props.scrollable=e,this.invalidateLayoutCache(t)},scrollY:(t,e)=>{t.props.scrollY=e,this.scheduleUpdateState(t)},letterSpacing:(t,e)=>{t.props.letterSpacing=e,this.invalidateLayoutCache(t)},debug:(t,e)=>{t.props.debug=e}}}canRenderFont(t){const{fontFamily:e}=t;return e in this.ssdfFontFamilies||e in this.msdfFontFamilies||e==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(t){return t instanceof Mn}addFontFace(t){k(t instanceof Mn);const e=t.fontFamily,o=t.type==="ssdf"?this.ssdfFontFamilies:t.type==="msdf"?this.msdfFontFamilies:void 0;if(!o){console.warn("Invalid font face type: ".concat(t.type));return}let i=o[e];i||(i=new Set,o[e]=i),i.add(t)}createState(t){return{props:t,status:"initialState",updateScheduled:!1,emitter:new Wt,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(t){let{trFontFace:e}=t;const{textH:o,lineCache:i,debugData:s,forceFullLayoutCalc:l}=t;if(s.updateCount++,t.status==="initialState"&&this.setStatus(t,"loading"),!e&&(e=this.resolveFontFace(t.props),t.trFontFace=e,!e)){const z="SdfTextRenderer: Could not resolve font face for family: '".concat(t.props.fontFamily,"'");console.error(z),this.setStatus(t,"failed",new Error(z));return}if(!e.loaded){e.once("loaded",()=>{this.scheduleUpdateState(t)});return}k(e.data,"Font face data should be loaded");const{text:c,fontSize:h,x:u,y:f,contain:g,width:v,height:w,scrollable:_}=t.props,b=g==="both"&&_?t.props.scrollY:0;let{renderWindow:T}=t;const p=e.data.info.size,x=h/p;t.distanceRange=x*e.data.distanceField.distanceRange;const m=c.length*Co;let C=t.vertexBuffer;(!C||C.length<m)&&(C=new Float32Array(m*2));const F=t.visibleWindow;if(!F.valid){const z=Xe(u,f,g!=="none"?u+v:1/0,g==="both"?f+w:1/0,zo);Zn(this.rendererBounds,z,t.visibleWindow),F.valid=!0}if(!l&&T){if(u+T.x1<=F.x1&&u+T.x2>=F.x2&&f-b+T.y1<=F.y1&&f-b+T.y2>=F.y2){this.setStatus(t,"loaded");return}T=t.renderWindow=void 0,this.setStatus(t,"loading")}const{offsetY:I,textAlign:S}=t.props;if(!T){const z=F.y2-F.y1,L=Math.ceil(z/p);T=Io(u,f,b,p,L,F)}const y=Ro(h,I,x,p,T,i,o);if(!y){this.setStatus(t,"loaded");return}const{letterSpacing:R}=t.props,E=Eo(y.lineIndex,y.x,y.y,c,S,v,w,h,R,C,g,i,T,e,l,_);t.bufferUploaded=!1,t.bufferNumFloats=E.bufferNumFloats,t.bufferNumQuads=E.bufferNumQuads,t.vertexBuffer=C,t.renderWindow=T,s.lastLayoutNumCharacters=E.layoutNumCharacters,s.bufferSize=C.byteLength,E.fullyProcessed&&(t.textW=E.maxX*x,t.textH=E.maxY*x),this.setStatus(t,"loaded")}renderQuads(t,e,o,i){var S,y,R;if(!t.vertexBuffer)return;performance.now();const{renderer:s}=this.stage;this.stage.options;const{fontSize:l,color:c,contain:h,scrollable:u,zIndex:f,debug:g}=t.props,v=h==="both"&&u?t.props.scrollY:0,{textW:w=0,textH:_=0,distanceRange:b,vertexBuffer:T,bufferUploaded:p,trFontFace:x}=t;let{webGlBuffers:m}=t;if(!m){const E=s.gl,z=4*Float32Array.BYTES_PER_ELEMENT,L=E.createBuffer();k(L),t.webGlBuffers=new Or([{buffer:L,attributes:{a_position:{name:"a_position",size:2,type:E.FLOAT,normalized:!1,stride:z,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:E.FLOAT,normalized:!1,stride:z,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),t.bufferUploaded=!1,k(t.webGlBuffers),m=t.webGlBuffers}if(!p){const E=s.gl,z=(S=m==null?void 0:m.getBuffer("a_textureCoordinate"))!=null?S:null;E.bindBuffer(E.ARRAY_BUFFER,z),E.bufferData(E.ARRAY_BUFFER,T,E.STATIC_DRAW),t.bufferUploaded=!0}k(x);const C=new Wr(s.gl,s.options,m,this.sdfShader,{transform:e.data,color:Ur(c,i),size:l/(((y=x.data)==null?void 0:y.info.size)||0),scrollY:v,distanceRange:b,debug:g.sdfShaderDebug},i,o,{height:_,width:w},0,f),F=(R=t.trFontFace)==null?void 0:R.texture;k(F);const I=this.stage.txManager.getCtxTexture(F);C.addTexture(I),C.length=t.bufferNumFloats,C.numQuads=t.bufferNumQuads,s.addRenderOp(C)}resolveFontFace(t){return pr.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],t)}invalidateVisibleWindowCache(t){t.visibleWindow.valid=!1,this.scheduleUpdateState(t)}invalidateLayoutCache(t){t.visibleWindow.valid=!1,t.renderWindow=void 0,t.textH=void 0,t.textW=void 0,t.lineCache=[],this.setStatus(t,"loading"),this.scheduleUpdateState(t)}}const $n=2048;class Lo{constructor(n,t){d(this,"_canvas");d(this,"_context");d(this,"_settings");d(this,"renderInfo");this._canvas=n,this._context=t,this._settings=this.mergeDefaults({})}set settings(n){this._settings=this.mergeDefaults(n)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const n=[this._settings.fontFace],t=[];for(let e=0,o=n.length;e<o;e++)n[e]==="serif"||n[e]==="sans-serif"?t.push(n[e]):t.push('"'.concat(n[e],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(t.join(","))}_load(){if(document.fonts){const n=this._getFontSetting();try{if(!document.fonts.check(n,this._settings.text))return document.fonts.load(n,this._settings.text).catch(t=>{console.warn("[Lightning] Font load error",t,n)}).then(()=>{document.fonts.check(n,this._settings.text)||console.warn("[Lightning] Font not found",n)})}catch(t){console.warn("[Lightning] Can't check font loading for "+n)}}}calculateRenderInfo(){const n={},t=this.getPrecision(),e=this._settings.paddingLeft*t,o=this._settings.paddingRight*t,i=this._settings.fontSize*t;let s=this._settings.offsetY===null?null:this._settings.offsetY*t,l=(this._settings.lineHeight||i)*t;const c=this._settings.w*t,h=this._settings.h*t;let u=this._settings.wordWrapWidth*t;const f=this._settings.cutSx*t,g=this._settings.cutEx*t,v=this._settings.cutSy*t,w=this._settings.cutEy*t,_=(this._settings.letterSpacing||0)*t,b=this._settings.textIndent*t;this.setFontProperties();let T=c||2048/this.getPrecision(),p=T-e;if(p<10&&(T+=10-p,p=10),u||(u=p),this._settings.textOverflow&&!this._settings.wordWrap){let S;switch(this._settings.textOverflow){case"clip":S="";break;case"ellipsis":S=this._settings.maxLinesSuffix;break;default:S=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-b,S)}let x;if(this._settings.wordWrap)x=this.wrapText(this._settings.text,u,_,b);else{x={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const S=x.l.length;for(let y=0;y<S-1;y++)x.n.push(y)}let m=x.l;if(this._settings.maxLines&&m.length>this._settings.maxLines){const S=m.slice(0,this._settings.maxLines);let y=null;if(this._settings.maxLinesSuffix){const B=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,O=this.wrapText(S[S.length-1],u-B,_,b);S[S.length-1]="".concat(O.l[0]).concat(this._settings.maxLinesSuffix),y=[O.l.length>1?O.l[1]:""]}else y=[""];let R;const E=m.length;let z=0;const L=x.n.length;for(R=this._settings.maxLines;R<E;R++)y[z]+="".concat(y[z]?" ":"").concat(m[R]),R+1<L&&x.n[R+1]&&z++;n.remainingText=y.join("\n"),n.moreTextLines=!0,m=S}else n.moreTextLines=!1,n.remainingText="";let C=0;const F=[];for(let S=0;S<m.length;S++){const y=this.measureText(m[S],_)+(S===0?b:0);F.push(y),C=Math.max(C,y)}n.lineWidths=F,c||(T=C+e+o,p=C),l=l||i;let I;if(h)I=h;else{const S=this._settings.textBaseline!="bottom"?.5*i:0;I=l*(m.length-1)+S+Math.max(l,i)+(s||0)}return s===null&&(s=i),n.w=T,n.h=I,n.lines=m,n.precision=t,T||(T=1),I||(I=1),(f||g)&&(T=Math.min(T,g-f)),(v||w)&&(I=Math.min(I,w-v)),n.width=T,n.innerWidth=p,n.height=I,n.fontSize=i,n.cutSx=f,n.cutSy=v,n.cutEx=g,n.cutEy=w,n.lineHeight=l,n.lineWidths=F,n.offsetY=s,n.paddingLeft=e,n.paddingRight=o,n.letterSpacing=_,n.textIndent=b,n}draw(n,t){const e=this.getPrecision(),o=(t==null?void 0:t.lines)||n.lines,i=(t==null?void 0:t.lineWidths)||n.lineWidths,s=t?t.lines.length*n.lineHeight:n.height;this._canvas.width=Math.min(Math.ceil(n.width+this._settings.textRenderIssueMargin),$n),this._canvas.height=Math.min(Math.ceil(s),$n),this.setFontProperties(),n.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(n.cutSx||n.cutSy)&&this._context.translate(-n.cutSx,-n.cutSy);let l,c;const h=[];for(let f=0,g=o.length;f<g;f++)l=f===0?n.textIndent:0,c=f*n.lineHeight+n.offsetY,this._settings.verticalAlign=="middle"?c+=(n.lineHeight-n.fontSize)/2:this._settings.verticalAlign=="bottom"&&(c+=n.lineHeight-n.fontSize),this._settings.textAlign==="right"?l+=n.innerWidth-i[f]:this._settings.textAlign==="center"&&(l+=(n.innerWidth-i[f])/2),l+=n.paddingLeft,h.push({text:o[f],x:l,y:c,w:i[f]});if(this._settings.highlight){const f=this._settings.highlightColor,g=this._settings.highlightHeight*e||n.fontSize*1.5,v=this._settings.highlightOffset*e,w=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*e:n.paddingLeft,_=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*e:n.paddingRight;this._context.fillStyle=Qe(f);for(let b=0;b<h.length;b++){const T=h[b];this._context.fillRect(T.x-w,T.y-n.offsetY+v,T.w+_+w,g)}}let u=null;this._settings.shadow&&(u=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Qe(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*e,this._context.shadowOffsetY=this._settings.shadowOffsetY*e,this._context.shadowBlur=this._settings.shadowBlur*e),this._context.fillStyle=Qe(this._settings.textColor);for(let f=0,g=h.length;f<g;f++){const v=h[f];if(n.letterSpacing===0)this._context.fillText(v.text,v.x,v.y);else{const w=v.text.split("");let _=v.x;for(let b=0,T=w.length;b<T;b++)this._context.fillText(w[b],_,v.y),_+=this.measureText(w[b],n.letterSpacing)}}u&&(this._context.shadowColor=u[0],this._context.shadowOffsetX=u[1],this._context.shadowOffsetY=u[2],this._context.shadowBlur=u[3]),(n.cutSx||n.cutSy)&&this._context.translate(n.cutSx,n.cutSy),this.renderInfo=n}wrapWord(n,t,e){const o=this._context.measureText(e).width,i=n.length,s=this._context.measureText(n).width;if(s<=t)return n;let l=Math.floor(t*i/s),c=this._context.measureText(n.substring(0,l)).width+o;if(c>t)for(;l>0&&(c=this._context.measureText(n.substring(0,l)).width+o,c>t);)l-=1;else for(;l<i;)if(c=this._context.measureText(n.substring(0,l)).width+o,c<t)l+=1;else{l-=1;break}return n.substring(0,l)+(t>=o?e:"")}wrapText(n,t,e,o=0){const i=n.split(/\r?\n/g);let s=[];const l=[];for(let c=0;c<i.length;c++){const h=[];let u="",f=t-o;const g=i[c].split(" ");for(let v=0;v<g.length;v++){const w=this.measureText(g[v],e),_=w+this.measureText(" ",e);v===0||_>f?(v>0&&(h.push(u),u=""),u+=g[v],f=t-w-(v===0?o:0)):(f-=_,u+=" ".concat(g[v]))}h.push(u),u="",s=s.concat(h),c<i.length-1&&l.push(s.length)}return{l:s,n:l}}measureText(n,t=0){return t?n.split("").reduce((e,o)=>e+this._context.measureText(o).width+t,0):this._context.measureText(n).width}mergeDefaults(n){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...n}}}const Dn=typeof self>"u"?globalThis:self;var qn;const Bn=((qn=Dn.document)==null?void 0:qn.fonts)||Dn.fonts;function Ao(r){const{fontFamily:n,fontStyle:t,fontWeight:e,fontStretch:o,fontSize:i}=r;return[t,e,o,"".concat(i,"px"),n].join(" ")}const Mo=Xe(0,0,0,0);class No extends mr{constructor(t){super(t);d(this,"canvas");d(this,"context");d(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let e=this.canvas.getContext("2d");e||(this.canvas=document.createElement("canvas"),e=this.canvas.getContext("2d")),k(e),this.context=e,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(t,e)=>{t.props.fontFamily=e,t.fontInfo=void 0,this.invalidateLayoutCache(t)},fontWeight:(t,e)=>{t.props.fontWeight=e,t.fontInfo=void 0,this.invalidateLayoutCache(t)},fontStyle:(t,e)=>{t.props.fontStyle=e,t.fontInfo=void 0,this.invalidateLayoutCache(t)},fontStretch:(t,e)=>{t.props.fontStretch=e,t.fontInfo=void 0,this.invalidateLayoutCache(t)},fontSize:(t,e)=>{t.props.fontSize=e,t.fontInfo=void 0,this.invalidateLayoutCache(t)},text:(t,e)=>{t.props.text=e,this.invalidateLayoutCache(t)},textAlign:(t,e)=>{t.props.textAlign=e,this.invalidateLayoutCache(t)},color:(t,e)=>{t.props.color=e,this.invalidateLayoutCache(t)},x:(t,e)=>{t.props.x=e,this.invalidateVisibleWindowCache(t)},y:(t,e)=>{t.props.y=e,this.invalidateVisibleWindowCache(t)},contain:(t,e)=>{t.props.contain=e,this.invalidateLayoutCache(t)},width:(t,e)=>{t.props.width=e,this.invalidateLayoutCache(t)},height:(t,e)=>{t.props.height=e,this.invalidateLayoutCache(t)},offsetY:(t,e)=>{t.props.offsetY=e,this.invalidateLayoutCache(t)},scrollY:(t,e)=>{t.props.scrollY=e},letterSpacing:(t,e)=>{t.props.letterSpacing=e,this.invalidateLayoutCache(t)}}}canRenderFont(t){return!0}isFontFaceSupported(t){return t instanceof Nn}addFontFace(t){k(t instanceof Nn),Bn.add(t.fontFace)}createState(t){return{props:t,status:"initialState",updateScheduled:!1,emitter:new Wt,canvasPages:void 0,lightning2TextRenderer:new Lo(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(t){if(t.status==="initialState"&&this.setStatus(t,"loading"),!t.fontInfo){const w=Ao(t.props);if(t.fontInfo={cssString:w,loaded:!1},!t.fontInfo.loaded){Bn.load(w).then(this.onFontLoaded.bind(this,t,w)).catch(this.onFontLoadError.bind(this,t,w));return}}if(!t.fontInfo.loaded)return;t.renderInfo||(t.lightning2TextRenderer.settings={text:t.props.text,textAlign:t.props.textAlign,fontFace:t.props.fontFamily,fontSize:t.props.fontSize,fontStyle:[t.props.fontStretch,t.props.fontStyle,t.props.fontWeight].join(" "),textColor:Tt(t.props.color),offsetY:t.props.fontSize+t.props.offsetY,wordWrap:t.props.contain!=="none",wordWrapWidth:t.props.contain==="none"?void 0:t.props.width,letterSpacing:t.props.letterSpacing},t.renderInfo=t.lightning2TextRenderer.calculateRenderInfo(),t.textH=t.renderInfo.lineHeight*t.renderInfo.lines.length,t.textW=t.renderInfo.width,t.renderWindow=void 0);const{x:e,y:o,width:i,height:s,scrollY:l,contain:c}=t.props,{visibleWindow:h}=t;let{renderWindow:u,canvasPages:f}=t;if(!h.valid){const w=Xe(e,o,c!=="none"?e+i:1/0,c==="both"?o+s:1/0,Mo);Zn(this.rendererBounds,w,h),h.valid=!0}const g=h.y2-h.y1,v=Math.ceil(g/t.renderInfo.lineHeight);if(g===0){f=void 0,u=void 0,this.setStatus(t,"loaded");return}else if(u&&f){const w=e+u.x1,_=o-l+u.y1,b=e+u.x2,T=o-l+u.y2;if(w<=h.x1&&b>=h.x2&&_<=h.y1&&T>=h.y2){this.setStatus(t,"loaded");return}T<h.y2?(u.y1+=v*t.renderInfo.lineHeight,u.y2+=v*t.renderInfo.lineHeight,f.push(f.shift()),f[2].lineNumStart=f[1].lineNumStart+v,f[2].lineNumEnd=f[2].lineNumStart+v,f[2].valid=!1):_>h.y1&&(u.y1-=v*t.renderInfo.lineHeight,u.y2-=v*t.renderInfo.lineHeight,f.unshift(f.pop()),f[0].lineNumStart=f[1].lineNumStart-v,f[0].lineNumEnd=f[0].lineNumStart+v,f[0].valid=!1)}else{const w=t.renderInfo.lineHeight*v,_=Math.ceil(l/w),b=_*v,T=b-v,p=b+v;f=[{texture:f==null?void 0:f[0].texture,lineNumStart:T,lineNumEnd:T+v,valid:!1},{texture:f==null?void 0:f[1].texture,lineNumStart:b,lineNumEnd:b+v,valid:!1},{texture:f==null?void 0:f[2].texture,lineNumStart:p,lineNumEnd:p+v,valid:!1}],t.canvasPages=f;const x=_*w;u={x1:0,y1:x-w,x2:i,y2:x+w*2}}t.renderWindow=u,performance.now();for(const w of f)if(!w.valid){if(w.lineNumStart<0){w.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),w.valid=!0;continue}t.lightning2TextRenderer.draw(t.renderInfo,{lines:t.renderInfo.lines.slice(w.lineNumStart,w.lineNumEnd),lineWidths:t.renderInfo.lineWidths.slice(w.lineNumStart,w.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(w.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),w.valid=!0}this.setStatus(t,"loaded")}renderQuads(t,e,o,i){var I,S,y,R,E,z,L,B,O,H,U,at;const{stage:s}=this,{canvasPages:l,textW:c=0,textH:h=0,renderWindow:u}=t;if(!l||!u)return;const{x:f,y:g,scrollY:v,contain:w,width:_,height:b}=t.props,T={x:f,y:g,width:w!=="none"?_:c,height:w==="both"?b:h};Qn({x:0,y:0,width:s.options.appWidth,height:s.options.appHeight},T),k(l,"canvasPages is not defined"),k(u,"renderWindow is not defined");const x=(u.y2-u.y1)/3,{zIndex:m,color:C}=t.props,F=i*Xr(C);l[0].valid&&this.stage.renderer.addQuad({alpha:F,clippingRect:o,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:((S=(I=l[0].texture)==null?void 0:I.dimensions)==null?void 0:S.width)||0,height:((R=(y=l[0].texture)==null?void 0:y.dimensions)==null?void 0:R.height)||0,texture:l[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:m,tx:e.tx,ty:e.ty-v+u.y1,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td}),l[1].valid&&this.stage.renderer.addQuad({alpha:F,clippingRect:o,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:((z=(E=l[1].texture)==null?void 0:E.dimensions)==null?void 0:z.width)||0,height:((B=(L=l[1].texture)==null?void 0:L.dimensions)==null?void 0:B.height)||0,texture:l[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:m,tx:e.tx,ty:e.ty-v+u.y1+x,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td}),l[2].valid&&this.stage.renderer.addQuad({alpha:F,clippingRect:o,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:((H=(O=l[2].texture)==null?void 0:O.dimensions)==null?void 0:H.width)||0,height:((at=(U=l[2].texture)==null?void 0:U.dimensions)==null?void 0:at.height)||0,texture:l[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:m,tx:e.tx,ty:e.ty-v+u.y1+x+x,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td})}invalidateVisibleWindowCache(t){t.visibleWindow.valid=!1,this.setStatus(t,"loading"),this.scheduleUpdateState(t)}invalidateLayoutCache(t){t.renderInfo=void 0,this.setStatus(t,"loading"),this.scheduleUpdateState(t)}onFontLoaded(t,e){var o;e!==((o=t.fontInfo)==null?void 0:o.cssString)||!t.fontInfo||(t.fontInfo.loaded=!0,this.scheduleUpdateState(t))}onFontLoadError(t,e,o){var i;e!==((i=t.fontInfo)==null?void 0:i.cssString)||!t.fontInfo||(t.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(t.fontInfo.cssString,"'"),o),this.scheduleUpdateState(t))}}const Po=2e6;class $o extends Wt{constructor(t){super();d(this,"options");d(this,"animationManager");d(this,"txManager");d(this,"fontManager");d(this,"textRenderers");d(this,"shManager");d(this,"renderer");d(this,"scene");d(this,"deltaTime",0);d(this,"lastFrameTime",0);d(this,"currentFrameTime",0);d(this,"fpsNumFrames",0);d(this,"fpsElapsedTime",0);this.options=t;const{canvas:e,clearColor:o,rootId:i,debug:s,appWidth:l,appHeight:c}=t;this.txManager=new To,this.shManager=new _o,this.animationManager=new So,s!=null&&s.monitorTextureCache&&setInterval(()=>{k(this.txManager);const u=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",u.idCacheSize),console.log("Texture Key Cache Size: ",u.keyCacheSize)},1e3),this.renderer=new jr({stage:this,canvas:e,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:o!=null?o:4278190080,bufferMemory:Po,txManager:this.txManager,shManager:this.shManager}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new No(this),sdf:new ko(this)},this.fontManager=new pr(this.textRenderers);const h=new Cn(this,{id:i,x:0,y:0,width:l,height:c,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.scene=new xo(h),yo(this)}updateAnimations(){const{scene:t,animationManager:e}=this;t!=null&&t.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=vo(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,e.update(this.deltaTime))}hasSceneUpdates(){var e;const{scene:t}=this;return t!=null&&t.root?(e=t==null?void 0:t.root)==null?void 0:e.hasUpdates:!1}drawFrame(){var i;const{renderer:t,scene:e}=this;if(!(e!=null&&e.root))return;(i=e==null?void 0:e.root)==null||i.update(this.deltaTime),t==null||t.reset(),this.addQuads(e.root),t==null||t.render();const{fpsUpdateInterval:o}=this.options;if(o&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=o)){const s=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",s)}}addQuads(t){k(this.renderer&&t.globalTransform),t.renderQuads(this.renderer);for(let e=0;e<t.children.length;e++){const o=t.children[e];o&&(o==null?void 0:o.worldAlpha)!==0&&this.addQuads(o)}}resolveTextRenderer(t,e=null){let o=e,i=!1;if(o){const l=this.textRenderers[o];l?l.canRenderFont(t)||(console.warn("Cannot use override text renderer '".concat(o,"' for font"),t),o=null,i=!0):(console.warn("Text renderer override '".concat(o,"' not found.")),o=null,i=!0)}if(!o){for(const[l,c]of Object.entries(this.textRenderers))if(l!=="canvas"&&c.canRenderFont(t)){o=l;break}o||(o="canvas")}i&&console.warn("Falling back to text renderer ".concat(String(o)));const s=this.textRenderers[o];return k(s,"resolvedTextRenderer undefined"),s}get root(){var t;return((t=this.scene)==null?void 0:t.root)||null}}class Do extends Cn{constructor(t,e){super(t,e);d(this,"textRenderer");d(this,"trState");d(this,"_textRendererOverride",null);d(this,"onTextLoaded",()=>{const{contain:t}=this,e=this.trState.props.width,o=this.trState.props.height,i=this.trState.textW||0,s=this.trState.textH||0;t==="both"?(this.props.width=e,this.props.height=o):t==="width"?(this.props.width=e,this.props.height=s):t==="none"&&(this.props.width=i,this.props.height=s),this.updateLocalTransform(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});d(this,"onTextFailed",(t,e)=>{this.emit("failed",{type:"text",error:e})});this._textRendererOverride=e.textRendererOverride;const{resolvedTextRenderer:o,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:e.width,height:e.height,textAlign:e.textAlign,color:e.color,zIndex:e.zIndex,contain:e.contain,scrollable:e.scrollable,scrollY:e.scrollY,offsetY:e.offsetY,letterSpacing:e.letterSpacing,debug:e.debug,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStretch:e.fontStretch,fontStyle:e.fontStyle,fontWeight:e.fontWeight,text:e.text},void 0);this.textRenderer=o,this.trState=i}get width(){return this.trState.props.width}set width(t){this.textRenderer.set.width(this.trState,t)}get height(){return this.trState.props.height}set height(t){this.textRenderer.set.height(this.trState,t)}get color(){return this.trState.props.color}set color(t){this.textRenderer.set.color(this.trState,t)}get text(){return this.trState.props.text}set text(t){this.textRenderer.set.text(this.trState,t)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(t){this._textRendererOverride=t;const{resolvedTextRenderer:e,textRendererState:o}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=e,this.trState=o}get fontSize(){return this.trState.props.fontSize}set fontSize(t){this.textRenderer.set.fontSize(this.trState,t)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(t){this.textRenderer.set.fontFamily(this.trState,t)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(t){this.textRenderer.set.fontStretch(this.trState,t)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(t){this.textRenderer.set.fontStyle(this.trState,t)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(t){this.textRenderer.set.fontWeight(this.trState,t)}get textAlign(){return this.trState.props.textAlign}set textAlign(t){this.textRenderer.set.textAlign(this.trState,t)}get contain(){return this.trState.props.contain}set contain(t){this.textRenderer.set.contain(this.trState,t)}get scrollable(){return this.trState.props.scrollable}set scrollable(t){this.textRenderer.set.scrollable(this.trState,t)}get scrollY(){return this.trState.props.scrollY}set scrollY(t){this.textRenderer.set.scrollY(this.trState,t)}get offsetY(){return this.trState.props.offsetY}set offsetY(t){this.textRenderer.set.offsetY(this.trState,t)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(t){this.textRenderer.set.letterSpacing(this.trState,t)}get debug(){return this.trState.props.debug}set debug(t){this.textRenderer.set.debug(this.trState,t)}update(t,e=null){super.update(t,e),k(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}renderQuads(t){k(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(t,e){const o=this.stage.resolveTextRenderer(t,this._textRendererOverride),i=o.createState(t);return e&&["loading","loaded","failed"].forEach(l=>{e.emitter.off(l)}),i.emitter.on("loaded",this.onTextLoaded),i.emitter.on("failed",this.onTextFailed),o.scheduleUpdateState(i),{resolvedTextRenderer:o,textRendererState:i}}}class Bo extends cn{constructor(n,t,e){super(n,t,e,new Do(e,{id:Rn(),x:n.x,y:n.y,width:n.width,height:n.height,alpha:n.alpha,clipping:n.clipping,color:n.color,colorTop:n.colorTop,colorBottom:n.colorBottom,colorLeft:n.colorLeft,colorRight:n.colorRight,colorTl:n.colorTl,colorTr:n.colorTr,colorBl:n.colorBl,colorBr:n.colorBr,zIndex:n.zIndex,zIndexLocked:n.zIndexLocked,scaleX:n.scaleX,scaleY:n.scaleY,mountX:n.mountX,mountY:n.mountY,mount:n.mount,pivot:n.pivot,pivotX:n.pivotX,pivotY:n.pivotY,rotation:n.rotation,text:n.text,fontSize:n.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontStretch:n.fontStretch,fontStyle:n.fontStyle,contain:n.contain,scrollable:n.scrollable,letterSpacing:n.letterSpacing,textAlign:n.textAlign,scrollY:n.scrollY,offsetY:n.offsetY,textRendererOverride:n.textRendererOverride,debug:n.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(n){this.coreNode.text=n}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(n){this.coreNode.textRendererOverride=n}get fontSize(){return this.coreNode.fontSize}set fontSize(n){this.coreNode.fontSize=n}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(n){this.coreNode.fontFamily=n}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(n){this.coreNode.fontWeight=n}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(n){this.coreNode.fontStretch=n}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(n){this.coreNode.fontStyle=n}get textAlign(){return this.coreNode.textAlign}set textAlign(n){this.coreNode.textAlign=n}get contain(){return this.coreNode.contain}set contain(n){this.coreNode.contain=n}get scrollable(){return this.coreNode.scrollable}set scrollable(n){this.coreNode.scrollable=n}get scrollY(){return this.coreNode.scrollY}set scrollY(n){this.coreNode.scrollY=n}get offsetY(){return this.coreNode.offsetY}set offsetY(n){this.coreNode.offsetY=n}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(n){this.coreNode.letterSpacing=n}get debug(){return this.coreNode.debug}set debug(n){this.coreNode.debug=n}}const Yo="modulepreload",Oo=function(r){return"/solid-demo-app/"+r},Yn={},Wo=function(n,t,e){if(!t||t.length===0)return n();const o=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Oo(i),i in Yn)return;Yn[i]=!0;const s=i.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!e)for(let u=o.length-1;u>=0;u--){const f=o[u];if(f.href===i&&(!s||f.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(i,'"]').concat(l)))return;const h=document.createElement("link");if(h.rel=s?"stylesheet":Yo,s||(h.as="script",h.crossOrigin=""),h.href=i,document.head.appendChild(h),s)return new Promise((u,f)=>{h.addEventListener("load",u),h.addEventListener("error",()=>f(new Error("Unable to preload CSS for ".concat(i))))})})).then(()=>n()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};function Uo(r){return r.prototype instanceof Hr}async function Xo(r,n){let t;try{console.log("Loading core extension",r),t=await Wo(()=>import(r),[])}catch(o){console.error("The core extension module at '".concat(r,"' could not be loaded.")),console.error(o);return}if(!t.default){console.error("The core extension module at '".concat(r,"' does not have a default export."));return}const e=t.default;if(Uo(e)){const o=new e;try{await o.run(n)}catch(i){console.error("The core extension at '".concat(r,"' threw an error.")),console.error(i)}}else console.error("The core extension at '".concat(r,"' does not extend CoreExtension."))}class jo{constructor(){d(this,"root",null);d(this,"stage",null);d(this,"rendererMain",null)}async init(n,t,e){this.stage=new $o({rootId:Rn(),appWidth:t.appWidth,appHeight:t.appHeight,deviceLogicalPixelRatio:t.deviceLogicalPixelRatio,devicePhysicalPixelRatio:t.devicePhysicalPixelRatio,clearColor:t.clearColor,canvas:e,fpsUpdateInterval:t.fpsUpdateInterval,debug:{monitorTextureCache:!1}}),this.rendererMain=n,k(this.stage.root);const o=new cn(n.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=o,o.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,o)),this.onCreateNode(o),t.coreExtensionModule&&await Xo(t.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(i,s)=>{this.onFpsUpdate(s)})}createNode(n){k(this.rendererMain),k(this.stage);const t=new cn(n,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}createTextNode(n){k(this.rendererMain),k(this.stage);const t=new Bo(n,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}destroyNode(n){n.destroy()}releaseTexture(n){const{stage:t}=this;k(t),t.txManager.removeTextureIdFromCache(n)}getRootNode(){return k(this.root),this.root}onCreateNode(n){throw new Error("Method not implemented.")}onBeforeDestroyNode(n){throw new Error("Method not implemented.")}onFpsUpdate(n){throw new Error("Method not implemented.")}}let wt,Fn;function Ho(r={}){const n=new jo;return wt=new ho(r,r.rootId||"app",n),Fn=wt.createShader.bind(wt),wt}class Go extends Array{constructor(n){super(),this._parent=n}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(n,t){if(t){const e=this.indexOf(t);this.splice(e,0,n)}else this.push(n);n.parent=this._parent,this._parent._isDirty=!0}remove(n){const t=this.indexOf(n);t>=0&&this.splice(t,1)}}import.meta.env={BASE_URL:"/solid-demo-app/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1};const Ct={debug:!1,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Vo(r,n,...t){}function Qt(r){return typeof r=="function"}function le(r){return Array.isArray(r)}function Ko(r){return typeof r=="string"}function qo(r){return typeof r=="number"}function Qo(r){return Number.isInteger(r)}function Jo(r,n){for(const t of n)if(t in r)return!0;return!1}function Zo(r){return le(r)?r[0]:r}class On extends Array{constructor(n,t={}){var e=(...o)=>{super(...o)};return le(t)?e(...t):Ko(t)?e(t):e(...Object.entries(t).filter(([o,i])=>i).map(([o])=>o)),this.onChange=n,this}has(n){return this.indexOf(n)>=0}is(n){return this.indexOf(n)>=0}add(n){this.push(n),this.onChange()}toggle(n){this.has(n)?this.remove(n):this.add(n)}remove(n){const t=this.indexOf(n);t>=0&&(this.splice(t,1),this.onChange())}}function ti(r){const n=[];for(let T=0;T<r.children.length;T++){const p=r.children[T];if(p.name!=="TextNode"){if(p.name==="text"&&!(p.width||p.height))return;n.push(p)}}const t=n.length,e=r.flexDirection||"row",o=e==="row"?"width":"height",i=e==="row"?"height":"width",s=e==="row"?"marginLeft":"marginTop",l=e==="row"?"marginRight":"marginBottom",c=e==="row"?"x":"y",h=e==="row"?"y":"x",u=r[o]||0,f=r[i]||0,g=n.reduce((T,p)=>T+(p[o]||0),0),v=r.gap||0,w=r.justifyContent||"flexStart",_=r.alignItems,b=f&&_?T=>{_==="flexStart"?T[h]=0:_==="center"?T[h]=(f-(T[i]||0))/2:_==="flexEnd"&&(T[h]=f-(T[i]||0))}:T=>T;if(w==="flexStart"){let T=0;n.forEach(p=>{p[c]=T+(p[s]||0),T+=(p[o]||0)+v+(p[s]||0)+(p[l]||0),b(p)})}if(w==="flexEnd"){let T=u;for(let p=t-1;p>=0;p--){const x=n[p];k(x),x[c]=T-(x[o]||0)-(x[l]||0),T-=(x[o]||0)+v+(x[s]||0)+(x[l]||0),b(x)}}if(w==="center"){let T=(u-(g+v*(t-1)))/2;n.forEach(p=>{p[c]=T,T+=(p[o]||0)+v,b(p)})}if(w==="spaceBetween"){const T=(u-g)/(t-1);let p=0;n.forEach(x=>{x[c]=p,p+=(x[o]||0)+T,b(x)})}if(w==="spaceEvenly"){const T=(u-g)/(t+1);let p=T;n.forEach(x=>{x[c]=p,p+=(x[o]||0)+T,b(x)})}}const{animationSettings:ei}=Ct;function ni(r){const n=[];for(const[t,e]of Object.entries(r))n.push({type:t,props:e});return Fn("DynamicShader",{effects:n})}function oe(r=""){return{set(n){qo(n)&&(n={width:n,color:255}),this.effects={...this.effects||{},["border".concat(r)]:n},this["_border".concat(r)]=n},get(){return this["_border".concat(r)]}}}const ri=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],oi=["clipping","contain","fontFamily","src","text","textAlign","texture","maxLines","maxLinesSuffix","textOverflow","wordWrap"];class Yt extends Object{constructor(n){super(),this.lng=null,this._parent=null,this.name=n,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new Go(this);for(const t of ri)Object.defineProperty(this,t,{get(){return this["_".concat(t)]||this.lng&&this.lng[t]},set(e){this["_".concat(t)]=Zo(e),this._sendToLightningAnimatable(t,e)}});for(const t of oi)Object.defineProperty(this,t,{get(){return this["_".concat(t)]||this.lng&&this.lng[t]},set(e){this["_".concat(t)]=e,this._sendToLightning(t,e)}});Object.defineProperties(this,{borderRadius:{set(t){this._borderRadius=t,this.effects={...this.effects||{},radius:{radius:t}}},get(){return this._borderRadius}},border:oe(),borderLeft:oe("Left"),borderRight:oe("Right"),borderTop:oe("Top"),borderBottom:oe("Bottom")}),Object.defineProperties(this,{linearGradient:{set(t={}){this._linearGradient=t,this.effects={...this.effects||{},linearGradient:t}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(n){this._effects=n,this.shader=ni(n)}get parent(){return this._parent}set parent(n){var t;this._parent=n,this.rendered&&this.lng&&(this.lng.parent=(t=n==null?void 0:n.lng)!=null?t:null)}get shader(){return this._shader}set shader(n){le(n)?this._shader=Fn(...n):this._shader=n,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(n,t){if(this.rendered&&this.lng){if(le(t))return this.createAnimation({[n]:t[0]},t[1]).start();if(this._animate)return this.createAnimation({[n]:t}).start();this.lng[n]=t}else le(t)&&(t=t[0]),this._renderProps[n]=t}_sendToLightning(n,t){this.rendered&&this.lng?this.lng[n]=t:this._renderProps[n]=t}createAnimation(n,t){return k(this.lng,"Node must be rendered before animating"),this.lng.animate(n,t||this.animationSettings)}setFocus(){this.rendered?ur(this):this.autofocus=!0}isTextNode(){return this.name==="text"}_resizeOnTextLoad(){this.lng.once("loaded",(n,t)=>{if(t.type==="text"){const{dimensions:e}=t;this.width=e.width,this.height=e.height,this.parent.updateLayout(this,e)}})}getText(){return this.children.map(n=>n.text).join("")}destroy(){this.lng&&wt.destroyNode(this.lng)}set style(n){for(let t in n)t==="animate"&&(t="_animate"),this[t]||(this[t]=n[t]);this._style=n}get style(){return this._style}get hasChildren(){return this.children.length>0}set states(n){this._states=new On(this._stateChanged.bind(this),n),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new On(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||ei}set animationSettings(n){this._animationSettings=n}updateLayout(n,t){this.hasChildren&&(Qt(this.onBeforeLayout)&&this.onBeforeLayout.call(this,n,t),this.display==="flex"&&ti(this),Qt(this.onLayout)&&this.onLayout.call(this,n,t))}_stateChanged(){var t;if(Vo("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(o=>o.states=e)}const n=((t=Ct.stateMapperHook)==null?void 0:t.call(Ct,this,this.states))||this.states;if(this._undoStates||this.style&&Jo(this.style,n)){this._undoStates=this._undoStates||{};let e={};for(const[i,s]of Object.entries(this._undoStates))n.includes(i)||(e={...e,...s});const o=n.reduce((i,s)=>{const l=this.style[s];return l&&(i={...i,...l},this._undoStates&&!this._undoStates[s]&&(this._undoStates[s]={},Object.keys(l).forEach(c=>{this._undoStates[s][c]=this[c]}))),i},{});Object.assign(this,{...e,...o})}}render(){const n=this,t=this.parent;t._isDirty&&(t.updateLayout(),t._isDirty=!1),n.updateLayout(),this.states.length&&this._stateChanged();let e=n._renderProps;t.lng&&(e.parent=t.lng),n.isTextNode()?(e={...Ct.fontSettings,...e,text:n.getText()},n.lng=wt.createTextNode(e),Qt(this.onCreate)&&this.onCreate.call(this,n),Qt(n.onLoad)&&n.lng.on("loaded",n.onLoad),(!n.width||!n.height)&&(n._autosized=!0,n._resizeOnTextLoad())):(e.src||e.texture||(isNaN(e.width)&&(e.width=(t.width||0)-e.x,n._width=e.width),isNaN(e.height)&&(e.height=(t.height||0)-e.y,n._height=e.height),e.color||(n._color=e.color=0)),n.lng=wt.createNode(e),n.onFail&&n.lng.on("failed",n.onFail),n.onLoad&&n.lng.on("loaded",n.onLoad),Qt(this.onCreate)&&this.onCreate.call(this,n)),n.rendered=!0,n.autofocus&&n.setFocus(),delete this._renderProps}}const A=r=>(()=>{const n=Lt("text");return te(n,r,!1),n})(),N=r=>(()=>{const n=Lt("node");return te(n,r,!1),n})();function xr(r){r.name!=="TextNode"&&(k(r instanceof Yt),r.render(),r.children.forEach(n=>xr(n)))}const ii=r=>{const n=Ho(r.options),t=n.init();let e;return mt(()=>{t.then(()=>{k(e),e.lng=n.root,e.children.forEach(xr),Qt(r.onFirstRender)&&r.onFirstRender(e)}).catch(console.error)}),(()=>{const o=Lt("canvas"),i=e;return typeof i=="function"?En(i,o):e=o,ve(o,()=>r.children),o})()};function si({createElement:r,createTextNode:n,isTextNode:t,replaceText:e,insertNode:o,removeNode:i,setProperty:s,getParentNode:l,getFirstChild:c,getNextSibling:h}){function u(p,x,m,C){if(m!==void 0&&!C&&(C=[]),typeof x!="function")return f(p,x,C,m);vt(F=>f(p,x(),F,m),C)}function f(p,x,m,C,F){for(;typeof m=="function";)m=m();if(x===m)return m;const I=typeof x,S=C!==void 0;if(I==="string"||I==="number")if(I==="number"&&(x=x.toString()),S){let y=m[0];y&&t(y)?e(y,x):y=n(x),m=w(p,m,C,y)}else m!==""&&typeof m=="string"?e(c(p),m=x):(w(p,m,C,n(x)),m=x);else if(x==null||I==="boolean")m=w(p,m,C);else{if(I==="function")return vt(()=>{let y=x();for(;typeof y=="function";)y=y();m=f(p,y,m,C)}),()=>m;if(Array.isArray(x)){const y=[];if(g(y,x,F))return vt(()=>m=f(p,y,m,C,!0)),()=>m;if(y.length===0){const R=w(p,m,C);if(S)return m=R}else Array.isArray(m)?m.length===0?_(p,y,C):v(p,m,y):m==null||m===""?_(p,y):v(p,S&&m||[c(p)],y);m=y}else{if(Array.isArray(m)){if(S)return m=w(p,m,C,x);w(p,m,null,x)}else m==null||m===""||!c(p)?o(p,x):b(p,x,c(p));m=x}}return m}function g(p,x,m){let C=!1;for(let F=0,I=x.length;F<I;F++){let S=x[F],y;if(!(S==null||S===!0||S===!1))if(Array.isArray(S))C=g(p,S)||C;else if((y=typeof S)=="string"||y==="number")p.push(n(S));else if(y==="function")if(m){for(;typeof S=="function";)S=S();C=g(p,Array.isArray(S)?S:[S])||C}else p.push(S),C=!0;else p.push(S)}return C}function v(p,x,m){let C=m.length,F=x.length,I=C,S=0,y=0,R=h(x[F-1]),E=null;for(;S<F||y<I;){if(x[S]===m[y]){S++,y++;continue}for(;x[F-1]===m[I-1];)F--,I--;if(F===S){const z=I<C?y?h(m[y-1]):m[I-y]:R;for(;y<I;)o(p,m[y++],z)}else if(I===y)for(;S<F;)(!E||!E.has(x[S]))&&i(p,x[S]),S++;else if(x[S]===m[I-1]&&m[y]===x[F-1]){const z=h(x[--F]);o(p,m[y++],h(x[S++])),o(p,m[--I],z),x[F]=m[I]}else{if(!E){E=new Map;let L=y;for(;L<I;)E.set(m[L],L++)}const z=E.get(x[S]);if(z!=null)if(y<z&&z<I){let L=S,B=1,O;for(;++L<F&&L<I&&!((O=E.get(x[L]))==null||O!==z+B);)B++;if(B>z-y){const H=x[S];for(;y<z;)o(p,m[y++],H)}else b(p,m[y++],x[S++])}else S++;else i(p,x[S++])}}}function w(p,x,m,C){if(m===void 0){let I;for(;I=c(p);)i(p,I);return C&&o(p,C),""}const F=C||n("");if(x.length){let I=!1;for(let S=x.length-1;S>=0;S--){const y=x[S];if(F!==y){const R=l(y)===p;!I&&!S?R?b(p,F,y):o(p,F,m):R&&i(p,y)}else I=!0}}else o(p,F,m);return[F]}function _(p,x,m){for(let C=0,F=x.length;C<F;C++)o(p,x[C],m)}function b(p,x,m){o(p,x,m),i(p,m)}function T(p,x,m={},C){return x||(x={}),C||vt(()=>m.children=f(p,x.children,m.children)),vt(()=>x.ref&&x.ref(p)),vt(()=>{for(const F in x){if(F==="children"||F==="ref")continue;const I=x[F];I!==m[F]&&(s(p,F,I,m[F]),m[F]=I)}}),m}return{render(p,x){let m;return Zt(C=>{m=C,u(x,p())}),m},insert:u,spread(p,x,m){typeof x=="function"?vt(C=>T(p,x(),C,m)):T(p,x,void 0,m)},createElement:r,createTextNode:n,insertNode:o,setProp(p,x,m,C){return s(p,x,m,C),m},mergeProps:bn,effect:vt,memo:J,createComponent:an,use(p,x,m){return st(()=>p(x,m))}}}function ai(r){const n=si(r);return n.mergeProps=bn,n}const li={createElement(r){const n=new Yt(r);return wt.root&&mt(()=>n.render()),n},createTextNode(r){return{name:"TextNode",text:r,parent:null}},replaceText(r,n){r.text=n;const t=r.parent;k(t),t._autosized&&t._resizeOnTextLoad(),t.text=t.getText()},setProperty(r,n,t=!0){if(n==="animate"){r._animate=t;return}r[n]=t},insertNode(r,n,t){r&&(r.children.insert(n,t),n.name==="TextNode"&&r.isTextNode()&&(r._autosized&&r._resizeOnTextLoad(),r.text=r.getText()))},isTextNode(r){return r.isTextNode()},removeNode(r,n){r.children.remove(n),n instanceof Yt&&n.destroy()},getParentNode(r){var n;return(n=r.parent)!=null?n:void 0},getFirstChild(r){return r.children[0]},getNextSibling(r){if(r.parent){const n=r.parent.children||[],t=n.indexOf(r)+1;if(t<n.length)return n[t]}}},yr=ai(li),ci=yr.render,{effect:Js,memo:vr,createComponent:a,createElement:Lt,createTextNode:Zs,insertNode:ta,insert:ve,spread:te,setProp:Bt,mergeProps:W,use:En}=yr;function M(r=""){return Qo(r)?r:typeof r=="string"?r.startsWith("#")?+(r.replace("#","0x")+(r.length===7?"ff":"")):r.startsWith("0x")?Number(r):+("0x"+(r.length===6?r+"ff":r)):0}function ui(r){return r*Math.PI/180}const Wn="_$DX_DELEGATE";function hi(r,n=window.document){const t=n[Wn]||(n[Wn]=new Set);for(let e=0,o=r.length;e<o;e++){const i=r[e];t.has(i)||(t.add(i),n.addEventListener(i,di))}}function di(r){const n="$$".concat(r.type);let t=r.composedPath&&r.composedPath()[0]||r.target;for(r.target!==t&&Object.defineProperty(r,"target",{configurable:!0,value:t}),Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return t||document}});t;){const e=t[n];if(e&&!t.disabled){const o=t["".concat(n,"Data")];if(o!==void 0?e.call(t,o,r):e.call(t,r),r.cancelBubble)return}t=t._$host||t.parentNode||t.host}}const fi=!1;function wr(r,n,t){return r.addEventListener(n,t),()=>r.removeEventListener(n,t)}function gi([r,n],t,e){return[t?()=>t(r()):r,e?o=>n(e(o)):n]}function pi(r){try{return document.querySelector(r)}catch(n){return null}}function _r(r,n){const t=pi("#".concat(r));t?t.scrollIntoView():n&&window.scrollTo(0,0)}function Sr(r,n,t,e){let o=!1;const i=l=>typeof l=="string"?{value:l}:l,s=gi(D(i(r()),{equals:(l,c)=>l.value===c.value}),void 0,l=>(!o&&n(l),l));return t&&kt(t((l=r())=>{o=!0,s[1](i(l)),o=!1})),{signal:s,utils:e}}function mi(r){if(r){if(Array.isArray(r))return{signal:r}}else return{signal:D({value:""})};return r}function xi(){return Sr(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:r,replace:n,scroll:t,state:e})=>{n?window.history.replaceState(e,"",r):window.history.pushState(e,"",r),_r(window.location.hash.slice(1),t)},r=>wr(window,"popstate",()=>r()),{go:r=>window.history.go(r)})}function yi(){return Sr(()=>window.location.hash.slice(1),({value:r,replace:n,scroll:t,state:e})=>{n?window.history.replaceState(e,"","#"+r):window.location.hash=r;const o=r.indexOf("#"),i=o>=0?r.slice(o+1):"";_r(i,t)},r=>wr(window,"hashchange",()=>r()),{go:r=>window.history.go(r),renderPath:r=>"#".concat(r),parsePath:r=>{const n=r.replace(/^.*?#/,"");if(!n.startsWith("/")){const[,t="/"]=window.location.hash.split("#",2);return"".concat(t,"#").concat(n)}return n}})}function vi(){let r=new Set;function n(o){return r.add(o),()=>r.delete(o)}let t=!1;function e(o,i){if(t)return!(t=!1);const s={to:o,options:i,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const l of r)l.listener({...s,from:l.location,retry:c=>{c&&(t=!0),l.navigate(o,i)}});return!s.defaultPrevented}return{subscribe:n,confirm:e}}const wi=/^(?:[a-z0-9]+:)?\/\//i,_i=/^\/+|(\/)\/+$/g;function ce(r,n=!1){const t=r.replace(_i,"$1");return t?n||/^[?#]/.test(t)?t:"/"+t:""}function Ae(r,n,t){if(wi.test(n))return;const e=ce(r),o=t&&ce(t);let i="";return!o||n.startsWith("/")?i=e:o.toLowerCase().indexOf(e.toLowerCase())!==0?i=e+o:i=o,(i||"/")+ce(n,!i)}function Si(r,n){if(r==null)throw new Error(n);return r}function Tr(r,n){return ce(r).replace(/\/*(\*.*)?$/g,"")+ce(n)}function Ti(r){const n={};return r.searchParams.forEach((t,e)=>{n[e]=t}),n}function bi(r,n,t){const[e,o]=r.split("/*",2),i=e.split("/").filter(Boolean),s=i.length;return l=>{const c=l.split("/").filter(Boolean),h=c.length-s;if(h<0||h>0&&o===void 0&&!n)return null;const u={path:s?"":"/",params:{}},f=g=>t===void 0?void 0:t[g];for(let g=0;g<s;g++){const v=i[g],w=c[g],_=v[0]===":",b=_?v.slice(1):v;if(_&&en(w,f(b)))u.params[b]=w;else if(_||!en(w,v))return null;u.path+="/".concat(w)}if(o){const g=h?c.slice(-h).join("/"):"";if(en(g,f(o)))u.params[o]=g;else return null}return u}}function en(r,n){const t=e=>e.localeCompare(r,void 0,{sensitivity:"base"})===0;return n===void 0?!0:typeof n=="string"?t(n):typeof n=="function"?n(r):Array.isArray(n)?n.some(t):n instanceof RegExp?n.test(r):!1}function Ci(r){const[n,t]=r.pattern.split("/*",2),e=n.split("/").filter(Boolean);return e.reduce((o,i)=>o+(i.startsWith(":")?2:3),e.length-(t===void 0?0:1))}function br(r){const n=new Map,t=He();return new Proxy({},{get(e,o){return n.has(o)||qr(t,()=>n.set(o,J(()=>r()[o]))),n.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function Cr(r){let n=/(\/?\:[^\/]+)\?/.exec(r);if(!n)return[r];let t=r.slice(0,n.index),e=r.slice(n.index+n[0].length);const o=[t,t+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(e);)o.push(t+=n[1]),e=e.slice(n[0].length);return Cr(e).reduce((i,s)=>[...i,...o.map(l=>l+s)],[])}const Ri=100,Rr=or(),Ke=or(),In=()=>Si(_n(Rr),"Make sure your app is wrapped in a <Router />");let ge;const zn=()=>ge||_n(Ke)||In().base,ee=()=>In().navigatorFactory(),kn=()=>zn().params;function Fi(r,n="",t){const{component:e,data:o,children:i}=r,s=!i||Array.isArray(i)&&!i.length,l={key:r,element:e?()=>an(e,{}):()=>{const{element:c}=r;return c===void 0&&t?an(t,{}):c},preload:r.component?e.preload:r.preload,data:o};return Fr(r.path).reduce((c,h)=>{for(const u of Cr(h)){const f=Tr(n,u),g=s?f:f.split("/*",1)[0];c.push({...l,originalPath:u,pattern:g,matcher:bi(g,!s,r.matchFilters)})}return c},[])}function Ei(r,n=0){return{routes:r,score:Ci(r[r.length-1])*1e4-n,matcher(t){const e=[];for(let o=r.length-1;o>=0;o--){const i=r[o],s=i.matcher(t);if(!s)return null;e.unshift({...s,route:i})}return e}}}function Fr(r){return Array.isArray(r)?r:[r]}function Er(r,n="",t,e=[],o=[]){const i=Fr(r);for(let s=0,l=i.length;s<l;s++){const c=i[s];if(c&&typeof c=="object"&&c.hasOwnProperty("path")){const h=Fi(c,n,t);for(const u of h){e.push(u);const f=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!f)Er(c.children,u.pattern,t,e,o);else{const g=Ei([...e],o.length);o.push(g)}e.pop()}}}return e.length?o:o.sort((s,l)=>l.score-s.score)}function Ii(r,n){for(let t=0,e=r.length;t<e;t++){const o=r[t].matcher(n);if(o)return o}return[]}function zi(r,n){const t=new URL("http://sar"),e=J(c=>{const h=r();try{return new URL(h,t)}catch(u){return console.error("Invalid path ".concat(h)),c}},t,{equals:(c,h)=>c.href===h.href}),o=J(()=>e().pathname),i=J(()=>e().search,!0),s=J(()=>e().hash),l=J(()=>"");return{get pathname(){return o()},get search(){return i()},get hash(){return s()},get state(){return n()},get key(){return l()},query:br(Ft(i,()=>Ti(e())))}}function ki(r,n="",t,e){const{signal:[o,i],utils:s={}}=mi(r),l=s.parsePath||(y=>y),c=s.renderPath||(y=>y),h=s.beforeLeave||vi(),u=Ae("",n),f=void 0;if(u===void 0)throw new Error("".concat(u," is not a valid base path"));u&&!o().value&&i({value:u,replace:!0,scroll:!1});const[g,v]=D(!1),w=async y=>{v(!0);try{await Qr(y)}finally{v(!1)}},[_,b]=D(o().value),[T,p]=D(o().state),x=zi(_,T),m=[],C={pattern:u,params:{},path:()=>u,outlet:()=>null,resolvePath(y){return Ae(u,y)}};if(t)try{ge=C,C.data=t({data:void 0,params:{},location:x,navigate:I(C)})}finally{ge=void 0}function F(y,R,E){st(()=>{if(typeof R=="number"){R&&(s.go?h.confirm(R,E)&&s.go(R):console.warn("Router integration does not support relative routing"));return}const{replace:z,resolve:L,scroll:B,state:O}={replace:!1,resolve:!0,scroll:!0,...E},H=L?y.resolvePath(R):Ae("",R);if(H===void 0)throw new Error("Path '".concat(R,"' is not a routable path"));if(m.length>=Ri)throw new Error("Too many redirects");const U=_();if((H!==U||O!==T())&&!fi){if(h.confirm(H,E)){const at=m.push({value:U,replace:z,scroll:B,state:T()});w(()=>{b(H),p(O)}).then(()=>{m.length===at&&S({value:H,state:O})})}}})}function I(y){return y=y||_n(Ke)||C,(R,E)=>F(y,R,E)}function S(y){const R=m[0];R&&((y.value!==R.value||y.state!==R.state)&&i({...y,replace:R.replace,scroll:R.scroll}),m.length=0)}vt(()=>{const{value:y,state:R}=o();st(()=>{y!==_()&&w(()=>{b(y),p(R)})})});{let y=function(R){if(R.defaultPrevented||R.button!==0||R.metaKey||R.altKey||R.ctrlKey||R.shiftKey)return;const E=R.composedPath().find(U=>U instanceof Node&&U.nodeName.toUpperCase()==="A");if(!E||!E.hasAttribute("link"))return;const z=E.href;if(E.target||!z&&!E.hasAttribute("state"))return;const L=(E.getAttribute("rel")||"").split(/\s+/);if(E.hasAttribute("download")||L&&L.includes("external"))return;const B=new URL(z);if(B.origin!==window.location.origin||u&&B.pathname&&!B.pathname.toLowerCase().startsWith(u.toLowerCase()))return;const O=l(B.pathname+B.search+B.hash),H=E.getAttribute("state");R.preventDefault(),F(C,O,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:H&&JSON.parse(H)})};hi(["click"]),document.addEventListener("click",y),kt(()=>document.removeEventListener("click",y))}return{base:C,out:f,location:x,isRouting:g,renderPath:c,parsePath:l,navigatorFactory:I,beforeLeave:h}}function Li(r,n,t,e,o){const{base:i,location:s,navigatorFactory:l}=r,{pattern:c,element:h,preload:u,data:f}=e().route,g=J(()=>e().path);u&&u();const v={parent:n,pattern:c,get child(){return t()},path:g,params:o,data:n.data,outlet:h,resolvePath(w){return Ae(i.path(),w,g())}};if(f)try{ge=v,v.data=f({data:n.data,params:o,location:s,navigate:l(v)})}finally{ge=void 0}return v}const Ai=r=>{const{source:n,url:t,base:e,data:o,out:i}=r,s=n||xi(),l=ki(s,e,o);return a(Rr.Provider,{value:l,get children(){return r.children}})},Mi=r=>{const n=In(),t=zn(),e=Sn(()=>r.children),o=J(()=>Er(e(),Tr(t.pattern,r.base||""),Ni)),i=J(()=>Ii(o(),n.location.pathname)),s=br(()=>{const u=i(),f={};for(let g=0;g<u.length;g++)Object.assign(f,u[g].params);return f});n.out&&n.out.matches.push(i().map(({route:u,path:f,params:g})=>({originalPath:u.originalPath,pattern:u.pattern,path:f,params:g})));const l=[];let c;const h=J(Ft(i,(u,f,g)=>{let v=f&&u.length===f.length;const w=[];for(let _=0,b=u.length;_<b;_++){const T=f&&f[_],p=u[_];g&&T&&p.route.key===T.route.key?w[_]=g[_]:(v=!1,l[_]&&l[_](),Zt(x=>{l[_]=x,w[_]=Li(n,w[_-1]||t,()=>h()[_+1],()=>i()[_],s)}))}return l.splice(u.length).forEach(_=>_()),g&&v?g:(c=w[0],w)}));return a(Rt,{get when(){return h()&&c},keyed:!0,children:u=>a(Ke.Provider,{value:u,get children(){return u.outlet()}})})},lt=r=>{const n=Sn(()=>r.children);return bn(r,{get children(){return n()}})},Ni=()=>{const r=zn();return a(Rt,{get when(){return r.child},keyed:!0,children:n=>a(Ke.Provider,{value:n,get children(){return n.outlet()}})})};var Pi=!!lo,$i=Pi?r=>He()?kt(r):r:kt;function Di(r,n,t,e){return r.addEventListener(n,t,e),$i(r.removeEventListener.bind(r,n,t,e))}function Bi(r,n=He()){let t=0,e,o;return()=>(t++,kt(()=>{t--,queueMicrotask(()=>{!t&&o&&(o(),o=e=void 0)})}),o||Zt(i=>e=r(o=i),n),e)}var Yi=Bi(()=>{const[r,n]=D(null);return Di(window,"keydown",t=>{n(t),setTimeout(()=>n(null))}),r});function Ce(r){return typeof r=="function"}function Un(r,n){if(!r)throw new Error(n||"Assertion failed")}let nn={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"};const[gn,Oi]=D([]),Wi=(r={})=>{const n=Yi();nn={...nn,...r};const t=Object.entries(nn);return mt(Ft(Be,(e,o,i=[])=>{var c;let s=e;const l=[];for(;s;)s.states.has("focus")||(s.states.add("focus"),Ce(s.onFocus)&&s.onFocus.call(s,e,o!=null?o:null)),l.push(s),s=(c=s.parent)!=null?c:null;return i.forEach(h=>{l.includes(h)||(h.states.remove("focus"),Ce(h.onBlur)&&h.onBlur.call(h,e,o!=null?o:null))}),Oi(l),l},{defer:!0})),mt(()=>{const e=n();if(e){const o=t.find(([i,s])=>s===e.key);st(()=>{const i=gn();for(const s of i){const l=o?o[0]:void 0;if(l){const c=s["on".concat(l)];if(Ce(c)&&c.call(s,e,s)===!0)break}if(Ce(s.onKeyPress)&&s.onKeyPress.call(s,e,l,s)===!0)break}return!1})}}),gn};function Ir(r,n){const t=n();let e,o,i,s;Array.isArray(t)?t.length===2?(e=s=t[0],o=i=t[1]):t.length===3?(e=t[0],o=i=t[1],s=t[2]):[e,i,s,o]=t:e=i=s=o=t,r.onBeforeLayout=(l,c)=>{if(c){r.width=r.children.reduce((u,f)=>u+(f.width||0),0)+o+i;const h=r.children[0];h&&(h.x=o,h.marginLeft=o),r.height=r.children.reduce((u,f)=>(f.y=(f.y||0)+e,f.marginTop=e,u+(f.height||0)),0)+e+s}}}function Ui(r=[]){const n=[];let t;for(t=0;t<r.length;t++){const e=r[t];if(typeof e=="string"&&!e.includes("PAUSE-"))n.push(r[t]);else break}return[n.join(",\b ")].concat(r.slice(t))}function Xn(r){return new Promise(n=>{setTimeout(n,r)})}function Xi(r,n,t="en-US"){const e=window.speechSynthesis;return new Promise((o,i)=>{const s=new SpeechSynthesisUtterance(r);s.lang=t,s.onend=()=>{o()},s.onerror=l=>{i(l)},n.push(s),e.speak(s)})}function pn(r,n,t=!0){const e=window.speechSynthesis,o=Ui(Array.isArray(r)?r:[r]),i=[],s=[];let l=!0;return{series:(async()=>{try{for(;l&&o.length;){const h=await Promise.resolve(o.shift());if(l){if(typeof h=="string"&&h.includes("PAUSE-")){let u=Number(h.split("PAUSE-")[1])*1e3;isNaN(u)&&(u=0),await Xn(u)}else if(typeof h=="string"&&h.length){let f=3;for(;l&&f>0;)try{await Xi(h,s,n),f=0}catch(g){if(g instanceof SpeechSynthesisErrorEvent)if(g.error==="network")f--,console.warn("Speech synthesis network error. Retries left: ".concat(f)),await Xn(500*(3-f));else if(g.error==="canceled"||g.error==="interrupted")f=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(g.error));else throw g}}else if(typeof h=="function"){const u=pn(h(),n,!1);i.push(u),await u.series}else if(Array.isArray(h)){const u=pn(h,n,!1);i.push(u),await u.series}}else break}}finally{l=!1}})(),get active(){return l},append:h=>{o.push(h)},cancel:()=>{l&&(t&&e.cancel(),i.forEach(h=>{h.cancel()}),l=!1)}}}let Re;function ji(r,n="en-US"){return Re&&Re.cancel(),Re=pn(r,n),Re}var Hi=(r,n)=>{let t;const e=()=>clearTimeout(t);return He()&&kt(e),Object.assign((...i)=>{t!==void 0&&e(),t=setTimeout(()=>r(...i),n)},{clear:e})};let mn,ue=[],yt,xn=!1;const Gi=3e5;function jn(r,n){const t=Hi(r,n);let e;const o=i=>{e=i,t(i)};return o.flush=()=>{t.clear(),r(e)},o.clear=t.clear,o}function ie(r){return r.id||r.name}function Vi(r=[]){if(!gt.onFocusChange)return;const n=r.every(i=>!i.loading),t=r.filter(i=>!ue.includes(i));if(mn(),!n&&gt.onFocusChange){gt.onFocusChange([]);return}ue=r.slice(0);const e=[],o=t.reduce((i,s)=>(s.announce?(i.push([ie(s),"Announce",s.announce]),e.push(s.announce)):s.title?(i.push([ie(s),"Title",s.title]),e.push(s.title)):i.push([ie(s),"No Announce",""]),i),[]);if(t.reverse().reduce((i,s)=>(s.announceContext?(i.push([ie(s),"Context",s.announceContext]),e.push(s.announceContext)):i.push([ie(s),"No Context",""]),i),o),gt.debug&&console.table(o),e.length)return gt.speak(e.reduce((i,s)=>i.concat(s),[]))}function Ki(r){if(!xn)return yt=ji(r)}const gt={debug:!1,cancel:function(){yt&&yt.cancel()},clearPrevFocus:function(r=0){ue=ue.slice(0,r),mn()},speak:function(r,{append:n=!1,notification:t=!1}={}){return gt.onFocusChange&&(gt.onFocusChange.flush(),n&&yt&&yt.active?yt.append(r):(gt.cancel(),Ki(r)),t&&(xn=!0,yt==null||yt.series.finally(()=>{xn=!1}).catch(console.error))),yt},setupTimers:function({focusDebounce:r=400,focusChangeTimeout:n=Gi}={}){gt.onFocusChange=jn(Vi,r),mn=jn(()=>{ue=[]},n)}},qi=()=>(gt.setupTimers(),mt(Ft(gn,gt.onFocusChange,{defer:!0})),gt);function Ye(r){return function(){var i,s;const n=this.children.length,t=this.wrap,e=this.selected;if(r==="right"||r==="down")do if(this.selected=(this.selected||0)%n+1,this.selected>=n){if(!t){this.selected=null;break}this.selected=0}while((i=this.children[this.selected])!=null&&i.skipFocus);else if(r==="left"||r==="up")do if(this.selected=(this.selected||0)%n-1,this.selected<0){if(!t){this.selected=null;break}this.selected=n-1}while((s=this.children[this.selected])!=null&&s.skipFocus);if(this.selected===null)return this.selected=e,!1;const o=this.children[this.selected];if(Un(o instanceof Yt),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,o,this.selected,e),this.plinko&&e!==null){const l=this.children[e];Un(l instanceof Yt);const c=l.selected;o.selected=c}return ur(o),!0}}function j(r){const n=Ye("left"),t=Ye("right");return(()=>{const e=Lt("node");return Bt(e,"onLeft",n),Bt(e,"onRight",t),Bt(e,"selected",0),te(e,W({get onFocus(){return r.onFocus||(o=>{if(!o||!o.selected)return;const i=o.children[o.selected];i instanceof Yt&&i.setFocus()})}},r),!0),ve(e,()=>r.children),e})()}function q(r){const n=Ye("up"),t=Ye("down");return(()=>{const e=Lt("node");return Bt(e,"onUp",n),Bt(e,"onDown",t),Bt(e,"selected",0),te(e,W({get onFocus(){return r.onFocus||(o=>{if(!o||!o.selected)return;const i=o.children[o.selected];i instanceof Yt&&i.setFocus()})}},r),!0),ve(e,()=>r.children),e})()}function Qi(r,n){const t=wt.createTexture("ImageTexture",{src:r});return n.reduce((e,o)=>{const{x:i,y:s,width:l,height:c}=o;return e[o.name]=wt.createTexture("SubTexture",{texture:t,x:i,y:s,width:l,height:c}),e},{})}const Ji={display:"flex",flexDirection:"row",justifyContent:"flexStart"},Zi={display:"flex",flexDirection:"column",justifyContent:"flexStart"},ts={screenW:1920,screenH:1080,marginX:120,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},es={primary:"#00315c",focus:"#bdbdbd",container:"#004882"},ns={display1:{fontFamily:"Ubuntu",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Ubuntu",fontSize:56,lineHeight:72},headline1:{fontFamily:"Ubuntu",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Ubuntu",fontSize:32,lineHeight:44},headline3:{fontFamily:"Ubuntu",fontSize:28,lineHeight:40},body1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40},body2:{fontFamily:"Ubuntu",fontSize:28,lineHeight:34},button1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40}},Q={flexRow:Ji,flexColumn:Zi,layout:ts,color:es,typography:ns},it={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:Q.layout.screenW,height:600,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,focus:{scale:1.1}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:M("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:M("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:Q.layout.screenW-2*Q.layout.marginX,x:Q.layout.marginX+Q.layout.gutterX,y:48,zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:M("#0000ff")},peopleBio:{...Q.typography.body1,contain:"both",width:1500,height:400}},Oe={width:386,height:136,color:M("#000000"),alpha:.3,borderRadius:30,border:{width:5,color:M("#cc33ff")},scale:1,focus:{color:[M("#58807d"),{duration:2e3}],scale:1.2,border:{width:5,color:M("#ff0000")},alpha:[1,{duration:1500,delay:200,timing:"easy-in"}]},active:{color:M("#33ff55")},disabled:{alpha:1}},rs={color:M("#00A699"),height:8,y:2,x:-4,width:Oe.width+8},os={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:M("#F6F6F9"),height:Oe.height,width:Oe.width,focus:{fontSize:64}},Hn={container:Oe,topBar:rs,text:os},Gn={width:386,height:136,color:M("#715cab"),focus:{color:M("#5a39a2")},disabled:{color:M("#291d43")}},is={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:M("#FFFFFF"),height:Gn.height,width:Gn.width,focus:{fontSize:40},disabled:{color:M("#909090")}};function ss(r){return a(N,W(r,{animate:!0,get style(){return it.Thumbnail}}))}function as(r){return a(N,W(r,{get style(){return it.FocusRing}}))}function We(r){const[n,t]=so(r,["items"]);return a(j,W(t,{get style(){return it.Row},get children(){return a(Ve,{get each(){return n.items},children:e=>a(ss,e)})}}))}const[ls,At]=D(""),cs="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA",us="https://api.themoviedb.org/3";let zr,kr;const hs="w185",ds={headers:{"Content-Type":"application/json",Authorization:"Bearer "+cs}};function he(r,n=hs){return kr+n+r}function fs(r,n={}){return zr?yn(r,n):Lr().then(()=>yn(r,n))}function yn(r,n={}){return fetch(us+r,{...ds,...n}).then(t=>t.json())}function Lr(){return yn("/configuration").then(r=>{var n;return zr=r,kr=(n=r.images)==null?void 0:n.secure_base_url,r})}const Ot={get:fs,loadConfig:Lr};function gs(r,n){return r.length>n?r.substring(0,n-3)+"...":r}function ps(r,n=7){let t=[];for(let e=0,o=r.length;e<o;e+=n)t.push(r.slice(e,e+n));return t}function pe(r=[]){return r.map(n=>({src:he(n.poster_path||n.profile_path),tileSrc:he(n.backdrop_path||n.profile_path,"w300"),backdrop:he(n.backdrop_path,"w1280"),href:"/entity/".concat(n.media_type||"people","/").concat(n.id),shortTitle:gs(n.title||n.name,30),title:n.title||n.name,data:n,entityInfo:{type:n.media_type||"people",id:n.id},heroContent:{title:n.title||n.name,description:n.overview}}))}let rn=new Map;const Fe=new Map;function ms(r){return n=>{const t="/trending/".concat(r,"/week?page=").concat(n);if(rn.has(t))return rn.get(t);let e=Ot.get(t).then(o=>{let i=o.results.filter(c=>!c.adult),s=(Fe.has(r)?Fe.get(r):[]).concat(pe(i)),l=ps(s);return l[l.length-1].length<7?Fe.set(r,l.pop()):Fe.delete(r),l});return rn.set(t,e),e}}function xs(r){const[n,t]=D([]),[e,o]=D(1),[i,s]=D(!1),[l]=Dt(e,r);return on(()=>{const c=l();c&&Kr(()=>{c.length===0&&s(!0),t(h=>[...h,...c])})}),{pages:n,page:e,setPage:o,setPages:t,end:i,setEnd:s}}const qe=1100,ys={...Q.typography.display2,width:qe,height:58,contain:"both"},vs=r=>a(A,W(r,{style:ys,get children(){return r.children}})),ws={...Q.typography.body1,width:qe,height:72,contain:"both"},_s={fontSize:20,lineHeight:20},Ss=r=>a(A,W(r,{style:ws,get children(){return r.children}}));function Ts(r){return[a(Rt,{get when(){return(r==null?void 0:r.rtCrit)&&(r==null?void 0:r.rtCrit)!=="0"},get children(){return[a(N,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),a(A,{style:vn,get children(){return r.rtCrit+"%"}})]}}),a(Rt,{get when(){return(r==null?void 0:r.rtFan)&&(r==null?void 0:r.rtFan)!=="0"},get children(){return[a(N,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),a(A,{style:vn,get children(){return r.rtFan+"%"}})]}})]}const bs=r=>(()=>{const n=Lt("node");return En(Ir,n,()=>[8,15,13,15]),te(n,W(r,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),ve(n,a(A,{style:_s,get children(){return r.children}})),n})(),vn=Q.typography.body2,Cs=r=>a(N,{get style(){return{...Q.flexRow,gap:12,width:qe,height:48}},get children(){return[a(A,{style:vn,get children(){return r.metaText}}),a(Ve,{get each(){return r.badges},children:n=>a(bs,{y:-5,children:n})}),vr(()=>Ts(r.reviews))]}}),Ar=r=>a(N,W(r,{get style(){return{...Q.flexColumn,width:qe,height:160,gap:16}},get children(){return[a(vs,{get children(){return r.title}}),a(Ss,{get children(){return r.description}}),a(Cs,{get metaText(){return r.metaText},get badges(){return r.badges},get reviews(){return r.reviews}})]}}));function Rs(r){const n=Math.floor(r/60),t=r%60;return n+"h "+(t<10?"0":"")+t+"m"}function Vn(r){return r.split("-")[0]}function Fs({type:r,id:n}){return Ot.get("/".concat(r,"/").concat(n,"/recommendations")).then(({results:t})=>t.length?pe(t.slice(0,7)):Ot.get("/trending/".concat(r,"/week?page=1")).then(({results:e})=>pe(e.slice(0,7))))}function Es({type:r,id:n}){return Ot.get("/".concat(r,"/").concat(n,"/credits")).then(({cast:t})=>pe(t.slice(0,7)))}function Mr({type:r,id:n}){let t=r==="movie"?{rtCrit:86,rtFan:92}:{};return Ot.get("/".concat(r,"/").concat(n)).then(e=>({backgroundImage:he(e.backdrop_path,"original"),heroContent:{title:e.title||e.name,description:e.overview,badges:["HD"],metaText:r==="movie"?Rs(e.runtime)+" - "+e.release_date:"".concat(Vn(e.first_air_date)," - ").concat(Vn(e.last_air_date)),reviews:t},...e}))}const Kn=()=>{const r=kn(),[n,t]=D(0),[e,o]=D();Dt(e,Mr);const[i,s]=D({}),l=ee(),c=rr(()=>0),h=J(()=>xs(ms(r.filter||"all")));mt(Ft(Be,g=>{g.backdrop&&At(g.backdrop),g.heroContent&&s(g.heroContent)},{defer:!0}));function u(){var v;(v=this.children.selected)==null||v.setFocus(),t((this.y||0)*-1+24);let g=h().pages().length;(g===0||this.parent.selected&&this.parent.selected>=g-2)&&h().setPage(w=>w+1)}function f(){let g=this.children.selected;k(g&&g.href),l(g.href)}return a(Rt,{get when(){return h().pages().length},get children(){return[a(Ar,W({y:360,x:150},i)),a(N,{clipping:!0,get style(){return it.itemsContainer},get children(){return a(q,{plinko:!0,announce:"All Trending - Week",animate:!0,get y(){return n()},get style(){return it.Column},get children(){return a(Ve,{get each(){return h().pages()},children:(g,v)=>a(We,{get autofocus(){return c(v())},items:g,onFocus:u,onEnter:f})})}})}})]}})},Is=()=>{const r=ee(),n=rr(()=>0);function t(){let c=this.children.selected;k(c&&c.id),r("/"+c.id)}const e=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"}];function o(c){const h={width:370,height:320,borderRadius:6,scale:1,color:405488895,focus:{scale:1.1,color:4294967295}},[u,f]=D(4294967295);return a(N,W(c,{onFocus:()=>f(255),onBlur:()=>f(4294967295),animate:!0,style:h,get children(){return a(N,{x:30,get children(){return[a(A,{y:30,fontSize:84,get color(){return u()},get children(){return c.index}}),a(A,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return u()},get children(){return c.title}}),a(A,{y:200,fontSize:28,width:330,contain:"width",get color(){return u()},get children(){return c.description}})]}})}}))}const[i,s]=D(140);function l(c){s(c.selected*-400+140)}return a(N,{colorTop:1147903743,colorBottom:743406847,get children(){return[a(N,{x:120,get children(){return[a(N,{src:"/assets/solidjs.png",width:101,height:90,y:40}),a(A,{fontSize:90,x:110,y:40,children:"Examples"}),a(N,{y:140,height:1,width:1800,color:3906468351})]}}),a(j,{onSelectedChanged:l,onEnter:t,animationSettings:{delay:20,duration:300},animate:!0,get x(){return i()},y:300,width:4400,get style(){return it.Row},justifyContent:"flexStart",gap:40,get children(){return a(Ve,{each:e,children:(c,h)=>a(o,W({get autofocus(){return n(h())},get index(){return h()}},c))})}})]}})},zs=()=>{const r={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:M("00000000")},n={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:M("00000000")},t={fontSize:42},e={width:r.width,fontSize:26,contain:"width"},o={fontSize:26};return xe(()=>{At("0x000000ff")}),a(N,{autofocus:!0,style:r,get children(){return[a(A,{style:t,children:"Title of the Page"}),a(A,{style:e,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),a(N,{style:n,get children(){return[a(A,{style:o,children:"Subline Text"}),a(N,{width:28,height:28,src:"/assets/rt-popcorn.png"}),a(A,{style:o,children:"More Text"})]}})]}})},ks=()=>{function r(o,i){this.states.toggle("disabled")}const n={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:M("00000000"),gap:26,y:400};function t(o){return a(N,W(o,{forwardStates:!0,animate:!0,get style(){return Hn.container},get children(){return a(A,{get style(){return Hn.text},get children(){return o.children}})}}))}const e=o=>(()=>{const i=Lt("node");return En(Ir,i,()=>[10,15]),te(i,W(o,{get style(){return{color:M("#000000be"),borderRadius:8,border:{width:2,color:M("#ffffff")}}}}),!0),ve(i,a(A,{style:{fontSize:20},get children(){return o.children}})),i})();return[a(j,{x:100,y:200,gap:5,style:n,get children(){return[a(e,{children:"HD"}),a(e,{children:"PG13"}),a(e,{children:"NC17"}),a(A,{fontSize:30,children:"I like bananas"}),a(e,{children:"DOLBY"})]}}),a(j,{x:100,gap:40,style:n,get children(){return[a(t,{autofocus:!0,onEnter:r,children:"TV Shows"}),a(t,{states:{active:!0,disabled:!1},children:"Movies"}),a(t,{states:"active",children:"Sports"}),a(t,{states:"disabled",children:"News"})]}})]},Ls=()=>{const r={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:M("#4dabf5")},n={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function t(l){return a(N,W(l,{style:{width:200,height:100,y:5,color:392801023}}))}const[e,o]=D(50);function i(){var l;(l=this.children.selected)==null||l.setFocus(),o(150+(this.y||0)*-1)}xe(()=>{At("#333333")});const s=50;return a(q,{x:160,get y(){return e()},animate:!0,gap:30,height:850,get width(){return r.width},get style(){return it.Column},get children(){return[a(A,{style:n,children:"Flex Start"}),a(j,{gap:s,style:r,onFocus:i,get children(){return[a(t,{autofocus:!0}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(A,{style:n,children:"Flex Start - Margin Left"}),a(j,{gap:s,style:r,onFocus:i,get children(){return[a(t,{marginLeft:100}),a(t,{}),a(t,{marginLeft:100}),a(t,{}),a(t,{})]}}),a(A,{style:n,children:"Flex End"}),a(j,{gap:s,justifyContent:"flexEnd",style:r,onFocus:i,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(A,{style:n,children:"Flex End - Margin Right"}),a(j,{gap:s,justifyContent:"flexEnd",style:r,onFocus:i,get children(){return[a(t,{}),a(t,{marginRight:100}),a(t,{}),a(t,{}),a(t,{marginRight:100})]}}),a(A,{style:n,children:"Center - No Margin Support"}),a(j,{gap:s,justifyContent:"center",style:r,onFocus:i,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(A,{style:n,children:"Space Between - No Margin Support"}),a(j,{gap:s,justifyContent:"spaceBetween",style:r,onFocus:i,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(A,{style:n,children:"Space Evenly - No Margin Support"}),a(j,{gap:s,justifyContent:"spaceEvenly",style:r,onFocus:i,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}})]}})},As=()=>{const r={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:M("#4dabf5")},n={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function t(c){return a(N,W(c,{style:{width:200,height:100,y:5,color:392801023}}))}function e(){return Math.floor(Math.random()*91)+10}const[o,i]=D(50);function s(){var c;(c=this.children.selected)==null||c.setFocus(),i(150+(this.y||0)*-1)}xe(()=>{At("#333333")});const l=50;return a(q,{x:160,get y(){return o()},animate:!0,gap:30,height:850,get width(){return r.width},get style(){return it.Column},get children(){return[a(A,{style:n,children:"Flex Start - AlignItems: center"}),a(j,{alignItems:"center",gap:l,style:r,onFocus:s,get children(){return[a(t,{autofocus:!0,get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}})]}}),a(A,{style:n,children:"Flex Start - Margin Left - AlignItems: flexStart"}),a(j,{gap:l,alignItems:"flexStart",style:r,onFocus:s,get children(){return[a(t,{marginLeft:100,get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{marginLeft:100,get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}})]}}),a(A,{style:n,children:"Flex End - AlignItems: flexEnd"}),a(j,{gap:l,justifyContent:"flexEnd",alignItems:"flexEnd",style:r,onFocus:s,get children(){return[a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}})]}}),a(A,{style:n,children:"Flex End - Margin Right"}),a(j,{gap:l,justifyContent:"flexEnd",style:r,onFocus:s,get children(){return[a(t,{get height(){return e()}}),a(t,{marginRight:100,get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{marginRight:100,get height(){return e()}})]}}),a(A,{style:n,children:"Center - No Margin Support"}),a(j,{gap:l,justifyContent:"center",style:r,onFocus:s,get children(){return[a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}})]}}),a(A,{style:n,children:"Space Between - No Margin Support"}),a(j,{gap:l,justifyContent:"spaceBetween",style:r,onFocus:s,get children(){return[a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}})]}}),a(A,{style:n,children:"Space Evenly - No Margin Support"}),a(j,{gap:l,justifyContent:"spaceEvenly",style:r,onFocus:s,get children(){return[a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}}),a(t,{get height(){return e()}})]}})]}})},Ms=()=>{const r={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:M("00000000")},n={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:M("#4dabf5"),height:850,width:80},t={fontSize:44,y:20,x:150};function e(h){const u={width:o(),height:80,x:5,color:M("#1769aa")};return a(N,W(h,{style:u}))}function o(){return Math.floor(Math.random()*61)+10}const[i,s]=D(50);function l(){var h;(h=this.children.selected)==null||h.setFocus(),s(150+(this.y||0)*-1)}xe(()=>{At("#333333")});const c=50;return[a(A,{style:t,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),a(j,{gap:c,style:r,onFocus:l,get children(){return[a(q,{gap:30,style:n,alignItems:"center",get children(){return[a(e,{autofocus:!0}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:c,style:n,onFocus:l,alignItems:"flexStart",get children(){return[a(e,{marginTop:100}),a(e,{}),a(e,{marginTop:100}),a(e,{}),a(e,{})]}}),a(q,{gap:c,alignItems:"flexEnd",justifyContent:"flexEnd",style:n,onFocus:l,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:c,justifyContent:"flexEnd",style:n,onFocus:l,get children(){return[a(e,{}),a(e,{marginBottom:100}),a(e,{}),a(e,{}),a(e,{marginBottom:100})]}}),a(q,{gap:c,justifyContent:"center",style:n,onFocus:l,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:c,justifyContent:"spaceBetween",style:n,onFocus:l,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:c,justifyContent:"spaceEvenly",style:n,onFocus:l,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}})]}})]},Ns=()=>{const r={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:M("00000000")},n={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:M("#4dabf5"),height:850,width:60},t={fontSize:44,y:20,x:150};function e(c){const h={width:50,height:80,x:5,color:M("#1769aa")};return a(N,W(c,{style:h}))}const[o,i]=D(50);function s(){var c;(c=this.children.selected)==null||c.setFocus(),i(150+(this.y||0)*-1)}xe(()=>{At("#333333")});const l=50;return[a(A,{style:t,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),a(j,{gap:l,style:r,onFocus:s,get children(){return[a(q,{gap:30,style:n,get children(){return[a(e,{autofocus:!0}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:l,style:n,onFocus:s,get children(){return[a(e,{marginTop:100}),a(e,{}),a(e,{marginTop:100}),a(e,{}),a(e,{})]}}),a(q,{gap:l,justifyContent:"flexEnd",style:n,onFocus:s,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:l,justifyContent:"flexEnd",style:n,onFocus:s,get children(){return[a(e,{}),a(e,{marginBottom:100}),a(e,{}),a(e,{}),a(e,{marginBottom:100})]}}),a(q,{gap:l,justifyContent:"center",style:n,onFocus:s,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:l,justifyContent:"spaceBetween",style:n,onFocus:s,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(q,{gap:l,justifyContent:"spaceEvenly",style:n,onFocus:s,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}})]}})]},Ps=()=>{function r(i,s){this.states.toggle("disabled")}const n={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:M("00000000"),gap:26,y:400,x:100},t={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},e=["RoundedRectangle",{radius:65}];function o(i){return a(N,W(i,{forwardStates:!0,animate:!0,style:t,shader:e,get children(){return a(A,{style:is,get children(){return i.children}})}}))}return a(j,{style:n,get children(){return[a(o,{autofocus:!0,onEnter:r,children:"Focused"}),a(o,{states:{active:!0,disabled:!1},children:"Normal"}),a(o,{states:"disabled",children:"Disabled"})]}})},$s=()=>{const r=kn(),n=ee(),[t]=Dt(()=>({...r}),Mr),[e]=Dt(()=>({...r}),Es),[o]=Dt(()=>({...r}),Fs);mt(Ft(t,g=>{At(g.backgroundImage)},{defer:!0}));const i=600,s={color:M("#000000"),alpha:0,width:1900,height:890,x:10,y:i,borderRadius:30};function l(){var g;(g=this.children.selected)==null||g.setFocus(),u.y=i,f.y=i,f.alpha=0}function c(){var g;(g=this.children.selected)==null||g.setFocus(),u.y=200,f.y=160,f.alpha=.9}function h(){let g=this.children.selected;k(g&&g.href),n(g.href)}let u,f;return a(Rt,{get when(){return t()},keyed:!0,get children(){return[a(Ar,W({y:360,x:150},()=>t().heroContent)),a(q,{animate:!0,ref(g){const v=u;typeof v=="function"?v(g):u=g},y:i,x:140,get style(){return it.Column},zIndex:5,get children(){return a(Rt,{get when(){return vr(()=>!!o())()&&e()},get children(){return[a(A,{skipFocus:!0,get style(){return it.RowTitle},children:"Recommendations"}),a(We,{autofocus:!0,onFocus:l,onEnter:h,get items(){return o()}}),a(A,{skipFocus:!0,get style(){return it.RowTitle},children:"Cast and Crew"}),a(We,{onFocus:c,onEnter:h,get items(){return e()}})]}})}}),a(N,{ref(g){const v=f;typeof v=="function"?v(g):f=g},animate:!0,style:s})]}})};function Ds({id:r}){return Ot.get("/person/".concat(r,"/combined_credits")).then(({cast:n})=>pe(n.slice(0,7)))}function Bs({id:r}){return Ot.get("/person/".concat(r)).then(n=>({backgroundImage:he(n.profile_path,"original"),heroContent:{title:n.title||n.name,description:n.biography},...n}))}const Ys=()=>{const r=kn(),n=ee(),[t]=Dt(()=>({...r}),Bs),[e]=Dt(()=>({...r}),Ds);mt(Ft(t,s=>{At(s.backgroundImage)},{defer:!0}));const o={color:M("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function i(){let s=this.children.selected;k(s&&s.href),n(s.href)}return a(Rt,{get when(){return t()},keyed:!0,get children(){return[a(N,{x:150,y:200,get style(){return it.Column},zIndex:3,get children(){return[a(A,{get style(){return Q.typography.display2},get children(){return t().name}}),a(A,{get style(){return it.peopleBio},get children(){return t().biography}})]}}),a(N,{style:o}),a(q,{y:670,x:140,get style(){return it.Column},get children(){return a(Rt,{get when(){return e()},get children(){return[a(A,{skipFocus:!0,get style(){return it.RowTitle},children:"Credits"}),a(We,{autofocus:!0,onEnter:i,get items(){return e()}})]}})}})]}})},Os=()=>(()=>{const r=Lt("node");return Bt(r,"style",{width:1920,height:1080,color:868483072}),r})();function Ws(){let r,n,t=0;const e=1,o={alpha:e,color:4294967295},i={duration:1e3,easing:"ease-in-out"};return mt(Ft(ls,s=>{if(s.startsWith("#")){r.color=s,r.src="",r.alpha=1,t=1,n.alpha=0;return}else r.color=4294967295;if(t===0){r.src=s,t=1;return}if(t===1){n.src=s,t=2,n.alpha=[e],r.alpha=[0];return}t===2&&(r.src=s,t=1,r.alpha=e,n.alpha=0)},{defer:!0})),a(N,{width:1920,height:1080,zIndex:-5,get children(){return[a(N,{ref(s){const l=r;typeof l=="function"?l(s):r=s},animate:!0,animationSettings:i,style:o}),a(N,{ref(s){const l=n;typeof l=="function"?l(s):n=s},animate:!0,animationSettings:i,style:o,alpha:0}),a(N,{get effects(){return{radialGradient:{colors:[124,124,M(Q.color.container)],stops:[0,.4,.9],height:800,width:1920,pivot:[.8,0]}}}})]}})}const wn={Column:{...Q.flexColumn,width:320,height:600,y:360,gap:20,zIndex:101,x:[8,{duration:250,easing:"ease-in-out"}],focus:{x:[Q.layout.marginX,{duration:250,easing:"ease-in-out"}]}},Gradient:{zIndex:99,linearGradient:{angle:ui(270),stops:[0,.4,.8],colors:[M(Q.color.primary),M(Q.color.primary),M("#00000000")]},alpha:[0],focus:{width:1600,alpha:[1]},width:100,height:1080},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:M(Q.color.container)},active:{width:328,height:70}}},Us="/solid-demo-app/",Xs=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function js(r){const n=Qi(Us+"assets/icons_white.png",Xs);return a(N,W(r,{get texture(){return n[r.name]},get width(){return n[r.name].props.width},get height(){return n[r.name].props.height},get x(){return(100-(n[r.name].props.width||0))/2},get y(){return(100-(n[r.name].props.height||0))/2}}))}function Ee(r){return a(N,W(r,{forwardStates:!0,get style(){return wn.NavButton},get children(){return[a(N,{y:-16,get children(){return a(js,{scale:.5,get name(){return r.icon}})}}),a(A,{get style(){return{...Q.typography.button1,fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}}},get children(){return r.children}})]}}))}function Hs(r){let n;const t=ee();function e(){n.states.add("focus"),this.children.forEach(i=>i.states.add("active")),this.children.selected.setFocus()}function o(){n.states.remove("focus"),this.selected=0,this.children.forEach(i=>i.states.remove("active"))}return[a(q,W(r,{onFocus:e,onBlur:o,get style(){return wn.Column},animate:!0,get children(){return[a(Ee,{onEnter:()=>t("/browse/all"),icon:"trending",children:"Trending"}),a(Ee,{icon:"movie",onEnter:()=>t("/browse/movie"),children:"Movies"}),a(Ee,{icon:"tv",onEnter:()=>t("/browse/tv"),children:"TV"}),a(Ee,{icon:"experiment",onEnter:()=>t("/examples"),children:"Examples"})]}})),a(N,{ref(i){const s=n;typeof s=="function"?s(i):n=i},get style(){return wn.Gradient}})]}const Gs=()=>{Wi({Menu:"m"}),qi();const r=ee();let n,t,e;return mt(Ft(Be,o=>{k(o),setTimeout(()=>{o.heroContent?(n.parent=o.parent,n.alpha=1,n.scale=1,n.x=o.x-5,n.y=o.y-5,n.width=o.width+10,n.height=o.height+10,n.createAnimation({scale:1.1}).start()):n.alpha=0},10)},{defer:!0})),a(N,{ref(o){const i=window.APP;typeof i=="function"?i(o):window.APP=o},onLast:()=>history.back(),onMenu:()=>r("/"),style:{width:1920,height:1080},onLeft:()=>{if(t.states.has("focus"))return!1;e=Be(),t.setFocus()},onRight:()=>t.states.has("focus")&&e.setFocus(),get children(){return[a(Ws,{}),a(as,{get color(){return M(Q.color.focus)},ref(o){const i=n;typeof i=="function"?i(o):n=o}}),a(Mi,{get children(){return[a(lt,{path:"",component:Kn}),a(lt,{path:"examples",component:Is}),a(lt,{path:"browse/:filter",component:Kn}),a(lt,{path:"text",component:zs}),a(lt,{path:"buttons",component:ks}),a(lt,{path:"flex",component:Ls}),a(lt,{path:"flexsize",component:As}),a(lt,{path:"flexcolumnsize",component:Ms}),a(lt,{path:"flexcolumn",component:Ns}),a(lt,{path:"buttonsmaterial",component:Ps}),a(lt,{path:"entity/people/:id",component:Ys}),a(lt,{path:"entity/:type/:id",component:$s}),a(lt,{path:"*all",component:Os})]}}),a(Hs,{ref(o){const i=t;typeof i=="function"?i(o):t=o}})]}})},Vs=new URL("AppCoreExtensions-406f6f1c.js",import.meta.url).href;Ct.debug=!1;Ct.fontSettings.fontFamily="Ubuntu";Ct.fontSettings.color=M("#ffffff");Ct.fontSettings.fontSize=100;ci(()=>a(ii,{options:{coreExtensionModule:Vs,threadXCoreWorkerUrl:void 0},get children(){return a(Ai,{get source(){return yi()},get children(){return a(Gs,{})}})}}));export{qs as __vite_legacy_guard};
//# sourceMappingURL=index-60b39dae.js.map
