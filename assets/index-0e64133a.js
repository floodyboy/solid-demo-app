var Mr=Object.defineProperty;var Nr=(r,n,e)=>n in r?Mr(r,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[n]=e;var d=(r,n,e)=>(Nr(r,typeof n!="symbol"?n+"":n,e),e);import{a as k,E as ft,g as Lr,m as Pn,b as gt,c as Re,T as qn,d as $r,e as Dr,i as Yr,S as An,f as Qn,B as Br,h as Or,j as Wr,k as Kt,W as Mn,l as Jn,n as Xr,o as jr,C as Hr}from"./CoreExtension-c81fcba3.js";function Gs(){import.meta.url,import("_").catch(()=>1);async function*r(){}}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const Zn=(r,n)=>r===n,Pt=Symbol("solid-proxy"),Ur=Symbol("solid-track"),At={equals:Zn};let er=sr;const pe=1,Mt=2,tr={owned:null,cleanups:null,context:null,owner:null},Vt={};var $=null;let qt=null,Y=null,ee=null,_e=null,Wt=0;function Je(r,n){const e=Y,t=$,o=r.length===0,i=n===void 0?t:n,s=o?tr:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=o?r:()=>r(()=>se(()=>jt(s)));$=s,Y=null;try{return Se(l,!0)}finally{Y=e,$=t}}function B(r,n){n=n?Object.assign({},At,n):At;const e={value:r,observers:null,observerSlots:null,comparator:n.equals||void 0},t=o=>(typeof o=="function"&&(o=o(e.value)),ir(e,o));return[or.bind(e),t]}function nn(r,n,e){const t=mt(r,n,!0,pe);Ke(t)}function ve(r,n,e){const t=mt(r,n,!1,pe);Ke(t)}function me(r,n,e){er=eo;const t=mt(r,n,!1,pe);(!e||!e.render)&&(t.user=!0),_e?_e.push(t):Ke(t)}function J(r,n,e){e=e?Object.assign({},At,e):At;const t=mt(r,n,!0,0);return t.observers=null,t.observerSlots=null,t.comparator=e.equals||void 0,Ke(t),or.bind(t)}function Gr(r){return r&&typeof r=="object"&&"then"in r}function He(r,n,e){let t,o,i;arguments.length===2&&typeof n=="object"||arguments.length===1?(t=!0,o=r,i=n||{}):(t=r,o=n,i=e||{});let s=null,l=Vt,c=!1,h="initialValue"in i,u=typeof t=="function"&&J(t);const p=new Set,[f,w]=(i.storage||B)(i.initialValue),[T,S]=B(void 0),[b,y]=B(void 0,{equals:!1}),[m,x]=B(h?"ready":"unresolved");function g(_,v,R,E){return s===_&&(s=null,E!==void 0&&(h=!0),(_===l||v===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(E,{value:v})),l=Vt,C(v,R)),v}function C(_,v){Se(()=>{v===void 0&&w(()=>_),x(v!==void 0?"errored":h?"ready":"unresolved"),S(v);for(const R of p.keys())R.decrement();p.clear()},!1)}function F(){const _=Qr,v=f(),R=T();if(R!==void 0&&!s)throw R;return Y&&!Y.user&&_&&nn(()=>{b(),s&&(_.resolved||p.has(_)||(_.increment(),p.add(_)))}),v}function I(_=!0){if(_!==!1&&c)return;c=!1;const v=u?u():t;if(v==null||v===!1){g(s,se(f));return}const R=l!==Vt?l:se(()=>o(v,{value:f(),refetching:_}));return Gr(R)?(s=R,"value"in R?(R.status==="success"?g(s,R.value,void 0,v):g(s,void 0,void 0,v),R):(c=!0,queueMicrotask(()=>c=!1),Se(()=>{x(h?"refreshing":"pending"),y()},!1),R.then(E=>g(R,E,void 0,v),E=>g(R,void 0,lr(E),v)))):(g(s,R,void 0,v),R)}return Object.defineProperties(F,{state:{get:()=>m()},error:{get:()=>T()},loading:{get(){const _=m();return _==="pending"||_==="refreshing"}},latest:{get(){if(!h)return F();const _=T();if(_&&!s)throw _;return f()}}}),u?nn(()=>I(!1)):I(!1),[F,{refetch:I,mutate:w}]}function nr(r,n=Zn,e){const t=new Map,o=mt(i=>{const s=r();for(const[l,c]of t.entries())if(n(l,s)!==n(l,i))for(const h of c.values())h.state=pe,h.pure?ee.push(h):_e.push(h);return s},void 0,!0,pe);return Ke(o),i=>{const s=Y;if(s){let l;(l=t.get(i))?l.add(s):t.set(i,l=new Set([s])),Pe(()=>{l.delete(s),!l.size&&t.delete(i)})}return n(i,o.value)}}function Kr(r){return Se(r,!1)}function se(r){if(Y===null)return r();const n=Y;Y=null;try{return r()}finally{Y=n}}function Fe(r,n,e){const t=Array.isArray(r);let o,i=e&&e.defer;return s=>{let l;if(t){l=Array(r.length);for(let h=0;h<r.length;h++)l[h]=r[h]()}else l=r();if(i){i=!1;return}const c=se(()=>n(l,o,s));return o=l,c}}function pt(r){me(()=>se(r))}function Pe(r){return $===null||($.cleanups===null?$.cleanups=[r]:$.cleanups.push(r)),r}function Xt(){return $}function Vr(r,n){const e=$,t=Y;$=r,Y=null;try{return Se(n,!0)}catch(o){_n(o)}finally{$=e,Y=t}}function qr(r){const n=Y,e=$;return Promise.resolve().then(()=>{Y=n,$=e;let t;return Se(r,!1),Y=$=null,t?t.done:void 0})}function rr(r,n){const e=Symbol("context");return{id:e,Provider:to(e),defaultValue:r}}function vn(r){return $&&$.context&&$.context[r.id]!==void 0?$.context[r.id]:r.defaultValue}function wn(r){const n=J(r),e=J(()=>rn(n()));return e.toArray=()=>{const t=e();return Array.isArray(t)?t:t!=null?[t]:[]},e}let Qr;function or(){if(this.sources&&this.state)if(this.state===pe)Ke(this);else{const r=ee;ee=null,Se(()=>Lt(this),!1),ee=r}if(Y){const r=this.observers?this.observers.length:0;Y.sources?(Y.sources.push(this),Y.sourceSlots.push(r)):(Y.sources=[this],Y.sourceSlots=[r]),this.observers?(this.observers.push(Y),this.observerSlots.push(Y.sources.length-1)):(this.observers=[Y],this.observerSlots=[Y.sources.length-1])}return this.value}function ir(r,n,e){let t=r.value;return(!r.comparator||!r.comparator(t,n))&&(r.value=n,r.observers&&r.observers.length&&Se(()=>{for(let o=0;o<r.observers.length;o+=1){const i=r.observers[o],s=qt&&qt.running;s&&qt.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?ee.push(i):_e.push(i),i.observers&&ar(i)),s||(i.state=pe)}if(ee.length>1e6)throw ee=[],new Error},!1)),n}function Ke(r){if(!r.fn)return;jt(r);const n=$,e=Y,t=Wt;Y=$=r,Jr(r,r.value,t),Y=e,$=n}function Jr(r,n,e){let t;try{t=r.fn(n)}catch(o){return r.pure&&(r.state=pe,r.owned&&r.owned.forEach(jt),r.owned=null),r.updatedAt=e+1,_n(o)}(!r.updatedAt||r.updatedAt<=e)&&(r.updatedAt!=null&&"observers"in r?ir(r,t):r.value=t,r.updatedAt=e)}function mt(r,n,e,t=pe,o){const i={fn:r,state:t,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:$,context:$?$.context:null,pure:e};return $===null||$!==tr&&($.owned?$.owned.push(i):$.owned=[i]),i}function Nt(r){if(r.state===0)return;if(r.state===Mt)return Lt(r);if(r.suspense&&se(r.suspense.inFallback))return r.suspense.effects.push(r);const n=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Wt);)r.state&&n.push(r);for(let e=n.length-1;e>=0;e--)if(r=n[e],r.state===pe)Ke(r);else if(r.state===Mt){const t=ee;ee=null,Se(()=>Lt(r,n[0]),!1),ee=t}}function Se(r,n){if(ee)return r();let e=!1;n||(ee=[]),_e?e=!0:_e=[],Wt++;try{const t=r();return Zr(e),t}catch(t){e||(_e=null),ee=null,_n(t)}}function Zr(r){if(ee&&(sr(ee),ee=null),r)return;const n=_e;_e=null,n.length&&Se(()=>er(n),!1)}function sr(r){for(let n=0;n<r.length;n++)Nt(r[n])}function eo(r){let n,e=0;for(n=0;n<r.length;n++){const t=r[n];t.user?r[e++]=t:Nt(t)}for(n=0;n<e;n++)Nt(r[n])}function Lt(r,n){r.state=0;for(let e=0;e<r.sources.length;e+=1){const t=r.sources[e];if(t.sources){const o=t.state;o===pe?t!==n&&(!t.updatedAt||t.updatedAt<Wt)&&Nt(t):o===Mt&&Lt(t,n)}}}function ar(r){for(let n=0;n<r.observers.length;n+=1){const e=r.observers[n];e.state||(e.state=Mt,e.pure?ee.push(e):_e.push(e),e.observers&&ar(e))}}function jt(r){let n;if(r.sources)for(;r.sources.length;){const e=r.sources.pop(),t=r.sourceSlots.pop(),o=e.observers;if(o&&o.length){const i=o.pop(),s=e.observerSlots.pop();t<o.length&&(i.sourceSlots[s]=t,o[t]=i,e.observerSlots[t]=s)}}if(r.owned){for(n=r.owned.length-1;n>=0;n--)jt(r.owned[n]);r.owned=null}if(r.cleanups){for(n=r.cleanups.length-1;n>=0;n--)r.cleanups[n]();r.cleanups=null}r.state=0}function lr(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function _n(r,n=$){throw lr(r)}function rn(r){if(typeof r=="function"&&!r.length)return rn(r());if(Array.isArray(r)){const n=[];for(let e=0;e<r.length;e++){const t=rn(r[e]);Array.isArray(t)?n.push.apply(n,t):n.push(t)}return n}return r}function to(r,n){return function(t){let o;return ve(()=>o=se(()=>($.context={...$.context,[r]:t.value},wn(()=>t.children))),void 0),o}}const no=Symbol("fallback");function Nn(r){for(let n=0;n<r.length;n++)r[n]()}function ro(r,n,e={}){let t=[],o=[],i=[],s=0,l=n.length>1?[]:null;return Pe(()=>Nn(i)),()=>{let c=r()||[],h,u;return c[Ur],se(()=>{let f=c.length,w,T,S,b,y,m,x,g,C;if(f===0)s!==0&&(Nn(i),i=[],t=[],o=[],s=0,l&&(l=[])),e.fallback&&(t=[no],o[0]=Je(F=>(i[0]=F,e.fallback())),s=1);else if(s===0){for(o=new Array(f),u=0;u<f;u++)t[u]=c[u],o[u]=Je(p);s=f}else{for(S=new Array(f),b=new Array(f),l&&(y=new Array(f)),m=0,x=Math.min(s,f);m<x&&t[m]===c[m];m++);for(x=s-1,g=f-1;x>=m&&g>=m&&t[x]===c[g];x--,g--)S[g]=o[x],b[g]=i[x],l&&(y[g]=l[x]);for(w=new Map,T=new Array(g+1),u=g;u>=m;u--)C=c[u],h=w.get(C),T[u]=h===void 0?-1:h,w.set(C,u);for(h=m;h<=x;h++)C=t[h],u=w.get(C),u!==void 0&&u!==-1?(S[u]=o[h],b[u]=i[h],l&&(y[u]=l[h]),u=T[u],w.set(C,u)):i[h]();for(u=m;u<f;u++)u in S?(o[u]=S[u],i[u]=b[u],l&&(l[u]=y[u],l[u](u))):o[u]=Je(p);o=o.slice(0,s=f),t=c.slice(0)}return o});function p(f){if(i[u]=f,l){const[w,T]=B(u);return l[u]=T,n(c[u],w)}return n(c[u])}}}function on(r,n){return se(()=>r(n||{}))}function St(){return!0}const sn={get(r,n,e){return n===Pt?e:r.get(n)},has(r,n){return n===Pt?!0:r.has(n)},set:St,deleteProperty:St,getOwnPropertyDescriptor(r,n){return{configurable:!0,enumerable:!0,get(){return r.get(n)},set:St,deleteProperty:St}},ownKeys(r){return r.keys()}};function Qt(r){return(r=typeof r=="function"?r():r)?r:{}}function oo(){for(let r=0,n=this.length;r<n;++r){const e=this[r]();if(e!==void 0)return e}}function Sn(...r){let n=!1;for(let i=0;i<r.length;i++){const s=r[i];n=n||!!s&&Pt in s,r[i]=typeof s=="function"?(n=!0,J(s)):s}if(n)return new Proxy({get(i){for(let s=r.length-1;s>=0;s--){const l=Qt(r[s])[i];if(l!==void 0)return l}},has(i){for(let s=r.length-1;s>=0;s--)if(i in Qt(r[s]))return!0;return!1},keys(){const i=[];for(let s=0;s<r.length;s++)i.push(...Object.keys(Qt(r[s])));return[...new Set(i)]}},sn);const e={},t={},o=new Set;for(let i=r.length-1;i>=0;i--){const s=r[i];if(!s)continue;const l=Object.getOwnPropertyNames(s);for(let c=0,h=l.length;c<h;c++){const u=l[c];if(u==="__proto__"||u==="constructor")continue;const p=Object.getOwnPropertyDescriptor(s,u);if(!o.has(u))p.get?(o.add(u),Object.defineProperty(e,u,{enumerable:!0,configurable:!0,get:oo.bind(t[u]=[p.get.bind(s)])})):(p.value!==void 0&&o.add(u),e[u]=p.value);else{const f=t[u];f?p.get?f.push(p.get.bind(s)):p.value!==void 0&&f.push(()=>p.value):e[u]===void 0&&(e[u]=p.value)}}}return e}function io(r,...n){if(Pt in r){const o=new Set(n.length>1?n.flat():n[0]),i=n.map(s=>new Proxy({get(l){return s.includes(l)?r[l]:void 0},has(l){return s.includes(l)&&l in r},keys(){return s.filter(l=>l in r)}},sn));return i.push(new Proxy({get(s){return o.has(s)?void 0:r[s]},has(s){return o.has(s)?!1:s in r},keys(){return Object.keys(r).filter(s=>!o.has(s))}},sn)),i}const e={},t=n.map(()=>({}));for(const o of Object.getOwnPropertyNames(r)){const i=Object.getOwnPropertyDescriptor(r,o),s=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,c=0;for(const h of n)h.includes(o)&&(l=!0,s?t[c][o]=i.value:Object.defineProperty(t[c],o,i)),++c;l||(s?e[o]=i.value:Object.defineProperty(e,o,i))}return[...t,e]}const so=r=>"Stale read from <".concat(r,">.");function Ht(r){const n="fallback"in r&&{fallback:()=>r.fallback};return J(ro(()=>r.each,r.children,n||void 0))}function Ce(r){const n=r.keyed,e=J(()=>r.when,void 0,{equals:(t,o)=>n?t===o:!t==!o});return J(()=>{const t=e();if(t){const o=r.children;return typeof o=="function"&&o.length>0?se(()=>o(n?t:()=>{if(!se(e))throw so("Show");return r.when})):o}return r.fallback},void 0,void 0)}const ao=void 0,[$t,cr]=B(null),M=r=>(()=>{const n=Ae("text");return Ze(n,r,!1),n})(),L=r=>(()=>{const n=Ae("node");return Ze(n,r,!1),n})();class ur{constructor(n){d(this,"releaseCallback");this.releaseCallback=n}}class lo extends ur{constructor(e,t){var o,i;super(e);d(this,"textureMap",new Map);d(this,"zeroReferenceTextureSet",new Set);d(this,"options");this.options={textureCleanupIntervalMs:(o=t.textureCleanupIntervalMs)!=null?o:1e4,textureCleanupAgeThreadholdMs:(i=t.textureCleanupAgeThreadholdMs)!=null?i:6e4},setInterval(()=>{const s=Date.now(),l=this.options.textureCleanupAgeThreadholdMs;for(const c of this.zeroReferenceTextureSet)s-c.lastUpdate>l&&(this.releaseCallback(c.id),this.textureMap.delete(c.id),this.zeroReferenceTextureSet.delete(c))},this.options.textureCleanupIntervalMs)}registerTexture(e){var o;const t=(o=e.options)==null?void 0:o.id;if(k(t,"Texture must have an id to be registered"),!this.textureMap.has(t)){const i={id:t,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(t,i),this.zeroReferenceTextureSet.add(i)}}incrementTextureRefCount(e){var i;const t=(i=e.options)==null?void 0:i.id;k(t,"Texture must have an id to be registered");let o=this.textureMap.get(t);o||(this.registerTexture(e),o=this.textureMap.get(t)),k(o,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),o.nodeRefCount++,o.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(o)&&this.zeroReferenceTextureSet.delete(o)}decrementTextureRefCount(e){var i;const t=(i=e.options)==null?void 0:i.id;k(t,"Texture must have an id to be registered");const o=this.textureMap.get(t);k(o,"Texture must have been registered"),o.nodeRefCount--,o.lastUpdate=Date.now(),o.nodeRefCount===0&&this.zeroReferenceTextureSet.add(o),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class co extends ur{constructor(e){super(e);d(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var t,o;k((t=e.options)==null?void 0:t.id,"Texture must have an ID to be registered"),this.registry.register(e,(o=e.options)==null?void 0:o.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class uo{constructor(n,e,t){d(this,"root",null);d(this,"driver");d(this,"canvas");d(this,"settings");d(this,"nodes",new Map);d(this,"nextTextureId",1);d(this,"textureTracker");var S,b;const o={appWidth:n.appWidth||1920,appHeight:n.appHeight||1080,deviceLogicalPixelRatio:n.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:n.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(S=n.clearColor)!=null?S:0,coreExtensionModule:n.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(b=n.experimental_FinalizationRegistryTextureUsageTracker)!=null?b:!1,textureCleanupOptions:n.textureCleanupOptions||{}};this.settings=o;const{appWidth:i,appHeight:s,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:c}=o,h=y=>{this.driver.releaseTexture(y)},u=o.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=u?new co(h):new lo(h,this.settings.textureCleanupOptions);const p=i*l,f=s*l;this.driver=t;const w=document.createElement("canvas");this.canvas=w,w.width=p*c,w.height=f*c,w.style.width="".concat(p,"px"),w.style.height="".concat(f,"px");let T;if(typeof e=="string"?T=document.getElementById(e):T=e,!T)throw new Error("Could not find target element");t.onCreateNode=y=>{this.nodes.set(y.id,y)},t.onBeforeDestroyNode=y=>{this.nodes.delete(y.id)},T.appendChild(w)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(n){return this.driver.createNode(this.resolveNodeDefaults(n))}createTextNode(n){var e,t,o,i,s,l,c,h,u,p,f,w,T,S;return this.driver.createTextNode({...this.resolveNodeDefaults(n),text:(e=n.text)!=null?e:"",textRendererOverride:(t=n.textRendererOverride)!=null?t:null,fontSize:(o=n.fontSize)!=null?o:16,fontFamily:(i=n.fontFamily)!=null?i:"sans-serif",fontStyle:(s=n.fontStyle)!=null?s:"normal",fontWeight:(l=n.fontWeight)!=null?l:"normal",fontStretch:(c=n.fontStretch)!=null?c:"normal",textAlign:(h=n.textAlign)!=null?h:"left",contain:(u=n.contain)!=null?u:"none",scrollable:(p=n.scrollable)!=null?p:!1,scrollY:(f=n.scrollY)!=null?f:0,offsetY:(w=n.offsetY)!=null?w:0,letterSpacing:(T=n.letterSpacing)!=null?T:0,debug:(S=n.debug)!=null?S:{}})}resolveNodeDefaults(n){var l,c,h,u,p,f,w,T,S,b,y,m,x,g,C,F,I,_,v,R,E,z,P,A,D,W,j,ae,Ie,tt,yt,vt,Ne,xe,ue,Z,O,Ee,re,ke,wt,_t,Le,$e,De;const e=(l=n.color)!=null?l:4294967295,t=(u=(h=(c=n.colorTl)!=null?c:n.colorTop)!=null?h:n.colorLeft)!=null?u:e,o=(w=(f=(p=n.colorTr)!=null?p:n.colorTop)!=null?f:n.colorRight)!=null?w:e,i=(b=(S=(T=n.colorBl)!=null?T:n.colorBottom)!=null?S:n.colorLeft)!=null?b:e,s=(x=(m=(y=n.colorBr)!=null?y:n.colorBottom)!=null?m:n.colorRight)!=null?x:e;return{x:(g=n.x)!=null?g:0,y:(C=n.y)!=null?C:0,width:(F=n.width)!=null?F:0,height:(I=n.height)!=null?I:0,alpha:(_=n.alpha)!=null?_:1,clipping:(v=n.clipping)!=null?v:!1,color:e,colorTop:(R=n.colorTop)!=null?R:e,colorBottom:(E=n.colorBottom)!=null?E:e,colorLeft:(z=n.colorLeft)!=null?z:e,colorRight:(P=n.colorRight)!=null?P:e,colorBl:i,colorBr:s,colorTl:t,colorTr:o,zIndex:(A=n.zIndex)!=null?A:0,zIndexLocked:(D=n.zIndexLocked)!=null?D:0,parent:(W=n.parent)!=null?W:null,texture:(j=n.texture)!=null?j:null,shader:(ae=n.shader)!=null?ae:null,src:(Ie=n.src)!=null?Ie:"",scale:(tt=n.scale)!=null?tt:null,scaleX:(vt=(yt=n.scaleX)!=null?yt:n.scale)!=null?vt:1,scaleY:(xe=(Ne=n.scaleY)!=null?Ne:n.scale)!=null?xe:1,mount:(ue=n.mount)!=null?ue:0,mountX:(O=(Z=n.mountX)!=null?Z:n.mount)!=null?O:0,mountY:(re=(Ee=n.mountY)!=null?Ee:n.mount)!=null?re:0,pivot:(ke=n.pivot)!=null?ke:.5,pivotX:(_t=(wt=n.pivotX)!=null?wt:n.pivot)!=null?_t:.5,pivotY:($e=(Le=n.pivotY)!=null?Le:n.pivot)!=null?$e:.5,rotation:(De=n.rotation)!=null?De:0}}destroyNode(n){return this.driver.destroyNode(n)}createTexture(n,e,t){const o=this.nextTextureId++,i={descType:"texture",txType:n,props:e,options:{...t,id:o}};return this.textureTracker.registerTexture(i),i}createShader(n,e){return{descType:"shader",shType:n,props:e}}getNodeById(n){return this.nodes.get(n)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class ho extends ft{constructor(e,t,o){super();d(this,"node");d(this,"props");d(this,"settings");d(this,"propStartValues",{});d(this,"restoreValues",{});d(this,"progress",0);d(this,"timingFunction");this.node=e,this.props=t,this.settings=o,this.propStartValues={},Object.keys(t).forEach(i=>{this.propStartValues[i]=e[i]}),this.timingFunction=i=>i,o.easing&&typeof o.easing=="string"&&(this.timingFunction=Lr(o.easing))}reset(){this.progress=0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const t=this.props[e],o=this.propStartValues[e];this.props[e]=o,this.propStartValues[e]=t}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,o){return(this.timingFunction(e)||e)*(o-t)+t}update(e){const{duration:t,loop:o,easing:i}=this.settings;if(!t){this.emit("finished",{});return}this.progress+=e/t,this.progress>1&&(this.progress=o?0:1,this.emit("finished",{})),Object.keys(this.props).forEach(s=>{const l=this.props[s],c=this.propStartValues[s],h=l;if(s.indexOf("color")!==-1){const u=i?this.timingFunction(this.progress)||this.progress:this.progress,p=Pn(c,h,u);this.node[s]=i?p:Pn(c,h,this.progress)}else this.node[s]=i?this.applyEasing(this.progress,c,h):c+(h-c)*this.progress})}}class fo{constructor(n,e){d(this,"manager");d(this,"animation");d(this,"stoppedPromise",null);d(this,"stoppedResolve",null);d(this,"state");this.manager=n,this.animation=e,this.state="stopped"}start(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){this.makeStoppedPromise();const n=this.stoppedPromise;return k(n),n}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(n=>{this.stoppedResolve=n}))}finished(){k(this.stoppedResolve);const{loop:n,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!n&&this.manager.unregisterAnimation(this.animation)}}const G=0,K=3,te=6,H=1,V=4,oe=7,he=2,de=5,fe=8;class ce{constructor(n){d(this,"data");n?(this.data=new Float32Array(9),this.data[G]=n[0],this.data[K]=n[3],this.data[te]=n[6],this.data[H]=n[1],this.data[V]=n[4],this.data[oe]=n[7],this.data[he]=n[2],this.data[de]=n[5],this.data[fe]=n[8]):this.data=new Float32Array(9)}static get temp(){return go}static multiply(n,e,t){const o=n.data[G]*e.data[G]+n.data[K]*e.data[H]+n.data[te]*e.data[he],i=n.data[G]*e.data[K]+n.data[K]*e.data[V]+n.data[te]*e.data[de],s=n.data[G]*e.data[te]+n.data[K]*e.data[oe]+n.data[te]*e.data[fe],l=n.data[H]*e.data[G]+n.data[V]*e.data[H]+n.data[oe]*e.data[he],c=n.data[H]*e.data[K]+n.data[V]*e.data[V]+n.data[oe]*e.data[de],h=n.data[H]*e.data[te]+n.data[V]*e.data[oe]+n.data[oe]*e.data[fe],u=n.data[he]*e.data[G]+n.data[de]*e.data[H]+n.data[fe]*e.data[he],p=n.data[he]*e.data[K]+n.data[de]*e.data[V]+n.data[fe]*e.data[de],f=n.data[he]*e.data[te]+n.data[de]*e.data[oe]+n.data[fe]*e.data[fe];return t||(t=new ce),t.data[G]=o,t.data[K]=i,t.data[te]=s,t.data[H]=l,t.data[V]=c,t.data[oe]=h,t.data[he]=u,t.data[de]=p,t.data[fe]=f,t}static identity(n){return n||(n=new ce),n.data[G]=1,n.data[K]=0,n.data[te]=0,n.data[H]=0,n.data[V]=1,n.data[oe]=0,n.data[he]=0,n.data[de]=0,n.data[fe]=1,n}static translate(n,e,t){return t||(t=new ce),t.data[G]=1,t.data[K]=0,t.data[te]=n,t.data[H]=0,t.data[V]=1,t.data[oe]=e,t.data[he]=0,t.data[de]=0,t.data[fe]=1,t}static scale(n,e,t){return t||(t=new ce),t.data[G]=n,t.data[K]=0,t.data[te]=0,t.data[H]=0,t.data[V]=e,t.data[oe]=0,t.data[he]=0,t.data[de]=0,t.data[fe]=1,t}static rotate(n,e){const t=Math.cos(n),o=Math.sin(n);return e||(e=new ce),e.data[G]=t,e.data[K]=-o,e.data[te]=0,e.data[H]=o,e.data[V]=t,e.data[oe]=0,e.data[he]=0,e.data[de]=0,e.data[fe]=1,e}static copy(n,e,t){return e||(e=new ce),e.data[0]=n.data[0],e.data[1]=n.data[1],e.data[2]=n.data[2],e.data[3]=n.data[3],e.data[4]=n.data[4],e.data[5]=n.data[5],e.data[6]=n.data[6],e.data[7]=n.data[7],e.data[8]=n.data[8],e}translate(n,e){return this.data[te]=this.data[G]*n+this.data[K]*e+this.data[te],this.data[oe]=this.data[H]*n+this.data[V]*e+this.data[oe],this}scale(n,e){return this.data[G]=this.data[G]*n,this.data[K]=this.data[K]*e,this.data[H]=this.data[H]*n,this.data[V]=this.data[V]*e,this}rotate(n){if(n===0||!(n%Math.PI*2))return this;const e=Math.cos(n),t=Math.sin(n),o=this.data[G]*e+this.data[K]*t,i=this.data[K]*e-this.data[G]*t,s=this.data[H]*e+this.data[V]*t,l=this.data[V]*e-this.data[H]*t;return this.data[G]=o,this.data[K]=i,this.data[H]=s,this.data[V]=l,this}multiply(n){return ce.multiply(this,n,this)}get tx(){return this.data[te]}get ty(){return this.data[oe]}get ta(){return this.data[G]}get tb(){return this.data[K]}get tc(){return this.data[H]}get td(){return this.data[V]}transformPoint(n,e){return[this.data[G]*n+this.data[K]*e+this.data[te],this.data[H]*n+this.data[V]*e+this.data[H]]}}const go=new ce;class Tn extends ft{constructor(e,t){super();d(this,"stage");d(this,"children",[]);d(this,"props");d(this,"recalculationType",6);d(this,"hasUpdates",!0);d(this,"globalTransform");d(this,"scaleRotateTransform");d(this,"localTransform");d(this,"isComplex",!1);d(this,"onTextureLoaded",(e,t)=>{this.emit("loaded",{type:"texture",dimensions:t})});d(this,"onTextureFailed",(e,t)=>{this.emit("failed",{type:"texture",error:t})});this.stage=e,this.props={...t,parent:null},this.parent=t.parent,this.updateScaleRotateTransform()}loadTexture(e,t,o=null){this.props.texture&&this.unloadTexture();const{txManager:i}=this.stage,s=i.loadTexture(e,t,o);this.props.texture=s,this.props.textureOptions=o,queueMicrotask(()=>{s.state==="loaded"?this.onTextureLoaded(s,s.dimensions):s.state==="failed"&&this.onTextureFailed(s,s.error),s.on("loaded",this.onTextureLoaded),s.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null}loadShader(e,t){const o=this.stage.renderer.getShaderManager();k(o);const{shader:i,props:s}=o.loadShader(e,t);this.props.shader=i,this.props.shaderProps=s}setHasUpdates(){if(!this.props.alpha)return;this.hasUpdates=!0;let e=this==null?void 0:this.props.parent;for(;e;)e.hasUpdates=!0,e=e==null?void 0:e.props.parent}setRecalculationType(e){this.recalculationType|=e,this.setHasUpdates()}updateScaleRotateTransform(){this.setRecalculationType(4),this.scaleRotateTransform=ce.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY),this.updateLocalTransform()}updateLocalTransform(){k(this.scaleRotateTransform),this.setRecalculationType(2);const e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,o=this.props.mountX*this.props.width,i=this.props.mountY*this.props.height;this.localTransform=ce.translate(e-o+this.props.x,t-i+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t)}update(e){var o;k(this.localTransform);const t=(o=this.parent)==null?void 0:o.globalTransform;t?this.globalTransform=ce.copy(t,this.globalTransform).multiply(this.localTransform):this.globalTransform=ce.copy(this.localTransform,this.globalTransform),this.children.length&&this.children.forEach(i=>{i.update(e)}),this.hasUpdates=!1,this.recalculationType=0}renderQuads(e,t){const{width:o,height:i,colorTl:s,colorTr:l,colorBl:c,colorBr:h,texture:u,textureOptions:p,shader:f,shaderProps:w}=this.props,{zIndex:T,worldAlpha:S,globalTransform:b}=this;k(b),e.addRenderable({width:o,height:i,colorTl:s,colorTr:l,colorBl:c,colorBr:h,texture:u,textureOptions:p,zIndex:T,shader:f,shaderProps:w,alpha:S,clippingRect:t,tx:b.tx,ty:b.ty,ta:b.ta,tb:b.tb,tc:b.tc,td:b.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.updateLocalTransform())}get absX(){var e,t,o;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((o=(t=this.props.parent)==null?void 0:t.globalTransform)==null?void 0:o.tx)||0)}get absY(){var e,t;return this.props.y+((t=(e=this.props.parent)==null?void 0:e.absY)!=null?t:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.updateLocalTransform())}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.updateLocalTransform())}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.updateLocalTransform())}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.updateScaleRotateTransform())}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.updateScaleRotateTransform())}get worldScaleX(){var e,t;return this.props.scaleX*((t=(e=this.props.parent)==null?void 0:e.worldScaleX)!=null?t:1)||this.props.scaleX}get worldScaleY(){var e,t;return this.props.scaleY*((t=(e=this.props.parent)==null?void 0:e.worldScaleY)!=null?t:1)||this.props.scaleY}get mount(){return this.props.mount}set mount(e){this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.updateLocalTransform()}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX=e,this.updateLocalTransform()}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY=e,this.updateLocalTransform()}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.updateLocalTransform())}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX=e,this.updateLocalTransform()}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY=e,this.updateLocalTransform()}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.updateScaleRotateTransform())}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e}get worldAlpha(){const e=this.props,t=e.parent;return e.alpha*((t==null?void 0:t.worldAlpha)||1)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e}get zIndex(){var i,s;const e=this.props,t=e.zIndex||0,o=((i=e.parent)==null?void 0:i.zIndex)||0;return(s=e.parent)!=null&&s.zIndexLocked?t<o?t:o:t}set zIndex(e){this.props.zIndex=e}get parent(){return this.props.parent}set parent(e){const t=this.props.parent;if(t!==e){if(this.props.parent=e,t){const o=t.children.indexOf(this);k(o!==-1,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(o,1)}e&&e.children.push(this),this.updateScaleRotateTransform()}}}let po=1;function hr(){return po++}class an extends ft{constructor(e,t,o,i){var s;super();d(this,"rendererMain");d(this,"stage");d(this,"id");d(this,"coreNode");d(this,"_children",[]);d(this,"_src","");d(this,"_parent",null);d(this,"_texture",null);d(this,"_shader",null);d(this,"onTextureLoaded",(e,t)=>{this.emit("loaded",t)});d(this,"onTextureFailed",(e,t)=>{this.emit("failed",t)});this.rendererMain=t,this.stage=o,this.id=(s=i==null?void 0:i.id)!=null?s:hr(),this.coreNode=i||new Tn(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var o;const t=this._parent;if(this._parent=e,this.coreNode.parent=(o=e==null?void 0:e.coreNode)!=null?o:null,t){const i=t.children.indexOf(this);k(i!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),t.children.splice(i,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,t){const o=new ho(this.coreNode,e,t);return new fo(this.stage.animationManager,o)}}class mo{constructor(n){d(this,"root");this.root=n}getNodeByType(n){return[]}getNodeById(n){return null}update(n){this.root.update(n)}}const xo=r=>{const n=()=>{r.drawFrame(),requestAnimationFrame(n)};requestAnimationFrame(n)},yo=()=>performance?performance.now():Date.now();class dr extends gt{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(n){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n[0].ctxTexture)}}d(dr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class fr extends gt{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});d(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:t,gl:o}=this;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((s,l)=>{o.activeTexture(o.TEXTURE0+l),o.bindTexture(o.TEXTURE_2D,s.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}d(fr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(t=>"\n          ".concat(t!==0?"else ":"","if (idx == ").concat(t,") {\n            return texture2D(textures[").concat(t,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});class ne{constructor(n){d(this,"priority",1);d(this,"name","");d(this,"ref");d(this,"target");d(this,"passParameters","");d(this,"declaredUniforms","");d(this,"uniformInfo",{});const{ref:e,target:t,props:o={}}=n;this.ref=e,this.target=t;const i={},s=[];let l="";const c=this.constructor.uniforms||{};for(const h in c){const u=c[h],p=u.type,f="".concat(e,"_").concat(h);let w="";u.size&&(w="[".concat(u.size(o),"]")),s.push(f),l+="uniform ".concat(p," ").concat(f).concat(w,";"),i[h]={name:f,uniform:c[h].method}}this.passParameters=s.join(","),this.declaredUniforms=l,this.uniformInfo=i}static getEffectKey(n){return""}static getMethodParameters(n,e){const t=[];for(const o in n){const i=n[o];let s="";i.size&&(s="[".concat(i.size(e),"]")),t.push("".concat(i.type," ").concat(o).concat(s))}return t.join(",")}static resolveDefaults(n){return{}}static makeEffectKey(n){return!1}}d(ne,"uniforms",{}),d(ne,"methods"),d(ne,"onShaderMask"),d(ne,"onColorize"),d(ne,"onEffectMask");class Ye extends ne{constructor(){super(...arguments);d(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:(t=e.radius)!=null?t:10}}}d(Ye,"z$__type__Props"),d(Ye,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),d(Ye,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),d(Ye,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),d(Ye,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class Ve extends ne{constructor(){super(...arguments);d(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}d(Ve,"z$__type__Props"),d(Ve,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Re(e),method:"uniform4fv",type:"vec4"}}),d(Ve,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  "),d(Ve,"onColorize","\n    return color;\n  ");class Be extends ne{constructor(){super(...arguments);d(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s;const t=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops;if(!o){o=[];const l=t.length-1;for(let c=0;c<t.length;c++)o.push(c*(1/l))}return{colors:t,stops:o,angle:(s=e.angle)!=null?s:0}}}d(Be,"z$__type__Props"),d(Be,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(o=>Re(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,t)=>{var l;const o=(l=t.colors)!=null?l:[];let i=e;const s=e;if(i.length===0||i&&i.length!==o.length){for(let c=0;c<o.length;c++)i[c]?(s[c]=i[c],i[c-1]===void 0&&s[c-2]!==void 0&&(s[c-1]=s[c-2]+(i[c]-s[c-2])/2)):s[c]=c*(1/(o.length-1));i=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(Be,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),d(Be,"ColorLoop",e=>{let t="";for(let o=2;o<e;o++)t+="colorOut = mix(colorOut, colors[".concat(o,"], clamp((dist - stops[").concat(o-1,"]) / (stops[").concat(o,"] - stops[").concat(o-1,"]), 0.0, 1.0));");return t}),d(Be,"onColorize",e=>{const t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class bn extends ne{constructor(){super(...arguments);d(this,"name","grayscale")}static getEffectKey(){return"grayscale"}}d(bn,"onColorize","\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  ");class Oe extends ne{constructor(){super(...arguments);d(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}d(Oe,"z$__type__Props"),d(Oe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Re(e),method:"uniform4fv",type:"vec4"}}),d(Oe,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(Oe,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(Oe,"onColorize","\n    return color;\n  ");class We extends ne{constructor(){super(...arguments);d(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}d(We,"z$__type__Props"),d(We,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Re(e),method:"uniform4fv",type:"vec4"}}),d(We,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(We,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(We,"onColorize","\n    return color;\n  ");class Xe extends ne{constructor(){super(...arguments);d(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}d(Xe,"z$__type__Props"),d(Xe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Re(e),method:"uniform4fv",type:"vec4"}}),d(Xe,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(Xe,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(Xe,"onColorize","\n    return color;\n  ");class je extends ne{constructor(){super(...arguments);d(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}d(je,"z$__type__Props"),d(je,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Re(e),method:"uniform4fv",type:"vec4"}}),d(je,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),d(je,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),d(je,"onColorize","\n    return color;\n  ");class qe extends ne{constructor(){super(...arguments);d(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,o,i,s,l;return{amplitude:(t=e.amplitude)!=null?t:.2,narrowness:(o=e.narrowness)!=null?o:4,blockiness:(i=e.blockiness)!=null?i:2,minimizer:(s=e.minimizer)!=null?s:8,time:(l=e.time)!=null?l:Date.now()}}}d(qe,"z$__type__Props"),d(qe,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),d(qe,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),d(qe,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class ot extends ne{constructor(){super(...arguments);d(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:(t=e.fade)!=null?t:10}}}d(ot,"z$__type__Props"),d(ot,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),d(ot,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class it extends ne{constructor(){super(...arguments);d(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s,l,c,h;const t=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops;if(!o){o=[];const u=t.length-1;for(let p=0;p<t.length;p++)o.push(p*(1/u))}return{colors:t,stops:o,width:(s=e.width)!=null?s:0,height:(c=(l=e.height)!=null?l:e.width)!=null?c:0,pivot:(h=e.pivot)!=null?h:[.5,.5]}}}d(it,"z$__type__Props"),d(it,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(o=>Re(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,t)=>{var l;const o=(l=t.colors)!=null?l:[];let i=e;const s=e;if(i.length===0||i&&i.length!==o.length){for(let c=0;c<o.length;c++)i[c]?(s[c]=i[c],i[c-1]===void 0&&s[c-2]!==void 0&&(s[c-1]=s[c-2]+(i[c]-s[c-2])/2)):s[c]=c*(1/(o.length-1));i=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),d(it,"onColorize",e=>{const t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});const Jt={radius:Ye,border:Ve,borderBottom:Xe,borderLeft:je,borderRight:Oe,borderTop:We,fadeOut:ot,linearGradient:Be,radialGradient:it,grayscale:bn,glitch:qe},Te=class Te extends gt{constructor(e,t,o){const i=Te.createShader(t,o);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});d(this,"effects",[]);this.effects=i.effects}bindTextures(e){const{gl:t}=this;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e[0].ctxTexture)}bindProps(e){var t;(t=e.effects)==null||t.forEach((o,i)=>{var u;const s=this.effects[i],l=Jt[s.name],c=(u=o.props)!=null?u:{},h=s.uniformInfo;Object.keys(c).forEach(p=>{const f=l.uniforms[p],w=h[p];let T=f.validator?f.validator(c[p],c):c[p];Array.isArray(T)&&(T=new Float32Array(T)),this.setUniform(w.name,T)})})}static createShader(e,t){const o={},i={};let s="";const l=[],c=[],h=e.effects.map(T=>{const S=t[T.type],b=S.getEffectKey(T.props||{});o[b]=o[b]?++o[b]:1;const y=o[b];y===1&&c.push({key:b,type:T.type,props:T.props});const m=new S({ref:"".concat(b).concat(y===1?"":y),target:b,props:T.props});return s+=m.declaredUniforms,l.push(...Object.values(m.uniformInfo)),m});let u="";c==null||c.forEach(T=>{var I;const S=t[T.type],b=S.resolveDefaults((I=T.props)!=null?I:{}),y=[];for(const _ in S.methods){let v=_;const R=S.methods[_];i[_]&&i[_]!==R&&(v=Te.resolveMethodDuplicate(_,R,i)),i[v]=R.replace("function",v),y.push({m:_,cm:v})}let m=S.onShaderMask instanceof Function?S.onShaderMask(b):S.onShaderMask,x=S.onColorize instanceof Function?S.onColorize(b):S.onColorize,g=S.onEffectMask instanceof Function?S.onEffectMask(b):S.onEffectMask;y.forEach(_=>{const{m:v,cm:R}=_,E=new RegExp("\\$".concat(v),"g");m&&(m=m.replace(E,R)),x&&(x=x.replace(E,R)),g&&(g=g.replace(E,R))});const C=S.getMethodParameters(S.uniforms,b),F=C.length>0?", ".concat(C):"";m&&(u+="\n        float fx_".concat(T.key,"_onShaderMask(float shaderMask ").concat(F,") {\n          ").concat(m,"\n        }\n        ")),x&&(u+="\n          vec4 fx_".concat(T.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(F,") {\n            ").concat(x,"\n          }\n        ")),g&&(u+="\n          vec4 fx_".concat(T.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(F,") {\n            ").concat(g,"\n          }\n        "))});let p="";for(const T in i)p+=i[T];let f="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",w="\n\n    ";for(let T=0;T<h.length;T++){const S=h[T],b=S.passParameters.length>0?", ".concat(S.passParameters):"",y=Jt[S.name];y.onShaderMask&&(w+="\n        shaderMask = fx_".concat(S.target,"_onShaderMask(shaderMask ").concat(b,");\n        ")),y.onColorize&&(w+="\n        maskColor = fx_".concat(S.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(b,");\n        ")),y.onEffectMask&&(f="fx_".concat(S.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(b,")"));const m=h[T+1];(m===void 0||Jt[m.name].onEffectMask)&&(w+="\n          shaderColor = ".concat(f,";\n        "))}return{effects:h,uniforms:l,fragment:Te.fragment(s,p,u,w),vertex:Te.vertex()}}static resolveMethodDuplicate(e,t,o,i=0){const s=e+(i>0?i:"");return o[s]&&o[s]!==t?this.resolveMethodDuplicate(e,t,o,++i):s}static resolveDefaults(e,t){var o;return{effects:((o=e.effects)!=null?o:[]).map(i=>({type:i.type,props:t[i.type].resolveDefaults(i.props||{})})),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var i;let o="";return(i=e.effects)==null||i.forEach(s=>{const c=t[s.type].getEffectKey(s.props||{});o+=",".concat(c)}),"DynamicShader".concat(o)}};d(Te,"z$__type__Props"),d(Te,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),d(Te,"fragment",(e,t,o,i)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(o,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(i,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let Qe=Te;class ln extends gt{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(n){return{radius:n.radius||10,$dimensions:{width:0,height:0}}}bindTextures(n){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n[0].ctxTexture)}bindProps(n){this.setUniform("u_radius",n.radius)}canBatchShaderProps(n,e){return n.radius===e.radius&&n.$dimensions.width===e.$dimensions.width&&n.$dimensions.height===e.$dimensions.height}}d(ln,"z$__type__Props"),d(ln,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const vo=new Float32Array([1,0,0,0,1,0,0,0,1]),Ot=class Ot extends gt{constructor(n){super({renderer:n,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(n){const{gl:e}=this;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n[0].ctxTexture)}bindProps(n){const e=Ot.resolveDefaults(n);for(const t in e)if(t==="transform")this.setUniform("u_transform",!1,e[t]);else if(t==="scrollY")this.setUniform("u_scrollY",e[t]);else if(t==="color"){const o=Re(e.color);this.setUniform("u_color",o)}else t==="size"?this.setUniform("u_size",e[t]):t==="distanceRange"?this.setUniform("u_distanceRange",e[t]):t==="debug"&&this.setUniform("u_debug",e[t]?1:0)}static resolveDefaults(n={}){var e,t,o,i,s,l;return{transform:(e=n.transform)!=null?e:vo,scrollY:(t=n.scrollY)!=null?t:0,color:(o=n.color)!=null?o:4294967295,size:(i=n.size)!=null?i:16,distanceRange:(s=n.distanceRange)!=null?s:1,debug:(l=n.debug)!=null?l:!1}}};d(Ot,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let cn=Ot;class wo{constructor(){d(this,"shCache",new Map);d(this,"shConstructors",{});d(this,"attachedShader",null);d(this,"effectConstructors",{});d(this,"renderer");this.registerShaderType("DefaultShader",dr),this.registerShaderType("DefaultShaderBatched",fr),this.registerShaderType("RoundedRectangle",ln),this.registerShaderType("DynamicShader",Qe),this.registerShaderType("SdfShader",cn),this.registerEffectType("border",Ve),this.registerEffectType("borderBottom",Xe),this.registerEffectType("borderLeft",je),this.registerEffectType("borderRight",Oe),this.registerEffectType("borderTop",We),this.registerEffectType("fadeOut",ot),this.registerEffectType("linearGradient",Be),this.registerEffectType("radialGradient",it),this.registerEffectType("grayscale",bn),this.registerEffectType("glitch",qe),this.registerEffectType("radius",Ye)}registerShaderType(n,e){this.shConstructors[n]=e}registerEffectType(n,e){this.effectConstructors[n]=e}loadShader(n,e){if(!this.renderer)throw new Error("Renderer is not been defined");const t=this.shConstructors[n];if(!t)throw new Error('Shader type "'.concat(n,'" is not registered'));if(n==="DynamicShader")return this.loadDynamicShader(e);const o=t.resolveDefaults(e),i=t.makeCacheKey(o)||t.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:o};const s=new t(this.renderer,e);return i&&this.shCache.set(i,s),{shader:s,props:o}}loadDynamicShader(n){if(!this.renderer)throw new Error("Renderer is not been defined");const e=Qe.resolveDefaults(n,this.effectConstructors),t=Qe.makeCacheKey(e,this.effectConstructors);if(t&&this.shCache.has(t))return{shader:this.shCache.get(t),props:e};const o=new Qe(this.renderer,n,this.effectConstructors);return t&&this.shCache.set(t,o),{shader:o,props:e}}useShader(n){this.attachedShader!==n&&(this.attachedShader&&this.attachedShader.detach(),n.attach(),this.attachedShader=n)}}class _o{constructor(){d(this,"activeAnimations",new Set)}registerAnimation(n){this.activeAnimations.add(n)}unregisterAnimation(n){this.activeAnimations.delete(n)}update(n){this.activeAnimations.forEach(e=>{e.update(n)})}}const ct=class ct extends qn{constructor(e,t){super(e);d(this,"props");this.props=ct.resolveDefaults(t)}async getTextureData(){const{src:e,premultiplyAlpha:t}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:t};const i=await(await fetch(e)).blob();return{data:await createImageBitmap(i,{premultiplyAlpha:t?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"})}}static makeCacheKey(e){const t=ct.resolveDefaults(e);return t.src instanceof ImageData?!1:"ImageTexture,".concat(t.src,",").concat(t.premultiplyAlpha)}static resolveDefaults(e){var t,o;return{src:(t=e.src)!=null?t:"",premultiplyAlpha:(o=e.premultiplyAlpha)!=null?o:!0}}};d(ct,"z$__type__Props");let un=ct;const ut=class ut extends qn{constructor(e,t){super(e);d(this,"props");this.props=ut.resolveDefaults(t)}async getTextureData(){const{width:e,height:t}=this.props,o=e*t*4,i=new Uint8ClampedArray(o);for(let s=0;s<o;s+=4){const l=Math.floor(Math.random()*256);i[s]=l,i[s+1]=l,i[s+2]=l,i[s+3]=255}return{data:new ImageData(i,e,t)}}static makeCacheKey(e){const t=ut.resolveDefaults(e);return"NoiseTexture,".concat(t.width,",").concat(t.height,",").concat(t.cacheId)}static resolveDefaults(e){var t,o,i;return{width:(t=e.width)!=null?t:128,height:(o=e.height)!=null?o:128,cacheId:(i=e.cacheId)!=null?i:0}}};d(ut,"z$__type__Props");let hn=ut;class So{constructor(){d(this,"usedMemory",0);d(this,"txConstructors",{});d(this,"textureKeyCache",new Map);d(this,"textureIdCache",new Map);d(this,"ctxTextureCache",new WeakMap);d(this,"textureRefCountMap",new WeakMap);d(this,"renderer");this.registerTextureType("ImageTexture",un),this.registerTextureType("ColorTexture",$r),this.registerTextureType("NoiseTexture",hn),this.registerTextureType("SubTexture",Dr)}registerTextureType(n,e){this.txConstructors[n]=e}loadTexture(n,e,t=null){var s;const o=this.txConstructors[n];if(!o)throw new Error('Texture type "'.concat(n,'" is not registered'));let i;if((t==null?void 0:t.id)!==void 0&&this.textureIdCache.has(t.id)&&(i=this.textureIdCache.get(t.id)),!i){const l=t==null?void 0:t.id,c=(s=t==null?void 0:t.cacheKey)!=null?s:o.makeCacheKey(e);c&&this.textureKeyCache.has(c)?i=this.textureKeyCache.get(c):i=new o(this,e),l&&this.addTextureIdToCache(l,c,i)}return t!=null&&t.preload&&this.getCtxTexture(i).load(),i}addTextureIdToCache(n,e,t){const{textureIdCache:o,textureRefCountMap:i}=this;o.set(n,t),i.has(t)?i.get(t).count++:(i.set(t,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,t))}removeTextureIdFromCache(n){const{textureIdCache:e,textureRefCountMap:t}=this,o=e.get(n);if(o&&(e.delete(n),t.has(o))){const i=t.get(o);k(i),i.count--,i.count===0&&(t.delete(o),i.cacheKey&&this.textureKeyCache.delete(i.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(n){if(this.ctxTextureCache.has(n))return this.ctxTextureCache.get(n);const e=this.renderer.createCtxTexture(n);return this.ctxTextureCache.set(n,e),e}}class gr{constructor(n){d(this,"textRenderers");this.textRenderers=n}addFontFace(n){for(const e in this.textRenderers){const t=this.textRenderers[e];t&&t.isFontFaceSupported(n)&&t.addFontFace(n)}}static resolveFontFace(n,e){const t=[];return n.reduce((i,s)=>{if(i)return i;const l=s[e.fontFamily];if(!l)return;const c=new Set(l);for(const h of c)(h.descriptors.stretch!==e.fontStretch||h.descriptors.style!==e.fontStyle||h.descriptors.weight!==e.fontWeight)&&c.delete(h);return c.values().next().value},void 0)||t[0]}}const To={x:(r,n)=>{r.props.x=n},y:(r,n)=>{r.props.y=n},width:(r,n)=>{r.props.width=n},height:(r,n)=>{r.props.height=n},color:(r,n)=>{r.props.color=n},zIndex:(r,n)=>{r.props.zIndex=n},fontFamily:(r,n)=>{r.props.fontFamily=n},fontWeight:(r,n)=>{r.props.fontWeight=n},fontStyle:(r,n)=>{r.props.fontStyle=n},fontStretch:(r,n)=>{r.props.fontStretch=n},fontSize:(r,n)=>{r.props.fontSize=n},scaleX:(r,n)=>{r.props.scaleX=n},scaleY:(r,n)=>{r.props.scaleY=n},text:(r,n)=>{r.props.text=n},textAlign:(r,n)=>{r.props.textAlign=n},contain:(r,n)=>{r.props.contain=n},offsetY:(r,n)=>{r.props.offsetY=n},scrollable:(r,n)=>{r.props.scrollable=n},scrollY:(r,n)=>{r.props.scrollY=n},letterSpacing:(r,n)=>{r.props.letterSpacing=n},debug:(r,n)=>{r.props.debug=n}};class pr{constructor(n){d(this,"stage");d(this,"set");this.stage=n,this.set=Object.freeze({...To,...this.getPropertySetters()})}setStatus(n,e,t){n.status!==e&&(n.status=e,n.emitter.emit(e,t))}}const bo=24;function Co(r,n,e,t,o,i,s){let l=0;o&&(l=Math.min(Math.max(Math.floor(o.y1/r),0),i.length));const c=0,h=n/e+l*t;if(!(s&&h>=s/e))return{x:c,y:h,lineIndex:l}}class Ft{constructor(n,e=0){d(this,"iterator");d(this,"peekBuffer",[]);d(this,"_lastIndex");this.iterator=n,this.iterator=n,this._lastIndex=e-1,this.peekBuffer=[]}next(){const n=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return n.done?this._lastIndex=-1:this._lastIndex++,n}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const n=this.iterator.next();return this.peekBuffer.push(n),n}get lastIndex(){return this._lastIndex}}function*It(r,n=0){let e=n;for(;e<r.length;){const t=r.codePointAt(e);if(t===void 0)throw new Error("Invalid Unicode code point");yield t,e+=t<=65535?1:2}}function Ro(r,n,e){const t=e.shapeText(n,new Ft(It(r,0),0));let o=0;for(const i of t)i.mapped&&(o+=i.xAdvance);return o}function Fo(r,n,e,t,o,i,s,l,c,h,u,p,f,w,T,S){k(w,"Font face must be loaded"),k(w.loaded,"Font face must be loaded"),k(w.data,"Font face must be loaded"),k(w.shaper,"Font face must be loaded");const b=w.data.info.size,y=l/b,m=i/y,x=c/y,g=p[r],C=(g==null?void 0:g.codepointIndex)||0,F=(g==null?void 0:g.maxX)||0,I=(g==null?void 0:g.maxY)||0;let _=F,v=I,R=n,E=e,z=0;const P={codepointIndex:-1,bufferOffset:-1,xStart:-1},A=w.shaper,D={letterSpacing:x};let W=A.shapeText(D,new Ft(It(t,C),C)),j,ae=-1;const Ie=[],tt="...",yt=s/y,vt=Ro(tt,D,A);let Ne=!0;for(;Ne;){const xe=u!=="both"||S||E+b+b<=yt,ue=xe?m:m-vt;let Z=0;for(;(j=W.next())&&!j.done;){const O=j.value;if(r===p.length)p.push({codepointIndex:O.cluster,maxY:v,maxX:_});else if(r>p.length)throw new Error("Unexpected lineCache length");if(O.codepoint===32||O.codepoint===10?P.codepointIndex!==-1&&(P.codepointIndex=-1,Z=R):P.codepointIndex===-1&&(P.codepointIndex=O.cluster,P.bufferOffset=z,P.xStart=Z),O.mapped){const Ee=R+O.xOffset+O.width;if(u!=="none"&&Ee>=ue&&P.codepointIndex!==-1&&P.codepointIndex<O.cluster&&P.xStart>0)if(xe){W=A.shapeText(D,new Ft(It(t,P.codepointIndex),P.codepointIndex)),z=P.bufferOffset;break}else W=A.shapeText(D,new Ft(It(tt,0),0)),R=P.xStart,z=P.bufferOffset;else{const re=R+O.xOffset,ke=E+O.yOffset,wt=f?E+b>=f.y1/y:!0,_t=f?E<=f.y2/y:!0;if(wt&&_t){ae===-1&&(ae=z);const Le=w.getAtlasEntry(O.glyphId),$e=Le.x/w.data.common.scaleW,De=Le.y/w.data.common.scaleH,kn=Le.width/w.data.common.scaleW,zn=Le.height/w.data.common.scaleH;h[z++]=re,h[z++]=ke,h[z++]=$e,h[z++]=De,h[z++]=re+O.width,h[z++]=ke,h[z++]=$e+kn,h[z++]=De,h[z++]=re,h[z++]=ke+O.height,h[z++]=$e,h[z++]=De+zn,h[z++]=re+O.width,h[z++]=ke+O.height,h[z++]=$e+kn,h[z++]=De+zn}v=Math.max(v,ke+O.height),R+=O.xAdvance,_=Math.max(_,R)}}else if(O.codepoint===10)break}ae!==-1&&(Ie.push({bufferStart:ae,bufferEnd:z}),ae=-1),R=0,E+=b,r++,P.codepointIndex=-1,Z=0,(!T&&u==="both"&&f&&E>f.y2/y||j&&j.done||u==="both"&&!S&&!xe)&&(Ne=!1)}if(o==="center"){const xe=u==="none"?_:m;for(let ue=0;ue<Ie.length;ue++){const Z=Ie[ue],O=h[Z.bufferEnd-4]-h[Z.bufferStart],Ee=(xe-O)/2;for(let re=Z.bufferStart;re<Z.bufferEnd;re+=4)h[re]+=Ee}}else if(o==="right"){const xe=u==="none"?_:m;for(let ue=0;ue<Ie.length;ue++){const Z=Ie[ue],O=Z.bufferEnd===Z.bufferStart?0:h[Z.bufferEnd-4]-h[Z.bufferStart],Ee=xe-O;for(let re=Z.bufferStart;re<Z.bufferEnd;re+=4)h[re]+=Ee}}return k(j),{bufferNumFloats:z,bufferNumQuads:z/16,layoutNumCharacters:j.done?t.length-C:j.value.cluster-C+1,fullyProcessed:!!j.done,maxX:_,maxY:v}}function Io(r,n,e,t,o,i){const s=t*o,l=i.x1-r,c=i.y1-n;return Yr(i)?{x1:l,y1:c+e-s,x2:l+(i.x2-i.x1),y2:c+e+(i.y2-i.y1)+s}:{x1:0,y1:0,x2:0,y2:0}}class Eo extends pr{constructor(e){super(e);d(this,"ssdfFontFamilies",{});d(this,"msdfFontFamilies",{});d(this,"sdfShader");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.trFontFace=void 0,this.invalidateCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.trFontFace=void 0,this.invalidateCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.trFontFace=void 0,this.invalidateCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.trFontFace=void 0,this.invalidateCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},contain:(e,t)=>{e.props.contain=t,this.invalidateCache(e)},width:(e,t)=>{e.props.width=t,this.invalidateCache(e)},height:(e,t)=>{e.props.height=t,this.invalidateCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){const{fontFamily:t}=e;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||t==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof An}addFontFace(e){k(e instanceof An);const t=e.fontFamily,o=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!o){console.warn("Invalid font face type: ".concat(e.type));return}let i=o[t];i||(i=new Set,o[t]=i),i.add(e)}createState(e){return{props:e,status:"initialState",emitter:new ft,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){performance.now();let{trFontFace:t}=e;const{textH:o,lineCache:i,debugData:s,forceFullLayoutCalc:l}=e;if(s.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!t&&(t=this.resolveFontFace(e.props),e.trFontFace=t,!t)){const A="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error(A),this.setStatus(e,"failed",new Error(A));return}if(!t.loaded){t.on("loaded",function A(){e.emitter.emit("fontLoaded",{}),t==null||t.off("fontLoaded",A)});return}k(t.data,"Font face data should be loaded");const{text:c,fontSize:h,x:u,y:p,contain:f,width:w,height:T,scrollable:S}=e.props,b=f==="both"&&S?e.props.scrollY:0;let{renderWindow:y}=e;const m=t.data.info.size,x=h/m;e.distanceRange=x*t.data.distanceField.distanceRange;const g=c.length*bo;let C=e.vertexBuffer;(!C||C.length<g)&&(C=new Float32Array(g*2));const F={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},I={x1:u,y1:p,x2:f!=="none"?u+w:1/0,y2:f==="both"?p+T:1/0},_=Qn(F,I);if(!l&&y){if(u+y.x1<=_.x1&&u+y.x2>=_.x2&&p-b+y.y1<=_.y1&&p-b+y.y2>=_.y2)return;e.renderWindow=y=void 0}const{offsetY:v,textAlign:R}=e.props;if(!y){const A=_.y2-_.y1,D=Math.ceil(A/m);y=Io(u,p,b,m,D,_)}const E=Co(h,v,x,m,y,i,o);if(!E){this.setStatus(e,"loaded");return}const{letterSpacing:z}=e.props,P=Fo(E.lineIndex,E.x,E.y,c,R,w,T,h,z,C,f,i,y,t,l,S);e.bufferUploaded=!1,e.bufferNumFloats=P.bufferNumFloats,e.bufferNumQuads=P.bufferNumQuads,e.vertexBuffer=C,e.renderWindow=y,s.lastLayoutNumCharacters=P.layoutNumCharacters,s.bufferSize=C.byteLength,P.fullyProcessed&&(e.textW=P.maxX*x,e.textH=P.maxY*x),this.setStatus(e,"loaded")}renderQuads(e,t,o,i){var E,z,P;if(!e.vertexBuffer)return;performance.now();const{renderer:s}=this.stage;this.stage.options;const{fontSize:l,color:c,contain:h,scrollable:u,zIndex:p,debug:f}=e.props,w=h==="both"&&u?e.props.scrollY:0,{textW:T=0,textH:S=0,distanceRange:b,vertexBuffer:y,bufferNumFloats:m,bufferUploaded:x,renderWindow:g,debugData:C,trFontFace:F}=e;let{webGlBuffers:I}=e;if(!I){const A=s.gl,D=4*Float32Array.BYTES_PER_ELEMENT,W=A.createBuffer();k(W),e.webGlBuffers=new Br([{buffer:W,attributes:{a_position:{name:"a_position",size:2,type:A.FLOAT,normalized:!1,stride:D,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:A.FLOAT,normalized:!1,stride:D,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,k(e.webGlBuffers),I=e.webGlBuffers}if(!x){const A=s.gl,D=(E=I==null?void 0:I.getBuffer("a_textureCoordinate"))!=null?E:null;A.bindBuffer(A.ARRAY_BUFFER,D),A.bufferData(A.ARRAY_BUFFER,y,A.STATIC_DRAW),e.bufferUploaded=!0}k(F);const _=new Or(s.gl,s.options,I,this.sdfShader,{transform:t.data,color:Wr(c,i),size:l/(((z=F.data)==null?void 0:z.info.size)||0),scrollY:w,distanceRange:b,debug:f.sdfShaderDebug},i,o,{height:S,width:T},0,p),v=(P=e.trFontFace)==null?void 0:P.texture;k(v);const R=this.stage.txManager.getCtxTexture(v);_.addTexture(R),_.length=e.bufferNumFloats,_.numQuads=e.bufferNumQuads,s.addRenderable(_)}resolveFontFace(e){return gr.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}invalidateCache(e){e.renderWindow=void 0,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading")}}const Ln=2048;class ko{constructor(n,e){d(this,"_canvas");d(this,"_context");d(this,"_settings");d(this,"renderInfo");this._canvas=n,this._context=e,this._settings=this.mergeDefaults({})}set settings(n){this._settings=this.mergeDefaults(n)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const n=[this._settings.fontFace],e=[];for(let t=0,o=n.length;t<o;t++)n[t]==="serif"||n[t]==="sans-serif"?e.push(n[t]):e.push('"'.concat(n[t],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}_load(){if(document.fonts){const n=this._getFontSetting();try{if(!document.fonts.check(n,this._settings.text))return document.fonts.load(n,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,n)}).then(()=>{document.fonts.check(n,this._settings.text)||console.warn("[Lightning] Font not found",n)})}catch(e){console.warn("[Lightning] Can't check font loading for "+n)}}}calculateRenderInfo(){const n={},e=this.getPrecision(),t=this._settings.paddingLeft*e,o=this._settings.paddingRight*e,i=this._settings.fontSize*e;let s=this._settings.offsetY===null?null:this._settings.offsetY*e,l=(this._settings.lineHeight||i)*e;const c=this._settings.w*e,h=this._settings.h*e;let u=this._settings.wordWrapWidth*e;const p=this._settings.cutSx*e,f=this._settings.cutEx*e,w=this._settings.cutSy*e,T=this._settings.cutEy*e,S=(this._settings.letterSpacing||0)*e,b=this._settings.textIndent*e;this.setFontProperties();let y=c||2048/this.getPrecision(),m=y-t;if(m<10&&(y+=10-m,m=10),u||(u=m),this._settings.textOverflow&&!this._settings.wordWrap){let _;switch(this._settings.textOverflow){case"clip":_="";break;case"ellipsis":_=this._settings.maxLinesSuffix;break;default:_=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-b,_)}let x;if(this._settings.wordWrap)x=this.wrapText(this._settings.text,u,S,b);else{x={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const _=x.l.length;for(let v=0;v<_-1;v++)x.n.push(v)}let g=x.l;if(this._settings.maxLines&&g.length>this._settings.maxLines){const _=g.slice(0,this._settings.maxLines);let v=null;if(this._settings.maxLinesSuffix){const A=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,D=this.wrapText(_[_.length-1],u-A,S,b);_[_.length-1]="".concat(D.l[0]).concat(this._settings.maxLinesSuffix),v=[D.l.length>1?D.l[1]:""]}else v=[""];let R;const E=g.length;let z=0;const P=x.n.length;for(R=this._settings.maxLines;R<E;R++)v[z]+="".concat(v[z]?" ":"").concat(g[R]),R+1<P&&x.n[R+1]&&z++;n.remainingText=v.join("\n"),n.moreTextLines=!0,g=_}else n.moreTextLines=!1,n.remainingText="";let C=0;const F=[];for(let _=0;_<g.length;_++){const v=this.measureText(g[_],S)+(_===0?b:0);F.push(v),C=Math.max(C,v)}n.lineWidths=F,c||(y=C+t+o,m=C),l=l||i;let I;if(h)I=h;else{const _=this._settings.textBaseline!="bottom"?.5*i:0;I=l*(g.length-1)+_+Math.max(l,i)+(s||0)}return s===null&&(s=i),n.w=y,n.h=I,n.lines=g,n.precision=e,y||(y=1),I||(I=1),(p||f)&&(y=Math.min(y,f-p)),(w||T)&&(I=Math.min(I,T-w)),n.width=y,n.innerWidth=m,n.height=I,n.fontSize=i,n.cutSx=p,n.cutSy=w,n.cutEx=f,n.cutEy=T,n.lineHeight=l,n.lineWidths=F,n.offsetY=s,n.paddingLeft=t,n.paddingRight=o,n.letterSpacing=S,n.textIndent=b,n}draw(n,e){const t=this.getPrecision(),o=(e==null?void 0:e.lines)||n.lines,i=(e==null?void 0:e.lineWidths)||n.lineWidths,s=e?e.lines.length*n.lineHeight:n.height;this._canvas.width=Math.min(Math.ceil(n.width+this._settings.textRenderIssueMargin),Ln),this._canvas.height=Math.min(Math.ceil(s),Ln),this.setFontProperties(),n.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(n.cutSx||n.cutSy)&&this._context.translate(-n.cutSx,-n.cutSy);let l,c;const h=[];for(let p=0,f=o.length;p<f;p++)l=p===0?n.textIndent:0,c=p*n.lineHeight+n.offsetY,this._settings.verticalAlign=="middle"?c+=(n.lineHeight-n.fontSize)/2:this._settings.verticalAlign=="bottom"&&(c+=n.lineHeight-n.fontSize),this._settings.textAlign==="right"?l+=n.innerWidth-i[p]:this._settings.textAlign==="center"&&(l+=(n.innerWidth-i[p])/2),l+=n.paddingLeft,h.push({text:o[p],x:l,y:c,w:i[p]});if(this._settings.highlight){const p=this._settings.highlightColor,f=this._settings.highlightHeight*t||n.fontSize*1.5,w=this._settings.highlightOffset*t,T=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*t:n.paddingLeft,S=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*t:n.paddingRight;this._context.fillStyle=Kt(p);for(let b=0;b<h.length;b++){const y=h[b];this._context.fillRect(y.x-T,y.y-n.offsetY+w,y.w+S+T,f)}}let u=null;this._settings.shadow&&(u=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Kt(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*t,this._context.shadowOffsetY=this._settings.shadowOffsetY*t,this._context.shadowBlur=this._settings.shadowBlur*t),this._context.fillStyle=Kt(this._settings.textColor);for(let p=0,f=h.length;p<f;p++){const w=h[p];if(n.letterSpacing===0)this._context.fillText(w.text,w.x,w.y);else{const T=w.text.split("");let S=w.x;for(let b=0,y=T.length;b<y;b++)this._context.fillText(T[b],S,w.y),S+=this.measureText(T[b],n.letterSpacing)}}u&&(this._context.shadowColor=u[0],this._context.shadowOffsetX=u[1],this._context.shadowOffsetY=u[2],this._context.shadowBlur=u[3]),(n.cutSx||n.cutSy)&&this._context.translate(n.cutSx,n.cutSy),this.renderInfo=n}wrapWord(n,e,t){const o=this._context.measureText(t).width,i=n.length,s=this._context.measureText(n).width;if(s<=e)return n;let l=Math.floor(e*i/s),c=this._context.measureText(n.substring(0,l)).width+o;if(c>e)for(;l>0&&(c=this._context.measureText(n.substring(0,l)).width+o,c>e);)l-=1;else for(;l<i;)if(c=this._context.measureText(n.substring(0,l)).width+o,c<e)l+=1;else{l-=1;break}return n.substring(0,l)+(e>=o?t:"")}wrapText(n,e,t,o=0){const i=n.split(/\r?\n/g);let s=[];const l=[];for(let c=0;c<i.length;c++){const h=[];let u="",p=e-o;const f=i[c].split(" ");for(let w=0;w<f.length;w++){const T=this.measureText(f[w],t),S=T+this.measureText(" ",t);w===0||S>p?(w>0&&(h.push(u),u=""),u+=f[w],p=e-T-(w===0?o:0)):(p-=S,u+=" ".concat(f[w]))}h.push(u),u="",s=s.concat(h),c<i.length-1&&l.push(s.length)}return{l:s,n:l}}measureText(n,e=0){return e?n.split("").reduce((t,o)=>t+this._context.measureText(o).width+e,0):this._context.measureText(n).width}mergeDefaults(n){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...n}}}const $n=typeof self>"u"?globalThis:self;var Vn;const Dn=((Vn=$n.document)==null?void 0:Vn.fonts)||$n.fonts;function zo(r){const{fontFamily:n,fontStyle:e,fontWeight:t,fontStretch:o,fontSize:i}=r;return[e,t,o,"".concat(i,"px"),n].join(" ")}class Po extends pr{constructor(e){super(e);d(this,"canvas");d(this,"context");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let t=this.canvas.getContext("2d");t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d")),k(t),this.context=t}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.markForReload(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.markForReload(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.markForReload(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.markForReload(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.markForReload(e)},text:(e,t)=>{e.props.text=t,this.markForReload(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.markForReload(e)},color:(e,t)=>{e.props.color=t,this.markForReload(e)},x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},contain:(e,t)=>{e.props.contain=t,this.markForReload(e)},width:(e,t)=>{e.props.width=t,this.markForReload(e)},height:(e,t)=>{e.props.height=t,this.markForReload(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.markForReload(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.markForReload(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Mn}addFontFace(e){k(e instanceof Mn),Dn.add(e.fontFace)}createState(e){return{props:e,status:"initialState",emitter:new ft,canvasPages:void 0,lightning2TextRenderer:new ko(this.canvas,this.context),renderWindow:void 0,renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const y=zo(e.props);if(e.fontInfo={cssString:y,loaded:!1},!e.fontInfo.loaded){Dn.load(y).then(this.onFontLoaded.bind(this,e,y)).catch(this.onFontLoadError.bind(this,e,y));return}}if(!e.fontInfo.loaded)return;if(!e.renderInfo){e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Re(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing};const y=performance.now();e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),console.log("Render info calculated in",performance.now()-y,"ms"),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}const{x:t,y:o,width:i,height:s,scrollY:l,contain:c}=e.props;let{renderWindow:h,canvasPages:u}=e;const p={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},f={x1:t,y1:o,x2:c!=="none"?t+i:1/0,y2:c==="both"?o+s:1/0},w=Qn(p,f),T=w.y2-w.y1,S=Math.ceil(T/e.renderInfo.lineHeight);if(h&&u){const y=t+h.x1,m=o-l+h.y1,x=t+h.x2,g=o-l+h.y2;if(y<=w.x1&&x>=w.x2&&m<=w.y1&&g>=w.y2)return;g<w.y2?(h.y1+=S*e.renderInfo.lineHeight,h.y2+=S*e.renderInfo.lineHeight,u.push(u.shift()),u[2].lineNumStart=u[1].lineNumStart+S,u[2].lineNumEnd=u[2].lineNumStart+S,u[2].valid=!1):m>w.y1&&(h.y1-=S*e.renderInfo.lineHeight,h.y2-=S*e.renderInfo.lineHeight,u.unshift(u.pop()),u[0].lineNumStart=u[1].lineNumStart-S,u[0].lineNumEnd=u[0].lineNumStart+S,u[0].valid=!1)}else{const y=e.renderInfo.lineHeight*S,x=Math.ceil(l/y)*S,g=x-S,C=x+S;u=[{texture:u==null?void 0:u[0].texture,lineNumStart:g,lineNumEnd:g+S,valid:!1},{texture:u==null?void 0:u[1].texture,lineNumStart:x,lineNumEnd:x+S,valid:!1},{texture:u==null?void 0:u[2].texture,lineNumStart:C,lineNumEnd:C+S,valid:!1}],e.canvasPages=u;const F=Math.ceil(l/y)*y;h={x1:0,y1:F-y,x2:i,y2:F+y*2}}e.renderWindow=h;const b=performance.now();for(const y of u)if(!y.valid){if(y.lineNumStart<0){y.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),y.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(y.lineNumStart,y.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(y.lineNumStart,y.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(y.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),y.valid=!0}console.log("pageDrawTime",performance.now()-b,"ms"),this.setStatus(e,"loaded")}renderQuads(e,t,o,i){var I,_,v,R,E,z,P,A,D,W,j,ae;const{stage:s}=this,{canvasPages:l,textW:c=0,textH:h=0,renderWindow:u}=e;if(!l||!u)return;const{x:p,y:f,scrollY:w,contain:T,width:S,height:b}=e.props,y={x:p,y:f,width:T!=="none"?S:c,height:T==="both"?b:h};Jn({x:0,y:0,width:s.options.appWidth,height:s.options.appHeight},y),k(l,"canvasPages is not defined"),k(u,"renderWindow is not defined");const x=(u.y2-u.y1)/3,{zIndex:g,color:C}=e.props,F=i*Xr(C);l[0].valid&&this.stage.renderer.addRenderable({alpha:F,clippingRect:o,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:((_=(I=l[0].texture)==null?void 0:I.dimensions)==null?void 0:_.width)||0,height:((R=(v=l[0].texture)==null?void 0:v.dimensions)==null?void 0:R.height)||0,texture:l[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:g,tx:t.tx,ty:t.ty-w+u.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),l[1].valid&&this.stage.renderer.addRenderable({alpha:F,clippingRect:o,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:((z=(E=l[1].texture)==null?void 0:E.dimensions)==null?void 0:z.width)||0,height:((A=(P=l[1].texture)==null?void 0:P.dimensions)==null?void 0:A.height)||0,texture:l[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:g,tx:t.tx,ty:t.ty-w+u.y1+x,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),l[2].valid&&this.stage.renderer.addRenderable({alpha:F,clippingRect:o,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:((W=(D=l[2].texture)==null?void 0:D.dimensions)==null?void 0:W.width)||0,height:((ae=(j=l[2].texture)==null?void 0:j.dimensions)==null?void 0:ae.height)||0,texture:l[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:g,tx:t.tx,ty:t.ty-w+u.y1+x+x,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}markForReload(e){e.renderInfo=void 0,this.setStatus(e,"loading")}onFontLoaded(e,t){var o;t!==((o=e.fontInfo)==null?void 0:o.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.updateState(e))}onFontLoadError(e,t,o){var i;t!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),o),this.updateState(e))}}const Ao=2e6;class Mo{constructor(n){d(this,"options");d(this,"animationManager");d(this,"txManager");d(this,"fontManager");d(this,"textRenderers");d(this,"shManager");d(this,"renderer");d(this,"scene");d(this,"deltaTime",0);d(this,"lastFrameTime",0);d(this,"currentFrameTime",0);this.options=n;const{canvas:e,clearColor:t,rootId:o,debug:i,appWidth:s,appHeight:l}=n;this.txManager=new So,this.shManager=new wo,this.animationManager=new _o,i!=null&&i.monitorTextureCache&&setInterval(()=>{k(this.txManager);const h=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",h.idCacheSize),console.log("Texture Key Cache Size: ",h.keyCacheSize)},1e3),this.renderer=new jr({stage:this,canvas:e,pixelRatio:n.devicePhysicalPixelRatio*n.deviceLogicalPixelRatio,clearColor:t!=null?t:4278190080,bufferMemory:Ao,txManager:this.txManager,shManager:this.shManager}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new Po(this),sdf:new Eo(this)},this.fontManager=new gr(this.textRenderers);const c=new Tn(this,{id:o,x:0,y:0,width:s,height:l,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.scene=new mo(c),xo(this)}drawFrame(){var o,i;const{renderer:n,scene:e,animationManager:t}=this;e!=null&&e.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=yo(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,t.update(this.deltaTime),n==null||n.reset(),(o=e==null?void 0:e.root)!=null&&o.hasUpdates&&((i=e==null?void 0:e.root)==null||i.update(this.deltaTime)),this.addQuads(e.root),n==null||n.sortRenderables(),n==null||n.render())}addQuads(n,e=null){k(this.renderer&&n.globalTransform);const t=n.globalTransform,o=t.tb!==0||t.tc!==0;let i=n.clipping&&!o?{x:t.tx,y:t.ty,width:n.width*t.ta,height:n.height*t.td}:null;e&&i?i=Jn(e,i):e&&(i=e),n.renderQuads(this.renderer,i),n.children.forEach(s=>{s.worldAlpha!==0&&this.addQuads(s,i)})}resolveTextRenderer(n,e=null){let t=e,o=!1;if(t){const s=this.textRenderers[t];s?s.canRenderFont(n)||(console.warn("Cannot use override text renderer '".concat(t,"' for font"),n),t=null,o=!0):(console.warn("Text renderer override '".concat(t,"' not found.")),t=null,o=!0)}if(!t){for(const[s,l]of Object.entries(this.textRenderers))if(s!=="canvas"&&l.canRenderFont(n)){t=s;break}t||(t="canvas")}o&&console.warn("Falling back to text renderer ".concat(String(t)));const i=this.textRenderers[t];return k(i,"resolvedTextRenderer undefined"),i}get root(){var n;return((n=this.scene)==null?void 0:n.root)||null}}class No extends Tn{constructor(e,t){super(e,t);d(this,"textRenderer");d(this,"trState");d(this,"updateScheduled");d(this,"_textRendererOverride",null);d(this,"onTextLoaded",()=>{const{contain:e}=this,t=this.trState.props.width,o=this.trState.props.height,i=this.trState.textW||0,s=this.trState.textH||0;e==="both"?(this.props.width=t,this.props.height=o):e==="width"?(this.props.width=t,this.props.height=s):e==="none"&&(this.props.width=i,this.props.height=s),this.updateLocalTransform(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});d(this,"onTextFailed",(e,t)=>{this.emit("failed",{type:"text",error:t})});this.updateScheduled=!1,this._textRendererOverride=t.textRendererOverride;const{resolvedTextRenderer:o,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scaleX:t.scaleX,scaleY:t.scaleY,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text},void 0);this.textRenderer=o,this.trState=i}get width(){return this.trState.props.width}set width(e){this.textRenderer.set.width(this.trState,e),this.updateText()}get height(){return this.trState.props.height}set height(e){this.textRenderer.set.height(this.trState,e),this.updateText()}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e),this.updateText()}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e),this.updateText()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:t,textRendererState:o}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=t,this.trState=o}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e),this.updateText()}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e),this.updateText()}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e),this.updateText()}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e),this.updateText()}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e),this.updateText()}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e),this.updateText()}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e),this.updateText()}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e),this.updateText()}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e),this.updateText()}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e),this.updateText()}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e),this.updateText()}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e),this.updateText()}update(e){super.update(e),k(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty),this.trState.status==="loading"&&this.textRenderer.updateState(this.trState)}updateText(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>{this.updateScheduled=!1,this.textRenderer.updateState(this.trState)}))}renderQuads(e,t){k(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,t,this.worldAlpha)}resolveTextRendererAndState(e,t){const o=this.stage.resolveTextRenderer(e,this._textRendererOverride),i=o.createState(e);return t&&["loading","loaded","failed"].forEach(l=>{t.emitter.off(l)}),i.emitter.on("loading",()=>{i.emitter.once("fontLoaded",()=>{this.updateText()}),i.emitter.once("loaded",()=>{i.emitter.off("fontLoaded")})}),i.emitter.on("loaded",this.onTextLoaded),i.emitter.on("failed",this.onTextFailed),this.updateText(),{resolvedTextRenderer:o,textRendererState:i}}}class Lo extends an{constructor(n,e,t){super(n,e,t,new No(t,{id:hr(),x:n.x,y:n.y,width:n.width,height:n.height,alpha:n.alpha,clipping:n.clipping,color:n.color,colorTop:n.colorTop,colorBottom:n.colorBottom,colorLeft:n.colorLeft,colorRight:n.colorRight,colorTl:n.colorTl,colorTr:n.colorTr,colorBl:n.colorBl,colorBr:n.colorBr,zIndex:n.zIndex,zIndexLocked:n.zIndexLocked,scaleX:n.scaleX,scaleY:n.scaleY,mountX:n.mountX,mountY:n.mountY,mount:n.mount,pivot:n.pivot,pivotX:n.pivotX,pivotY:n.pivotY,rotation:n.rotation,text:n.text,fontSize:n.fontSize,fontFamily:n.fontFamily,fontWeight:n.fontWeight,fontStretch:n.fontStretch,fontStyle:n.fontStyle,contain:n.contain,scrollable:n.scrollable,letterSpacing:n.letterSpacing,textAlign:n.textAlign,scrollY:n.scrollY,offsetY:n.offsetY,textRendererOverride:n.textRendererOverride,debug:n.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(n){this.coreNode.text=n}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(n){this.coreNode.textRendererOverride=n}get fontSize(){return this.coreNode.fontSize}set fontSize(n){this.coreNode.fontSize=n}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(n){this.coreNode.fontFamily=n}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(n){this.coreNode.fontWeight=n}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(n){this.coreNode.fontStretch=n}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(n){this.coreNode.fontStyle=n}get textAlign(){return this.coreNode.textAlign}set textAlign(n){this.coreNode.textAlign=n}get contain(){return this.coreNode.contain}set contain(n){this.coreNode.contain=n}get scrollable(){return this.coreNode.scrollable}set scrollable(n){this.coreNode.scrollable=n}get scrollY(){return this.coreNode.scrollY}set scrollY(n){this.coreNode.scrollY=n}get offsetY(){return this.coreNode.offsetY}set offsetY(n){this.coreNode.offsetY=n}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(n){this.coreNode.letterSpacing=n}get debug(){return this.coreNode.debug}set debug(n){this.coreNode.debug=n}}const $o="modulepreload",Do=function(r){return"/solid-demo-app/"+r},Yn={},Yo=function(n,e,t){if(!e||e.length===0)return n();const o=document.getElementsByTagName("link");return Promise.all(e.map(i=>{if(i=Do(i),i in Yn)return;Yn[i]=!0;const s=i.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!t)for(let u=o.length-1;u>=0;u--){const p=o[u];if(p.href===i&&(!s||p.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(i,'"]').concat(l)))return;const h=document.createElement("link");if(h.rel=s?"stylesheet":$o,s||(h.as="script",h.crossOrigin=""),h.href=i,document.head.appendChild(h),s)return new Promise((u,p)=>{h.addEventListener("load",u),h.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(i))))})})).then(()=>n()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};function Bo(r){return r.prototype instanceof Hr}async function Oo(r,n){let e;try{console.log("Loading core extension",r),e=await Yo(()=>import(r),[])}catch(o){console.error("The core extension module at '".concat(r,"' could not be loaded.")),console.error(o);return}if(!e.default){console.error("The core extension module at '".concat(r,"' does not have a default export."));return}const t=e.default;if(Bo(t)){const o=new t;try{await o.run(n)}catch(i){console.error("The core extension at '".concat(r,"' threw an error.")),console.error(i)}}else console.error("The core extension at '".concat(r,"' does not extend CoreExtension."))}class Wo{constructor(){d(this,"root",null);d(this,"stage",null);d(this,"rendererMain",null)}async init(n,e,t){this.stage=new Mo({rootId:1,appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:t,debug:{monitorTextureCache:!1}}),this.rendererMain=n,k(this.stage.root);const o=new an(n.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=o,o.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,o)),this.onCreateNode(o),e.coreExtensionModule&&await Oo(e.coreExtensionModule,this.stage)}createNode(n){k(this.rendererMain),k(this.stage);const e=new an(n,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(n){k(this.rendererMain),k(this.stage);const e=new Lo(n,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(n){n.destroy()}releaseTexture(n){const{stage:e}=this;k(e),e.txManager.removeTextureIdFromCache(n)}getRootNode(){return k(this.root),this.root}onCreateNode(n){throw new Error("Method not implemented.")}onBeforeDestroyNode(n){throw new Error("Method not implemented.")}}let we,Cn;const Xo={appWidth:1920,appHeight:1080,deviceLogicalPixelRatio:.6666667,devicePhysicalPixelRatio:1,rootId:"app",threadXCoreWorkerUrl:void 0};function jo(r={}){const n=new Wo,e={...Xo,...r};return we=new uo({appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,coreExtensionModule:e.coreExtensionModule},e.rootId,n),Cn=we.createShader.bind(we),we}class Ho extends Array{constructor(e){super();d(this,"_parent");this._parent=e}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(e,t){if(t){const o=this.indexOf(t);this.splice(o,0,e)}else this.push(e);e.parent=this._parent,this._parent._isDirty=!0}remove(e){const t=this.indexOf(e);t>=0&&this.splice(t,1)}}const be={debug:!1,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Uo(r,n,...e){}function Et(r){return typeof r=="function"}function kt(r){return Array.isArray(r)}function Go(r){return typeof r=="string"}function Ko(r){return typeof r=="number"}function Vo(r){return Number.isInteger(r)}function qo(r,n){for(const e of n)if(e in r)return!0;return!1}class Bn extends Array{constructor(e,t=[]){var n=(...args)=>{super(...args);d(this,"onChange")};return kt(t)?n(...t):Go(t)?n(t):n(...Object.entries(t).filter(([o,i])=>i).map(([o])=>o)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.push(e),this.onChange()}toggle(e){this.has(e)?this.remove(e):this.add(e)}remove(e){const t=this.indexOf(e);t>=0&&(this.splice(t,1),this.onChange())}}function Qo(r){const n=r.children.filter(y=>y.name!=="TextNode"),e=r.flexDirection||"row",t=e==="row"?"width":"height",o=e==="row"?"height":"width",i=e==="row"?"marginLeft":"marginTop",s=e==="row"?"marginRight":"marginBottom",l=e==="row"?"x":"y",c=e==="row"?"y":"x",h=r[t]||0,u=r[o]||0,p=n.reduce((y,m)=>y+(m[t]||0),0),f=r.gap||0,w=n.length,T=r.justifyContent||"flexStart",S=r.alignItems,b=u&&S?y=>{S==="flexStart"?y[c]=0:S==="center"?y[c]=(u-(y[o]||0))/2:S==="flexEnd"&&(y[c]=u-(y[o]||0))}:y=>y;if(T==="flexStart"){let y=0;n.forEach(m=>{m[l]=y+(m[i]||0),y+=(m[t]||0)+f+(m[i]||0)+(m[s]||0),b(m)})}if(T==="flexEnd"){let y=h;for(let m=w-1;m>=0;m--){const x=n[m];k(x),x[l]=y-(x[t]||0)-(x[s]||0),y-=(x[t]||0)+f+(x[i]||0)+(x[s]||0),b(x)}}if(T==="center"){let y=(h-(p+f*(w-1)))/2;n.forEach(m=>{m[l]=y,y+=(m[t]||0)+f,b(m)})}if(T==="spaceBetween"){const y=(h-p)/(w-1);let m=0;n.forEach(x=>{x[l]=m,m+=(x[t]||0)+y,b(x)})}if(T==="spaceEvenly"){const y=(h-p)/(w+1);let m=y;n.forEach(x=>{x[l]=m,m+=(x[t]||0)+y,b(x)})}}const{animationSettings:Jo}=be;function Zo(r){const n=[];for(const[e,t]of Object.entries(r))n.push({type:e,props:t});return Cn("DynamicShader",{effects:n})}function nt(r=""){return{set(n){Ko(n)&&(n={width:n,color:255}),this.effects={...this.effects||{},["border".concat(r)]:n},this["_border".concat(r)]=n},get(){return this["_border".concat(r)]}}}const ei=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],ti=["clipping","contain","fontFamily","src","text","textAlign","texture"];class Ue extends Object{constructor(e){super();d(this,"name");d(this,"lng",null);d(this,"selected");d(this,"rendered");d(this,"_undoStates");d(this,"_renderProps");d(this,"_effects");d(this,"_parent",null);d(this,"_shader");d(this,"_style");d(this,"_states");d(this,"_animationSettings");d(this,"_updateLayoutOn");d(this,"_width");d(this,"_height");d(this,"_color");d(this,"_borderRadius");d(this,"_border");d(this,"_borderLeft");d(this,"_borderRight");d(this,"_borderTop");d(this,"_borderBottom");d(this,"_animate");d(this,"_autosized");d(this,"_isDirty");d(this,"_dom");d(this,"children");this.name=e,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new Ho(this);for(const t of ei)Object.defineProperty(this,t,{get(){return this["_".concat(t)]||this.lng&&this.lng[t]},set(o){this["_".concat(t)]=o,this._sendToLightningAnimatable(t,o)}});for(const t of ti)Object.defineProperty(this,t,{get(){return this["_".concat(t)]||this.lng&&this.lng[t]},set(o){this["_".concat(t)]=o,this._sendToLightning(t,o)}});Object.defineProperties(this,{borderRadius:{set(t){this._borderRadius=t,this.effects={...this.effects||{},radius:{radius:t}}},get(){return this._borderRadius}},border:nt(),borderLeft:nt("Left"),borderRight:nt("Right"),borderTop:nt("Top"),borderBottom:nt("Bottom")}),Object.defineProperties(this,{linearGradient:{set(t={}){this._linearGradient=t,this.effects={...this.effects||{},linearGradient:t}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(e){this._effects=e,this.shader=Zo(e)}get parent(){return this._parent}set parent(e){var t;this._parent=e,this.rendered&&this.lng&&(this.lng.parent=(t=e==null?void 0:e.lng)!=null?t:null)}get shader(){return this._shader}set shader(e){kt(e)?this._shader=Cn(...e):this._shader=e,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(e,t){if(this.rendered&&this.lng){if(kt(t))return this.createAnimation({[e]:t[0]},t[1]).start();if(this._animate)return this.createAnimation({[e]:t}).start();this.lng[e]=t}else kt(t)&&(t=t[0]),this._renderProps[e]=t}_sendToLightning(e,t){this.rendered&&this.lng?this.lng[e]=t:this._renderProps[e]=t}createAnimation(e,t){return k(this.lng,"Node must be rendered before animating"),this.lng.animate(e,t||this.animationSettings)}setFocus(){this.rendered?cr(this):this.autofocus=!0}isTextNode(){return this.name==="text"}_resizeOnTextLoad(){k(this.lng),this.lng.once("loaded",(e,t)=>{if(t.type==="text"){const{dimensions:o}=t;this.width=o.width,this.height=o.height,k(this.parent),this.parent.updateLayout(this,o)}})}getText(){return this.children.map(e=>e.text).join("")}destroy(){this.lng&&we.destroyNode(this.lng)}set style(e){for(let t in e)t==="animate"&&(t="_animate"),this[t]||(this[t]=e[t]);this._style=e}get style(){return this._style}get hasChildren(){return this.children.length>0}set states(e){this._states=new Bn(this._stateChanged.bind(this),e),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new Bn(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Jo}set animationSettings(e){this._animationSettings=e}get updateLayoutOn(){return this._updateLayoutOn}set updateLayoutOn(e){this._updateLayoutOn=e,queueMicrotask(()=>this.updateLayout())}_applyZIndexToChildren(){const e=this.zIndex;k(e);const o=e>=1&&parseInt(""+e)===e?".":"";this.children.forEach((i,s)=>{(!i.zIndex||i.zIndex<1)&&(i.zIndex=parseFloat("".concat(e).concat(o).concat(s+1)))})}updateLayout(e,t){this.hasChildren&&(Et(this.onBeforeLayout)&&this.onBeforeLayout.call(this,e,t),this.display==="flex"&&Qo(this),Et(this.onLayout)&&this.onLayout.call(this,e,t))}_stateChanged(){var t;if(Uo("State Changed: ",this,this.states),this.forwardStates){const o=this.states.slice();this.children.forEach(i=>i.states=o)}const e=((t=be.stateMapperHook)==null?void 0:t.call(be,this,this.states))||this.states;if(this._undoStates||this.style&&qo(this.style,e)){this._undoStates=this._undoStates||{};let o={};for(const[s,l]of Object.entries(this._undoStates))e.includes(s)||(o={...o,...l});const i=e.reduce((s,l)=>{const c=this.style[l];return c&&(s={...s,...c},this._undoStates&&!this._undoStates[l]&&(this._undoStates[l]={},Object.keys(c).forEach(h=>{k(this._undoStates),this._undoStates[l][h]=this[h]}))),s},{});Object.assign(this,{...o,...i})}}render(){const e=this,t=this.parent;t!=null&&t._isDirty&&(t.updateLayout(),t._applyZIndexToChildren(),t._isDirty=!1),e.updateLayout(),this.states.length&&this._stateChanged();let o=e._renderProps;t!=null&&t.lng&&(o.parent=t.lng),e.isTextNode()?(o={...be.fontSettings,...o,text:e.getText()},e.lng=we.createTextNode(o),Et(e.onLoad)&&e.lng.once("loaded",e.onLoad),(!e.width||!e.height)&&(e._autosized=!0,e._resizeOnTextLoad())):(o.src||o.texture||(k(t),isNaN(o.width)&&(o.width=(t.width||0)-o.x,e._width=o.width),isNaN(o.height)&&(o.height=(t.height||0)-o.y,e._height=o.height),o.color||(e._color=o.color=0)),e.hasChildren&&e._applyZIndexToChildren(),e.lng=we.createNode(o),e.onFail&&e.lng.once("failed",e.onFail),e.onLoad&&e.lng.once("loaded",e.onLoad)),e.rendered=!0,e.autofocus&&e.setFocus(),delete this._renderProps}}function mr(r){r.name!=="TextNode"&&(k(r instanceof Ue),r.render(),r.children.forEach(n=>mr(n)))}const ni=r=>{const n=jo(r.options),e=n.init();let t;return me(()=>{e.then(()=>{k(t),t.lng=n.root,t.children.forEach(mr),Et(r.onFirstRender)&&r.onFirstRender(t)}).catch(console.error)}),(()=>{const o=Ae("canvas"),i=t;return typeof i=="function"?Rn(i,o):t=o,ze(o,"zIndex",.1),xt(o,()=>r.children),o})()};function ri({createElement:r,createTextNode:n,isTextNode:e,replaceText:t,insertNode:o,removeNode:i,setProperty:s,getParentNode:l,getFirstChild:c,getNextSibling:h}){function u(m,x,g,C){if(g!==void 0&&!C&&(C=[]),typeof x!="function")return p(m,x,C,g);ve(F=>p(m,x(),F,g),C)}function p(m,x,g,C,F){for(;typeof g=="function";)g=g();if(x===g)return g;const I=typeof x,_=C!==void 0;if(I==="string"||I==="number")if(I==="number"&&(x=x.toString()),_){let v=g[0];v&&e(v)?t(v,x):v=n(x),g=T(m,g,C,v)}else g!==""&&typeof g=="string"?t(c(m),g=x):(T(m,g,C,n(x)),g=x);else if(x==null||I==="boolean")g=T(m,g,C);else{if(I==="function")return ve(()=>{let v=x();for(;typeof v=="function";)v=v();g=p(m,v,g,C)}),()=>g;if(Array.isArray(x)){const v=[];if(f(v,x,F))return ve(()=>g=p(m,v,g,C,!0)),()=>g;if(v.length===0){const R=T(m,g,C);if(_)return g=R}else Array.isArray(g)?g.length===0?S(m,v,C):w(m,g,v):g==null||g===""?S(m,v):w(m,_&&g||[c(m)],v);g=v}else{if(Array.isArray(g)){if(_)return g=T(m,g,C,x);T(m,g,null,x)}else g==null||g===""||!c(m)?o(m,x):b(m,x,c(m));g=x}}return g}function f(m,x,g){let C=!1;for(let F=0,I=x.length;F<I;F++){let _=x[F],v;if(!(_==null||_===!0||_===!1))if(Array.isArray(_))C=f(m,_)||C;else if((v=typeof _)=="string"||v==="number")m.push(n(_));else if(v==="function")if(g){for(;typeof _=="function";)_=_();C=f(m,Array.isArray(_)?_:[_])||C}else m.push(_),C=!0;else m.push(_)}return C}function w(m,x,g){let C=g.length,F=x.length,I=C,_=0,v=0,R=h(x[F-1]),E=null;for(;_<F||v<I;){if(x[_]===g[v]){_++,v++;continue}for(;x[F-1]===g[I-1];)F--,I--;if(F===_){const z=I<C?v?h(g[v-1]):g[I-v]:R;for(;v<I;)o(m,g[v++],z)}else if(I===v)for(;_<F;)(!E||!E.has(x[_]))&&i(m,x[_]),_++;else if(x[_]===g[I-1]&&g[v]===x[F-1]){const z=h(x[--F]);o(m,g[v++],h(x[_++])),o(m,g[--I],z),x[F]=g[I]}else{if(!E){E=new Map;let P=v;for(;P<I;)E.set(g[P],P++)}const z=E.get(x[_]);if(z!=null)if(v<z&&z<I){let P=_,A=1,D;for(;++P<F&&P<I&&!((D=E.get(x[P]))==null||D!==z+A);)A++;if(A>z-v){const W=x[_];for(;v<z;)o(m,g[v++],W)}else b(m,g[v++],x[_++])}else _++;else i(m,x[_++])}}}function T(m,x,g,C){if(g===void 0){let I;for(;I=c(m);)i(m,I);return C&&o(m,C),""}const F=C||n("");if(x.length){let I=!1;for(let _=x.length-1;_>=0;_--){const v=x[_];if(F!==v){const R=l(v)===m;!I&&!_?R?b(m,F,v):o(m,F,g):R&&i(m,v)}else I=!0}}else o(m,F,g);return[F]}function S(m,x,g){for(let C=0,F=x.length;C<F;C++)o(m,x[C],g)}function b(m,x,g){o(m,x,g),i(m,g)}function y(m,x,g={},C){return x||(x={}),C||ve(()=>g.children=p(m,x.children,g.children)),ve(()=>x.ref&&x.ref(m)),ve(()=>{for(const F in x){if(F==="children"||F==="ref")continue;const I=x[F];I!==g[F]&&(s(m,F,I,g[F]),g[F]=I)}}),g}return{render(m,x){let g;return Je(C=>{g=C,u(x,m())}),g},insert:u,spread(m,x,g){typeof x=="function"?ve(C=>y(m,x(),C,g)):y(m,x,void 0,g)},createElement:r,createTextNode:n,insertNode:o,setProp(m,x,g,C){return s(m,x,g,C),g},mergeProps:Sn,effect:ve,memo:J,createComponent:on,use(m,x,g){return se(()=>m(x,g))}}}function oi(r){const n=ri(r);return n.mergeProps=Sn,n}const ii={createElement(r){const n=new Ue(r);return we.root&&me(()=>n.render()),n},createTextNode(r){return{name:"TextNode",text:r,parent:null}},replaceText(r,n){r.text=n;const e=r.parent;k(e),e._autosized&&e._resizeOnTextLoad(),e.text=e.getText()},setProperty(r,n,e=!0){if(n==="animate"){r._animate=e;return}r[n]=e},insertNode(r,n,e){r&&(r.children.insert(n,e),n.name==="TextNode"&&r.isTextNode()&&(r._autosized&&r._resizeOnTextLoad(),r.text=r.getText()))},isTextNode(r){return r.isTextNode()},removeNode(r,n){r.children.remove(n),n instanceof Ue&&n.destroy()},getParentNode(r){var n;return(n=r.parent)!=null?n:void 0},getFirstChild(r){return r.children[0]},getNextSibling(r){if(r.parent){const n=r.parent.children||[],e=n.indexOf(r)+1;if(e<n.length)return n[e]}}},xr=oi(ii),si=xr.render,{effect:Vs,memo:yr,createComponent:a,createElement:Ae,createTextNode:qs,insertNode:Qs,insert:xt,spread:Ze,setProp:ze,mergeProps:X,use:Rn}=xr;function N(r=""){return Vo(r)?r:typeof r=="string"?r.startsWith("#")?+(r.replace("#","0x")+(r.length===7?"ff":"")):r.startsWith("0x")?Number(r):+("0x"+(r.length===6?r+"ff":r)):0}function ai(r){return r*Math.PI/180}const On="_$DX_DELEGATE";function li(r,n=window.document){const e=n[On]||(n[On]=new Set);for(let t=0,o=r.length;t<o;t++){const i=r[t];e.has(i)||(e.add(i),n.addEventListener(i,ci))}}function ci(r){const n="$$".concat(r.type);let e=r.composedPath&&r.composedPath()[0]||r.target;for(r.target!==e&&Object.defineProperty(r,"target",{configurable:!0,value:e}),Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}});e;){const t=e[n];if(t&&!e.disabled){const o=e["".concat(n,"Data")];if(o!==void 0?t.call(e,o,r):t.call(e,r),r.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const ui=!1;function vr(r,n,e){return r.addEventListener(n,e),()=>r.removeEventListener(n,e)}function hi([r,n],e,t){return[e?()=>e(r()):r,t?o=>n(t(o)):n]}function di(r){try{return document.querySelector(r)}catch(n){return null}}function wr(r,n){const e=di("#".concat(r));e?e.scrollIntoView():n&&window.scrollTo(0,0)}function _r(r,n,e,t){let o=!1;const i=l=>typeof l=="string"?{value:l}:l,s=hi(B(i(r()),{equals:(l,c)=>l.value===c.value}),void 0,l=>(!o&&n(l),l));return e&&Pe(e((l=r())=>{o=!0,s[1](i(l)),o=!1})),{signal:s,utils:t}}function fi(r){if(r){if(Array.isArray(r))return{signal:r}}else return{signal:B({value:""})};return r}function gi(){return _r(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:r,replace:n,scroll:e,state:t})=>{n?window.history.replaceState(t,"",r):window.history.pushState(t,"",r),wr(window.location.hash.slice(1),e)},r=>vr(window,"popstate",()=>r()),{go:r=>window.history.go(r)})}function pi(){return _r(()=>window.location.hash.slice(1),({value:r,replace:n,scroll:e,state:t})=>{n?window.history.replaceState(t,"","#"+r):window.location.hash=r;const o=r.indexOf("#"),i=o>=0?r.slice(o+1):"";wr(i,e)},r=>vr(window,"hashchange",()=>r()),{go:r=>window.history.go(r),renderPath:r=>"#".concat(r),parsePath:r=>{const n=r.replace(/^.*?#/,"");if(!n.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(n)}return n}})}function mi(){let r=new Set;function n(o){return r.add(o),()=>r.delete(o)}let e=!1;function t(o,i){if(e)return!(e=!1);const s={to:o,options:i,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const l of r)l.listener({...s,from:l.location,retry:c=>{c&&(e=!0),l.navigate(o,i)}});return!s.defaultPrevented}return{subscribe:n,confirm:t}}const xi=/^(?:[a-z0-9]+:)?\/\//i,yi=/^\/+|(\/)\/+$/g;function st(r,n=!1){const e=r.replace(yi,"$1");return e?n||/^[?#]/.test(e)?e:"/"+e:""}function zt(r,n,e){if(xi.test(n))return;const t=st(r),o=e&&st(e);let i="";return!o||n.startsWith("/")?i=t:o.toLowerCase().indexOf(t.toLowerCase())!==0?i=t+o:i=o,(i||"/")+st(n,!i)}function vi(r,n){if(r==null)throw new Error(n);return r}function Sr(r,n){return st(r).replace(/\/*(\*.*)?$/g,"")+st(n)}function wi(r){const n={};return r.searchParams.forEach((e,t)=>{n[t]=e}),n}function _i(r,n,e){const[t,o]=r.split("/*",2),i=t.split("/").filter(Boolean),s=i.length;return l=>{const c=l.split("/").filter(Boolean),h=c.length-s;if(h<0||h>0&&o===void 0&&!n)return null;const u={path:s?"":"/",params:{}},p=f=>e===void 0?void 0:e[f];for(let f=0;f<s;f++){const w=i[f],T=c[f],S=w[0]===":",b=S?w.slice(1):w;if(S&&Zt(T,p(b)))u.params[b]=T;else if(S||!Zt(T,w))return null;u.path+="/".concat(T)}if(o){const f=h?c.slice(-h).join("/"):"";if(Zt(f,p(o)))u.params[o]=f;else return null}return u}}function Zt(r,n){const e=t=>t.localeCompare(r,void 0,{sensitivity:"base"})===0;return n===void 0?!0:typeof n=="string"?e(n):typeof n=="function"?n(r):Array.isArray(n)?n.some(e):n instanceof RegExp?n.test(r):!1}function Si(r){const[n,e]=r.pattern.split("/*",2),t=n.split("/").filter(Boolean);return t.reduce((o,i)=>o+(i.startsWith(":")?2:3),t.length-(e===void 0?0:1))}function Tr(r){const n=new Map,e=Xt();return new Proxy({},{get(t,o){return n.has(o)||Vr(e,()=>n.set(o,J(()=>r()[o]))),n.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(r())}})}function br(r){let n=/(\/?\:[^\/]+)\?/.exec(r);if(!n)return[r];let e=r.slice(0,n.index),t=r.slice(n.index+n[0].length);const o=[e,e+=n[1]];for(;n=/^(\/\:[^\/]+)\?/.exec(t);)o.push(e+=n[1]),t=t.slice(n[0].length);return br(t).reduce((i,s)=>[...i,...o.map(l=>l+s)],[])}const Ti=100,Cr=rr(),Ut=rr(),Fn=()=>vi(vn(Cr),"Make sure your app is wrapped in a <Router />");let ht;const In=()=>ht||vn(Ut)||Fn().base,et=()=>Fn().navigatorFactory(),En=()=>In().params;function bi(r,n="",e){const{component:t,data:o,children:i}=r,s=!i||Array.isArray(i)&&!i.length,l={key:r,element:t?()=>on(t,{}):()=>{const{element:c}=r;return c===void 0&&e?on(e,{}):c},preload:r.component?t.preload:r.preload,data:o};return Rr(r.path).reduce((c,h)=>{for(const u of br(h)){const p=Sr(n,u),f=s?p:p.split("/*",1)[0];c.push({...l,originalPath:u,pattern:f,matcher:_i(f,!s,r.matchFilters)})}return c},[])}function Ci(r,n=0){return{routes:r,score:Si(r[r.length-1])*1e4-n,matcher(e){const t=[];for(let o=r.length-1;o>=0;o--){const i=r[o],s=i.matcher(e);if(!s)return null;t.unshift({...s,route:i})}return t}}}function Rr(r){return Array.isArray(r)?r:[r]}function Fr(r,n="",e,t=[],o=[]){const i=Rr(r);for(let s=0,l=i.length;s<l;s++){const c=i[s];if(c&&typeof c=="object"&&c.hasOwnProperty("path")){const h=bi(c,n,e);for(const u of h){t.push(u);const p=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!p)Fr(c.children,u.pattern,e,t,o);else{const f=Ci([...t],o.length);o.push(f)}t.pop()}}}return t.length?o:o.sort((s,l)=>l.score-s.score)}function Ri(r,n){for(let e=0,t=r.length;e<t;e++){const o=r[e].matcher(n);if(o)return o}return[]}function Fi(r,n){const e=new URL("http://sar"),t=J(c=>{const h=r();try{return new URL(h,e)}catch(u){return console.error("Invalid path ".concat(h)),c}},e,{equals:(c,h)=>c.href===h.href}),o=J(()=>t().pathname),i=J(()=>t().search,!0),s=J(()=>t().hash),l=J(()=>"");return{get pathname(){return o()},get search(){return i()},get hash(){return s()},get state(){return n()},get key(){return l()},query:Tr(Fe(i,()=>wi(t())))}}function Ii(r,n="",e,t){const{signal:[o,i],utils:s={}}=fi(r),l=s.parsePath||(v=>v),c=s.renderPath||(v=>v),h=s.beforeLeave||mi(),u=zt("",n),p=void 0;if(u===void 0)throw new Error("".concat(u," is not a valid base path"));u&&!o().value&&i({value:u,replace:!0,scroll:!1});const[f,w]=B(!1),T=async v=>{w(!0);try{await qr(v)}finally{w(!1)}},[S,b]=B(o().value),[y,m]=B(o().state),x=Fi(S,y),g=[],C={pattern:u,params:{},path:()=>u,outlet:()=>null,resolvePath(v){return zt(u,v)}};if(e)try{ht=C,C.data=e({data:void 0,params:{},location:x,navigate:I(C)})}finally{ht=void 0}function F(v,R,E){se(()=>{if(typeof R=="number"){R&&(s.go?h.confirm(R,E)&&s.go(R):console.warn("Router integration does not support relative routing"));return}const{replace:z,resolve:P,scroll:A,state:D}={replace:!1,resolve:!0,scroll:!0,...E},W=P?v.resolvePath(R):zt("",R);if(W===void 0)throw new Error("Path '".concat(R,"' is not a routable path"));if(g.length>=Ti)throw new Error("Too many redirects");const j=S();if((W!==j||D!==y())&&!ui){if(h.confirm(W,E)){const ae=g.push({value:j,replace:z,scroll:A,state:y()});T(()=>{b(W),m(D)}).then(()=>{g.length===ae&&_({value:W,state:D})})}}})}function I(v){return v=v||vn(Ut)||C,(R,E)=>F(v,R,E)}function _(v){const R=g[0];R&&((v.value!==R.value||v.state!==R.state)&&i({...v,replace:R.replace,scroll:R.scroll}),g.length=0)}ve(()=>{const{value:v,state:R}=o();se(()=>{v!==S()&&T(()=>{b(v),m(R)})})});{let v=function(R){if(R.defaultPrevented||R.button!==0||R.metaKey||R.altKey||R.ctrlKey||R.shiftKey)return;const E=R.composedPath().find(j=>j instanceof Node&&j.nodeName.toUpperCase()==="A");if(!E||!E.hasAttribute("link"))return;const z=E.href;if(E.target||!z&&!E.hasAttribute("state"))return;const P=(E.getAttribute("rel")||"").split(/\s+/);if(E.hasAttribute("download")||P&&P.includes("external"))return;const A=new URL(z);if(A.origin!==window.location.origin||u&&A.pathname&&!A.pathname.toLowerCase().startsWith(u.toLowerCase()))return;const D=l(A.pathname+A.search+A.hash),W=E.getAttribute("state");R.preventDefault(),F(C,D,{resolve:!1,replace:E.hasAttribute("replace"),scroll:!E.hasAttribute("noscroll"),state:W&&JSON.parse(W)})};li(["click"]),document.addEventListener("click",v),Pe(()=>document.removeEventListener("click",v))}return{base:C,out:p,location:x,isRouting:f,renderPath:c,parsePath:l,navigatorFactory:I,beforeLeave:h}}function Ei(r,n,e,t,o){const{base:i,location:s,navigatorFactory:l}=r,{pattern:c,element:h,preload:u,data:p}=t().route,f=J(()=>t().path);u&&u();const w={parent:n,pattern:c,get child(){return e()},path:f,params:o,data:n.data,outlet:h,resolvePath(T){return zt(i.path(),T,f())}};if(p)try{ht=w,w.data=p({data:n.data,params:o,location:s,navigate:l(w)})}finally{ht=void 0}return w}const ki=r=>{const{source:n,url:e,base:t,data:o,out:i}=r,s=n||gi(),l=Ii(s,t,o);return a(Cr.Provider,{value:l,get children(){return r.children}})},zi=r=>{const n=Fn(),e=In(),t=wn(()=>r.children),o=J(()=>Fr(t(),Sr(e.pattern,r.base||""),Pi)),i=J(()=>Ri(o(),n.location.pathname)),s=Tr(()=>{const u=i(),p={};for(let f=0;f<u.length;f++)Object.assign(p,u[f].params);return p});n.out&&n.out.matches.push(i().map(({route:u,path:p,params:f})=>({originalPath:u.originalPath,pattern:u.pattern,path:p,params:f})));const l=[];let c;const h=J(Fe(i,(u,p,f)=>{let w=p&&u.length===p.length;const T=[];for(let S=0,b=u.length;S<b;S++){const y=p&&p[S],m=u[S];f&&y&&m.route.key===y.route.key?T[S]=f[S]:(w=!1,l[S]&&l[S](),Je(x=>{l[S]=x,T[S]=Ei(n,T[S-1]||e,()=>h()[S+1],()=>i()[S],s)}))}return l.splice(u.length).forEach(S=>S()),f&&w?f:(c=T[0],T)}));return a(Ce,{get when(){return h()&&c},keyed:!0,children:u=>a(Ut.Provider,{value:u,get children(){return u.outlet()}})})},le=r=>{const n=wn(()=>r.children);return Sn(r,{get children(){return n()}})},Pi=()=>{const r=In();return a(Ce,{get when(){return r.child},keyed:!0,children:n=>a(Ut.Provider,{value:n,get children(){return n.outlet()}})})};var Ai=!!ao,Mi=Ai?r=>Xt()?Pe(r):r:Pe;function Ni(r,n,e,t){return r.addEventListener(n,e,t),Mi(r.removeEventListener.bind(r,n,e,t))}function Li(r,n=Xt()){let e=0,t,o;return()=>(e++,Pe(()=>{e--,queueMicrotask(()=>{!e&&o&&(o(),o=t=void 0)})}),o||Je(i=>t=r(o=i),n),t)}var $i=Li(()=>{const[r,n]=B(null);return Ni(window,"keydown",e=>{n(e),setTimeout(()=>n(null))}),r});function Tt(r){return typeof r=="function"}function Wn(r,n){if(!r)throw new Error(n||"Assertion failed")}let en={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"};const[dn,Di]=B([]),Yi=(r={})=>{const n=$i();en={...en,...r};const e=Object.entries(en);return me(Fe($t,(t,o,i=[])=>{var c;let s=t;const l=[];for(;s;)s.states.has("focus")||(s.states.add("focus"),Tt(s.onFocus)&&s.onFocus.call(s,t,o!=null?o:null)),l.push(s),s=(c=s.parent)!=null?c:null;return i.forEach(h=>{l.includes(h)||(h.states.remove("focus"),Tt(h.onBlur)&&h.onBlur.call(h,t,o!=null?o:null))}),Di(l),l},{defer:!0})),me(()=>{const t=n();if(t){const o=e.find(([i,s])=>s===t.key);se(()=>{const i=dn();for(const s of i){const l=o?o[0]:void 0;if(l){const c=s["on".concat(l)];if(Tt(c)&&c.call(s,t,s)===!0)break}if(Tt(s.onKeyPress)&&s.onKeyPress.call(s,t,l,s)===!0)break}return!1})}}),dn};function Ir(r,n){const e=n();let t,o,i,s;Array.isArray(e)?e.length===2?(t=s=e[0],o=i=e[1]):e.length===3?(t=e[0],o=i=e[1],s=e[2]):[t,i,s,o]=e:t=i=s=o=e,r.onBeforeLayout=(l,c)=>{if(c){r.width=r.children.reduce((u,p)=>u+(p.width||0),0)+o+i;const h=r.children[0];h&&(h.x=o,h.marginLeft=o),r.height=r.children.reduce((u,p)=>(p.y=(p.y||0)+t,p.marginTop=t,u+(p.height||0)),0)+t+s}}}function Bi(r=[]){const n=[];let e;for(e=0;e<r.length;e++){const t=r[e];if(typeof t=="string"&&!t.includes("PAUSE-"))n.push(r[e]);else break}return[n.join(",\b ")].concat(r.slice(e))}function Xn(r){return new Promise(n=>{setTimeout(n,r)})}function Oi(r,n,e="en-US"){const t=window.speechSynthesis;return new Promise((o,i)=>{const s=new SpeechSynthesisUtterance(r);s.lang=e,s.onend=()=>{o()},s.onerror=l=>{i(l)},n.push(s),t.speak(s)})}function fn(r,n,e=!0){const t=window.speechSynthesis,o=Bi(Array.isArray(r)?r:[r]),i=[],s=[];let l=!0;return{series:(async()=>{try{for(;l&&o.length;){const h=await Promise.resolve(o.shift());if(l){if(typeof h=="string"&&h.includes("PAUSE-")){let u=Number(h.split("PAUSE-")[1])*1e3;isNaN(u)&&(u=0),await Xn(u)}else if(typeof h=="string"&&h.length){let p=3;for(;l&&p>0;)try{await Oi(h,s,n),p=0}catch(f){if(f instanceof SpeechSynthesisErrorEvent)if(f.error==="network")p--,console.warn("Speech synthesis network error. Retries left: ".concat(p)),await Xn(500*(3-p));else if(f.error==="canceled"||f.error==="interrupted")p=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(f.error));else throw f}}else if(typeof h=="function"){const u=fn(h(),n,!1);i.push(u),await u.series}else if(Array.isArray(h)){const u=fn(h,n,!1);i.push(u),await u.series}}else break}}finally{l=!1}})(),get active(){return l},append:h=>{o.push(h)},cancel:()=>{l&&(e&&t.cancel(),i.forEach(h=>{h.cancel()}),l=!1)}}}let bt;function Wi(r,n="en-US"){return bt&&bt.cancel(),bt=fn(r,n),bt}var Xi=(r,n)=>{let e;const t=()=>clearTimeout(e);return Xt()&&Pe(t),Object.assign((...i)=>{e!==void 0&&t(),e=setTimeout(()=>r(...i),n)},{clear:t})};let gn,at=[],ye,pn=!1;const ji=3e5;function jn(r,n){const e=Xi(r,n);let t;const o=i=>{t=i,e(i)};return o.flush=()=>{e.clear(),r(t)},o.clear=e.clear,o}function rt(r){return r.id||r.name}function Hi(r=[]){if(!ge.onFocusChange)return;const n=r.every(i=>!i.loading),e=r.filter(i=>!at.includes(i));if(gn(),!n&&ge.onFocusChange){ge.onFocusChange([]);return}at=r.slice(0);const t=[],o=e.reduce((i,s)=>(s.announce?(i.push([rt(s),"Announce",s.announce]),t.push(s.announce)):s.title?(i.push([rt(s),"Title",s.title]),t.push(s.title)):i.push([rt(s),"No Announce",""]),i),[]);if(e.reverse().reduce((i,s)=>(s.announceContext?(i.push([rt(s),"Context",s.announceContext]),t.push(s.announceContext)):i.push([rt(s),"No Context",""]),i),o),ge.debug&&console.table(o),t.length)return ge.speak(t.reduce((i,s)=>i.concat(s),[]))}function Ui(r){if(!pn)return ye=Wi(r)}const ge={debug:!1,cancel:function(){ye&&ye.cancel()},clearPrevFocus:function(r=0){at=at.slice(0,r),gn()},speak:function(r,{append:n=!1,notification:e=!1}={}){return ge.onFocusChange&&(ge.onFocusChange.flush(),n&&ye&&ye.active?ye.append(r):(ge.cancel(),Ui(r)),e&&(pn=!0,ye==null||ye.series.finally(()=>{pn=!1}).catch(console.error))),ye},setupTimers:function({focusDebounce:r=400,focusChangeTimeout:n=ji}={}){ge.onFocusChange=jn(Hi,r),gn=jn(()=>{at=[]},n)}},Gi=()=>(ge.setupTimers(),me(Fe(dn,ge.onFocusChange,{defer:!0})),ge);function Dt(r){return function(){var i,s;const n=this.children.length,e=this.wrap,t=this.selected;if(r==="right"||r==="down")do if(this.selected=(this.selected||0)%n+1,this.selected>=n){if(!e){this.selected=null;break}this.selected=0}while((i=this.children[this.selected])!=null&&i.skipFocus);else if(r==="left"||r==="up")do if(this.selected=(this.selected||0)%n-1,this.selected<0){if(!e){this.selected=null;break}this.selected=n-1}while((s=this.children[this.selected])!=null&&s.skipFocus);if(this.selected===null)return this.selected=t,!1;const o=this.children[this.selected];if(Wn(o instanceof Ue),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,o,this.selected,t),this.plinko&&t!==null){const l=this.children[t];Wn(l instanceof Ue);const c=l.selected;o.selected=c}return cr(o),!0}}function U(r){const n=Dt("left"),e=Dt("right");return(()=>{const t=Ae("node");return ze(t,"onLeft",n),ze(t,"onRight",e),ze(t,"selected",0),Ze(t,X({get onFocus(){return r.onFocus||(o=>{if(!o||!o.selected)return;const i=o.children[o.selected];i instanceof Ue&&i.setFocus()})}},r),!0),xt(t,()=>r.children),t})()}function q(r){const n=Dt("up"),e=Dt("down");return(()=>{const t=Ae("node");return ze(t,"onUp",n),ze(t,"onDown",e),ze(t,"selected",0),Ze(t,X({get onFocus(){return r.onFocus||(o=>{if(!o||!o.selected)return;const i=o.children[o.selected];i instanceof Ue&&i.setFocus()})}},r),!0),xt(t,()=>r.children),t})()}function Ki(r,n){const e=we.createTexture("ImageTexture",{src:r});return n.reduce((t,o)=>{const{x:i,y:s,width:l,height:c}=o;return t[o.name]=we.createTexture("SubTexture",{texture:e,x:i,y:s,width:l,height:c}),t},{})}const Vi={display:"flex",flexDirection:"row",justifyContent:"flexStart"},qi={display:"flex",flexDirection:"column",justifyContent:"flexStart"},Qi={screenW:1920,screenH:1080,marginX:120,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},Ji={primary:"#00315c",focus:"#bdbdbd",container:"#004882"},Zi={display1:{fontFamily:"Ubuntu",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Ubuntu",fontSize:56,lineHeight:72},headline1:{fontFamily:"Ubuntu",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Ubuntu",fontSize:32,lineHeight:44},headline3:{fontFamily:"Ubuntu",fontSize:28,lineHeight:40},body1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40},body2:{fontFamily:"Ubuntu",fontSize:28,lineHeight:34},button1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40}},Q={flexRow:Vi,flexColumn:qi,layout:Qi,color:Ji,typography:Zi},ie={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:Q.layout.screenW,height:600,y:560,x:0},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,focus:{scale:1.1}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:N("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:N("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:Q.layout.screenW-2*Q.layout.marginX,x:Q.layout.marginX+Q.layout.gutterX,y:48},Rect:{width:250,height:100,y:10,x:300,color:N("#0000ff")},peopleBio:{...Q.typography.body1,contain:"both",width:1500,height:400}},Yt={width:386,height:136,color:N("#000000"),alpha:.3,borderRadius:30,border:{width:5,color:N("#cc33ff")},scale:1,focus:{color:[N("#58807d"),{duration:2e3}],scale:1.2,border:{width:5,color:N("#ff0000")},alpha:[1,{duration:1500,delay:200,timing:"easy-in"}]},active:{color:N("#33ff55")},disabled:{alpha:1}},es={color:N("#00A699"),height:8,y:2,x:-4,width:Yt.width+8},ts={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:N("#F6F6F9"),height:Yt.height,width:Yt.width,focus:{fontSize:64}},Hn={container:Yt,topBar:es,text:ts},Un={width:386,height:136,color:N("#715cab"),focus:{color:N("#5a39a2")},disabled:{color:N("#291d43")}},ns={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:N("#FFFFFF"),height:Un.height,width:Un.width,focus:{fontSize:40},disabled:{color:N("#909090")}};function rs(r){return a(L,X(r,{animate:!0,get style(){return ie.Thumbnail}}))}function os(r){return a(L,X(r,{get style(){return ie.FocusRing}}))}function Bt(r){const[n,e]=io(r,["items"]);return a(U,X(e,{get style(){return ie.Row},get children(){return a(Ht,{get each(){return n.items},children:t=>a(rs,t)})}}))}const[is,Me]=B(""),ss="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA",as="https://api.themoviedb.org/3";let Er,kr;const ls="w185",cs={headers:{"Content-Type":"application/json",Authorization:"Bearer "+ss}};function lt(r,n=ls){return kr+n+r}function us(r,n={}){return Er?mn(r,n):zr().then(()=>mn(r,n))}function mn(r,n={}){return fetch(as+r,{...cs,...n}).then(e=>e.json())}function zr(){return mn("/configuration").then(r=>{var n;return Er=r,kr=(n=r.images)==null?void 0:n.secure_base_url,r})}const Ge={get:us,loadConfig:zr};function hs(r,n){return r.length>n?r.substring(0,n-3)+"...":r}function ds(r,n=7){let e=[];for(let t=0,o=r.length;t<o;t+=n)e.push(r.slice(t,t+n));return e}function dt(r=[]){return r.map(n=>({src:lt(n.poster_path||n.profile_path),tileSrc:lt(n.backdrop_path||n.profile_path,"w300"),backdrop:lt(n.backdrop_path,"w1280"),href:"/entity/".concat(n.media_type||"people","/").concat(n.id),shortTitle:hs(n.title||n.name,30),title:n.title||n.name,data:n,entityInfo:{type:n.media_type||"people",id:n.id},heroContent:{title:n.title||n.name,description:n.overview}}))}let tn=new Map;const Ct=new Map;function fs(r){return n=>{const e="/trending/".concat(r,"/week?page=").concat(n);if(tn.has(e))return tn.get(e);let t=Ge.get(e).then(o=>{let i=o.results.filter(c=>!c.adult),s=(Ct.has(r)?Ct.get(r):[]).concat(dt(i)),l=ds(s);return l[l.length-1].length<7?Ct.set(r,l.pop()):Ct.delete(r),l});return tn.set(e,t),t}}function gs(r){const[n,e]=B([]),[t,o]=B(1),[i,s]=B(!1),[l]=He(t,r);return nn(()=>{const c=l();c&&Kr(()=>{c.length===0&&s(!0),e(h=>[...h,...c])})}),{pages:n,page:t,setPage:o,setPages:e,end:i,setEnd:s}}const Gt=1100,ps={...Q.typography.display2,width:Gt,height:58,contain:"both"},ms=r=>a(M,X(r,{style:ps,get children(){return r.children}})),xs={...Q.typography.body1,width:Gt,height:72,contain:"both"},ys={fontSize:20,lineHeight:20},vs=r=>a(M,X(r,{style:xs,get children(){return r.children}}));function ws(r){return[a(Ce,{get when(){return(r==null?void 0:r.rtCrit)&&(r==null?void 0:r.rtCrit)!=="0"},get children(){return[a(L,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),a(M,{style:xn,get children(){return r.rtCrit+"%"}})]}}),a(Ce,{get when(){return(r==null?void 0:r.rtFan)&&(r==null?void 0:r.rtFan)!=="0"},get children(){return[a(L,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),a(M,{style:xn,get children(){return r.rtFan+"%"}})]}})]}const _s=r=>(()=>{const n=Ae("node");return Rn(Ir,n,()=>[8,15,13,15]),Ze(n,X(r,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),xt(n,a(M,{style:ys,get children(){return r.children}})),n})(),xn=Q.typography.body2,Ss=r=>a(L,{get style(){return{...Q.flexRow,gap:12,width:Gt,height:48}},get children(){return[a(M,{style:xn,get children(){return r.metaText}}),a(Ht,{get each(){return r.badges},children:n=>a(_s,{y:-5,children:n})}),yr(()=>ws(r.reviews))]}}),Pr=r=>a(L,X(r,{get style(){return{...Q.flexColumn,width:Gt,height:160,gap:16}},get children(){return[a(ms,{get children(){return r.title}}),a(vs,{get children(){return r.description}}),a(Ss,{get metaText(){return r.metaText},get badges(){return r.badges},get reviews(){return r.reviews}})]}}));function Ts(r){const n=Math.floor(r/60),e=r%60;return n+"h "+(e<10?"0":"")+e+"m"}function Gn(r){return r.split("-")[0]}function bs({type:r,id:n}){return Ge.get("/".concat(r,"/").concat(n,"/recommendations")).then(({results:e})=>e.length?dt(e.slice(0,7)):Ge.get("/trending/".concat(r,"/week?page=1")).then(({results:t})=>dt(t.slice(0,7))))}function Cs({type:r,id:n}){return Ge.get("/".concat(r,"/").concat(n,"/credits")).then(({cast:e})=>dt(e.slice(0,7)))}function Ar({type:r,id:n}){let e=r==="movie"?{rtCrit:86,rtFan:92}:{};return Ge.get("/".concat(r,"/").concat(n)).then(t=>({backgroundImage:lt(t.backdrop_path,"original"),heroContent:{title:t.title||t.name,description:t.overview,badges:["HD"],metaText:r==="movie"?Ts(t.runtime)+" - "+t.release_date:"".concat(Gn(t.first_air_date)," - ").concat(Gn(t.last_air_date)),reviews:e},...t}))}const Kn=()=>{const r=En(),[n,e]=B(0),[t,o]=B();He(t,Ar);const[i,s]=B({}),l=et(),c=nr(()=>0),h=J(()=>gs(fs(r.filter||"all")));me(Fe($t,f=>{f.backdrop&&Me(f.backdrop),f.heroContent&&s(f.heroContent)},{defer:!0}));function u(){var w;(w=this.children.selected)==null||w.setFocus(),e((this.y||0)*-1+24);let f=h().pages().length;(f===0||this.parent.selected&&this.parent.selected>=f-2)&&h().setPage(T=>T+1)}function p(){let f=this.children.selected;k(f&&f.href),l(f.href)}return a(Ce,{get when(){return h().pages().length},get children(){return[a(Pr,X({y:360,x:150},i)),a(L,{clipping:!0,get style(){return ie.itemsContainer},get children(){return a(q,{plinko:!0,announce:"All Trending - Week",animate:!0,get y(){return n()},get style(){return ie.Column},get children(){return a(Ht,{get each(){return h().pages()},children:(f,w)=>a(Bt,{get autofocus(){return c(w())},items:f,onFocus:u,onEnter:p})})}})}})]}})},Rs=()=>{const r=et(),n=nr(()=>0);function e(){let c=this.children.selected;k(c&&c.id),r("/"+c.id)}const t=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"}];function o(c){const h={width:370,height:320,borderRadius:6,scale:1,color:405488895,focus:{scale:1.1,color:4294967295}},[u,p]=B(4294967295);return a(L,X(c,{onFocus:()=>p(255),onBlur:()=>p(4294967295),animate:!0,style:h,get children(){return a(L,{x:30,get children(){return[a(M,{y:30,fontSize:84,get color(){return u()},get children(){return c.index}}),a(M,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return u()},get children(){return c.title}}),a(M,{y:200,fontSize:28,width:330,contain:"width",get color(){return u()},get children(){return c.description}})]}})}}))}const[i,s]=B(140);function l(c){s(c.selected*-400+140)}return a(L,{colorTop:1147903743,colorBottom:743406847,get children(){return[a(L,{x:120,get children(){return[a(L,{src:"/assets/solidjs.png",width:101,height:90,y:40}),a(M,{fontSize:90,x:110,y:40,children:"Examples"}),a(L,{y:140,height:1,width:1800,color:3906468351})]}}),a(U,{onSelectedChanged:l,onEnter:e,animationSettings:{delay:20,duration:300},animate:!0,get x(){return i()},y:300,width:4400,get style(){return ie.Row},justifyContent:"flexStart",gap:40,get children(){return a(Ht,{each:t,children:(c,h)=>a(o,X({get autofocus(){return n(h())},get index(){return h()}},c))})}})]}})},Fs=()=>{const r={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:N("00000000")},n={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:N("00000000")},e={fontSize:42},t={width:r.width,fontSize:26,contain:"width"},o={fontSize:26};return pt(()=>{Me("0x000000ff")}),a(L,{autofocus:!0,style:r,get children(){return[a(M,{style:e,children:"Title of the Page"}),a(M,{style:t,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),a(L,{style:n,get children(){return[a(M,{style:o,children:"Subline Text"}),a(L,{width:28,height:28,src:"/assets/rt-popcorn.png"}),a(M,{style:o,children:"More Text"})]}})]}})},Is=()=>{function r(o,i){this.states.toggle("disabled")}const n={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:N("00000000"),gap:26,y:400};function e(o){return a(L,X(o,{forwardStates:!0,animate:!0,get style(){return Hn.container},get children(){return a(M,{get style(){return Hn.text},get children(){return o.children}})}}))}const t=o=>(()=>{const i=Ae("node");return Rn(Ir,i,()=>[10,15]),Ze(i,X(o,{get style(){return{color:N("#000000be"),borderRadius:8,border:{width:2,color:N("#ffffff")}}}}),!0),xt(i,a(M,{style:{fontSize:20},get children(){return o.children}})),i})();return[a(U,{x:100,y:200,gap:5,style:n,get children(){return[a(t,{children:"HD"}),a(t,{children:"PG13"}),a(t,{children:"NC17"}),a(M,{fontSize:30,children:"I like bananas"}),a(t,{children:"DOLBY"})]}}),a(U,{x:100,gap:40,style:n,get children(){return[a(e,{autofocus:!0,onEnter:r,children:"TV Shows"}),a(e,{states:{active:!0,disabled:!1},children:"Movies"}),a(e,{states:"active",children:"Sports"}),a(e,{states:"disabled",children:"News"})]}})]},Es=()=>{const r={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:N("#4dabf5")},n={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function e(l){return a(L,X(l,{style:{width:200,height:100,y:5,color:392801023}}))}const[t,o]=B(50);function i(){var l;(l=this.children.selected)==null||l.setFocus(),o(150+(this.y||0)*-1)}pt(()=>{Me("#333333")});const s=50;return a(q,{x:160,get y(){return t()},animate:!0,gap:30,height:850,get width(){return r.width},get style(){return ie.Column},get children(){return[a(M,{style:n,children:"Flex Start"}),a(U,{gap:s,style:r,onFocus:i,get children(){return[a(e,{autofocus:!0}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(M,{style:n,children:"Flex Start - Margin Left"}),a(U,{gap:s,style:r,onFocus:i,get children(){return[a(e,{marginLeft:100}),a(e,{}),a(e,{marginLeft:100}),a(e,{}),a(e,{})]}}),a(M,{style:n,children:"Flex End"}),a(U,{gap:s,justifyContent:"flexEnd",style:r,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(M,{style:n,children:"Flex End - Margin Right"}),a(U,{gap:s,justifyContent:"flexEnd",style:r,onFocus:i,get children(){return[a(e,{}),a(e,{marginRight:100}),a(e,{}),a(e,{}),a(e,{marginRight:100})]}}),a(M,{style:n,children:"Center - No Margin Support"}),a(U,{gap:s,justifyContent:"center",style:r,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(M,{style:n,children:"Space Between - No Margin Support"}),a(U,{gap:s,justifyContent:"spaceBetween",style:r,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(M,{style:n,children:"Space Evenly - No Margin Support"}),a(U,{gap:s,justifyContent:"spaceEvenly",style:r,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}})]}})},ks=()=>{const r={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:N("#4dabf5")},n={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function e(c){return a(L,X(c,{style:{width:200,height:100,y:5,color:392801023}}))}function t(){return Math.floor(Math.random()*91)+10}const[o,i]=B(50);function s(){var c;(c=this.children.selected)==null||c.setFocus(),i(150+(this.y||0)*-1)}pt(()=>{Me("#333333")});const l=50;return a(q,{x:160,get y(){return o()},animate:!0,gap:30,height:850,get width(){return r.width},get style(){return ie.Column},get children(){return[a(M,{style:n,children:"Flex Start - AlignItems: center"}),a(U,{alignItems:"center",gap:l,style:r,onFocus:s,get children(){return[a(e,{autofocus:!0,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(M,{style:n,children:"Flex Start - Margin Left - AlignItems: flexStart"}),a(U,{gap:l,alignItems:"flexStart",style:r,onFocus:s,get children(){return[a(e,{marginLeft:100,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{marginLeft:100,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(M,{style:n,children:"Flex End - AlignItems: flexEnd"}),a(U,{gap:l,justifyContent:"flexEnd",alignItems:"flexEnd",style:r,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(M,{style:n,children:"Flex End - Margin Right"}),a(U,{gap:l,justifyContent:"flexEnd",style:r,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{marginRight:100,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{marginRight:100,get height(){return t()}})]}}),a(M,{style:n,children:"Center - No Margin Support"}),a(U,{gap:l,justifyContent:"center",style:r,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(M,{style:n,children:"Space Between - No Margin Support"}),a(U,{gap:l,justifyContent:"spaceBetween",style:r,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(M,{style:n,children:"Space Evenly - No Margin Support"}),a(U,{gap:l,justifyContent:"spaceEvenly",style:r,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}})]}})},zs=()=>{const r={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:N("00000000")},n={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:N("#4dabf5"),height:850,width:80},e={fontSize:44,y:20,x:150};function t(h){const u={width:o(),height:80,x:5,color:N("#1769aa")};return a(L,X(h,{style:u}))}function o(){return Math.floor(Math.random()*61)+10}const[i,s]=B(50);function l(){var h;(h=this.children.selected)==null||h.setFocus(),s(150+(this.y||0)*-1)}pt(()=>{Me("#333333")});const c=50;return[a(M,{style:e,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),a(U,{gap:c,style:r,onFocus:l,get children(){return[a(q,{gap:30,style:n,alignItems:"center",get children(){return[a(t,{autofocus:!0}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:c,style:n,onFocus:l,alignItems:"flexStart",get children(){return[a(t,{marginTop:100}),a(t,{}),a(t,{marginTop:100}),a(t,{}),a(t,{})]}}),a(q,{gap:c,alignItems:"flexEnd",justifyContent:"flexEnd",style:n,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:c,justifyContent:"flexEnd",style:n,onFocus:l,get children(){return[a(t,{}),a(t,{marginBottom:100}),a(t,{}),a(t,{}),a(t,{marginBottom:100})]}}),a(q,{gap:c,justifyContent:"center",style:n,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:c,justifyContent:"spaceBetween",style:n,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:c,justifyContent:"spaceEvenly",style:n,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}})]}})]},Ps=()=>{const r={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:N("00000000")},n={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:N("#4dabf5"),height:850,width:60},e={fontSize:44,y:20,x:150};function t(c){const h={width:50,height:80,x:5,color:N("#1769aa")};return a(L,X(c,{style:h}))}const[o,i]=B(50);function s(){var c;(c=this.children.selected)==null||c.setFocus(),i(150+(this.y||0)*-1)}pt(()=>{Me("#333333")});const l=50;return[a(M,{style:e,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),a(U,{gap:l,style:r,onFocus:s,get children(){return[a(q,{gap:30,style:n,get children(){return[a(t,{autofocus:!0}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:l,style:n,onFocus:s,get children(){return[a(t,{marginTop:100}),a(t,{}),a(t,{marginTop:100}),a(t,{}),a(t,{})]}}),a(q,{gap:l,justifyContent:"flexEnd",style:n,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:l,justifyContent:"flexEnd",style:n,onFocus:s,get children(){return[a(t,{}),a(t,{marginBottom:100}),a(t,{}),a(t,{}),a(t,{marginBottom:100})]}}),a(q,{gap:l,justifyContent:"center",style:n,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:l,justifyContent:"spaceBetween",style:n,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(q,{gap:l,justifyContent:"spaceEvenly",style:n,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}})]}})]},As=()=>{function r(i,s){this.states.toggle("disabled")}const n={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:N("00000000"),gap:26,y:400,x:100},e={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},t=["RoundedRectangle",{radius:65}];function o(i){return a(L,X(i,{forwardStates:!0,animate:!0,style:e,shader:t,get children(){return a(M,{style:ns,get children(){return i.children}})}}))}return a(U,{style:n,get children(){return[a(o,{autofocus:!0,onEnter:r,children:"Focused"}),a(o,{states:{active:!0,disabled:!1},children:"Normal"}),a(o,{states:"disabled",children:"Disabled"})]}})},Ms=()=>{const r=En(),n=et(),[e]=He(()=>({...r}),Ar),[t]=He(()=>({...r}),Cs),[o]=He(()=>({...r}),bs);me(Fe(e,f=>{Me(f.backgroundImage)},{defer:!0}));const i=600,s={color:N("#000000"),alpha:0,width:1900,height:890,x:10,y:i,borderRadius:30};function l(){var f;(f=this.children.selected)==null||f.setFocus(),u.y=i,p.y=i,p.alpha=0}function c(){var f;(f=this.children.selected)==null||f.setFocus(),u.y=200,p.y=160,p.alpha=.9}function h(){let f=this.children.selected;k(f&&f.href),n(f.href)}let u,p;return a(Ce,{get when(){return e()},keyed:!0,get children(){return[a(Pr,X({y:360,x:150},()=>e().heroContent)),a(q,{animate:!0,ref(f){const w=u;typeof w=="function"?w(f):u=f},y:i,x:140,get style(){return ie.Column},get children(){return a(Ce,{get when(){return yr(()=>!!o())()&&t()},get children(){return[a(M,{skipFocus:!0,get style(){return ie.RowTitle},children:"Recommendations"}),a(Bt,{autofocus:!0,onFocus:l,onEnter:h,get items(){return o()}}),a(M,{skipFocus:!0,get style(){return ie.RowTitle},children:"Cast and Crew"}),a(Bt,{onFocus:c,onEnter:h,get items(){return t()}})]}})}}),a(L,{ref(f){const w=p;typeof w=="function"?w(f):p=f},animate:!0,style:s})]}})};function Ns({id:r}){return Ge.get("/person/".concat(r,"/combined_credits")).then(({cast:n})=>dt(n.slice(0,7)))}function Ls({id:r}){return Ge.get("/person/".concat(r)).then(n=>({backgroundImage:lt(n.profile_path,"original"),heroContent:{title:n.title||n.name,description:n.biography},...n}))}const $s=()=>{const r=En(),n=et(),[e]=He(()=>({...r}),Ls),[t]=He(()=>({...r}),Ns);me(Fe(e,s=>{Me(s.backgroundImage)},{defer:!0}));const o={color:N("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function i(){let s=this.children.selected;k(s&&s.href),n(s.href)}return a(Ce,{get when(){return e()},keyed:!0,get children(){return[a(L,{x:150,y:200,get style(){return ie.Column},zIndex:3,get children(){return[a(M,{get style(){return Q.typography.display2},get children(){return e().name}}),a(M,{get style(){return ie.peopleBio},get children(){return e().biography}})]}}),a(L,{style:o}),a(q,{y:670,x:140,get style(){return ie.Column},get children(){return a(Ce,{get when(){return t()},get children(){return[a(M,{skipFocus:!0,get style(){return ie.RowTitle},children:"Credits"}),a(Bt,{autofocus:!0,onEnter:i,get items(){return t()}})]}})}})]}})},Ds=()=>(()=>{const r=Ae("node");return ze(r,"style",{width:1920,height:1080,color:868483072}),r})();function Ys(){let r,n,e=0;const t=1,o={alpha:t,color:4294967295},i={duration:1e3,easing:"ease-in-out"};return me(Fe(is,s=>{if(s.startsWith("#")){r.color=s,r.src="",r.alpha=1,e=1,n.alpha=0;return}else r.color=4294967295;if(e===0){r.src=s,e=1;return}if(e===1){n.src=s,e=2,n.alpha=[t],r.alpha=[0];return}e===2&&(r.src=s,e=1,r.alpha=t,n.alpha=0)},{defer:!0})),a(L,{width:1920,height:1080,get children(){return[a(L,{ref(s){const l=r;typeof l=="function"?l(s):r=s},animate:!0,animationSettings:i,style:o}),a(L,{ref(s){const l=n;typeof l=="function"?l(s):n=s},animate:!0,animationSettings:i,style:o,alpha:0}),a(L,{get effects(){return{radialGradient:{colors:[124,124,N(Q.color.container)],stops:[0,.4,.9],height:800,width:1920,pivot:[.8,0]}}}})]}})}const yn={Column:{...Q.flexColumn,width:320,height:600,y:360,gap:20,zIndex:101,x:[8,{duration:250,easing:"ease-in-out"}],focus:{x:[Q.layout.marginX,{duration:250,easing:"ease-in-out"}]}},Gradient:{zIndex:99,linearGradient:{angle:ai(270),stops:[0,.4,.8],colors:[N(Q.color.primary),N(Q.color.primary),N("#00000000")]},alpha:[0],focus:{width:1600,alpha:[1]},width:100,height:1080},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:N(Q.color.container)},active:{width:328,height:70}}},Bs="/solid-demo-app/",Os=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Ws(r){const n=Ki(Bs+"assets/icons_white.png",Os);return a(L,X(r,{get texture(){return n[r.name]},get width(){return n[r.name].props.width},get height(){return n[r.name].props.height},get x(){return(100-(n[r.name].props.width||0))/2},get y(){return(100-(n[r.name].props.height||0))/2}}))}function Rt(r){return a(L,X(r,{forwardStates:!0,get style(){return yn.NavButton},get children(){return[a(L,{y:-16,get children(){return a(Ws,{scale:.5,get name(){return r.icon}})}}),a(M,{get style(){return{...Q.typography.button1,fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}}},get children(){return r.children}})]}}))}function Xs(r){let n;const e=et();function t(){n.states.add("focus"),this.children.forEach(i=>i.states.add("active")),this.children.selected.setFocus()}function o(){n.states.remove("focus"),this.selected=0,this.children.forEach(i=>i.states.remove("active"))}return[a(q,X(r,{onFocus:t,onBlur:o,get style(){return yn.Column},animate:!0,get children(){return[a(Rt,{onEnter:()=>e("/browse/all"),icon:"trending",children:"Trending"}),a(Rt,{icon:"movie",onEnter:()=>e("/browse/movie"),children:"Movies"}),a(Rt,{icon:"tv",onEnter:()=>e("/browse/tv"),children:"TV"}),a(Rt,{icon:"experiment",onEnter:()=>e("/examples"),children:"Examples"})]}})),a(L,{ref(i){const s=n;typeof s=="function"?s(i):n=i},get style(){return yn.Gradient}})]}const js=()=>{Yi({Menu:"m"}),Gi();const r=et();let n,e,t;return me(Fe($t,o=>{k(o),setTimeout(()=>{o.heroContent?(n.parent=o,n.alpha=1,n.width=o.width+10,n.height=o.height+10,n.zIndex=o.zIndex-1e-8):n.alpha=0},10)},{defer:!0})),a(L,{ref(o){const i=window.APP;typeof i=="function"?i(o):window.APP=o},onLast:()=>history.back(),onMenu:()=>r("/"),style:{width:1920,height:1080},onLeft:()=>{if(e.states.has("focus"))return!1;t=$t(),e.setFocus()},onRight:()=>e.states.has("focus")&&t.setFocus(),get children(){return[a(Ys,{}),a(os,{get color(){return N(Q.color.focus)},ref(o){const i=n;typeof i=="function"?i(o):n=o}}),a(zi,{get children(){return[a(le,{path:"",component:Kn}),a(le,{path:"examples",component:Rs}),a(le,{path:"browse/:filter",component:Kn}),a(le,{path:"text",component:Fs}),a(le,{path:"buttons",component:Is}),a(le,{path:"flex",component:Es}),a(le,{path:"flexsize",component:ks}),a(le,{path:"flexcolumnsize",component:zs}),a(le,{path:"flexcolumn",component:Ps}),a(le,{path:"buttonsmaterial",component:As}),a(le,{path:"entity/people/:id",component:$s}),a(le,{path:"entity/:type/:id",component:Ms}),a(le,{path:"*all",component:Ds})]}}),a(Xs,{ref(o){const i=e;typeof i=="function"?i(o):e=o}})]}})},Hs=new URL("AppCoreExtensions-44a75e0c.js",import.meta.url).href;be.debug=!1;be.fontSettings.fontFamily="Ubuntu";be.fontSettings.color=N("#ffffff");be.fontSettings.fontSize=100;si(()=>a(ni,{options:{coreExtensionModule:Hs,threadXCoreWorkerUrl:void 0},get children(){return a(ki,{get source(){return pi()},get children(){return a(js,{})}})}}));export{Gs as __vite_legacy_guard};
//# sourceMappingURL=index-0e64133a.js.map
