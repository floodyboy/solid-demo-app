!function(){function t(n){var r="function"==typeof Map?new Map:void 0;return t=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return e(t,arguments,f(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)},t(n)}function e(t,n,r){return e=d()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&s(o,n.prototype),o},e.apply(null,arguments)}function n(){return n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},n.apply(this,arguments)}function r(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */r=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var o=e&&e.prototype instanceof m?e:m,a=Object.create(o.prototype),s=new N(r||[]);return i(a,"_invoke",{value:R(t,n,s)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var h="suspendedStart",p="suspendedYield",v="executing",g="completed",y={};function m(){}function x(){}function w(){}var b={};c(b,s,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(z([])));k&&k!==n&&o.call(k,s)&&(b=k);var S=w.prototype=m.prototype=Object.create(b);function T(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(r,i,a,s){var u=f(t[r],t,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&o.call(c,"__await")?e.resolve(c.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(c).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var r;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}})}function R(e,n,r){var o=h;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=F(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=f(e,n,r);if("normal"===l.type){if(o=r.done?g:p,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function F(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,F(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function z(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return x.prototype=w,i(S,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:x,configurable:!0}),x.displayName=c(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,c(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},T(C.prototype),c(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new C(d(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},T(S),c(S,l,"Generator"),c(S,s,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=z,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:z(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function o(t,e,n,r,o,i,a){try{var s=t[i](a),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,o)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function s(t){o(a,r,i,s,u,"next",t)}function u(t){o(a,r,i,s,u,"throw",t)}s(void 0)}))}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function u(t){var e=d();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function p(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||k(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){x(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e,n){return(e=w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||k(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=k(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function k(t,e){if(t){if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}System.register(["./CoreExtension-legacy-623374f9.js"],(function(e,o){"use strict";var s,d,h,y,w,k,S,T,C,R,F,E,I,N,z,A,P,M,L,O,B;return{setters:[function(t){s=t.a,d=t.E,h=t.g,y=t.m,w=t.b,k=t.c,S=t.T,T=t.d,C=t.e,R=t.i,F=t.S,E=t.f,I=t.B,N=t.h,z=t.j,A=t.k,P=t.W,M=t.l,L=t.n,O=t.o,B=t.C}],execute:function(){var e,D,j=function(t,e){return t===e},Y=Symbol("solid-proxy"),X=Symbol("solid-track"),W={equals:j},U=St,H=1,G=2,$={owned:null,cleanups:null,context:null,owner:null},K={},V=null,q=null,Q=null,J=null,Z=null,tt=0;function et(t,e){var n=Q,r=V,o=0===t.length,i=void 0===e?r:e,a=o?$:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=o?t:function(){return t((function(){return lt((function(){return Ft(a)}))}))};V=a,Q=null;try{return kt(s,!0)}finally{Q=n,V=r}}function nt(t,e){var n={value:t,observers:null,observerSlots:null,comparator:(e=e?Object.assign({},W,e):W).equals||void 0};return[mt.bind(n),function(t){return"function"==typeof t&&(t=t(n.value)),xt(n,t)}]}function rt(t,e,n){wt(bt(t,e,!0,H))}function ot(t,e,n){wt(bt(t,e,!1,H))}function it(t,e,n){U=Tt;var r=bt(t,e,!1,H);n&&n.render||(r.user=!0),Z?Z.push(r):wt(r)}function at(t,e,n){n=n?Object.assign({},W,n):W;var r=bt(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,wt(r),mt.bind(r)}function st(t,e,n){var r,o,i;2===arguments.length&&"object"==typeof e||1===arguments.length?(r=!0,o=t,i=e||{}):(r=t,o=e,i=n||{});var a=null,s=K,u=!1,l="initialValue"in i,c="function"==typeof r&&at(r),d=new Set,f=b((i.storage||nt)(i.initialValue),2),h=f[0],p=f[1],v=b(nt(void 0),2),g=v[0],y=v[1],m=b(nt(void 0,{equals:!1}),2),x=m[0],w=m[1],k=b(nt(l?"ready":"unresolved"),2),S=k[0],T=k[1];function C(t,e,n,r){return a===t&&(a=null,void 0!==r&&(l=!0),t!==s&&e!==s||!i.onHydrated||queueMicrotask((function(){return i.onHydrated(r,{value:e})})),s=K,function(t,e){kt((function(){void 0===e&&p((function(){return t})),T(void 0!==e?"errored":l?"ready":"unresolved"),y(e);var n,r=_(d.keys());try{for(r.s();!(n=r.n()).done;){n.value.decrement()}}catch(e){r.e(e)}finally{r.f()}d.clear()}),!1)}(e,n)),e}function R(){var t=D,e=h(),n=g();if(void 0!==n&&!a)throw n;return Q&&!Q.user&&t&&rt((function(){x(),a&&(t.resolved||d.has(t)||(t.increment(),d.add(t)))})),e}function F(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===t||!u){u=!1;var e=c?c():r;if(null!=e&&!1!==e){var n,i=s!==K?s:lt((function(){return o(e,{value:h(),refetching:t})}));return(n=i)&&"object"==typeof n&&"then"in n?(a=i,"value"in i?("success"===i.status?C(a,i.value,void 0,e):C(a,void 0,void 0,e),i):(u=!0,queueMicrotask((function(){return u=!1})),kt((function(){T(l?"refreshing":"pending"),w()}),!1),i.then((function(t){return C(i,t,void 0,e)}),(function(t){return C(i,void 0,Et(t),e)})))):(C(a,i,void 0,e),i)}C(a,lt(h))}}return Object.defineProperties(R,{state:{get:function(){return S()}},error:{get:function(){return g()}},loading:{get:function(){var t=S();return"pending"===t||"refreshing"===t}},latest:{get:function(){if(!l)return R();var t=g();if(t&&!a)throw t;return h()}}}),c?rt((function(){return F(!1)})):F(!1),[R,{refetch:F,mutate:p}]}function ut(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,n=new Map,r=bt((function(r){var o,i=t(),a=_(n.entries());try{for(a.s();!(o=a.n()).done;){var s=b(o.value,2),u=s[0],l=s[1];if(e(u,i)!==e(u,r)){var c,d=_(l.values());try{for(d.s();!(c=d.n()).done;){var f=c.value;f.state=H,f.pure?J.push(f):Z.push(f)}}catch(h){d.e(h)}finally{d.f()}}}}catch(h){a.e(h)}finally{a.f()}return i}),void 0,!0,H);return wt(r),function(t){var o,i=Q;i&&((o=n.get(t))?o.add(i):n.set(t,o=new Set([i])),ft((function(){o.delete(i),!o.size&&n.delete(t)})));return e(t,r.value)}}function lt(t){if(null===Q)return t();var e=Q;Q=null;try{return t()}finally{Q=e}}function ct(t,e,n){var r,o=Array.isArray(t),i=n&&n.defer;return function(n){var a;if(o){a=Array(t.length);for(var s=0;s<t.length;s++)a[s]=t[s]()}else a=t();if(!i){var u=lt((function(){return e(a,r,n)}));return r=a,u}i=!1}}function dt(t){it((function(){return lt(t)}))}function ft(t){return null===V||(null===V.cleanups?V.cleanups=[t]:V.cleanups.push(t)),t}function ht(){return V}function pt(t){var e=Q,n=V;return Promise.resolve().then((function(){Q=e,V=n,kt(t,!1),Q=V=null}))}function vt(t,e){var n=Symbol("context");return{id:n,Provider:zt(n),defaultValue:t}}function gt(t){return V&&V.context&&void 0!==V.context[t.id]?V.context[t.id]:t.defaultValue}function yt(t){var e=at(t),n=at((function(){return Nt(e())}));return n.toArray=function(){var t=n();return Array.isArray(t)?t:null!=t?[t]:[]},n}function mt(){var t=this;if(this.sources&&this.state)if(this.state===H)wt(this);else{var e=J;J=null,kt((function(){return Ct(t)}),!1),J=e}if(Q){var n=this.observers?this.observers.length:0;Q.sources?(Q.sources.push(this),Q.sourceSlots.push(n)):(Q.sources=[this],Q.sourceSlots=[n]),this.observers?(this.observers.push(Q),this.observerSlots.push(Q.sources.length-1)):(this.observers=[Q],this.observerSlots=[Q.sources.length-1])}return this.value}function xt(t,e,n){var r=t.value;return t.comparator&&t.comparator(r,e)||(t.value=e,t.observers&&t.observers.length&&kt((function(){for(var e=0;e<t.observers.length;e+=1){var n=t.observers[e],r=q&&q.running;r&&q.disposed.has(n),(r?n.tState:n.state)||(n.pure?J.push(n):Z.push(n),n.observers&&Rt(n)),r||(n.state=H)}if(J.length>1e6)throw J=[],new Error}),!1)),e}function wt(t){if(t.fn){Ft(t);var e=V,n=Q,r=tt;Q=V=t,function(t,e,n){var r;try{r=t.fn(e)}catch(o){return t.pure&&(t.state=H,t.owned&&t.owned.forEach(Ft),t.owned=null),t.updatedAt=n+1,It(o)}(!t.updatedAt||t.updatedAt<=n)&&(null!=t.updatedAt&&"observers"in t?xt(t,r):t.value=r,t.updatedAt=n)}(t,t.value,r),Q=n,V=e}}function bt(t,e,n){var r={fn:t,state:arguments.length>3&&void 0!==arguments[3]?arguments[3]:H,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:V,context:V?V.context:null,pure:n};return null===V||V!==$&&(V.owned?V.owned.push(r):V.owned=[r]),r}function _t(t){if(0!==t.state){if(t.state===G)return Ct(t);if(t.suspense&&lt(t.suspense.inFallback))return t.suspense.effects.push(t);for(var e=[t];(t=t.owner)&&(!t.updatedAt||t.updatedAt<tt);)t.state&&e.push(t);for(var n=e.length-1;n>=0;n--)if((t=e[n]).state===H)wt(t);else if(t.state===G){var r=J;J=null,kt((function(){return Ct(t,e[0])}),!1),J=r}}}function kt(t,e){if(J)return t();var n=!1;e||(J=[]),Z?n=!0:Z=[],tt++;try{var r=t();return function(t){J&&(St(J),J=null);if(t)return;var e=Z;Z=null,e.length&&kt((function(){return U(e)}),!1)}(n),r}catch(o){n||(Z=null),J=null,It(o)}}function St(t){for(var e=0;e<t.length;e++)_t(t[e])}function Tt(t){var e,n=0;for(e=0;e<t.length;e++){var r=t[e];r.user?t[n++]=r:_t(r)}for(e=0;e<n;e++)_t(t[e])}function Ct(t,e){t.state=0;for(var n=0;n<t.sources.length;n+=1){var r=t.sources[n];if(r.sources){var o=r.state;o===H?r!==e&&(!r.updatedAt||r.updatedAt<tt)&&_t(r):o===G&&Ct(r,e)}}}function Rt(t){for(var e=0;e<t.observers.length;e+=1){var n=t.observers[e];n.state||(n.state=G,n.pure?J.push(n):Z.push(n),n.observers&&Rt(n))}}function Ft(t){var e;if(t.sources)for(;t.sources.length;){var n=t.sources.pop(),r=t.sourceSlots.pop(),o=n.observers;if(o&&o.length){var i=o.pop(),a=n.observerSlots.pop();r<o.length&&(i.sourceSlots[a]=r,o[r]=i,n.observerSlots[r]=a)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Ft(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Et(t){return t instanceof Error?t:new Error("string"==typeof t?t:"Unknown error",{cause:t})}function It(t){throw Et(t)}function Nt(t){if("function"==typeof t&&!t.length)return Nt(t());if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++){var r=Nt(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function zt(t,e){return function(e){var n;return ot((function(){return n=lt((function(){return V.context=m(m({},V.context),{},x({},t,e.value)),yt((function(){return e.children}))}))}),void 0),n}}var At=Symbol("fallback");function Pt(t){for(var e=0;e<t.length;e++)t[e]()}function Mt(t,e){return lt((function(){return t(e||{})}))}function Lt(){return!0}var Ot={get:function(t,e,n){return e===Y?n:t.get(e)},has:function(t,e){return e===Y||t.has(e)},set:Lt,deleteProperty:Lt,getOwnPropertyDescriptor:function(t,e){return{configurable:!0,enumerable:!0,get:function(){return t.get(e)},set:Lt,deleteProperty:Lt}},ownKeys:function(t){return t.keys()}};function Bt(t){return(t="function"==typeof t?t():t)?t:{}}function Dt(){for(var t=0,e=this.length;t<e;++t){var n=this[t]();if(void 0!==n)return n}}function jt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=!1,o=0;o<e.length;o++){var i=e[o];r=r||!!i&&Y in i,e[o]="function"==typeof i?(r=!0,at(i)):i}if(r)return new Proxy({get:function(t){for(var n=e.length-1;n>=0;n--){var r=Bt(e[n])[t];if(void 0!==r)return r}},has:function(t){for(var n=e.length-1;n>=0;n--)if(t in Bt(e[n]))return!0;return!1},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push.apply(t,g(Object.keys(Bt(e[n]))));return g(new Set(t))}},Ot);for(var a={},s={},u=new Set,l=e.length-1;l>=0;l--){var c=e[l];if(c)for(var d=Object.getOwnPropertyNames(c),f=function(){var t=d[h];if("__proto__"===t||"constructor"===t)return 1;var e=Object.getOwnPropertyDescriptor(c,t);if(u.has(t)){var n=s[t];n?e.get?n.push(e.get.bind(c)):void 0!==e.value&&n.push((function(){return e.value})):void 0===a[t]&&(a[t]=e.value)}else e.get?(u.add(t),Object.defineProperty(a,t,{enumerable:!0,configurable:!0,get:Dt.bind(s[t]=[e.get.bind(c)])})):(void 0!==e.value&&u.add(t),a[t]=e.value)},h=0,p=d.length;h<p;h++)f()}return a}var Yt=function(t){return"Stale read from <".concat(t,">.")};function Xt(t){var e="fallback"in t&&{fallback:function(){return t.fallback}};return at(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],o=[],i=[],a=0,s=e.length>1?[]:null;return ft((function(){return Pt(i)})),function(){var u,l,c=t()||[];return c[X],lt((function(){var t,e,f,h,p,v,g,y,m,x=c.length;if(0===x)0!==a&&(Pt(i),i=[],r=[],o=[],a=0,s&&(s=[])),n.fallback&&(r=[At],o[0]=et((function(t){return i[0]=t,n.fallback()})),a=1);else if(0===a){for(o=new Array(x),l=0;l<x;l++)r[l]=c[l],o[l]=et(d);a=x}else{for(f=new Array(x),h=new Array(x),s&&(p=new Array(x)),v=0,g=Math.min(a,x);v<g&&r[v]===c[v];v++);for(g=a-1,y=x-1;g>=v&&y>=v&&r[g]===c[y];g--,y--)f[y]=o[g],h[y]=i[g],s&&(p[y]=s[g]);for(t=new Map,e=new Array(y+1),l=y;l>=v;l--)m=c[l],u=t.get(m),e[l]=void 0===u?-1:u,t.set(m,l);for(u=v;u<=g;u++)m=r[u],void 0!==(l=t.get(m))&&-1!==l?(f[l]=o[u],h[l]=i[u],s&&(p[l]=s[u]),l=e[l],t.set(m,l)):i[u]();for(l=v;l<x;l++)l in f?(o[l]=f[l],i[l]=h[l],s&&(s[l]=p[l],s[l](l))):o[l]=et(d);o=o.slice(0,a=x),r=c.slice(0)}return o}));function d(t){if(i[l]=t,s){var n=b(nt(l),2),r=n[0],o=n[1];return s[l]=o,e(c[l],r)}return e(c[l])}}}((function(){return t.each}),t.children,e||void 0))}function Wt(t){var e=t.keyed,n=at((function(){return t.when}),void 0,{equals:function(t,n){return e?t===n:!t==!n}});return at((function(){var r=n();if(r){var o=t.children;return"function"==typeof o&&o.length>0?lt((function(){return o(e?r:function(){if(!lt(n))throw Yt("Show");return t.when})})):o}return t.fallback}),void 0,void 0)}var Ut=b(nt(null),2),Ht=Ut[0],Gt=Ut[1],$t=function(t){return e=xn("text"),bn(e,t,!1),e;var e},Kt=function(t){return e=xn("node"),bn(e,t,!1),e;var e},Vt=p((function t(e){v(this,t),x(this,"releaseCallback",void 0),this.releaseCallback=e})),qt=function(t){a(n,t);var e=u(n);function n(t,r){var o,i,a;return v(this,n),x(c(a=e.call(this,t)),"textureMap",new Map),x(c(a),"zeroReferenceTextureSet",new Set),x(c(a),"options",void 0),a.options={textureCleanupIntervalMs:null!==(o=r.textureCleanupIntervalMs)&&void 0!==o?o:1e4,textureCleanupAgeThreadholdMs:null!==(i=r.textureCleanupAgeThreadholdMs)&&void 0!==i?i:6e4},setInterval((function(){var t,e=Date.now(),n=a.options.textureCleanupAgeThreadholdMs,r=_(a.zeroReferenceTextureSet);try{for(r.s();!(t=r.n()).done;){var o=t.value;e-o.lastUpdate>n&&(a.releaseCallback(o.id),a.textureMap.delete(o.id),a.zeroReferenceTextureSet.delete(o))}}catch(i){r.e(i)}finally{r.f()}}),a.options.textureCleanupIntervalMs),a}return p(n,[{key:"registerTexture",value:function(t){var e,n=null===(e=t.options)||void 0===e?void 0:e.id;if(s(n,"Texture must have an id to be registered"),!this.textureMap.has(n)){var r={id:n,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(n,r),this.zeroReferenceTextureSet.add(r)}}},{key:"incrementTextureRefCount",value:function(t){var e,n=null===(e=t.options)||void 0===e?void 0:e.id;s(n,"Texture must have an id to be registered");var r=this.textureMap.get(n);r||(this.registerTexture(t),r=this.textureMap.get(n)),s(r,"Texture must have been registered"),"SubTexture"===t.txType&&this.incrementTextureRefCount(t.props.texture),r.nodeRefCount++,r.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(r)&&this.zeroReferenceTextureSet.delete(r)}},{key:"decrementTextureRefCount",value:function(t){var e,n=null===(e=t.options)||void 0===e?void 0:e.id;s(n,"Texture must have an id to be registered");var r=this.textureMap.get(n);s(r,"Texture must have been registered"),r.nodeRefCount--,r.lastUpdate=Date.now(),0===r.nodeRefCount&&this.zeroReferenceTextureSet.add(r),"SubTexture"===t.txType&&this.decrementTextureRefCount(t.props.texture)}}]),n}(Vt),Qt=function(t){a(n,t);var e=u(n);function n(t){var r;return v(this,n),x(c(r=e.call(this,t)),"registry",void 0),r.registry=new FinalizationRegistry(t),r}return p(n,[{key:"registerTexture",value:function(t){var e,n;s(null===(e=t.options)||void 0===e?void 0:e.id,"Texture must have an ID to be registered"),this.registry.register(t,null===(n=t.options)||void 0===n?void 0:n.id)}},{key:"incrementTextureRefCount",value:function(){}},{key:"decrementTextureRefCount",value:function(){}}]),n}(Vt),Jt=function(){function t(e,n,r){var o,i,a=this;v(this,t),x(this,"root",null),x(this,"driver",void 0),x(this,"canvas",void 0),x(this,"settings",void 0),x(this,"nodes",new Map),x(this,"nextTextureId",1),x(this,"textureTracker",void 0);var s={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(o=e.clearColor)&&void 0!==o?o:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:null!==(i=e.experimental_FinalizationRegistryTextureUsageTracker)&&void 0!==i&&i,textureCleanupOptions:e.textureCleanupOptions||{}};this.settings=s;var u=s.appWidth,l=s.appHeight,c=s.deviceLogicalPixelRatio,d=s.devicePhysicalPixelRatio,f=function(t){a.driver.releaseTexture(t)},h=s.experimental_FinalizationRegistryTextureUsageTracker&&"function"==typeof FinalizationRegistry;this.textureTracker=h?new Qt(f):new qt(f,this.settings.textureCleanupOptions);var p=u*c,g=l*c;this.driver=r;var y,m=document.createElement("canvas");if(this.canvas=m,m.width=p*d,m.height=g*d,m.style.width="".concat(p,"px"),m.style.height="".concat(g,"px"),!(y="string"==typeof n?document.getElementById(n):n))throw new Error("Could not find target element");r.onCreateNode=function(t){a.nodes.set(t.id,t)},r.onBeforeDestroyNode=function(t){a.nodes.delete(t.id)},y.appendChild(m)}var e;return p(t,[{key:"init",value:(e=i(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.driver.init(this,this.settings,this.canvas);case 2:this.root=this.driver.getRootNode();case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"createNode",value:function(t){return this.driver.createNode(this.resolveNodeDefaults(t))}},{key:"createTextNode",value:function(t){var e,n,r,o,i,a,s,u,l,c,d,f,h,p;return this.driver.createTextNode(m(m({},this.resolveNodeDefaults(t)),{},{text:null!==(e=t.text)&&void 0!==e?e:"",textRendererOverride:null!==(n=t.textRendererOverride)&&void 0!==n?n:null,fontSize:null!==(r=t.fontSize)&&void 0!==r?r:16,fontFamily:null!==(o=t.fontFamily)&&void 0!==o?o:"sans-serif",fontStyle:null!==(i=t.fontStyle)&&void 0!==i?i:"normal",fontWeight:null!==(a=t.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=t.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(u=t.textAlign)&&void 0!==u?u:"left",contain:null!==(l=t.contain)&&void 0!==l?l:"none",scrollable:null!==(c=t.scrollable)&&void 0!==c&&c,scrollY:null!==(d=t.scrollY)&&void 0!==d?d:0,offsetY:null!==(f=t.offsetY)&&void 0!==f?f:0,letterSpacing:null!==(h=t.letterSpacing)&&void 0!==h?h:0,debug:null!==(p=t.debug)&&void 0!==p?p:{}}))}},{key:"resolveNodeDefaults",value:function(t){var e,n,r,o,i,a,s,u,l,c,d,f,h,p,v,g,y,m,x,w,b,_,k,S,T,C,R,F,E,I,N,z,A,P,M,L,O,B,D,j,Y,X,W,U,H,G=null!==(e=t.color)&&void 0!==e?e:4294967295,$=null!==(n=null!==(r=null!==(o=t.colorTl)&&void 0!==o?o:t.colorTop)&&void 0!==r?r:t.colorLeft)&&void 0!==n?n:G,K=null!==(i=null!==(a=null!==(s=t.colorTr)&&void 0!==s?s:t.colorTop)&&void 0!==a?a:t.colorRight)&&void 0!==i?i:G,V=null!==(u=null!==(l=null!==(c=t.colorBl)&&void 0!==c?c:t.colorBottom)&&void 0!==l?l:t.colorLeft)&&void 0!==u?u:G,q=null!==(d=null!==(f=null!==(h=t.colorBr)&&void 0!==h?h:t.colorBottom)&&void 0!==f?f:t.colorRight)&&void 0!==d?d:G;return{x:null!==(p=t.x)&&void 0!==p?p:0,y:null!==(v=t.y)&&void 0!==v?v:0,width:null!==(g=t.width)&&void 0!==g?g:0,height:null!==(y=t.height)&&void 0!==y?y:0,alpha:null!==(m=t.alpha)&&void 0!==m?m:1,clipping:null!==(x=t.clipping)&&void 0!==x&&x,color:G,colorTop:null!==(w=t.colorTop)&&void 0!==w?w:G,colorBottom:null!==(b=t.colorBottom)&&void 0!==b?b:G,colorLeft:null!==(_=t.colorLeft)&&void 0!==_?_:G,colorRight:null!==(k=t.colorRight)&&void 0!==k?k:G,colorBl:V,colorBr:q,colorTl:$,colorTr:K,zIndex:null!==(S=t.zIndex)&&void 0!==S?S:0,zIndexLocked:null!==(T=t.zIndexLocked)&&void 0!==T?T:0,parent:null!==(C=t.parent)&&void 0!==C?C:null,texture:null!==(R=t.texture)&&void 0!==R?R:null,shader:null!==(F=t.shader)&&void 0!==F?F:null,src:null!==(E=t.src)&&void 0!==E?E:"",scale:null!==(I=t.scale)&&void 0!==I?I:null,scaleX:null!==(N=null!==(z=t.scaleX)&&void 0!==z?z:t.scale)&&void 0!==N?N:1,scaleY:null!==(A=null!==(P=t.scaleY)&&void 0!==P?P:t.scale)&&void 0!==A?A:1,mount:null!==(M=t.mount)&&void 0!==M?M:0,mountX:null!==(L=null!==(O=t.mountX)&&void 0!==O?O:t.mount)&&void 0!==L?L:0,mountY:null!==(B=null!==(D=t.mountY)&&void 0!==D?D:t.mount)&&void 0!==B?B:0,pivot:null!==(j=t.pivot)&&void 0!==j?j:.5,pivotX:null!==(Y=null!==(X=t.pivotX)&&void 0!==X?X:t.pivot)&&void 0!==Y?Y:.5,pivotY:null!==(W=null!==(U=t.pivotY)&&void 0!==U?U:t.pivot)&&void 0!==W?W:.5,rotation:null!==(H=t.rotation)&&void 0!==H?H:0}}},{key:"destroyNode",value:function(t){return this.driver.destroyNode(t)}},{key:"createTexture",value:function(t,e,n){var r=this.nextTextureId++,o={descType:"texture",txType:t,props:e,options:m(m({},n),{},{id:r})};return this.textureTracker.registerTexture(o),o}},{key:"createShader",value:function(t,e){return{descType:"shader",shType:t,props:e}}},{key:"getNodeById",value:function(t){return this.nodes.get(t)||null}},{key:"toggleFreeze",value:function(){throw new Error("Not implemented")}},{key:"advanceFrame",value:function(){throw new Error("Not implemented")}},{key:"rerender",value:function(){throw new Error("Not implemented")}}]),t}(),Zt=function(t){a(n,t);var e=u(n);function n(t,r,o){var i;return v(this,n),x(c(i=e.call(this)),"node",void 0),x(c(i),"props",void 0),x(c(i),"settings",void 0),x(c(i),"propStartValues",{}),x(c(i),"restoreValues",{}),x(c(i),"progress",0),x(c(i),"timingFunction",void 0),i.node=t,i.props=r,i.settings=o,i.propStartValues={},Object.keys(r).forEach((function(e){i.propStartValues[e]=t[e]})),i.timingFunction=function(t){return t},o.easing&&"string"==typeof o.easing&&(i.timingFunction=h(o.easing)),i}return p(n,[{key:"reset",value:function(){this.progress=0,this.update(0)}},{key:"restore",value:function(){var t=this;this.reset(),Object.keys(this.props).forEach((function(e){t.node[e]=t.propStartValues[e]}))}},{key:"reverse",value:function(){var t=this;this.progress=0,Object.keys(this.props).forEach((function(e){var n=t.props[e],r=t.propStartValues[e];t.props[e]=r,t.propStartValues[e]=n})),this.settings.loop||(this.settings.stopMethod=!1)}},{key:"applyEasing",value:function(t,e,n){return(this.timingFunction(t)||t)*(n-e)+e}},{key:"update",value:function(t){var e=this,n=this.settings,r=n.duration,o=n.loop,i=n.easing;r?(this.progress+=t/r,this.progress>1&&(this.progress=o?0:1,this.emit("finished",{})),Object.keys(this.props).forEach((function(t){var n=e.props[t],r=e.propStartValues[t],o=n;if(-1!==t.indexOf("color")){var a=i&&e.timingFunction(e.progress)||e.progress,s=y(r,o,a);e.node[t]=i?s:y(r,o,e.progress)}else e.node[t]=i?e.applyEasing(e.progress,r,o):r+(o-r)*e.progress}))):this.emit("finished",{})}}]),n}(d),te=function(){function t(e,n){v(this,t),x(this,"manager",void 0),x(this,"animation",void 0),x(this,"stoppedPromise",null),x(this,"stoppedResolve",null),x(this,"state",void 0),this.manager=e,this.animation=n,this.state="stopped"}return p(t,[{key:"start",value:function(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}},{key:"stop",value:function(){return this.manager.unregisterAnimation(this.animation),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}},{key:"pause",value:function(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}},{key:"restore",value:function(){return this.stoppedResolve=null,this.animation.restore(),this}},{key:"waitUntilStopped",value:function(){this.makeStoppedPromise();var t=this.stoppedPromise;return s(t),t}},{key:"makeStoppedPromise",value:function(){var t=this;null===this.stoppedResolve&&(this.stoppedPromise=new Promise((function(e){t.stoppedResolve=e})))}},{key:"finished",value:function(){s(this.stoppedResolve);var t=this.animation.settings,e=t.loop;if("reverse"===t.stopMethod)return this.animation.reverse(),void this.start();this.stoppedResolve(),this.stoppedResolve=null,e||this.manager.unregisterAnimation(this.animation)}}]),t}(),ee=function(){function t(e){v(this,t),x(this,"data",void 0),e?(this.data=new Float32Array(9),this.data[0]=e[0],this.data[3]=e[3],this.data[6]=e[6],this.data[1]=e[1],this.data[4]=e[4],this.data[7]=e[7],this.data[2]=e[2],this.data[5]=e[5],this.data[8]=e[8]):this.data=new Float32Array(9)}return p(t,[{key:"translate",value:function(t,e){return this.data[6]=this.data[0]*t+this.data[3]*e+this.data[6],this.data[7]=this.data[1]*t+this.data[4]*e+this.data[7],this}},{key:"scale",value:function(t,e){return this.data[0]=this.data[0]*t,this.data[3]=this.data[3]*e,this.data[1]=this.data[1]*t,this.data[4]=this.data[4]*e,this}},{key:"rotate",value:function(t){if(0===t||!(t%Math.PI*2))return this;var e=Math.cos(t),n=Math.sin(t),r=this.data[0]*e+this.data[3]*n,o=this.data[3]*e-this.data[0]*n,i=this.data[1]*e+this.data[4]*n,a=this.data[4]*e-this.data[1]*n;return this.data[0]=r,this.data[3]=o,this.data[1]=i,this.data[4]=a,this}},{key:"multiply",value:function(e){return t.multiply(this,e,this)}},{key:"tx",get:function(){return this.data[6]}},{key:"ty",get:function(){return this.data[7]}},{key:"ta",get:function(){return this.data[0]}},{key:"tb",get:function(){return this.data[3]}},{key:"tc",get:function(){return this.data[1]}},{key:"td",get:function(){return this.data[4]}},{key:"transformPoint",value:function(t,e){return[this.data[0]*t+this.data[3]*e+this.data[6],this.data[1]*t+this.data[4]*e+this.data[1]]}}],[{key:"temp",get:function(){return ne}},{key:"multiply",value:function(e,n,r){var o=e.data[0]*n.data[0]+e.data[3]*n.data[1]+e.data[6]*n.data[2],i=e.data[0]*n.data[3]+e.data[3]*n.data[4]+e.data[6]*n.data[5],a=e.data[0]*n.data[6]+e.data[3]*n.data[7]+e.data[6]*n.data[8],s=e.data[1]*n.data[0]+e.data[4]*n.data[1]+e.data[7]*n.data[2],u=e.data[1]*n.data[3]+e.data[4]*n.data[4]+e.data[7]*n.data[5],l=e.data[1]*n.data[6]+e.data[4]*n.data[7]+e.data[7]*n.data[8],c=e.data[2]*n.data[0]+e.data[5]*n.data[1]+e.data[8]*n.data[2],d=e.data[2]*n.data[3]+e.data[5]*n.data[4]+e.data[8]*n.data[5],f=e.data[2]*n.data[6]+e.data[5]*n.data[7]+e.data[8]*n.data[8];return r||(r=new t),r.data[0]=o,r.data[3]=i,r.data[6]=a,r.data[1]=s,r.data[4]=u,r.data[7]=l,r.data[2]=c,r.data[5]=d,r.data[8]=f,r}},{key:"identity",value:function(e){return e||(e=new t),e.data[0]=1,e.data[3]=0,e.data[6]=0,e.data[1]=0,e.data[4]=1,e.data[7]=0,e.data[2]=0,e.data[5]=0,e.data[8]=1,e}},{key:"translate",value:function(e,n,r){return r||(r=new t),r.data[0]=1,r.data[3]=0,r.data[6]=e,r.data[1]=0,r.data[4]=1,r.data[7]=n,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}},{key:"scale",value:function(e,n,r){return r||(r=new t),r.data[0]=e,r.data[3]=0,r.data[6]=0,r.data[1]=0,r.data[4]=n,r.data[7]=0,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}},{key:"rotate",value:function(e,n){var r=Math.cos(e),o=Math.sin(e);return n||(n=new t),n.data[0]=r,n.data[3]=-o,n.data[6]=0,n.data[1]=o,n.data[4]=r,n.data[7]=0,n.data[2]=0,n.data[5]=0,n.data[8]=1,n}},{key:"copy",value:function(e,n,r){return n||(n=new t),n.data[0]=e.data[0],n.data[1]=e.data[1],n.data[2]=e.data[2],n.data[3]=e.data[3],n.data[4]=e.data[4],n.data[5]=e.data[5],n.data[6]=e.data[6],n.data[7]=e.data[7],n.data[8]=e.data[8],n}}]),t}(),ne=new ee,re=function(t){a(n,t);var e=u(n);function n(t,r){var o;return v(this,n),x(c(o=e.call(this)),"stage",void 0),x(c(o),"children",[]),x(c(o),"props",void 0),x(c(o),"recalculationType",6),x(c(o),"hasUpdates",!0),x(c(o),"globalTransform",void 0),x(c(o),"scaleRotateTransform",void 0),x(c(o),"localTransform",void 0),x(c(o),"isComplex",!1),x(c(o),"onTextureLoaded",(function(t,e){o.emit("loaded",{type:"texture",dimensions:e})})),x(c(o),"onTextureFailed",(function(t,e){o.emit("failed",{type:"texture",error:e})})),o.stage=t,o.props=m(m({},r),{},{parent:null}),o.parent=r.parent,o.updateScaleRotateTransform(),o}return p(n,[{key:"loadTexture",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.props.texture&&this.unloadTexture();var o=this.stage.txManager.loadTexture(t,e,r);this.props.texture=o,this.props.textureOptions=r,queueMicrotask((function(){"loaded"===o.state?n.onTextureLoaded(o,o.dimensions):"failed"===o.state&&n.onTextureFailed(o,o.error),o.on("loaded",n.onTextureLoaded),o.on("failed",n.onTextureFailed)}))}},{key:"unloadTexture",value:function(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null}},{key:"loadShader",value:function(t,e){var n=this.stage.renderer.getShaderManager();s(n);var r=n.loadShader(t,e),o=r.shader,i=r.props;this.props.shader=o,this.props.shaderProps=i}},{key:"setHasUpdates",value:function(){if(this.props.alpha){this.hasUpdates=!0;for(var t=null==this?void 0:this.props.parent;t;){var e;t.hasUpdates=!0,t=null===(e=t)||void 0===e?void 0:e.props.parent}}}},{key:"setRecalculationType",value:function(t){this.recalculationType|=t,this.setHasUpdates()}},{key:"updateScaleRotateTransform",value:function(){this.setRecalculationType(4),this.scaleRotateTransform=ee.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY),this.updateLocalTransform()}},{key:"updateLocalTransform",value:function(){s(this.scaleRotateTransform),this.setRecalculationType(2);var t=this.props.pivotX*this.props.width,e=this.props.pivotY*this.props.height,n=this.props.mountX*this.props.width,r=this.props.mountY*this.props.height;this.localTransform=ee.translate(t-n+this.props.x,e-r+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-t,-e)}},{key:"update",value:function(t){var e;s(this.localTransform);var n=null===(e=this.parent)||void 0===e?void 0:e.globalTransform;this.globalTransform=n?ee.copy(n,this.globalTransform).multiply(this.localTransform):ee.copy(this.localTransform,this.globalTransform),this.children.length&&this.children.forEach((function(e){e.update(t)})),this.hasUpdates=!1,this.recalculationType=0}},{key:"renderQuads",value:function(t,e){var n=this.props,r=n.width,o=n.height,i=n.colorTl,a=n.colorTr,u=n.colorBl,l=n.colorBr,c=n.texture,d=n.textureOptions,f=n.shader,h=n.shaderProps,p=this.zIndex,v=this.worldAlpha,g=this.globalTransform;s(g),t.addRenderable({width:r,height:o,colorTl:i,colorTr:a,colorBl:u,colorBr:l,texture:c,textureOptions:d,zIndex:p,shader:f,shaderProps:h,alpha:v,clippingRect:e,tx:g.tx,ty:g.ty,ta:g.ta,tb:g.tb,tc:g.tc,td:g.td})}},{key:"id",get:function(){return this.props.id}},{key:"x",get:function(){return this.props.x},set:function(t){this.props.x!==t&&(this.props.x=t,this.updateLocalTransform())}},{key:"absX",get:function(){var t,e;return this.props.x+((null===(t=this.props.parent)||void 0===t?void 0:t.absX)||(null===(e=this.props.parent)||void 0===e||null===(e=e.globalTransform)||void 0===e?void 0:e.tx)||0)}},{key:"absY",get:function(){var t,e;return this.props.y+(null!==(t=null===(e=this.props.parent)||void 0===e?void 0:e.absY)&&void 0!==t?t:0)}},{key:"y",get:function(){return this.props.y},set:function(t){this.props.y!==t&&(this.props.y=t,this.updateLocalTransform())}},{key:"width",get:function(){return this.props.width},set:function(t){this.props.width!==t&&(this.props.width=t,this.updateLocalTransform())}},{key:"height",get:function(){return this.props.height},set:function(t){this.props.height!==t&&(this.props.height=t,this.updateLocalTransform())}},{key:"scale",get:function(){return this.scaleX},set:function(t){this.scaleX=t,this.scaleY=t}},{key:"scaleX",get:function(){return this.props.scaleX},set:function(t){this.props.scaleX!==t&&(this.props.scaleX=t,this.updateScaleRotateTransform())}},{key:"scaleY",get:function(){return this.props.scaleY},set:function(t){this.props.scaleY!==t&&(this.props.scaleY=t,this.updateScaleRotateTransform())}},{key:"worldScaleX",get:function(){var t,e;return this.props.scaleX*(null!==(t=null===(e=this.props.parent)||void 0===e?void 0:e.worldScaleX)&&void 0!==t?t:1)||this.props.scaleX}},{key:"worldScaleY",get:function(){var t,e;return this.props.scaleY*(null!==(t=null===(e=this.props.parent)||void 0===e?void 0:e.worldScaleY)&&void 0!==t?t:1)||this.props.scaleY}},{key:"mount",get:function(){return this.props.mount},set:function(t){this.props.mountX=t,this.props.mountY=t,this.props.mount=t,this.updateLocalTransform()}},{key:"mountX",get:function(){return this.props.mountX},set:function(t){this.props.mountX=t,this.updateLocalTransform()}},{key:"mountY",get:function(){return this.props.mountY},set:function(t){this.props.mountY=t,this.updateLocalTransform()}},{key:"pivot",get:function(){return this.props.pivot},set:function(t){this.props.pivotX===t&&this.props.pivotY===t||(this.props.pivotX=t,this.props.pivotY=t,this.updateLocalTransform())}},{key:"pivotX",get:function(){return this.props.pivotX},set:function(t){this.props.pivotX=t,this.updateLocalTransform()}},{key:"pivotY",get:function(){return this.props.pivotY},set:function(t){this.props.pivotY=t,this.updateLocalTransform()}},{key:"rotation",get:function(){return this.props.rotation},set:function(t){this.props.rotation!==t&&(this.props.rotation=t,this.updateScaleRotateTransform())}},{key:"alpha",get:function(){return this.props.alpha},set:function(t){this.props.alpha=t}},{key:"worldAlpha",get:function(){var t=this.props,e=t.parent;return t.alpha*((null==e?void 0:e.worldAlpha)||1)}},{key:"clipping",get:function(){return this.props.clipping},set:function(t){this.props.clipping=t}},{key:"color",get:function(){return this.props.color},set:function(t){this.props.colorTl===t&&this.props.colorTr===t&&this.props.colorBl===t&&this.props.colorBr===t||(this.colorTl=t,this.colorTr=t,this.colorBl=t,this.colorBr=t),this.props.color=t}},{key:"colorTop",get:function(){return this.props.colorTop},set:function(t){this.props.colorTl===t&&this.props.colorTr===t||(this.colorTl=t,this.colorTr=t),this.props.colorTop=t}},{key:"colorBottom",get:function(){return this.props.colorBottom},set:function(t){this.props.colorBl===t&&this.props.colorBr===t||(this.colorBl=t,this.colorBr=t),this.props.colorBottom=t}},{key:"colorLeft",get:function(){return this.props.colorLeft},set:function(t){this.props.colorTl===t&&this.props.colorBl===t||(this.colorTl=t,this.colorBl=t),this.props.colorLeft=t}},{key:"colorRight",get:function(){return this.props.colorRight},set:function(t){this.props.colorTr===t&&this.props.colorBr===t||(this.colorTr=t,this.colorBr=t),this.props.colorRight=t}},{key:"colorTl",get:function(){return this.props.colorTl},set:function(t){this.props.colorTl=t}},{key:"colorTr",get:function(){return this.props.colorTr},set:function(t){this.props.colorTr=t}},{key:"colorBl",get:function(){return this.props.colorBl},set:function(t){this.props.colorBl=t}},{key:"colorBr",get:function(){return this.props.colorBr},set:function(t){this.props.colorBr=t}},{key:"zIndexLocked",get:function(){return this.props.zIndexLocked||0},set:function(t){this.props.zIndexLocked=t}},{key:"zIndex",get:function(){var t,e,n=this.props,r=n.zIndex||0,o=(null===(t=n.parent)||void 0===t?void 0:t.zIndex)||0;return null!==(e=n.parent)&&void 0!==e&&e.zIndexLocked?r<o?r:o:r},set:function(t){this.props.zIndex=t}},{key:"parent",get:function(){return this.props.parent},set:function(t){var e=this.props.parent;if(e!==t){if(this.props.parent=t,e){var n=e.children.indexOf(this);s(-1!==n,"CoreNode.parent: Node not found in old parent's children!"),e.children.splice(n,1)}t&&t.children.push(this),this.updateScaleRotateTransform()}}}]),n}(d),oe=1;function ie(){return oe++}var ae=function(t){a(n,t);var e=u(n);function n(t,r,o,i){var a,s;return v(this,n),x(c(s=e.call(this)),"rendererMain",void 0),x(c(s),"stage",void 0),x(c(s),"id",void 0),x(c(s),"coreNode",void 0),x(c(s),"_children",[]),x(c(s),"_src",""),x(c(s),"_parent",null),x(c(s),"_texture",null),x(c(s),"_shader",null),x(c(s),"onTextureLoaded",(function(t,e){s.emit("loaded",e)})),x(c(s),"onTextureFailed",(function(t,e){s.emit("failed",e)})),s.rendererMain=r,s.stage=o,s.id=null!==(a=null==i?void 0:i.id)&&void 0!==a?a:ie(),s.coreNode=i||new re(s.stage,{id:s.id,x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),s.coreNode.on("loaded",s.onTextureLoaded),s.coreNode.on("failed",s.onTextureFailed),s.parent=t.parent,s.shader=t.shader,s.texture=t.texture,s.src=t.src,s}return p(n,[{key:"x",get:function(){return this.coreNode.x},set:function(t){this.coreNode.x=t}},{key:"y",get:function(){return this.coreNode.y},set:function(t){this.coreNode.y=t}},{key:"width",get:function(){return this.coreNode.width},set:function(t){this.coreNode.width=t}},{key:"height",get:function(){return this.coreNode.height},set:function(t){this.coreNode.height=t}},{key:"alpha",get:function(){return this.coreNode.alpha},set:function(t){this.coreNode.alpha=t}},{key:"clipping",get:function(){return this.coreNode.clipping},set:function(t){this.coreNode.clipping=t}},{key:"color",get:function(){return this.coreNode.color},set:function(t){this.coreNode.color=t}},{key:"colorTop",get:function(){return this.coreNode.colorTop},set:function(t){this.coreNode.colorTop=t}},{key:"colorBottom",get:function(){return this.coreNode.colorBottom},set:function(t){this.coreNode.colorBottom=t}},{key:"colorLeft",get:function(){return this.coreNode.colorLeft},set:function(t){this.coreNode.colorLeft=t}},{key:"colorRight",get:function(){return this.coreNode.colorRight},set:function(t){this.coreNode.colorRight=t}},{key:"colorTl",get:function(){return this.coreNode.colorTl},set:function(t){this.coreNode.colorTl=t}},{key:"colorTr",get:function(){return this.coreNode.colorTr},set:function(t){this.coreNode.colorTr=t}},{key:"colorBl",get:function(){return this.coreNode.colorBl},set:function(t){this.coreNode.colorBl=t}},{key:"colorBr",get:function(){return this.coreNode.colorBr},set:function(t){this.coreNode.colorBr=t}},{key:"scale",get:function(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX},set:function(t){null!==t&&(this.coreNode.scaleX=t,this.coreNode.scaleY=t)}},{key:"scaleX",get:function(){return this.coreNode.scaleX},set:function(t){this.coreNode.scaleX=t}},{key:"scaleY",get:function(){return this.coreNode.scaleY},set:function(t){this.coreNode.scaleY=t}},{key:"mount",get:function(){return this.coreNode.mount},set:function(t){this.coreNode.mount=t}},{key:"mountX",get:function(){return this.coreNode.mountX},set:function(t){this.coreNode.mountX=t}},{key:"mountY",get:function(){return this.coreNode.mountY},set:function(t){this.coreNode.mountY=t}},{key:"pivot",get:function(){return this.coreNode.pivot},set:function(t){this.coreNode.pivot=t}},{key:"pivotX",get:function(){return this.coreNode.pivotX},set:function(t){this.coreNode.pivotX=t}},{key:"pivotY",get:function(){return this.coreNode.pivotY},set:function(t){this.coreNode.pivotY=t}},{key:"rotation",get:function(){return this.coreNode.rotation},set:function(t){this.coreNode.rotation=t}},{key:"parent",get:function(){return this._parent},set:function(t){var e,n=this._parent;if(this._parent=t,this.coreNode.parent=null!==(e=null==t?void 0:t.coreNode)&&void 0!==e?e:null,n){var r=n.children.indexOf(this);s(-1!==r,"MainOnlyNode.parent: Node not found in old parent's children!"),n.children.splice(r,1)}t&&t.children.push(this)}},{key:"children",get:function(){return this._children}},{key:"zIndex",get:function(){return this.coreNode.zIndex},set:function(t){this.coreNode.zIndex=t}},{key:"zIndexLocked",get:function(){return this.coreNode.zIndexLocked},set:function(t){this.coreNode.zIndexLocked=t}},{key:"src",get:function(){return this._src},set:function(t){this._src!==t&&(this._src=t,this.texture=t?this.rendererMain.createTexture("ImageTexture",{src:t}):null)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),t&&this.rendererMain.textureTracker.incrementTextureRefCount(t),this._texture=t,t?this.coreNode.loadTexture(t.txType,t.props,t.options):this.coreNode.unloadTexture())}},{key:"shader",get:function(){return this._shader},set:function(t){this._shader!==t&&(this._shader=t,t&&this.coreNode.loadShader(t.shType,t.props))}},{key:"destroy",value:function(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}},{key:"flush",value:function(){}},{key:"animate",value:function(t,e){var n=new Zt(this.coreNode,t,e);return new te(this.stage.animationManager,n)}}]),n}(d),se=function(){function t(e){v(this,t),x(this,"root",void 0),this.root=e}return p(t,[{key:"getNodeByType",value:function(t){return[]}},{key:"getNodeById",value:function(t){return null}},{key:"update",value:function(t){this.root.update(t)}}]),t}(),ue=function(t){a(n,t);var e=u(n);function n(t){return v(this,n),e.call(this,{renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}return p(n,[{key:"bindTextures",value:function(t){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}}]),n}(w);x(ue,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});var le=function(t){a(n,t);var e=u(n);function n(t){var r;return v(this,n),x(c(r=e.call(this,{renderer:t,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]})),"supportsIndexedTextures",!0),r}return p(n,[{key:"bindTextures",value:function(t){var e=this.renderer,n=this.gl;if(t.length>e.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(e.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));t.forEach((function(t,e){n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t.ctxTexture)}));var r=Array.from(Array(t.length).keys());this.setUniform("u_textures[0]",r)}}]),n}(w);x(le,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:function(t){return"\n      #define txUnits ".concat(t,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(t,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(t).keys()).map((function(t){return"\n          ".concat(0!==t?"else ":"","if (idx == ").concat(t,") {\n            return texture2D(textures[").concat(t,"], uv);\n          }\n        ")})).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")}});var ce=function(){function t(e){v(this,t),x(this,"priority",1),x(this,"name",""),x(this,"ref",void 0),x(this,"target",void 0),x(this,"passParameters",""),x(this,"declaredUniforms",""),x(this,"uniformInfo",{});var n=e.ref,r=e.target,o=e.props,i=void 0===o?{}:o;this.ref=n,this.target=r;var a={},s=[],u="",l=this.constructor.uniforms||{};for(var c in l){var d=l[c],f=d.type,h="".concat(n,"_").concat(c),p="";d.size&&(p="[".concat(d.size(i),"]")),s.push(h),u+="uniform ".concat(f," ").concat(h).concat(p,";"),a[c]={name:h,uniform:l[c].method}}this.passParameters=s.join(","),this.declaredUniforms=u,this.uniformInfo=a}return p(t,null,[{key:"getEffectKey",value:function(t){return""}},{key:"getMethodParameters",value:function(t,e){var n=[];for(var r in t){var o=t[r],i="";o.size&&(i="[".concat(o.size(e),"]")),n.push("".concat(o.type," ").concat(r).concat(i))}return n.join(",")}},{key:"resolveDefaults",value:function(t){return{}}},{key:"makeEffectKey",value:function(t){return!1}}]),t}();x(ce,"uniforms",{}),x(ce,"methods",void 0),x(ce,"onShaderMask",void 0),x(ce,"onColorize",void 0),x(ce,"onEffectMask",void 0);var de=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","radius"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"radius"}},{key:"resolveDefaults",value:function(t){var e;return{radius:null!==(e=t.radius)&&void 0!==e?e:10}}}]),n}(ce);x(de,"z$__type__Props",void 0),x(de,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:function(t){var e=t;return Array.isArray(e)?2===e.length?e=[e[0],e[1],e[0],e[1]]:3===e.length?e=[e[0],e[1],e[2],e[0]]:4!==e.length&&(e=[e[0],e[0],e[0],e[0]]):"number"==typeof e&&(e=[e,e,e,e]),e}}}),x(de,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),x(de,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),x(de,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");var fe=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","border"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"border"}},{key:"resolveDefaults",value:function(t){var e,n;return{width:null!==(e=t.width)&&void 0!==e?e:10,color:null!==(n=t.color)&&void 0!==n?n:4294967295}}}]),n}(ce);x(fe,"z$__type__Props",void 0),x(fe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(t){return k(t)},method:"uniform4fv",type:"vec4"}}),x(fe,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  "),x(fe,"onColorize","\n    return color;\n  ");var he=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","linearGradient"),t}return p(n,null,[{key:"getEffectKey",value:function(t){return"linearGradient".concat(t.colors.length)}},{key:"resolveDefaults",value:function(t){var e,n,r=null!==(e=t.colors)&&void 0!==e?e:[4278190080,4294967295],o=t.stops;if(!o){o=[];for(var i=r.length-1,a=0;a<r.length;a++)o.push(a*(1/i))}return{colors:r,stops:o,angle:null!==(n=t.angle)&&void 0!==n?n:0}}}]),n}(ce);x(he,"z$__type__Props",void 0),x(he,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:function(t){return t.map((function(t){return k(t)})).reduce((function(t,e){return t.concat(e)}),[])},size:function(t){return t.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],validator:function(t,e){var n,r=null!==(n=e.colors)&&void 0!==n?n:[],o=t,i=t;if(0===o.length||o&&o.length!==r.length){for(var a=0;a<r.length;a++)o[a]?(i[a]=o[a],void 0===o[a-1]&&void 0!==i[a-2]&&(i[a-1]=i[a-2]+(o[a]-i[a-2])/2)):i[a]=a*(1/(r.length-1));o=i}return i},size:function(t){return t.colors.length},method:"uniform1fv",type:"float"}}),x(he,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),x(he,"ColorLoop",(function(t){for(var e="",n=2;n<t;n++)e+="colorOut = mix(colorOut, colors[".concat(n,"], clamp((dist - stops[").concat(n-1,"]) / (stops[").concat(n,"] - stops[").concat(n-1,"]), 0.0, 1.0));");return e})),x(he,"onColorize",(function(t){var e=t.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(e,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")}));var pe=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","grayscale"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"grayscale"}}]),n}(ce);x(pe,"onColorize","\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  ");var ve=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","borderRight"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"borderRight"}},{key:"resolveDefaults",value:function(t){var e,n;return{width:null!==(e=t.width)&&void 0!==e?e:10,color:null!==(n=t.color)&&void 0!==n?n:4294967295}}}]),n}(ce);x(ve,"z$__type__Props",void 0),x(ve,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(t){return k(t)},method:"uniform4fv",type:"vec4"}}),x(ve,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),x(ve,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),x(ve,"onColorize","\n    return color;\n  ");var ge=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","borderTop"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"borderTop"}},{key:"resolveDefaults",value:function(t){var e,n;return{width:null!==(e=t.width)&&void 0!==e?e:10,color:null!==(n=t.color)&&void 0!==n?n:4294967295}}}]),n}(ce);x(ge,"z$__type__Props",void 0),x(ge,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(t){return k(t)},method:"uniform4fv",type:"vec4"}}),x(ge,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),x(ge,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),x(ge,"onColorize","\n    return color;\n  ");var ye=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","borderBottom"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"borderBottom"}},{key:"resolveDefaults",value:function(t){var e,n;return{width:null!==(e=t.width)&&void 0!==e?e:10,color:null!==(n=t.color)&&void 0!==n?n:4294967295}}}]),n}(ce);x(ye,"z$__type__Props",void 0),x(ye,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(t){return k(t)},method:"uniform4fv",type:"vec4"}}),x(ye,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),x(ye,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),x(ye,"onColorize","\n    return color;\n  ");var me=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","borderLeft"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"borderLeft"}},{key:"resolveDefaults",value:function(t){var e,n;return{width:null!==(e=t.width)&&void 0!==e?e:10,color:null!==(n=t.color)&&void 0!==n?n:4294967295}}}]),n}(ce);x(me,"z$__type__Props",void 0),x(me,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(t){return k(t)},method:"uniform4fv",type:"vec4"}}),x(me,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),x(me,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),x(me,"onColorize","\n    return color;\n  ");var xe=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","glitch"),t}return p(n,null,[{key:"getEffectKey",value:function(t){return"glitch"}},{key:"resolveDefaults",value:function(t){var e,n,r,o,i;return{amplitude:null!==(e=t.amplitude)&&void 0!==e?e:.2,narrowness:null!==(n=t.narrowness)&&void 0!==n?n:4,blockiness:null!==(r=t.blockiness)&&void 0!==r?r:2,minimizer:null!==(o=t.minimizer)&&void 0!==o?o:8,time:null!==(i=t.time)&&void 0!==i?i:Date.now()}}}]),n}(ce);x(xe,"z$__type__Props",void 0),x(xe,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:function(t){return(Date.now()-t)%1e3},type:"float"}}),x(xe,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),x(xe,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");var we=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","fadeOut"),t}return p(n,null,[{key:"getEffectKey",value:function(){return"fadeOut"}},{key:"resolveDefaults",value:function(t){var e;return{fade:null!==(e=t.fade)&&void 0!==e?e:10}}}]),n}(ce);x(we,"z$__type__Props",void 0),x(we,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:function(t){var e=t;return Array.isArray(e)?2===e.length?e=[e[0],e[1],e[0],e[1]]:3===e.length?e=[e[0],e[1],e[2],e[0]]:4!==e.length&&(e=[e[0],e[0],e[0],e[0]]):"number"==typeof e&&(e=[e,e,e,e]),e}}}),x(we,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");var be=function(t){a(n,t);var e=u(n);function n(){var t;v(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return x(c(t=e.call.apply(e,[this].concat(o))),"name","radialGradient"),t}return p(n,null,[{key:"getEffectKey",value:function(t){return"radialGradient".concat(t.colors.length)}},{key:"resolveDefaults",value:function(t){var e,n,r,o,i,a=null!==(e=t.colors)&&void 0!==e?e:[4278190080,4294967295],s=t.stops;if(!s){s=[];for(var u=a.length-1,l=0;l<a.length;l++)s.push(l*(1/u))}return{colors:a,stops:s,width:null!==(n=t.width)&&void 0!==n?n:0,height:null!==(r=null!==(o=t.height)&&void 0!==o?o:t.width)&&void 0!==r?r:0,pivot:null!==(i=t.pivot)&&void 0!==i?i:[.5,.5]}}}]),n}(ce);x(be,"z$__type__Props",void 0),x(be,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:function(t){return t.map((function(t){return k(t)})).reduce((function(t,e){return t.concat(e)}),[])},size:function(t){return t.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],validator:function(t,e){var n,r=null!==(n=e.colors)&&void 0!==n?n:[],o=t,i=t;if(0===o.length||o&&o.length!==r.length){for(var a=0;a<r.length;a++)o[a]?(i[a]=o[a],void 0===o[a-1]&&void 0!==i[a-2]&&(i[a-1]=i[a-2]+(o[a]-i[a-2])/2)):i[a]=a*(1/(r.length-1));o=i}return i},size:function(t){return t.colors.length},method:"uniform1fv",type:"float"}}),x(be,"onColorize",(function(t){var e=t.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(e,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")}));var _e={radius:de,border:fe,borderBottom:ye,borderLeft:me,borderRight:ve,borderTop:ge,fadeOut:we,linearGradient:he,radialGradient:be,grayscale:pe,glitch:xe},ke=function(t){a(n,t);var e=u(n);function n(t,r,o){var i;v(this,n);var a=n.createShader(r,o);return x(c(i=e.call(this,{renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"}].concat(g(a.uniforms)),shaderSources:{vertex:a.vertex,fragment:a.fragment}})),"effects",[]),i.effects=a.effects,i}return p(n,[{key:"bindTextures",value:function(t){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}},{key:"bindProps",value:function(t){var e,n=this;null===(e=t.effects)||void 0===e||e.forEach((function(t,e){var r,o=n.effects[e],i=_e[o.name],a=null!==(r=t.props)&&void 0!==r?r:{},s=o.uniformInfo;Object.keys(a).forEach((function(t){var e=i.uniforms[t],r=s[t],o=e.validator?e.validator(a[t],a):a[t];Array.isArray(o)&&(o=new Float32Array(o)),n.setUniform(r.name,o)}))}))}}],[{key:"createShader",value:function(t,e){var r={},o={},i="",a=[],s=[],u=t.effects.map((function(t){var n=e[t.type],o=n.getEffectKey(t.props||{});r[o]=r[o]?++r[o]:1;var u=r[o];1===u&&s.push({key:o,type:t.type,props:t.props});var l=new n({ref:"".concat(o).concat(1===u?"":u),target:o,props:t.props});return i+=l.declaredUniforms,a.push.apply(a,g(Object.values(l.uniformInfo))),l})),l="";null==s||s.forEach((function(t){var r,i=e[t.type],a=i.resolveDefaults(null!==(r=t.props)&&void 0!==r?r:{}),s=[];for(var u in i.methods){var c=u,d=i.methods[u];o[u]&&o[u]!==d&&(c=n.resolveMethodDuplicate(u,d,o)),o[c]=d.replace("function",c),s.push({m:u,cm:c})}var f=i.onShaderMask instanceof Function?i.onShaderMask(a):i.onShaderMask,h=i.onColorize instanceof Function?i.onColorize(a):i.onColorize,p=i.onEffectMask instanceof Function?i.onEffectMask(a):i.onEffectMask;s.forEach((function(t){var e=t.m,n=t.cm,r=new RegExp("\\$".concat(e),"g");f&&(f=f.replace(r,n)),h&&(h=h.replace(r,n)),p&&(p=p.replace(r,n))}));var v=i.getMethodParameters(i.uniforms,a),g=v.length>0?", ".concat(v):"";f&&(l+="\n        float fx_".concat(t.key,"_onShaderMask(float shaderMask ").concat(g,") {\n          ").concat(f,"\n        }\n        ")),h&&(l+="\n          vec4 fx_".concat(t.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(h,"\n          }\n        ")),p&&(l+="\n          vec4 fx_".concat(t.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(p,"\n          }\n        "))}));var c="";for(var d in o)c+=o[d];for(var f="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",h="\n\n    ",p=0;p<u.length;p++){var v=u[p],y=v.passParameters.length>0?", ".concat(v.passParameters):"",m=_e[v.name];m.onShaderMask&&(h+="\n        shaderMask = fx_".concat(v.target,"_onShaderMask(shaderMask ").concat(y,");\n        ")),m.onColorize&&(h+="\n        maskColor = fx_".concat(v.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(y,");\n        ")),m.onEffectMask&&(f="fx_".concat(v.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(y,")"));var x=u[p+1];(void 0===x||_e[x.name].onEffectMask)&&(h+="\n          shaderColor = ".concat(f,";\n        "))}return{effects:u,uniforms:a,fragment:n.fragment(i,c,l,h),vertex:n.vertex()}}},{key:"resolveMethodDuplicate",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=t+(r>0?r:"");return n[o]&&n[o]!==e?this.resolveMethodDuplicate(t,e,n,++r):o}},{key:"resolveDefaults",value:function(t,e){var n;return{effects:(null!==(n=t.effects)&&void 0!==n?n:[]).map((function(t){return{type:t.type,props:e[t.type].resolveDefaults(t.props||{})}})),$dimensions:{width:0,height:0},$alpha:0}}},{key:"makeCacheKey",value:function(t,e){var n,r="";return null===(n=t.effects)||void 0===n||n.forEach((function(t){var n=e[t.type].getEffectKey(t.props||{});r+=",".concat(n)})),"DynamicShader".concat(r)}}]),n}(w);x(ke,"z$__type__Props",void 0),x(ke,"vertex",(function(){return"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "})),x(ke,"fragment",(function(t,e,n,r){return"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(t,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(e,"\n\n    ").concat(n,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(r,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  ")}));var Se=function(t){a(n,t);var e=u(n);function n(t){return v(this,n),e.call(this,{renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}return p(n,[{key:"bindTextures",value:function(t){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}},{key:"bindProps",value:function(t){this.setUniform("u_radius",t.radius)}},{key:"canBatchShaderProps",value:function(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}],[{key:"resolveDefaults",value:function(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}}]),n}(w);x(Se,"z$__type__Props",void 0),x(Se,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var Te=new Float32Array([1,0,0,0,1,0,0,0,1]),Ce=function(t){a(n,t);var e=u(n);function n(t){return v(this,n),e.call(this,{renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}return p(n,[{key:"bindTextures",value:function(t){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t[0].ctxTexture)}},{key:"bindProps",value:function(t){var e=n.resolveDefaults(t);for(var r in e)if("transform"===r)this.setUniform("u_transform",!1,e[r]);else if("scrollY"===r)this.setUniform("u_scrollY",e[r]);else if("color"===r){var o=k(e.color);this.setUniform("u_color",o)}else"size"===r?this.setUniform("u_size",e[r]):"distanceRange"===r?this.setUniform("u_distanceRange",e[r]):"debug"===r&&this.setUniform("u_debug",e[r]?1:0)}}],[{key:"resolveDefaults",value:function(){var t,e,n,r,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{transform:null!==(t=a.transform)&&void 0!==t?t:Te,scrollY:null!==(e=a.scrollY)&&void 0!==e?e:0,color:null!==(n=a.color)&&void 0!==n?n:4294967295,size:null!==(r=a.size)&&void 0!==r?r:16,distanceRange:null!==(o=a.distanceRange)&&void 0!==o?o:1,debug:null!==(i=a.debug)&&void 0!==i&&i}}}]),n}(w);x(Ce,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});var Re=function(){function t(){v(this,t),x(this,"shCache",new Map),x(this,"shConstructors",{}),x(this,"attachedShader",null),x(this,"effectConstructors",{}),x(this,"renderer",void 0),this.registerShaderType("DefaultShader",ue),this.registerShaderType("DefaultShaderBatched",le),this.registerShaderType("RoundedRectangle",Se),this.registerShaderType("DynamicShader",ke),this.registerShaderType("SdfShader",Ce),this.registerEffectType("border",fe),this.registerEffectType("borderBottom",ye),this.registerEffectType("borderLeft",me),this.registerEffectType("borderRight",ve),this.registerEffectType("borderTop",ge),this.registerEffectType("fadeOut",we),this.registerEffectType("linearGradient",he),this.registerEffectType("radialGradient",be),this.registerEffectType("grayscale",pe),this.registerEffectType("glitch",xe),this.registerEffectType("radius",de)}return p(t,[{key:"registerShaderType",value:function(t,e){this.shConstructors[t]=e}},{key:"registerEffectType",value:function(t,e){this.effectConstructors[t]=e}},{key:"loadShader",value:function(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");var n=this.shConstructors[t];if(!n)throw new Error('Shader type "'.concat(t,'" is not registered'));if("DynamicShader"===t)return this.loadDynamicShader(e);var r=n.resolveDefaults(e),o=n.makeCacheKey(r)||n.name;if(o&&this.shCache.has(o))return{shader:this.shCache.get(o),props:r};var i=new n(this.renderer,e);return o&&this.shCache.set(o,i),{shader:i,props:r}}},{key:"loadDynamicShader",value:function(t){if(!this.renderer)throw new Error("Renderer is not been defined");var e=ke.resolveDefaults(t,this.effectConstructors),n=ke.makeCacheKey(e,this.effectConstructors);if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:e};var r=new ke(this.renderer,t,this.effectConstructors);return n&&this.shCache.set(n,r),{shader:r,props:e}}},{key:"useShader",value:function(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}]),t}(),Fe=function(){function t(){v(this,t),x(this,"activeAnimations",new Set)}return p(t,[{key:"registerAnimation",value:function(t){this.activeAnimations.add(t)}},{key:"unregisterAnimation",value:function(t){this.activeAnimations.delete(t)}},{key:"update",value:function(t){this.activeAnimations.forEach((function(e){e.update(t)}))}}]),t}(),Ee=function(t){a(o,t);var e,n=u(o);function o(t,e){var r;return v(this,o),x(c(r=n.call(this,t)),"props",void 0),r.props=o.resolveDefaults(e),r}return p(o,[{key:"getTextureData",value:(e=i(r().mark((function t(){var e,n,o,i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,n=e.src,o=e.premultiplyAlpha,n){t.next=3;break}return t.abrupt("return",{data:null});case 3:if(!(n instanceof ImageData)){t.next=5;break}return t.abrupt("return",{data:n,premultiplyAlpha:o});case 5:return t.next=7,fetch(n);case 7:return i=t.sent,t.next=10,i.blob();case 10:return a=t.sent,t.next=13,createImageBitmap(a,{premultiplyAlpha:o?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 13:return t.t0=t.sent,t.abrupt("return",{data:t.t0});case 15:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(t){var e=o.resolveDefaults(t);return!(e.src instanceof ImageData)&&"ImageTexture,".concat(e.src,",").concat(e.premultiplyAlpha)}},{key:"resolveDefaults",value:function(t){var e,n;return{src:null!==(e=t.src)&&void 0!==e?e:"",premultiplyAlpha:null===(n=t.premultiplyAlpha)||void 0===n||n}}}]),o}(S);x(Ee,"z$__type__Props",void 0);var Ie=function(t){a(o,t);var e,n=u(o);function o(t,e){var r;return v(this,o),x(c(r=n.call(this,t)),"props",void 0),r.props=o.resolveDefaults(e),r}return p(o,[{key:"getTextureData",value:(e=i(r().mark((function t(){var e,n,o,i,a,s,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=this.props,n=e.width,o=e.height,i=n*o*4,a=new Uint8ClampedArray(i),s=0;s<i;s+=4)u=Math.floor(256*Math.random()),a[s]=u,a[s+1]=u,a[s+2]=u,a[s+3]=255;return t.abrupt("return",{data:new ImageData(a,n,o)});case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(t){var e=o.resolveDefaults(t);return"NoiseTexture,".concat(e.width,",").concat(e.height,",").concat(e.cacheId)}},{key:"resolveDefaults",value:function(t){var e,n,r;return{width:null!==(e=t.width)&&void 0!==e?e:128,height:null!==(n=t.height)&&void 0!==n?n:128,cacheId:null!==(r=t.cacheId)&&void 0!==r?r:0}}}]),o}(S);x(Ie,"z$__type__Props",void 0);var Ne=function(){function t(){v(this,t),x(this,"usedMemory",0),x(this,"txConstructors",{}),x(this,"textureKeyCache",new Map),x(this,"textureIdCache",new Map),x(this,"ctxTextureCache",new WeakMap),x(this,"textureRefCountMap",new WeakMap),x(this,"renderer",void 0),this.registerTextureType("ImageTexture",Ee),this.registerTextureType("ColorTexture",T),this.registerTextureType("NoiseTexture",Ie),this.registerTextureType("SubTexture",C)}return p(t,[{key:"registerTextureType",value:function(t,e){this.txConstructors[t]=e}},{key:"loadTexture",value:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.txConstructors[t];if(!o)throw new Error('Texture type "'.concat(t,'" is not registered'));if(void 0!==(null==r?void 0:r.id)&&this.textureIdCache.has(r.id)&&(n=this.textureIdCache.get(r.id)),!n){var i,a=null==r?void 0:r.id,s=null!==(i=null==r?void 0:r.cacheKey)&&void 0!==i?i:o.makeCacheKey(e);n=s&&this.textureKeyCache.has(s)?this.textureKeyCache.get(s):new o(this,e),a&&this.addTextureIdToCache(a,s,n)}null!=r&&r.preload&&this.getCtxTexture(n).load();return n}},{key:"addTextureIdToCache",value:function(t,e,n){var r=this.textureIdCache,o=this.textureRefCountMap;r.set(t,n),o.has(n)?o.get(n).count++:(o.set(n,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,n))}},{key:"removeTextureIdFromCache",value:function(t){var e=this.textureIdCache,n=this.textureRefCountMap,r=e.get(t);if(r&&(e.delete(t),n.has(r))){var o=n.get(r);s(o),o.count--,0===o.count&&(n.delete(r),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}}},{key:"getDebugInfo",value:function(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}},{key:"getCtxTexture",value:function(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);var e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}]),t}(),ze=function(){function t(e){v(this,t),x(this,"textRenderers",void 0),this.textRenderers=e}return p(t,[{key:"addFontFace",value:function(t){for(var e in this.textRenderers){var n=this.textRenderers[e];n&&n.isFontFaceSupported(t)&&n.addFontFace(t)}}}],[{key:"resolveFontFace",value:function(t,e){return t.reduce((function(t,n){if(t)return t;var r=n[e.fontFamily];if(r){var o,i=new Set(r),a=_(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.descriptors.stretch===e.fontStretch&&s.descriptors.style===e.fontStyle&&s.descriptors.weight===e.fontWeight||i.delete(s)}}catch(u){a.e(u)}finally{a.f()}return i.values().next().value}}),void 0)||[][0]}}]),t}(),Ae={x:function(t,e){t.props.x=e},y:function(t,e){t.props.y=e},width:function(t,e){t.props.width=e},height:function(t,e){t.props.height=e},color:function(t,e){t.props.color=e},zIndex:function(t,e){t.props.zIndex=e},fontFamily:function(t,e){t.props.fontFamily=e},fontWeight:function(t,e){t.props.fontWeight=e},fontStyle:function(t,e){t.props.fontStyle=e},fontStretch:function(t,e){t.props.fontStretch=e},fontSize:function(t,e){t.props.fontSize=e},scaleX:function(t,e){t.props.scaleX=e},scaleY:function(t,e){t.props.scaleY=e},text:function(t,e){t.props.text=e},textAlign:function(t,e){t.props.textAlign=e},contain:function(t,e){t.props.contain=e},offsetY:function(t,e){t.props.offsetY=e},scrollable:function(t,e){t.props.scrollable=e},scrollY:function(t,e){t.props.scrollY=e},letterSpacing:function(t,e){t.props.letterSpacing=e},debug:function(t,e){t.props.debug=e}},Pe=function(){function t(e){v(this,t),x(this,"stage",void 0),x(this,"set",void 0),this.stage=e,this.set=Object.freeze(m(m({},Ae),this.getPropertySetters()))}return p(t,[{key:"setStatus",value:function(t,e,n){t.status!==e&&(t.status=e,t.emitter.emit(e,n))}}]),t}();var Me=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v(this,t),x(this,"iterator",void 0),x(this,"peekBuffer",[]),x(this,"_lastIndex",void 0),this.iterator=e,this.iterator=e,this._lastIndex=n-1,this.peekBuffer=[]}return p(t,[{key:"next",value:function(){var t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}},{key:"peek",value:function(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var t=this.iterator.next();return this.peekBuffer.push(t),t}},{key:"lastIndex",get:function(){return this._lastIndex}}]),t}();function Le(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r().mark((function n(){var o,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=e;case 1:if(!(o<t.length)){n.next=10;break}if(void 0!==(i=t.codePointAt(o))){n.next=5;break}throw new Error("Invalid Unicode code point");case 5:return n.next=7,i;case 7:o+=i<=65535?1:2,n.next=1;break;case 10:case"end":return n.stop()}}),n)}))()}function Oe(t,e,n,r,o,i,a,u,l,c,d,f,h,p,v,g){s(p,"Font face must be loaded"),s(p.loaded,"Font face must be loaded"),s(p.data,"Font face must be loaded"),s(p.shaper,"Font face must be loaded");for(var y,m=p.data.info.size,x=u/m,w=i/x,b=l/x,k=f[t],S=(null==k?void 0:k.codepointIndex)||0,T=(null==k?void 0:k.maxX)||0,C=(null==k?void 0:k.maxY)||0,R=e,F=n,E=0,I={codepointIndex:-1,bufferOffset:-1,xStart:-1},N=p.shaper,z={letterSpacing:b},A=N.shapeText(z,new Me(Le(r,S),S)),P=-1,M=[],L=a/x,O=function(t,e,n){var r,o=0,i=_(n.shapeText(e,new Me(Le(t,0),0)));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.mapped&&(o+=a.xAdvance)}}catch(s){i.e(s)}finally{i.f()}return o}("...",z,N),B=!0;B;){for(var D="both"!==d||g||F+m+m<=L,j=D?w:w-O,Y=0;(y=A.next())&&!y.done;){var X=y.value;if(t===f.length)f.push({codepointIndex:X.cluster,maxY:C,maxX:T});else if(t>f.length)throw new Error("Unexpected lineCache length");if(32===X.codepoint||10===X.codepoint?-1!==I.codepointIndex&&(I.codepointIndex=-1,Y=R):-1===I.codepointIndex&&(I.codepointIndex=X.cluster,I.bufferOffset=E,I.xStart=Y),X.mapped){var W=R+X.xOffset+X.width;if("none"!==d&&W>=j&&-1!==I.codepointIndex&&I.codepointIndex<X.cluster&&I.xStart>0){if(D){A=N.shapeText(z,new Me(Le(r,I.codepointIndex),I.codepointIndex)),E=I.bufferOffset;break}A=N.shapeText(z,new Me(Le("...",0),0)),R=I.xStart,E=I.bufferOffset}else{var U=R+X.xOffset,H=F+X.yOffset,G=!h||F+m>=h.y1/x,$=!h||F<=h.y2/x;if(G&&$){-1===P&&(P=E);var K=p.getAtlasEntry(X.glyphId),V=K.x/p.data.common.scaleW,q=K.y/p.data.common.scaleH,Q=K.width/p.data.common.scaleW,J=K.height/p.data.common.scaleH;c[E++]=U,c[E++]=H,c[E++]=V,c[E++]=q,c[E++]=U+X.width,c[E++]=H,c[E++]=V+Q,c[E++]=q,c[E++]=U,c[E++]=H+X.height,c[E++]=V,c[E++]=q+J,c[E++]=U+X.width,c[E++]=H+X.height,c[E++]=V+Q,c[E++]=q+J}C=Math.max(C,H+X.height),R+=X.xAdvance,T=Math.max(T,R)}}else if(10===X.codepoint)break}-1!==P&&(M.push({bufferStart:P,bufferEnd:E}),P=-1),R=0,F+=m,t++,I.codepointIndex=-1,Y=0,!v&&"both"===d&&h&&F>h.y2/x||y&&y.done?B=!1:"both"!==d||g||D||(B=!1)}if("center"===o)for(var Z="none"===d?T:w,tt=0;tt<M.length;tt++)for(var et=M[tt],nt=(Z-(c[et.bufferEnd-4]-c[et.bufferStart]))/2,rt=et.bufferStart;rt<et.bufferEnd;rt+=4)c[rt]+=nt;else if("right"===o)for(var ot="none"===d?T:w,it=0;it<M.length;it++)for(var at=M[it],st=ot-(at.bufferEnd===at.bufferStart?0:c[at.bufferEnd-4]-c[at.bufferStart]),ut=at.bufferStart;ut<at.bufferEnd;ut+=4)c[ut]+=st;return s(y),{bufferNumFloats:E,bufferNumQuads:E/16,layoutNumCharacters:y.done?r.length-S:y.value.cluster-S+1,fullyProcessed:!!y.done,maxX:T,maxY:C}}var Be=function(t){a(n,t);var e=u(n);function n(t){var r;return v(this,n),x(c(r=e.call(this,t)),"ssdfFontFamilies",{}),x(c(r),"msdfFontFamilies",{}),x(c(r),"sdfShader",void 0),r.sdfShader=r.stage.shManager.loadShader("SdfShader").shader,r}return p(n,[{key:"getPropertySetters",value:function(){var t=this;return{fontFamily:function(e,n){e.props.fontFamily=n,e.trFontFace=void 0,t.invalidateCache(e)},fontWeight:function(e,n){e.props.fontWeight=n,e.trFontFace=void 0,t.invalidateCache(e)},fontStyle:function(e,n){e.props.fontStyle=n,e.trFontFace=void 0,t.invalidateCache(e)},fontStretch:function(e,n){e.props.fontStretch=n,e.trFontFace=void 0,t.invalidateCache(e)},fontSize:function(e,n){e.props.fontSize=n,t.invalidateCache(e)},text:function(e,n){e.props.text=n,t.invalidateCache(e)},textAlign:function(e,n){e.props.textAlign=n,t.invalidateCache(e)},color:function(t,e){t.props.color=e},x:function(t,e){t.props.x=e},y:function(t,e){t.props.y=e},contain:function(e,n){e.props.contain=n,t.invalidateCache(e)},width:function(e,n){e.props.width=n,t.invalidateCache(e)},height:function(e,n){e.props.height=n,t.invalidateCache(e)},offsetY:function(e,n){e.props.offsetY=n,t.invalidateCache(e)},scrollable:function(e,n){e.props.scrollable=n,t.invalidateCache(e)},scrollY:function(t,e){t.props.scrollY=e},letterSpacing:function(e,n){e.props.letterSpacing=n,t.invalidateCache(e)},debug:function(t,e){t.props.debug=e}}}},{key:"canRenderFont",value:function(t){var e=t.fontFamily;return e in this.ssdfFontFamilies||e in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===e}},{key:"isFontFaceSupported",value:function(t){return t instanceof F}},{key:"addFontFace",value:function(t){s(t instanceof F);var e=t.fontFamily,n="ssdf"===t.type?this.ssdfFontFamilies:"msdf"===t.type?this.msdfFontFamilies:void 0;if(n){var r=n[e];r||(r=new Set,n[e]=r),r.add(t)}else console.warn("Invalid font face type: ".concat(t.type))}},{key:"createState",value:function(t){return{props:t,status:"initialState",emitter:new d,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}},{key:"updateState",value:function(t){performance.now();var e=t.trFontFace,n=t.textH,r=t.lineCache,o=t.debugData,i=t.forceFullLayoutCalc;if(o.updateCount++,"initialState"===t.status&&this.setStatus(t,"loading"),!e&&(e=this.resolveFontFace(t.props),t.trFontFace=e,!e)){var a="SdfTextRenderer: Could not resolve font face for family: '".concat(t.props.fontFamily,"'");return console.error(a),void this.setStatus(t,"failed",new Error(a))}if(e.loaded){s(e.data,"Font face data should be loaded");var u=t.props,l=u.text,c=u.fontSize,d=u.x,f=u.y,h=u.contain,p=u.width,v=u.height,g=u.scrollable,y="both"===h&&g?t.props.scrollY:0,m=t.renderWindow,x=e.data.info.size,w=c/x;t.distanceRange=w*e.data.distanceField.distanceRange;var b=24*l.length,_=t.vertexBuffer;(!_||_.length<b)&&(_=new Float32Array(2*b));var k={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},S=E(k,{x1:d,y1:f,x2:"none"!==h?d+p:1/0,y2:"both"===h?f+v:1/0});if(!i&&m){if(d+m.x1<=S.x1&&d+m.x2>=S.x2&&f-y+m.y1<=S.y1&&f-y+m.y2>=S.y2)return;t.renderWindow=m=void 0}var T=t.props,C=T.offsetY,F=T.textAlign;if(!m){var I=S.y2-S.y1;m=function(t,e,n,r,o,i){var a=r*o,s=i.x1-t,u=i.y1-e;return R(i)?{x1:s,y1:u+n-a,x2:s+(i.x2-i.x1),y2:u+n+(i.y2-i.y1)+a}:{x1:0,y1:0,x2:0,y2:0}}(d,f,y,x,Math.ceil(I/x),S)}var N=function(t,e,n,r,o,i,a){var s=0;o&&(s=Math.min(Math.max(Math.floor(o.y1/t),0),i.length));var u=e/n+s*r;if(!(a&&u>=a/n))return{x:0,y:u,lineIndex:s}}(c,C,w,x,m,r,n);if(N){var z=t.props.letterSpacing,A=Oe(N.lineIndex,N.x,N.y,l,F,p,v,c,z,_,h,r,m,e,i,g);t.bufferUploaded=!1,t.bufferNumFloats=A.bufferNumFloats,t.bufferNumQuads=A.bufferNumQuads,t.vertexBuffer=_,t.renderWindow=m,o.lastLayoutNumCharacters=A.layoutNumCharacters,o.bufferSize=_.byteLength,A.fullyProcessed&&(t.textW=A.maxX*w,t.textH=A.maxY*w),this.setStatus(t,"loaded")}else this.setStatus(t,"loaded")}else e.on("loaded",(function n(){var r;t.emitter.emit("fontLoaded",{}),null===(r=e)||void 0===r||r.off("fontLoaded",n)}))}},{key:"renderQuads",value:function(t,e,n,r){var o,i;if(t.vertexBuffer){performance.now();var a=this.stage.renderer;this.stage.options;var u=t.props,l=u.fontSize,c=u.color,d=u.contain,f=u.scrollable,h=u.zIndex,p=u.debug,v="both"===d&&f?t.props.scrollY:0,g=t.textW,y=void 0===g?0:g,m=t.textH,x=void 0===m?0:m,w=t.distanceRange,b=t.vertexBuffer,_=(t.bufferNumFloats,t.bufferUploaded),k=(t.renderWindow,t.debugData,t.trFontFace),S=t.webGlBuffers;if(!S){var T=a.gl,C=4*Float32Array.BYTES_PER_ELEMENT,R=T.createBuffer();s(R),t.webGlBuffers=new I([{buffer:R,attributes:{a_position:{name:"a_position",size:2,type:T.FLOAT,normalized:!1,stride:C,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:T.FLOAT,normalized:!1,stride:C,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),t.bufferUploaded=!1,s(t.webGlBuffers),S=t.webGlBuffers}if(!_){var F,E,A=a.gl,P=null!==(F=null===(E=S)||void 0===E?void 0:E.getBuffer("a_textureCoordinate"))&&void 0!==F?F:null;A.bindBuffer(A.ARRAY_BUFFER,P),A.bufferData(A.ARRAY_BUFFER,b,A.STATIC_DRAW),t.bufferUploaded=!0}s(k);var M=new N(a.gl,a.options,S,this.sdfShader,{transform:e.data,color:z(c,r),size:l/((null===(o=k.data)||void 0===o?void 0:o.info.size)||0),scrollY:v,distanceRange:w,debug:p.sdfShaderDebug},r,n,{height:x,width:y},0,h),L=null===(i=t.trFontFace)||void 0===i?void 0:i.texture;s(L);var O=this.stage.txManager.getCtxTexture(L);M.addTexture(O),M.length=t.bufferNumFloats,M.numQuads=t.bufferNumQuads,a.addRenderable(M)}}},{key:"resolveFontFace",value:function(t){return ze.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],t)}},{key:"invalidateCache",value:function(t){t.renderWindow=void 0,t.textH=void 0,t.textW=void 0,t.lineCache=[],this.setStatus(t,"loading")}}]),n}(Pe),De=function(){function t(e,n){v(this,t),x(this,"_canvas",void 0),x(this,"_context",void 0),x(this,"_settings",void 0),x(this,"renderInfo",void 0),this._canvas=e,this._context=n,this._settings=this.mergeDefaults({})}return p(t,[{key:"settings",get:function(){return this._settings},set:function(t){this._settings=this.mergeDefaults(t)}},{key:"getPrecision",value:function(){return this._settings.precision}},{key:"setFontProperties",value:function(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}},{key:"_getFontSetting",value:function(){for(var t=[this._settings.fontFace],e=[],n=0,r=t.length;n<r;n++)"serif"===t[n]||"sans-serif"===t[n]?e.push(t[n]):e.push('"'.concat(t[n],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}},{key:"_load",value:function(){var t=this;if(document.fonts){var e=this._getFontSetting();try{if(!document.fonts.check(e,this._settings.text))return document.fonts.load(e,this._settings.text).catch((function(t){console.warn("[Lightning] Font load error",t,e)})).then((function(){document.fonts.check(e,t._settings.text)||console.warn("[Lightning] Font not found",e)}))}catch(n){console.warn("[Lightning] Can't check font loading for "+e)}}}},{key:"calculateRenderInfo",value:function(){var t={},e=this.getPrecision(),n=this._settings.paddingLeft*e,r=this._settings.paddingRight*e,o=this._settings.fontSize*e,i=null===this._settings.offsetY?null:this._settings.offsetY*e,a=(this._settings.lineHeight||o)*e,s=this._settings.w*e,u=this._settings.h*e,l=this._settings.wordWrapWidth*e,c=this._settings.cutSx*e,d=this._settings.cutEx*e,f=this._settings.cutSy*e,h=this._settings.cutEy*e,p=(this._settings.letterSpacing||0)*e,v=this._settings.textIndent*e;this.setFontProperties();var g,y=s||2048/this.getPrecision(),m=y-n;if(m<10&&(y+=10-m,m=10),l||(l=m),this._settings.textOverflow&&!this._settings.wordWrap){var x;switch(this._settings.textOverflow){case"clip":x="";break;case"ellipsis":x=this._settings.maxLinesSuffix;break;default:x=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,l-v,x)}if(this._settings.wordWrap)g=this.wrapText(this._settings.text,l,p,v);else for(var w=(g={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,b=0;b<w-1;b++)g.n.push(b);var _=g.l;if(this._settings.maxLines&&_.length>this._settings.maxLines){var k,S=_.slice(0,this._settings.maxLines),T=null;if(this._settings.maxLinesSuffix){var C=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,R=this.wrapText(S[S.length-1],l-C,p,v);S[S.length-1]="".concat(R.l[0]).concat(this._settings.maxLinesSuffix),T=[R.l.length>1?R.l[1]:""]}else T=[""];var F=_.length,E=0,I=g.n.length;for(k=this._settings.maxLines;k<F;k++)T[E]+="".concat(T[E]?" ":"").concat(_[k]),k+1<I&&g.n[k+1]&&E++;t.remainingText=T.join("\n"),t.moreTextLines=!0,_=S}else t.moreTextLines=!1,t.remainingText="";for(var N,z=0,A=[],P=0;P<_.length;P++){var M=this.measureText(_[P],p)+(0===P?v:0);A.push(M),z=Math.max(z,M)}if(t.lineWidths=A,s||(y=z+n+r,m=z),a=a||o,u)N=u;else{var L="bottom"!=this._settings.textBaseline?.5*o:0;N=a*(_.length-1)+L+Math.max(a,o)+(i||0)}return null===i&&(i=o),t.w=y,t.h=N,t.lines=_,t.precision=e,y||(y=1),N||(N=1),(c||d)&&(y=Math.min(y,d-c)),(f||h)&&(N=Math.min(N,h-f)),t.width=y,t.innerWidth=m,t.height=N,t.fontSize=o,t.cutSx=c,t.cutSy=f,t.cutEx=d,t.cutEy=h,t.lineHeight=a,t.lineWidths=A,t.offsetY=i,t.paddingLeft=n,t.paddingRight=r,t.letterSpacing=p,t.textIndent=v,t}},{key:"draw",value:function(t,e){var n,r,o=this.getPrecision(),i=(null==e?void 0:e.lines)||t.lines,a=(null==e?void 0:e.lineWidths)||t.lineWidths,s=e?e.lines.length*t.lineHeight:t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);for(var u=[],l=0,c=i.length;l<c;l++)n=0===l?t.textIndent:0,r=l*t.lineHeight+t.offsetY,"middle"==this._settings.verticalAlign?r+=(t.lineHeight-t.fontSize)/2:"bottom"==this._settings.verticalAlign&&(r+=t.lineHeight-t.fontSize),"right"===this._settings.textAlign?n+=t.innerWidth-a[l]:"center"===this._settings.textAlign&&(n+=(t.innerWidth-a[l])/2),n+=t.paddingLeft,u.push({text:i[l],x:n,y:r,w:a[l]});if(this._settings.highlight){var d=this._settings.highlightColor,f=this._settings.highlightHeight*o||1.5*t.fontSize,h=this._settings.highlightOffset*o,p=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*o:t.paddingLeft,v=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*o:t.paddingRight;this._context.fillStyle=A(d);for(var g=0;g<u.length;g++){var y=u[g];this._context.fillRect(y.x-p,y.y-t.offsetY+h,y.w+v+p,f)}}var m=null;this._settings.shadow&&(m=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=A(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*o,this._context.shadowOffsetY=this._settings.shadowOffsetY*o,this._context.shadowBlur=this._settings.shadowBlur*o),this._context.fillStyle=A(this._settings.textColor);for(var x=0,w=u.length;x<w;x++){var b=u[x];if(0===t.letterSpacing)this._context.fillText(b.text,b.x,b.y);else for(var _=b.text.split(""),k=b.x,S=0,T=_.length;S<T;S++)this._context.fillText(_[S],k,b.y),k+=this.measureText(_[S],t.letterSpacing)}m&&(this._context.shadowColor=m[0],this._context.shadowOffsetX=m[1],this._context.shadowOffsetY=m[2],this._context.shadowBlur=m[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}},{key:"wrapWord",value:function(t,e,n){var r=this._context.measureText(n).width,o=t.length,i=this._context.measureText(t).width;if(i<=e)return t;var a=Math.floor(e*o/i),s=this._context.measureText(t.substring(0,a)).width+r;if(s>e)for(;a>0&&(s=this._context.measureText(t.substring(0,a)).width+r)>e;)a-=1;else for(;a<o;){if(!((s=this._context.measureText(t.substring(0,a)).width+r)<e)){a-=1;break}a+=1}return t.substring(0,a)+(e>=r?n:"")}},{key:"wrapText",value:function(t,e,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=t.split(/\r?\n/g),i=[],a=[],s=0;s<o.length;s++){for(var u=[],l="",c=e-r,d=o[s].split(" "),f=0;f<d.length;f++){var h=this.measureText(d[f],n),p=h+this.measureText(" ",n);0===f||p>c?(f>0&&(u.push(l),l=""),l+=d[f],c=e-h-(0===f?r:0)):(c-=p,l+=" ".concat(d[f]))}u.push(l),l="",i=i.concat(u),s<o.length-1&&a.push(i.length)}return{l:i,n:a}}},{key:"measureText",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n?t.split("").reduce((function(t,r){return t+e._context.measureText(r).width+n}),0):this._context.measureText(t).width}},{key:"mergeDefaults",value:function(t){return m({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},t)}}]),t}(),je="undefined"==typeof self?globalThis:self,Ye=(null===(e=je.document)||void 0===e?void 0:e.fonts)||je.fonts;var Xe=function(t){a(n,t);var e=u(n);function n(t){var r;v(this,n),x(c(r=e.call(this,t)),"canvas",void 0),x(c(r),"context",void 0),"undefined"!=typeof OffscreenCanvas?r.canvas=new OffscreenCanvas(0,0):r.canvas=document.createElement("canvas");var o=r.canvas.getContext("2d");return o||(r.canvas=document.createElement("canvas"),o=r.canvas.getContext("2d")),s(o),r.context=o,r}return p(n,[{key:"getPropertySetters",value:function(){var t=this;return{fontFamily:function(e,n){e.props.fontFamily=n,e.fontInfo=void 0,t.markForReload(e)},fontWeight:function(e,n){e.props.fontWeight=n,e.fontInfo=void 0,t.markForReload(e)},fontStyle:function(e,n){e.props.fontStyle=n,e.fontInfo=void 0,t.markForReload(e)},fontStretch:function(e,n){e.props.fontStretch=n,e.fontInfo=void 0,t.markForReload(e)},fontSize:function(e,n){e.props.fontSize=n,e.fontInfo=void 0,t.markForReload(e)},text:function(e,n){e.props.text=n,t.markForReload(e)},textAlign:function(e,n){e.props.textAlign=n,t.markForReload(e)},color:function(e,n){e.props.color=n,t.markForReload(e)},x:function(t,e){t.props.x=e},y:function(t,e){t.props.y=e},contain:function(e,n){e.props.contain=n,t.markForReload(e)},width:function(e,n){e.props.width=n,t.markForReload(e)},height:function(e,n){e.props.height=n,t.markForReload(e)},offsetY:function(e,n){e.props.offsetY=n,t.markForReload(e)},scrollY:function(t,e){t.props.scrollY=e},letterSpacing:function(e,n){e.props.letterSpacing=n,t.markForReload(e)}}}},{key:"canRenderFont",value:function(t){return!0}},{key:"isFontFaceSupported",value:function(t){return t instanceof P}},{key:"addFontFace",value:function(t){s(t instanceof P),Ye.add(t.fontFace)}},{key:"createState",value:function(t){return{props:t,status:"initialState",emitter:new d,canvasPages:void 0,lightning2TextRenderer:new De(this.canvas,this.context),renderWindow:void 0,renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}},{key:"updateState",value:function(t){if("initialState"===t.status&&this.setStatus(t,"loading"),!t.fontInfo){var e=(n=t.props,r=n.fontFamily,o=n.fontStyle,i=n.fontWeight,a=n.fontStretch,s=n.fontSize,[o,i,a,"".concat(s,"px"),r].join(" "));if(t.fontInfo={cssString:e,loaded:!1},!t.fontInfo.loaded)return void Ye.load(e).then(this.onFontLoaded.bind(this,t,e)).catch(this.onFontLoadError.bind(this,t,e))}var n,r,o,i,a,s;if(t.fontInfo.loaded){if(!t.renderInfo){t.lightning2TextRenderer.settings={text:t.props.text,textAlign:t.props.textAlign,fontFace:t.props.fontFamily,fontSize:t.props.fontSize,fontStyle:[t.props.fontStretch,t.props.fontStyle,t.props.fontWeight].join(" "),textColor:k(t.props.color),offsetY:t.props.fontSize+t.props.offsetY,wordWrap:"none"!==t.props.contain,wordWrapWidth:"none"===t.props.contain?void 0:t.props.width,letterSpacing:t.props.letterSpacing};var u=performance.now();t.renderInfo=t.lightning2TextRenderer.calculateRenderInfo(),console.log("Render info calculated in",performance.now()-u,"ms"),t.textH=t.renderInfo.lineHeight*t.renderInfo.lines.length,t.textW=t.renderInfo.width,t.renderWindow=void 0}var l=t.props,c=l.x,d=l.y,f=l.width,h=l.height,p=l.scrollY,v=l.contain,g=t.renderWindow,y=t.canvasPages,m={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight},x=E(m,{x1:c,y1:d,x2:"none"!==v?c+f:1/0,y2:"both"===v?d+h:1/0}),w=x.y2-x.y1,b=Math.ceil(w/t.renderInfo.lineHeight);if(g&&y){var S=c+g.x1,T=d-p+g.y1,C=c+g.x2,R=d-p+g.y2;if(S<=x.x1&&C>=x.x2&&T<=x.y1&&R>=x.y2)return;R<x.y2?(g.y1+=b*t.renderInfo.lineHeight,g.y2+=b*t.renderInfo.lineHeight,y.push(y.shift()),y[2].lineNumStart=y[1].lineNumStart+b,y[2].lineNumEnd=y[2].lineNumStart+b,y[2].valid=!1):T>x.y1&&(g.y1-=b*t.renderInfo.lineHeight,g.y2-=b*t.renderInfo.lineHeight,y.unshift(y.pop()),y[0].lineNumStart=y[1].lineNumStart-b,y[0].lineNumEnd=y[0].lineNumStart+b,y[0].valid=!1)}else{var F,I,N,z=t.renderInfo.lineHeight*b,A=Math.ceil(p/z)*b,P=A-b,M=A+b;y=[{texture:null===(F=y)||void 0===F?void 0:F[0].texture,lineNumStart:P,lineNumEnd:P+b,valid:!1},{texture:null===(I=y)||void 0===I?void 0:I[1].texture,lineNumStart:A,lineNumEnd:A+b,valid:!1},{texture:null===(N=y)||void 0===N?void 0:N[2].texture,lineNumStart:M,lineNumEnd:M+b,valid:!1}],t.canvasPages=y;var L=Math.ceil(p/z)*z;g={x1:0,y1:L-z,x2:f,y2:L+2*z}}t.renderWindow=g;var O,B=performance.now(),D=_(y);try{for(D.s();!(O=D.n()).done;){var j=O.value;j.valid||(j.lineNumStart<0?(j.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),j.valid=!0):(t.lightning2TextRenderer.draw(t.renderInfo,{lines:t.renderInfo.lines.slice(j.lineNumStart,j.lineNumEnd),lineWidths:t.renderInfo.lineWidths.slice(j.lineNumStart,j.lineNumEnd)}),0!==this.canvas.width&&0!==this.canvas.height&&(j.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),j.valid=!0))}}catch(Y){D.e(Y)}finally{D.f()}console.log("pageDrawTime",performance.now()-B,"ms"),this.setStatus(t,"loaded")}}},{key:"renderQuads",value:function(t,e,n,r){var o=this.stage,i=t.canvasPages,a=t.textW,u=void 0===a?0:a,l=t.textH,c=void 0===l?0:l,d=t.renderWindow;if(i&&d){var f=t.props,h=f.x,p=f.y,v=f.scrollY,g=f.contain,y=f.width,m=f.height,x={x:h,y:p,width:"none"!==g?y:u,height:"both"===g?m:c};M({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},x),s(i,"canvasPages is not defined"),s(d,"renderWindow is not defined");var w,b,_,k,S,T,C=(d.y2-d.y1)/3,R=t.props,F=R.zIndex,E=R.color,I=r*L(E);if(i[0].valid)this.stage.renderer.addRenderable({alpha:I,clippingRect:n,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:(null===(w=i[0].texture)||void 0===w||null===(w=w.dimensions)||void 0===w?void 0:w.width)||0,height:(null===(b=i[0].texture)||void 0===b||null===(b=b.dimensions)||void 0===b?void 0:b.height)||0,texture:i[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:F,tx:e.tx,ty:e.ty-v+d.y1,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td});if(i[1].valid)this.stage.renderer.addRenderable({alpha:I,clippingRect:n,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:(null===(_=i[1].texture)||void 0===_||null===(_=_.dimensions)||void 0===_?void 0:_.width)||0,height:(null===(k=i[1].texture)||void 0===k||null===(k=k.dimensions)||void 0===k?void 0:k.height)||0,texture:i[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:F,tx:e.tx,ty:e.ty-v+d.y1+C,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td});if(i[2].valid)this.stage.renderer.addRenderable({alpha:I,clippingRect:n,colorBl:4294967295,colorBr:4294967295,colorTl:4294967295,colorTr:4294967295,width:(null===(S=i[2].texture)||void 0===S||null===(S=S.dimensions)||void 0===S?void 0:S.width)||0,height:(null===(T=i[2].texture)||void 0===T||null===(T=T.dimensions)||void 0===T?void 0:T.height)||0,texture:i[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:F,tx:e.tx,ty:e.ty-v+d.y1+C+C,ta:e.ta,tb:e.tb,tc:e.tc,td:e.td})}}},{key:"markForReload",value:function(t){t.renderInfo=void 0,this.setStatus(t,"loading")}},{key:"onFontLoaded",value:function(t,e){var n;e===(null===(n=t.fontInfo)||void 0===n?void 0:n.cssString)&&t.fontInfo&&(t.fontInfo.loaded=!0,this.updateState(t))}},{key:"onFontLoadError",value:function(t,e,n){var r;e===(null===(r=t.fontInfo)||void 0===r?void 0:r.cssString)&&t.fontInfo&&(t.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(t.fontInfo.cssString,"'"),n),this.updateState(t))}}]),n}(Pe),We=function(){function t(e){var n=this;v(this,t),x(this,"options",void 0),x(this,"animationManager",void 0),x(this,"txManager",void 0),x(this,"fontManager",void 0),x(this,"textRenderers",void 0),x(this,"shManager",void 0),x(this,"renderer",void 0),x(this,"scene",void 0),x(this,"deltaTime",0),x(this,"lastFrameTime",0),x(this,"currentFrameTime",0),this.options=e;var r=e.canvas,o=e.clearColor,i=e.rootId,a=e.debug,u=e.appWidth,l=e.appHeight;this.txManager=new Ne,this.shManager=new Re,this.animationManager=new Fe,null!=a&&a.monitorTextureCache&&setInterval((function(){s(n.txManager);var t=n.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",t.idCacheSize),console.log("Texture Key Cache Size: ",t.keyCacheSize)}),1e3),this.renderer=new O({stage:this,canvas:r,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=o?o:4278190080,bufferMemory:2e6,txManager:this.txManager,shManager:this.shManager}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new Xe(this),sdf:new Be(this)},this.fontManager=new ze(this.textRenderers);var c,d=new re(this,{id:i,x:0,y:0,width:u,height:l,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.scene=new se(d),c=this,requestAnimationFrame((function t(){c.drawFrame(),requestAnimationFrame(t)}))}return p(t,[{key:"drawFrame",value:function(){var t,e=this.renderer,n=this.scene,r=this.animationManager;if(null!=n&&n.root){var o;if(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=performance?performance.now():Date.now(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,r.update(this.deltaTime),null==e||e.reset(),null!=n&&null!==(t=n.root)&&void 0!==t&&t.hasUpdates)null==n||null===(o=n.root)||void 0===o||o.update(this.deltaTime);this.addQuads(n.root),null==e||e.sortRenderables(),null==e||e.render()}}},{key:"addQuads",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s(this.renderer&&t.globalTransform);var r=t.globalTransform,o=0!==r.tb||0!==r.tc,i=t.clipping&&!o?{x:r.tx,y:r.ty,width:t.width*r.ta,height:t.height*r.td}:null;n&&i?i=M(n,i):n&&(i=n),t.renderQuads(this.renderer,i),t.children.forEach((function(t){0!==t.worldAlpha&&e.addQuads(t,i)}))}},{key:"resolveTextRenderer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!1;if(e){var r=this.textRenderers[e];r?r.canRenderFont(t)||(console.warn("Cannot use override text renderer '".concat(e,"' for font"),t),e=null,n=!0):(console.warn("Text renderer override '".concat(e,"' not found.")),e=null,n=!0)}if(!e){for(var o=0,i=Object.entries(this.textRenderers);o<i.length;o++){var a=b(i[o],2),u=a[0],l=a[1];if("canvas"!==u&&l.canRenderFont(t)){e=u;break}}e||(e="canvas")}n&&console.warn("Falling back to text renderer ".concat(String(e)));var c=this.textRenderers[e];return s(c,"resolvedTextRenderer undefined"),c}},{key:"root",get:function(){var t;return(null===(t=this.scene)||void 0===t?void 0:t.root)||null}}]),t}(),Ue=function(t){a(r,t);var e=u(r);function r(t,n){var o;v(this,r),x(c(o=e.call(this,t,n)),"textRenderer",void 0),x(c(o),"trState",void 0),x(c(o),"updateScheduled",void 0),x(c(o),"_textRendererOverride",null),x(c(o),"onTextLoaded",(function(){var t=c(o).contain,e=o.trState.props.width,n=o.trState.props.height,r=o.trState.textW||0,i=o.trState.textH||0;"both"===t?(o.props.width=e,o.props.height=n):"width"===t?(o.props.width=e,o.props.height=i):"none"===t&&(o.props.width=r,o.props.height=i),o.updateLocalTransform(),o.emit("loaded",{type:"text",dimensions:{width:o.trState.textW||0,height:o.trState.textH||0}})})),x(c(o),"onTextFailed",(function(t,e){o.emit("failed",{type:"text",error:e})})),o.updateScheduled=!1,o._textRendererOverride=n.textRendererOverride;var i=o.resolveTextRendererAndState({x:o.absX,y:o.absY,width:n.width,height:n.height,textAlign:n.textAlign,color:n.color,zIndex:n.zIndex,contain:n.contain,scaleX:n.scaleX,scaleY:n.scaleY,scrollable:n.scrollable,scrollY:n.scrollY,offsetY:n.offsetY,letterSpacing:n.letterSpacing,debug:n.debug,fontFamily:n.fontFamily,fontSize:n.fontSize,fontStretch:n.fontStretch,fontStyle:n.fontStyle,fontWeight:n.fontWeight,text:n.text},void 0),a=i.resolvedTextRenderer,s=i.textRendererState;return o.textRenderer=a,o.trState=s,o}return p(r,[{key:"width",get:function(){return this.trState.props.width},set:function(t){this.textRenderer.set.width(this.trState,t),this.updateText()}},{key:"height",get:function(){return this.trState.props.height},set:function(t){this.textRenderer.set.height(this.trState,t),this.updateText()}},{key:"color",get:function(){return this.trState.props.color},set:function(t){this.textRenderer.set.color(this.trState,t),this.updateText()}},{key:"text",get:function(){return this.trState.props.text},set:function(t){this.textRenderer.set.text(this.trState,t),this.updateText()}},{key:"textRendererOverride",get:function(){return this._textRendererOverride},set:function(t){this._textRendererOverride=t;var e=this.resolveTextRendererAndState(this.trState.props,this.trState),n=e.resolvedTextRenderer,r=e.textRendererState;this.textRenderer=n,this.trState=r}},{key:"fontSize",get:function(){return this.trState.props.fontSize},set:function(t){this.textRenderer.set.fontSize(this.trState,t),this.updateText()}},{key:"fontFamily",get:function(){return this.trState.props.fontFamily},set:function(t){this.textRenderer.set.fontFamily(this.trState,t),this.updateText()}},{key:"fontStretch",get:function(){return this.trState.props.fontStretch},set:function(t){this.textRenderer.set.fontStretch(this.trState,t),this.updateText()}},{key:"fontStyle",get:function(){return this.trState.props.fontStyle},set:function(t){this.textRenderer.set.fontStyle(this.trState,t),this.updateText()}},{key:"fontWeight",get:function(){return this.trState.props.fontWeight},set:function(t){this.textRenderer.set.fontWeight(this.trState,t),this.updateText()}},{key:"textAlign",get:function(){return this.trState.props.textAlign},set:function(t){this.textRenderer.set.textAlign(this.trState,t),this.updateText()}},{key:"contain",get:function(){return this.trState.props.contain},set:function(t){this.textRenderer.set.contain(this.trState,t),this.updateText()}},{key:"scrollable",get:function(){return this.trState.props.scrollable},set:function(t){this.textRenderer.set.scrollable(this.trState,t),this.updateText()}},{key:"scrollY",get:function(){return this.trState.props.scrollY},set:function(t){this.textRenderer.set.scrollY(this.trState,t),this.updateText()}},{key:"offsetY",get:function(){return this.trState.props.offsetY},set:function(t){this.textRenderer.set.offsetY(this.trState,t),this.updateText()}},{key:"letterSpacing",get:function(){return this.trState.props.letterSpacing},set:function(t){this.textRenderer.set.letterSpacing(this.trState,t),this.updateText()}},{key:"debug",get:function(){return this.trState.props.debug},set:function(t){this.textRenderer.set.debug(this.trState,t),this.updateText()}},{key:"update",value:function(t){n(f(r.prototype),"update",this).call(this,t),s(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty),"loading"===this.trState.status&&this.textRenderer.updateState(this.trState)}},{key:"updateText",value:function(){var t=this;this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((function(){t.updateScheduled=!1,t.textRenderer.updateState(t.trState)})))}},{key:"renderQuads",value:function(t,e){s(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,e,this.worldAlpha)}},{key:"resolveTextRendererAndState",value:function(t,e){var n=this,r=this.stage.resolveTextRenderer(t,this._textRendererOverride),o=r.createState(t);return e&&["loading","loaded","failed"].forEach((function(t){e.emitter.off(t)})),o.emitter.on("loading",(function(){o.emitter.once("fontLoaded",(function(){n.updateText()})),o.emitter.once("loaded",(function(){o.emitter.off("fontLoaded")}))})),o.emitter.on("loaded",this.onTextLoaded),o.emitter.on("failed",this.onTextFailed),this.updateText(),{resolvedTextRenderer:r,textRendererState:o}}}]),r}(re),He=function(t){a(n,t);var e=u(n);function n(t,r,o){return v(this,n),e.call(this,t,r,o,new Ue(o,{id:ie(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}return p(n,[{key:"text",get:function(){return this.coreNode.text},set:function(t){this.coreNode.text=t}},{key:"textRendererOverride",get:function(){return this.coreNode.textRendererOverride},set:function(t){this.coreNode.textRendererOverride=t}},{key:"fontSize",get:function(){return this.coreNode.fontSize},set:function(t){this.coreNode.fontSize=t}},{key:"fontFamily",get:function(){return this.coreNode.fontFamily},set:function(t){this.coreNode.fontFamily=t}},{key:"fontWeight",get:function(){return this.coreNode.fontWeight},set:function(t){this.coreNode.fontWeight=t}},{key:"fontStretch",get:function(){return this.coreNode.fontStretch},set:function(t){this.coreNode.fontStretch=t}},{key:"fontStyle",get:function(){return this.coreNode.fontStyle},set:function(t){this.coreNode.fontStyle=t}},{key:"textAlign",get:function(){return this.coreNode.textAlign},set:function(t){this.coreNode.textAlign=t}},{key:"contain",get:function(){return this.coreNode.contain},set:function(t){this.coreNode.contain=t}},{key:"scrollable",get:function(){return this.coreNode.scrollable},set:function(t){this.coreNode.scrollable=t}},{key:"scrollY",get:function(){return this.coreNode.scrollY},set:function(t){this.coreNode.scrollY=t}},{key:"offsetY",get:function(){return this.coreNode.offsetY},set:function(t){this.coreNode.offsetY=t}},{key:"letterSpacing",get:function(){return this.coreNode.letterSpacing},set:function(t){this.coreNode.letterSpacing=t}},{key:"debug",get:function(){return this.coreNode.debug},set:function(t){this.coreNode.debug=t}}]),n}(ae),Ge=function(t,e,n){return t()};function $e(t,e){return Ke.apply(this,arguments)}function Ke(){return(Ke=i(r().mark((function t(e,n){var i,a,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("Loading core extension",e),t.next=4,Ge((function(){return o.import(e)}),void 0);case 4:i=t.sent,t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(0),console.error("The core extension module at '".concat(e,"' could not be loaded.")),console.error(t.t0),t.abrupt("return");case 12:if(i.default){t.next=15;break}return console.error("The core extension module at '".concat(e,"' does not have a default export.")),t.abrupt("return");case 15:if(a=i.default,!(a.prototype instanceof B)){t.next=29;break}return s=new a,t.prev=18,t.next=21,s.run(n);case 21:t.next=27;break;case 23:t.prev=23,t.t1=t.catch(18),console.error("The core extension at '".concat(e,"' threw an error.")),console.error(t.t1);case 27:t.next=30;break;case 29:console.error("The core extension at '".concat(e,"' does not extend CoreExtension."));case 30:case"end":return t.stop()}}),t,null,[[0,7],[18,23]])})))).apply(this,arguments)}var Ve,qe,Qe=function(){function t(){v(this,t),x(this,"root",null),x(this,"stage",null),x(this,"rendererMain",null)}var e;return p(t,[{key:"init",value:(e=i(r().mark((function t(e,n,o){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.stage=new We({rootId:1,appWidth:n.appWidth,appHeight:n.appHeight,deviceLogicalPixelRatio:n.deviceLogicalPixelRatio,devicePhysicalPixelRatio:n.devicePhysicalPixelRatio,clearColor:n.clearColor,canvas:o,debug:{monitorTextureCache:!1}}),this.rendererMain=e,s(this.stage.root),i=new ae(e.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root),this.root=i,i.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,i)),this.onCreateNode(i),!n.coreExtensionModule){t.next=10;break}return t.next=10,$e(n.coreExtensionModule,this.stage);case 10:case"end":return t.stop()}}),t,this)}))),function(t,n,r){return e.apply(this,arguments)})},{key:"createNode",value:function(t){s(this.rendererMain),s(this.stage);var e=new ae(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}},{key:"createTextNode",value:function(t){s(this.rendererMain),s(this.stage);var e=new He(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}},{key:"destroyNode",value:function(t){t.destroy()}},{key:"releaseTexture",value:function(t){var e=this.stage;s(e),e.txManager.removeTextureIdFromCache(t)}},{key:"getRootNode",value:function(){return s(this.root),this.root}},{key:"onCreateNode",value:function(t){throw new Error("Method not implemented.")}},{key:"onBeforeDestroyNode",value:function(t){throw new Error("Method not implemented.")}}]),t}(),Je={appWidth:1920,appHeight:1080,deviceLogicalPixelRatio:.6666667,devicePhysicalPixelRatio:1,rootId:"app",threadXCoreWorkerUrl:void 0};function Ze(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Qe,n=m(m({},Je),t);return Ve=new Jt({appWidth:n.appWidth,appHeight:n.appHeight,deviceLogicalPixelRatio:n.deviceLogicalPixelRatio,devicePhysicalPixelRatio:n.devicePhysicalPixelRatio,clearColor:n.clearColor,coreExtensionModule:n.coreExtensionModule},n.rootId,e),qe=Ve.createShader.bind(Ve),Ve}var tn=function(t){a(n,t);var e=u(n);function n(t){var r;return v(this,n),x(c(r=e.call(this)),"_parent",void 0),r._parent=t,r}return p(n,[{key:"selected",get:function(){return this[this._parent.selected||0]}},{key:"firstChild",get:function(){return this[0]}},{key:"insert",value:function(t,e){if(e){var n=this.indexOf(e);this.splice(n,0,t)}else this.push(t);t.parent=this._parent,this._parent._isDirty=!0}},{key:"remove",value:function(t){var e=this.indexOf(t);e>=0&&this.splice(e,1)}}]),n}(t(Array)),en={debug:!1,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function nn(t){return"function"==typeof t}function rn(t){return Array.isArray(t)}var on=function(t){a(n,t);var e=u(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return v(this,n),rn(o)?x(c(r=e.call.apply(e,[this].concat(g(o)))),"onChange",void 0):x(c(r="string"==typeof o?e.call(this,o):e.call.apply(e,[this].concat(g(Object.entries(o).filter((function(t){var e=b(t,2);e[0];return e[1]})).map((function(t){return b(t,1)[0]})))))),"onChange",void 0),r.onChange=t,l(r,c(r))}return p(n,[{key:"has",value:function(t){return this.indexOf(t)>=0}},{key:"is",value:function(t){return this.indexOf(t)>=0}},{key:"add",value:function(t){this.push(t),this.onChange()}},{key:"toggle",value:function(t){this.has(t)?this.remove(t):this.add(t)}},{key:"remove",value:function(t){var e=this.indexOf(t);e>=0&&(this.splice(e,1),this.onChange())}}]),n}(t(Array));var an=en.animationSettings;function sn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{set:function(e){"number"==typeof e&&(e={width:e,color:255}),this.effects=m(m({},this.effects||{}),x({},"border".concat(t),e)),this["_border".concat(t)]=e},get:function(){return this["_border".concat(t)]}}}var un=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],ln=["clipping","contain","fontFamily","src","text","textAlign","texture"],cn=function(t){a(n,t);var e=u(n);function n(t){var r;v(this,n),x(c(r=e.call(this)),"name",void 0),x(c(r),"lng",null),x(c(r),"selected",void 0),x(c(r),"rendered",void 0),x(c(r),"_undoStates",void 0),x(c(r),"_renderProps",void 0),x(c(r),"_effects",void 0),x(c(r),"_parent",null),x(c(r),"_shader",void 0),x(c(r),"_style",void 0),x(c(r),"_states",void 0),x(c(r),"_animationSettings",void 0),x(c(r),"_updateLayoutOn",void 0),x(c(r),"_width",void 0),x(c(r),"_height",void 0),x(c(r),"_color",void 0),x(c(r),"_borderRadius",void 0),x(c(r),"_border",void 0),x(c(r),"_borderLeft",void 0),x(c(r),"_borderRight",void 0),x(c(r),"_borderTop",void 0),x(c(r),"_borderBottom",void 0),x(c(r),"_animate",void 0),x(c(r),"_autosized",void 0),x(c(r),"_isDirty",void 0),x(c(r),"_dom",void 0),x(c(r),"children",void 0),r.name=t,r.rendered=!1,r.autofocus=!1,r._renderProps={x:0,y:0},r.children=new tn(c(r));var o,i=_(un);try{var a=function(){var t=o.value;Object.defineProperty(c(r),t,{get:function(){return this["_".concat(t)]||this.lng&&this.lng[t]},set:function(e){this["_".concat(t)]=e,this._sendToLightningAnimatable(t,e)}})};for(i.s();!(o=i.n()).done;)a()}catch(d){i.e(d)}finally{i.f()}var s,u=_(ln);try{var l=function(){var t=s.value;Object.defineProperty(c(r),t,{get:function(){return this["_".concat(t)]||this.lng&&this.lng[t]},set:function(e){this["_".concat(t)]=e,this._sendToLightning(t,e)}})};for(u.s();!(s=u.n()).done;)l()}catch(d){u.e(d)}finally{u.f()}return Object.defineProperties(c(r),{borderRadius:{set:function(t){this._borderRadius=t,this.effects=m(m({},this.effects||{}),{radius:{radius:t}})},get:function(){return this._borderRadius}},border:sn(),borderLeft:sn("Left"),borderRight:sn("Right"),borderTop:sn("Top"),borderBottom:sn("Bottom")}),Object.defineProperties(c(r),{linearGradient:{set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._linearGradient=t,this.effects=m(m({},this.effects||{}),{linearGradient:t})},get:function(){return this._linearGradient}}}),r}return p(n,[{key:"effects",get:function(){return this._effects},set:function(t){this._effects=t,this.shader=function(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var o=b(r[n],2),i=o[0],a=o[1];e.push({type:i,props:a})}return qe("DynamicShader",{effects:e})}(t)}},{key:"parent",get:function(){return this._parent},set:function(t){var e;(this._parent=t,this.rendered&&this.lng)&&(this.lng.parent=null!==(e=null==t?void 0:t.lng)&&void 0!==e?e:null)}},{key:"shader",get:function(){return this._shader},set:function(t){rn(t)?this._shader=qe.apply(void 0,g(t)):this._shader=t,this._sendToLightning("shader",this._shader)}},{key:"_sendToLightningAnimatable",value:function(t,e){if(this.rendered&&this.lng){if(rn(e))return this.createAnimation(x({},t,e[0]),e[1]).start();if(this._animate)return this.createAnimation(x({},t,e)).start();this.lng[t]=e}else rn(e)&&(e=e[0]),this._renderProps[t]=e}},{key:"_sendToLightning",value:function(t,e){this.rendered&&this.lng?this.lng[t]=e:this._renderProps[t]=e}},{key:"createAnimation",value:function(t,e){return s(this.lng,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}},{key:"setFocus",value:function(){this.rendered?Gt(this):this.autofocus=!0}},{key:"isTextNode",value:function(){return"text"===this.name}},{key:"_resizeOnTextLoad",value:function(){var t=this;s(this.lng),this.lng.once("loaded",(function(e,n){if("text"===n.type){var r=n.dimensions;t.width=r.width,t.height=r.height,s(t.parent),t.parent.updateLayout(t,r)}}))}},{key:"getText",value:function(){return this.children.map((function(t){return t.text})).join("")}},{key:"destroy",value:function(){this.lng&&Ve.destroyNode(this.lng)}},{key:"style",get:function(){return this._style},set:function(t){for(var e in t)"animate"===e&&(e="_animate"),this[e]||(this[e]=t[e]);this._style=t}},{key:"hasChildren",get:function(){return this.children.length>0}},{key:"states",get:function(){return this._states=this._states||new on(this._stateChanged.bind(this)),this._states},set:function(t){this._states=new on(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}},{key:"animationSettings",get:function(){return this._animationSettings||an},set:function(t){this._animationSettings=t}},{key:"updateLayoutOn",get:function(){return this._updateLayoutOn},set:function(t){var e=this;this._updateLayoutOn=t,queueMicrotask((function(){return e.updateLayout()}))}},{key:"_applyZIndexToChildren",value:function(){var t=this.zIndex;s(t);var e=t>=1&&parseInt(""+t)===t?".":"";this.children.forEach((function(n,r){(!n.zIndex||n.zIndex<1)&&(n.zIndex=parseFloat("".concat(t).concat(e).concat(r+1)))}))}},{key:"updateLayout",value:function(t,e){this.hasChildren&&(nn(this.onBeforeLayout)&&this.onBeforeLayout.call(this,t,e),"flex"===this.display&&function(t){var e=t.children.filter((function(t){return"TextNode"!==t.name})),n=t.flexDirection||"row",r="row"===n?"width":"height",o="row"===n?"height":"width",i="row"===n?"marginLeft":"marginTop",a="row"===n?"marginRight":"marginBottom",u="row"===n?"x":"y",l="row"===n?"y":"x",c=t[r]||0,d=t[o]||0,f=e.reduce((function(t,e){return t+(e[r]||0)}),0),h=t.gap||0,p=e.length,v=t.justifyContent||"flexStart",g=t.alignItems,y=d&&g?function(t){"flexStart"===g?t[l]=0:"center"===g?t[l]=(d-(t[o]||0))/2:"flexEnd"===g&&(t[l]=d-(t[o]||0))}:function(t){return t};if("flexStart"===v){var m=0;e.forEach((function(t){t[u]=m+(t[i]||0),m+=(t[r]||0)+h+(t[i]||0)+(t[a]||0),y(t)}))}if("flexEnd"===v)for(var x=c,w=p-1;w>=0;w--){var b=e[w];s(b),b[u]=x-(b[r]||0)-(b[a]||0),x-=(b[r]||0)+h+(b[i]||0)+(b[a]||0),y(b)}if("center"===v){var _=(c-(f+h*(p-1)))/2;e.forEach((function(t){t[u]=_,_+=(t[r]||0)+h,y(t)}))}if("spaceBetween"===v){var k=(c-f)/(p-1),S=0;e.forEach((function(t){t[u]=S,S+=(t[r]||0)+k,y(t)}))}if("spaceEvenly"===v){var T=(c-f)/(p+1),C=T;e.forEach((function(t){t[u]=C,C+=(t[r]||0)+T,y(t)}))}}(this),nn(this.onLayout)&&this.onLayout.call(this,t,e))}},{key:"_stateChanged",value:function(){var t,e=this;if(this.states,this.forwardStates){var n=this.states.slice();this.children.forEach((function(t){return t.states=n}))}var r=(null===(t=en.stateMapperHook)||void 0===t?void 0:t.call(en,this,this.states))||this.states;if(this._undoStates||this.style&&function(t,e){var n,r=_(e);try{for(r.s();!(n=r.n()).done;)if(n.value in t)return!0}catch(o){r.e(o)}finally{r.f()}return!1}(this.style,r)){this._undoStates=this._undoStates||{};for(var o={},i=0,a=Object.entries(this._undoStates);i<a.length;i++){var u=b(a[i],2),l=u[0],c=u[1];r.includes(l)||(o=m(m({},o),c))}var d=r.reduce((function(t,n){var r=e.style[n];return r&&(t=m(m({},t),r),e._undoStates&&!e._undoStates[n]&&(e._undoStates[n]={},Object.keys(r).forEach((function(t){s(e._undoStates),e._undoStates[n][t]=e[t]})))),t}),{});Object.assign(this,m(m({},o),d))}}},{key:"render",value:function(){var t=this,e=this.parent;null!=e&&e._isDirty&&(e.updateLayout(),e._applyZIndexToChildren(),e._isDirty=!1),t.updateLayout(),this.states.length&&this._stateChanged();var n=t._renderProps;null!=e&&e.lng&&(n.parent=e.lng),t.isTextNode()?(n=m(m(m({},en.fontSettings),n),{},{text:t.getText()}),t.lng=Ve.createTextNode(n),nn(t.onLoad)&&t.lng.once("loaded",t.onLoad),t.width&&t.height||(t._autosized=!0,t._resizeOnTextLoad())):(n.src||n.texture||(s(e),isNaN(n.width)&&(n.width=(e.width||0)-n.x,t._width=n.width),isNaN(n.height)&&(n.height=(e.height||0)-n.y,t._height=n.height),n.color||(t._color=n.color=0)),t.hasChildren&&t._applyZIndexToChildren(),t.lng=Ve.createNode(n),t.onFail&&t.lng.once("failed",t.onFail),t.onLoad&&t.lng.once("loaded",t.onLoad)),t.rendered=!0,t.autofocus&&t.setFocus(),delete this._renderProps}}]),n}(t(Object));function dn(t){"TextNode"!==t.name&&(s(t instanceof cn),t.render(),t.children.forEach((function(t){return dn(t)})))}var fn=function(t){var e,n,r=Ze(t.options),o=r.init();return it((function(){o.then((function(){s(e),e.lng=r.root,e.children.forEach(dn),nn(t.onFirstRender)&&t.onFirstRender(e)})).catch(console.error)})),n=xn("canvas"),"function"==typeof e?Sn(e,n):e=n,_n(n,"zIndex",.1),wn(n,(function(){return t.children})),n};function hn(t){var e=t.createElement,n=t.createTextNode,r=t.isTextNode,o=t.replaceText,i=t.insertNode,a=t.removeNode,s=t.setProperty,u=t.getParentNode,l=t.getFirstChild,c=t.getNextSibling;function d(t,e,n,r){if(void 0===n||r||(r=[]),"function"!=typeof e)return f(t,e,r,n);ot((function(r){return f(t,e(),r,n)}),r)}function f(t,e,a,s,u){for(;"function"==typeof a;)a=a();if(e===a)return a;var c=typeof e,d=void 0!==s;if("string"===c||"number"===c)if("number"===c&&(e=e.toString()),d){var m=a[0];m&&r(m)?o(m,e):m=n(e),a=v(t,a,s,m)}else""!==a&&"string"==typeof a?o(l(t),a=e):(v(t,a,s,n(e)),a=e);else if(null==e||"boolean"===c)a=v(t,a,s);else{if("function"===c)return ot((function(){for(var n=e();"function"==typeof n;)n=n();a=f(t,n,a,s)})),function(){return a};if(Array.isArray(e)){var x=[];if(h(x,e,u))return ot((function(){return a=f(t,x,a,s,!0)})),function(){return a};if(0===x.length){var w=v(t,a,s);if(d)return a=w}else Array.isArray(a)?0===a.length?g(t,x,s):p(t,a,x):null==a||""===a?g(t,x):p(t,d&&a||[l(t)],x);a=x}else{if(Array.isArray(a)){if(d)return a=v(t,a,s,e);v(t,a,null,e)}else null!=a&&""!==a&&l(t)?y(t,e,l(t)):i(t,e);a=e}}return a}function h(t,e,r){for(var o=!1,i=0,a=e.length;i<a;i++){var s=e[i],u=void 0;if(null==s||!0===s||!1===s);else if(Array.isArray(s))o=h(t,s)||o;else if("string"==(u=typeof s)||"number"===u)t.push(n(s));else if("function"===u)if(r){for(;"function"==typeof s;)s=s();o=h(t,Array.isArray(s)?s:[s])||o}else t.push(s),o=!0;else t.push(s)}return o}function p(t,e,n){for(var r=n.length,o=e.length,s=r,u=0,l=0,d=c(e[o-1]),f=null;u<o||l<s;)if(e[u]!==n[l]){for(;e[o-1]===n[s-1];)o--,s--;if(o===u)for(var h=s<r?l?c(n[l-1]):n[s-l]:d;l<s;)i(t,n[l++],h);else if(s===l)for(;u<o;)f&&f.has(e[u])||a(t,e[u]),u++;else if(e[u]===n[s-1]&&n[l]===e[o-1]){var p=c(e[--o]);i(t,n[l++],c(e[u++])),i(t,n[--s],p),e[o]=n[s]}else{if(!f){f=new Map;for(var v=l;v<s;)f.set(n[v],v++)}var g=f.get(e[u]);if(null!=g)if(l<g&&g<s){for(var m=u,x=1,w=void 0;++m<o&&m<s&&null!=(w=f.get(e[m]))&&w===g+x;)x++;if(x>g-l)for(var b=e[u];l<g;)i(t,n[l++],b);else y(t,n[l++],e[u++])}else u++;else a(t,e[u++])}}else u++,l++}function v(t,e,r,o){if(void 0===r){for(var s;s=l(t);)a(t,s);return o&&i(t,o),""}var c=o||n("");if(e.length)for(var d=!1,f=e.length-1;f>=0;f--){var h=e[f];if(c!==h){var p=u(h)===t;d||f?p&&a(t,h):p?y(t,c,h):i(t,c,r)}else d=!0}else i(t,c,r);return[c]}function g(t,e,n){for(var r=0,o=e.length;r<o;r++)i(t,e[r],n)}function y(t,e,n){i(t,e,n),a(t,n)}function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e||(e={}),(arguments.length>3?arguments[3]:void 0)||ot((function(){return n.children=f(t,e.children,n.children)})),ot((function(){return e.ref&&e.ref(t)})),ot((function(){for(var r in e)if("children"!==r&&"ref"!==r){var o=e[r];o!==n[r]&&(s(t,r,o,n[r]),n[r]=o)}})),n}return{render:function(t,e){var n;return et((function(r){n=r,d(e,t())})),n},insert:d,spread:function(t,e,n){"function"==typeof e?ot((function(r){return m(t,e(),r,n)})):m(t,e,void 0,n)},createElement:e,createTextNode:n,insertNode:i,setProp:function(t,e,n,r){return s(t,e,n,r),n},mergeProps:jt,effect:ot,memo:at,createComponent:Mt,use:function(t,e,n){return lt((function(){return t(e,n)}))}}}var pn={createElement:function(t){var e=new cn(t);return Ve.root&&it((function(){return e.render()})),e},createTextNode:function(t){return{name:"TextNode",text:t,parent:null}},replaceText:function(t,e){t.text=e;var n=t.parent;s(n),n._autosized&&n._resizeOnTextLoad(),n.text=n.getText()},setProperty:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"animate"!==e?t[e]=n:t._animate=n},insertNode:function(t,e,n){t&&(t.children.insert(e,n),"TextNode"===e.name&&t.isTextNode()&&(t._autosized&&t._resizeOnTextLoad(),t.text=t.getText()))},isTextNode:function(t){return t.isTextNode()},removeNode:function(t,e){t.children.remove(e),e instanceof cn&&e.destroy()},getParentNode:function(t){var e;return null!==(e=t.parent)&&void 0!==e?e:void 0},getFirstChild:function(t){return t.children[0]},getNextSibling:function(t){if(t.parent){var e=t.parent.children||[],n=e.indexOf(t)+1;if(n<e.length)return e[n]}}},vn=function(t){var e=hn(t);return e.mergeProps=jt,e}(pn),gn=vn.render,yn=(vn.effect,vn.memo),mn=vn.createComponent,xn=vn.createElement,wn=(vn.createTextNode,vn.insertNode,vn.insert),bn=vn.spread,_n=vn.setProp,kn=vn.mergeProps,Sn=vn.use;function Tn(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=e,Number.isInteger(t)?e:"string"==typeof e?e.startsWith("#")?Number(e.replace("#","0x")+(7===e.length?"ff":"")):e.startsWith("0x")?Number(e):Number("0x"+(6===e.length?e+"ff":e)):0}var Cn="_$DX_DELEGATE";function Rn(t){var e="$$".concat(t.type),n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get:function(){return n||document}});n;){var r=n[e];if(r&&!n.disabled){var o=n["".concat(e,"Data")];if(void 0!==o?r.call(n,o,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Fn(t,e,n){return t.addEventListener(e,n),function(){return t.removeEventListener(e,n)}}function En(t,e){var n=function(t){try{return document.querySelector(t)}catch(e){return null}}("#".concat(t));n?n.scrollIntoView():e&&window.scrollTo(0,0)}function In(t,e,n,r){var o=!1,i=function(t){return"string"==typeof t?{value:t}:t},a=function(t,e,n){var r=b(t,2),o=r[0],i=r[1];return[e?function(){return e(o())}:o,n?function(t){return i(n(t))}:i]}(nt(i(t()),{equals:function(t,e){return t.value===e.value}}),void 0,(function(t){return!o&&e(t),t}));return n&&ft(n((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t();o=!0,a[1](i(e)),o=!1}))),{signal:a,utils:r}}var Nn=/^(?:[a-z0-9]+:)?\/\//i,zn=/^\/+|(\/)\/+$/g;function An(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.replace(zn,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function Pn(t,e,n){if(!Nn.test(e)){var r=An(t),o=n&&An(n),i="";return((i=!o||e.startsWith("/")?r:0!==o.toLowerCase().indexOf(r.toLowerCase())?r+o:o)||"/")+An(e,!i)}}function Mn(t,e){return An(t).replace(/\/*(\*.*)?$/g,"")+An(e)}function Ln(t,e,n){var r=b(t.split("/*",2),2),o=r[0],i=r[1],a=o.split("/").filter(Boolean),s=a.length;return function(t){var r=t.split("/").filter(Boolean),o=r.length-s;if(o<0||o>0&&void 0===i&&!e)return null;for(var u={path:s?"":"/",params:{}},l=function(t){return void 0===n?void 0:n[t]},c=0;c<s;c++){var d=a[c],f=r[c],h=":"===d[0],p=h?d.slice(1):d;if(h&&On(f,l(p)))u.params[p]=f;else if(h||!On(f,d))return null;u.path+="/".concat(f)}if(i){var v=o?r.slice(-o).join("/"):"";if(!On(v,l(i)))return null;u.params[i]=v}return u}}function On(t,e){var n=function(e){return 0===e.localeCompare(t,void 0,{sensitivity:"base"})};return void 0===e||("string"==typeof e?n(e):"function"==typeof e?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp&&e.test(t))}function Bn(t){var e=new Map,n=ht();return new Proxy({},{get:function(r,o){return e.has(o)||function(t,e){var n=V,r=Q;V=t,Q=null;try{return kt(e,!0)}catch(o){It(o)}finally{V=n,Q=r}}(n,(function(){return e.set(o,at((function(){return t()[o]})))})),e.get(o)()},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0}},ownKeys:function(){return Reflect.ownKeys(t())}})}function Dn(t){var e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];for(var n=t.slice(0,e.index),r=t.slice(e.index+e[0].length),o=[n,n+=e[1]];e=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=e[1]),r=r.slice(e[0].length);return Dn(r).reduce((function(t,e){return[].concat(g(t),g(o.map((function(t){return t+e}))))}),[])}var jn,Yn=vt(),Xn=vt(),Wn=function(){return function(t,e){if(null==t)throw new Error(e);return t}(gt(Yn),"Make sure your app is wrapped in a <Router />")},Un=function(){return jn||gt(Xn)||Wn().base},Hn=function(){return Wn().navigatorFactory()},Gn=function(){return Un().params};function $n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=t.component,o=t.data,i=t.children,a=!i||Array.isArray(i)&&!i.length,s={key:t,element:r?function(){return Mt(r,{})}:function(){var e=t.element;return void 0===e&&n?Mt(n,{}):e},preload:t.component?r.preload:t.preload,data:o};return Vn(t.path).reduce((function(n,r){var o,i=_(Dn(r));try{for(i.s();!(o=i.n()).done;){var u=o.value,l=Mn(e,u),c=a?l:l.split("/*",1)[0];n.push(m(m({},s),{},{originalPath:u,pattern:c,matcher:Ln(c,!a,t.matchFilters)}))}}catch(d){i.e(d)}finally{i.f()}return n}),[])}function Kn(t){var e,n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{routes:t,score:1e4*(e=t[t.length-1],n=b(e.pattern.split("/*",2),2),r=n[0],o=n[1],i=r.split("/").filter(Boolean),i.reduce((function(t,e){return t+(e.startsWith(":")?2:3)}),i.length-(void 0===o?0:1)))-a,matcher:function(e){for(var n=[],r=t.length-1;r>=0;r--){var o=t[r],i=o.matcher(e);if(!i)return null;n.unshift(m(m({},i),{},{route:o}))}return n}}}function Vn(t){return Array.isArray(t)?t:[t]}function qn(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=Vn(t),a=0,s=i.length;a<s;a++){var u=i[a];if(u&&"object"==typeof u&&u.hasOwnProperty("path")){var l,c=_($n(u,e,n));try{for(c.s();!(l=c.n()).done;){var d=l.value;r.push(d);var f=Array.isArray(u.children)&&0===u.children.length;if(u.children&&!f)qn(u.children,d.pattern,n,r,o);else{var h=Kn(g(r),o.length);o.push(h)}r.pop()}}catch(p){c.e(p)}finally{c.f()}}}return r.length?o:o.sort((function(t,e){return e.score-t.score}))}function Qn(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,s=function(t){return t?Array.isArray(t)?{signal:t}:t:{signal:nt({value:""})}}(t),u=b(s.signal,2),l=u[0],c=u[1],d=s.utils,f=void 0===d?{}:d,h=f.parsePath||function(t){return t},p=f.renderPath||function(t){return t},v=f.beforeLeave||(e=new Set,n=!1,{subscribe:function(t){return e.add(t),function(){return e.delete(t)}},confirm:function(t,r){if(n)return!(n=!1);var o,i={to:t,options:r,defaultPrevented:!1,preventDefault:function(){return i.defaultPrevented=!0}},a=_(e);try{var s=function(){var e=o.value;e.listener(m(m({},i),{},{from:e.location,retry:function(o){o&&(n=!0),e.navigate(t,r)}}))};for(a.s();!(o=a.n()).done;)s()}catch(u){a.e(u)}finally{a.f()}return!i.defaultPrevented}}),g=Pn("",o);if(void 0===g)throw new Error("".concat(g," is not a valid base path"));g&&!l().value&&c({value:g,replace:!0,scroll:!1});var y=b(nt(!1),2),x=y[0],w=y[1],k=function(){var t=i(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(!0),t.prev=1,t.next=4,pt(e);case 4:return t.prev=4,w(!1),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})));return function(e){return t.apply(this,arguments)}}(),S=b(nt(l().value),2),T=S[0],C=S[1],R=b(nt(l().state),2),F=R[0],E=R[1],I=function(t,e){var n=new URL("http://sar"),r=at((function(e){var r=t();try{return new URL(r,n)}catch(o){return console.error("Invalid path ".concat(r)),e}}),n,{equals:function(t,e){return t.href===e.href}}),o=at((function(){return r().pathname})),i=at((function(){return r().search}),!0),a=at((function(){return r().hash})),s=at((function(){return""}));return{get pathname(){return o()},get search(){return i()},get hash(){return a()},get state(){return e()},get key(){return s()},query:Bn(ct(i,(function(){return function(t){var e={};return t.searchParams.forEach((function(t,n){e[n]=t})),e}(r())})))}}(T,F),N=[],z={pattern:g,params:{},path:function(){return g},outlet:function(){return null},resolvePath:function(t){return Pn(g,t)}};if(a)try{jn=z,z.data=a({data:void 0,params:{},location:I,navigate:P(z)})}finally{jn=void 0}function A(t,e,n){lt((function(){if("number"!=typeof e){var r=m({replace:!1,resolve:!0,scroll:!0},n),o=r.replace,i=r.resolve,a=r.scroll,s=r.state,u=i?t.resolvePath(e):Pn("",e);if(void 0===u)throw new Error("Path '".concat(e,"' is not a routable path"));if(N.length>=100)throw new Error("Too many redirects");var l=T();if((u!==l||s!==F())&&v.confirm(u,n)){var d=N.push({value:l,replace:o,scroll:a,state:F()});k((function(){C(u),E(s)})).then((function(){var t,e;N.length===d&&(t={value:u,state:s},(e=N[0])&&(t.value===e.value&&t.state===e.state||c(m(m({},t),{},{replace:e.replace,scroll:e.scroll})),N.length=0))}))}}else e&&(f.go?v.confirm(e,n)&&f.go(e):console.warn("Router integration does not support relative routing"))}))}function P(t){return t=t||gt(Xn)||z,function(e,n){return A(t,e,n)}}ot((function(){var t=l(),e=t.value,n=t.state;lt((function(){e!==T()&&k((function(){C(e),E(n)}))}))}));var M=function(t){if(!(t.defaultPrevented||0!==t.button||t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)){var e=t.composedPath().find((function(t){return t instanceof Node&&"A"===t.nodeName.toUpperCase()}));if(e&&e.hasAttribute("link")){var n=e.href;if(!e.target&&(n||e.hasAttribute("state"))){var r=(e.getAttribute("rel")||"").split(/\s+/);if(!(e.hasAttribute("download")||r&&r.includes("external"))){var o=new URL(n);if(!(o.origin!==window.location.origin||g&&o.pathname&&!o.pathname.toLowerCase().startsWith(g.toLowerCase()))){var i=h(o.pathname+o.search+o.hash),a=e.getAttribute("state");t.preventDefault(),A(z,i,{resolve:!1,replace:e.hasAttribute("replace"),scroll:!e.hasAttribute("noscroll"),state:a&&JSON.parse(a)})}}}}}};return function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,n=e[Cn]||(e[Cn]=new Set),r=0,o=t.length;r<o;r++){var i=t[r];n.has(i)||(n.add(i),e.addEventListener(i,Rn))}}(["click"]),document.addEventListener("click",M),ft((function(){return document.removeEventListener("click",M)})),{base:z,out:undefined,location:I,isRouting:x,renderPath:p,parsePath:h,navigatorFactory:P,beforeLeave:v}}var Jn=function(t){var e=t.source,n=(t.url,t.base),r=t.data,o=(t.out,Qn(e||In((function(){return{value:window.location.pathname+window.location.search+window.location.hash,state:history.state}}),(function(t){var e=t.value,n=t.replace,r=t.scroll,o=t.state;n?window.history.replaceState(o,"",e):window.history.pushState(o,"",e),En(window.location.hash.slice(1),r)}),(function(t){return Fn(window,"popstate",(function(){return t()}))}),{go:function(t){return window.history.go(t)}}),n,r));return mn(Yn.Provider,{value:o,get children(){return t.children}})},Zn=function(t){var e=Wn(),n=Un(),r=yt((function(){return t.children})),o=at((function(){return qn(r(),Mn(n.pattern,t.base||""),er)})),i=at((function(){return function(t,e){for(var n=0,r=t.length;n<r;n++){var o=t[n].matcher(e);if(o)return o}return[]}(o(),e.location.pathname)})),a=Bn((function(){for(var t=i(),e={},n=0;n<t.length;n++)Object.assign(e,t[n].params);return e}));e.out&&e.out.matches.push(i().map((function(t){var e=t.route,n=t.path,r=t.params;return{originalPath:e.originalPath,pattern:e.pattern,path:n,params:r}})));var s,u=[],l=at(ct(i,(function(t,r,o){for(var c=r&&t.length===r.length,d=[],f=function(s){var f=r&&r[s],h=t[s];o&&f&&h.route.key===f.route.key?d[s]=o[s]:(c=!1,u[s]&&u[s](),et((function(t){u[s]=t,d[s]=function(t,e,n,r,o){var i=t.base,a=t.location,s=t.navigatorFactory,u=r().route,l=u.pattern,c=u.element,d=u.preload,f=u.data,h=at((function(){return r().path}));d&&d();var p={parent:e,pattern:l,get child(){return n()},path:h,params:o,data:e.data,outlet:c,resolvePath:function(t){return Pn(i.path(),t,h())}};if(f)try{jn=p,p.data=f({data:e.data,params:o,location:a,navigate:s(p)})}finally{jn=void 0}return p}(e,d[s-1]||n,(function(){return l()[s+1]}),(function(){return i()[s]}),a)})))},h=0,p=t.length;h<p;h++)f(h);return u.splice(t.length).forEach((function(t){return t()})),o&&c?o:(s=d[0],d)})));return mn(Wt,{get when(){return l()&&s},keyed:!0,children:function(t){return mn(Xn.Provider,{value:t,get children(){return t.outlet()}})}})},tr=function(t){var e=yt((function(){return t.children}));return jt(t,{get children(){return e()}})},er=function(){var t=Un();return mn(Wt,{get when(){return t.child},keyed:!0,children:function(t){return mn(Xn.Provider,{value:t,get children(){return t.outlet()}})}})},nr=ft;function rr(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht(),o=0;return function(){return o++,ft((function(){o--,queueMicrotask((function(){!o&&n&&(n(),n=e=void 0)}))})),n||et((function(r){return e=t(n=r)}),r),e}}var or=rr((function(){var t,e,n,r,o=b(nt(null),2),i=o[0],a=o[1];return t=window,e="keydown",n=function(t){a(t),setTimeout((function(){return a(null)}))},t.addEventListener(e,n,r),nr(t.removeEventListener.bind(t,e,n,r)),i}));function ir(t){return"function"==typeof t}function ar(t,e){if(!t)throw new Error(e||"Assertion failed")}var sr,ur={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"},lr=b(nt([]),2),cr=lr[0],dr=lr[1];function fr(t,e){var n,r,o,i,a=e();if(Array.isArray(a))if(2===a.length)n=i=a[0],r=o=a[1];else if(3===a.length)n=a[0],r=o=a[1],i=a[2];else{var s=b(a,4);n=s[0],o=s[1],i=s[2],r=s[3]}else n=o=i=r=a;t.onBeforeLayout=function(e,a){if(a){t.width=t.children.reduce((function(t,e){return t+(e.width||0)}),0)+r+o;var s=t.children[0];s&&(s.x=r,s.marginLeft=r),t.height=t.children.reduce((function(t,e){return e.y=(e.y||0)+n,e.marginTop=n,t+(e.height||0)}),0)+n+i}}}function hr(t){return new Promise((function(e){setTimeout(e,t)}))}function pr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",r=window.speechSynthesis;return new Promise((function(o,i){var a=new SpeechSynthesisUtterance(t);a.lang=n,a.onend=function(){o()},a.onerror=function(t){i(t)},e.push(a),r.speak(a)}))}function vr(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=window.speechSynthesis,a=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];for(t=0;t<e.length;t++){var r=e[t];if("string"!=typeof r||r.includes("PAUSE-"))break;n.push(e[t])}return[n.join(",\b ")].concat(e.slice(t))}(Array.isArray(t)?t:[t]),s=[],u=[],l=!0;return{series:i(r().mark((function t(){var n,o,i,c,d,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0;case 1:if(!l||!a.length){t.next=62;break}return t.next=4,Promise.resolve(a.shift());case 4:if(n=t.sent,l){t.next=9;break}return t.abrupt("break",62);case 9:if("string"!=typeof n||!n.includes("PAUSE-")){t.next=16;break}return o=1e3*Number(n.split("PAUSE-")[1]),isNaN(o)&&(o=0),t.next=14,hr(o);case 14:t.next=60;break;case 16:if("string"!=typeof n||!n.length){t.next=48;break}c=i=3;case 19:if(!(l&&c>0)){t.next=46;break}return t.prev=20,t.next=23,pr(n,u,e);case 23:c=0,t.next=44;break;case 26:if(t.prev=26,t.t0=t.catch(20),!(t.t0 instanceof SpeechSynthesisErrorEvent)){t.next=43;break}if("network"!==t.t0.error){t.next=36;break}return c--,console.warn("Speech synthesis network error. Retries left: ".concat(c)),t.next=34,hr(500*(i-c));case 34:t.next=41;break;case 36:if("canceled"!==t.t0.error&&"interrupted"!==t.t0.error){t.next=40;break}c=0,t.next=41;break;case 40:throw new Error("SpeechSynthesisErrorEvent: ".concat(t.t0.error));case 41:t.next=44;break;case 43:throw t.t0;case 44:t.next=19;break;case 46:t.next=60;break;case 48:if("function"!=typeof n){t.next=55;break}return d=vr(n(),e,!1),s.push(d),t.next=53,d.series;case 53:t.next=60;break;case 55:if(!Array.isArray(n)){t.next=60;break}return f=vr(n,e,!1),s.push(f),t.next=60,f.series;case 60:t.next=1;break;case 62:return t.prev=62,l=!1,t.finish(62);case 65:case"end":return t.stop()}}),t,null,[[0,,62,65],[20,26]])})))(),get active(){return l},append:function(t){a.push(t)},cancel:function(){l&&(n&&o.cancel(),s.forEach((function(t){t.cancel()})),l=!1)}}}function gr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return sr&&sr.cancel(),sr=vr(t,e)}var yr,mr,xr=[],wr=!1;function br(t,e){var n,r=function(t,e){var n,r=function(){return clearTimeout(n)};return ht()&&ft(r),Object.assign((function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];void 0!==n&&r(),n=setTimeout((function(){return t.apply(void 0,i)}),e)}),{clear:r})}(t,e),o=function(t){n=t,r(t)};return o.flush=function(){r.clear(),t(n)},o.clear=r.clear,o}function _r(t){return t.id||t.name}function kr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Sr.onFocusChange){var e=t.every((function(t){return!t.loading})),n=t.filter((function(t){return!xr.includes(t)}));if(yr(),e||!Sr.onFocusChange){xr=t.slice(0);var r=[],o=n.reduce((function(t,e){return e.announce?(t.push([_r(e),"Announce",e.announce]),r.push(e.announce)):e.title?(t.push([_r(e),"Title",e.title]),r.push(e.title)):t.push([_r(e),"No Announce",""]),t}),[]);return n.reverse().reduce((function(t,e){return e.announceContext?(t.push([_r(e),"Context",e.announceContext]),r.push(e.announceContext)):t.push([_r(e),"No Context",""]),t}),o),Sr.debug&&console.table(o),r.length?Sr.speak(r.reduce((function(t,e){return t.concat(e)}),[])):void 0}Sr.onFocusChange([])}}var Sr={debug:!1,cancel:function(){mr&&mr.cancel()},clearPrevFocus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;xr=xr.slice(0,t),yr()},speak:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.append,o=void 0!==r&&r,i=n.notification,a=void 0!==i&&i;Sr.onFocusChange&&(Sr.onFocusChange.flush(),o&&mr&&mr.active?mr.append(t):(Sr.cancel(),function(t){if(!wr)mr=gr(t)}(t)),a&&(wr=!0,null===(e=mr)||void 0===e||e.series.finally((function(){wr=!1})).catch(console.error)));return mr},setupTimers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.focusDebounce,n=void 0===e?400:e,r=t.focusChangeTimeout,o=void 0===r?3e5:r;Sr.onFocusChange=br(kr,n),yr=br((function(){xr=[]}),o)}};function Tr(t){return function(){var e=this.children.length,n=this.wrap,r=this.selected;if("right"===t||"down"===t)do{var o;if(this.selected=(this.selected||0)%e+1,this.selected>=e){if(!n){this.selected=null;break}this.selected=0}}while(null!==(o=this.children[this.selected])&&void 0!==o&&o.skipFocus);else if("left"===t||"up"===t)do{var i;if(this.selected=(this.selected||0)%e-1,this.selected<0){if(!n){this.selected=null;break}this.selected=e-1}}while(null!==(i=this.children[this.selected])&&void 0!==i&&i.skipFocus);if(null===this.selected)return this.selected=r,!1;var a=this.children[this.selected];if(ar(a instanceof cn),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,a,this.selected,r),this.plinko&&null!==r){var s=this.children[r];ar(s instanceof cn);var u=s.selected;a.selected=u}return Gt(a),!0}}function Cr(t){var e,n=Tr("left"),r=Tr("right");return e=xn("node"),_n(e,"onLeft",n),_n(e,"onRight",r),_n(e,"selected",0),bn(e,kn({get onFocus(){return t.onFocus||function(t){if(t&&t.selected){var e=t.children[t.selected];e instanceof cn&&e.setFocus()}}}},t),!0),wn(e,(function(){return t.children})),e}function Rr(t){var e,n=Tr("up"),r=Tr("down");return e=xn("node"),_n(e,"onUp",n),_n(e,"onDown",r),_n(e,"selected",0),bn(e,kn({get onFocus(){return t.onFocus||function(t){if(t&&t.selected){var e=t.children[t.selected];e instanceof cn&&e.setFocus()}}}},t),!0),wn(e,(function(){return t.children})),e}var Fr={flexRow:{display:"flex",flexDirection:"row",justifyContent:"flexStart"},flexColumn:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},layout:{screenW:1920,screenH:1080,marginX:120,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},color:{primary:"#00315c",focus:"#bdbdbd",container:"#004882"},typography:{display1:{fontFamily:"Ubuntu",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Ubuntu",fontSize:56,lineHeight:72},headline1:{fontFamily:"Ubuntu",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Ubuntu",fontSize:32,lineHeight:44},headline3:{fontFamily:"Ubuntu",fontSize:28,lineHeight:40},body1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40},body2:{fontFamily:"Ubuntu",fontSize:28,lineHeight:34},button1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40}}},Er={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:Fr.layout.screenW,height:600,y:560,x:0},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,focus:{scale:1.1}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:Tn("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:Tn("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:Fr.layout.screenW-2*Fr.layout.marginX,x:Fr.layout.marginX+Fr.layout.gutterX,y:48},Rect:{width:250,height:100,y:10,x:300,color:Tn("#0000ff")},peopleBio:m(m({},Fr.typography.body1),{},{contain:"both",width:1500,height:400})},Ir={width:386,height:136,color:Tn("#000000"),alpha:.3,borderRadius:30,border:{width:5,color:Tn("#cc33ff")},scale:1,focus:{color:[Tn("#58807d"),{duration:2e3}],scale:1.2,border:{width:5,color:Tn("#ff0000")},alpha:[1,{duration:1500,delay:200,timing:"easy-in"}]},active:{color:Tn("#33ff55")},disabled:{alpha:1}},Nr={container:Ir,topBar:{color:Tn("#00A699"),height:8,y:2,x:-4,width:Ir.width+8},text:{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:Tn("#F6F6F9"),height:Ir.height,width:Ir.width,focus:{fontSize:64}}},zr=386,Ar=136,Pr=(Tn("#715cab"),Tn("#5a39a2"),Tn("#291d43"),{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:Tn("#FFFFFF"),height:Ar,width:zr,focus:{fontSize:40},disabled:{color:Tn("#909090")}});function Mr(t){return mn(Kt,kn(t,{animate:!0,get style(){return Er.Thumbnail}}))}function Lr(t){return mn(Kt,kn(t,{get style(){return Er.FocusRing}}))}function Or(t){var e=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(Y in t){var o=new Set(n.length>1?n.flat():n[0]),i=n.map((function(e){return new Proxy({get:function(n){return e.includes(n)?t[n]:void 0},has:function(n){return e.includes(n)&&n in t},keys:function(){return e.filter((function(e){return e in t}))}},Ot)}));return i.push(new Proxy({get:function(e){return o.has(e)?void 0:t[e]},has:function(e){return!o.has(e)&&e in t},keys:function(){return Object.keys(t).filter((function(t){return!o.has(t)}))}},Ot)),i}var a,s={},u=n.map((function(){return{}})),l=_(Object.getOwnPropertyNames(t));try{for(l.s();!(a=l.n()).done;){var c,d=a.value,f=Object.getOwnPropertyDescriptor(t,d),h=!f.get&&!f.set&&f.enumerable&&f.writable&&f.configurable,p=!1,v=0,y=_(n);try{for(y.s();!(c=y.n()).done;)c.value.includes(d)&&(p=!0,h?u[v][d]=f.value:Object.defineProperty(u[v],d,f)),++v}catch(m){y.e(m)}finally{y.f()}p||(h?s[d]=f.value:Object.defineProperty(s,d,f))}}catch(m){l.e(m)}finally{l.f()}return[].concat(g(u),[s])}(t,["items"]),n=b(e,2),r=n[0],o=n[1];return mn(Cr,kn(o,{get style(){return Er.Row},get children(){return mn(Xt,{get each(){return r.items},children:function(t){return mn(Mr,t)}})}}))}var Br,Dr,jr=b(nt(""),2),Yr=jr[0],Xr=jr[1],Wr="https://api.themoviedb.org/3",Ur="w185",Hr={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA"}};function Gr(t){return Dr+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur)+t}function $r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(Wr+t,m(m({},Hr),e)).then((function(t){return t.json()}))}function Kr(){return $r("/configuration").then((function(t){var e;return Br=t,Dr=null===(e=t.images)||void 0===e?void 0:e.secure_base_url,t}))}var Vr={get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Br?$r(t,e):Kr().then((function(){return $r(t,e)}))},loadConfig:Kr};function qr(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return{src:Gr(t.poster_path||t.profile_path),tileSrc:Gr(t.backdrop_path||t.profile_path,"w300"),backdrop:Gr(t.backdrop_path,"w1280"),href:"/entity/".concat(t.media_type||"people","/").concat(t.id),shortTitle:(e=t.title||t.name,n=30,e.length>n?e.substring(0,n-3)+"...":e),title:t.title||t.name,data:t,entityInfo:{type:t.media_type||"people",id:t.id},heroContent:{title:t.title||t.name,description:t.overview}};var e,n}))}var Qr=new Map,Jr=new Map;function Zr(t){var e=b(nt([]),2),n=e[0],r=e[1],o=b(nt(1),2),i=o[0],a=o[1],s=b(nt(!1),2),u=s[0],l=s[1],c=b(st(i,t),1)[0];return rt((function(){var t=c();t&&kt((function(){0===t.length&&l(!0),r((function(e){return[].concat(g(e),g(t))}))}),!1)})),{pages:n,page:i,setPage:a,setPages:r,end:u,setEnd:l}}var to=1100,eo=m(m({},Fr.typography.display2),{},{width:to,height:58,contain:"both"}),no=function(t){return mn($t,kn(t,{style:eo,get children(){return t.children}}))},ro=m(m({},Fr.typography.body1),{},{width:to,height:72,contain:"both"}),oo={fontSize:20,lineHeight:20},io=function(t){return mn($t,kn(t,{style:ro,get children(){return t.children}}))};var ao=function(t){return e=xn("node"),Sn(fr,e,(function(){return[8,15,13,15]})),bn(e,kn(t,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),wn(e,mn($t,{style:oo,get children(){return t.children}})),e;var e},so=Fr.typography.body2,uo=function(t){return mn(Kt,{get style(){return m(m({},Fr.flexRow),{},{gap:12,width:to,height:48})},get children(){return[mn($t,{style:so,get children(){return t.metaText}}),mn(Xt,{get each(){return t.badges},children:function(t){return mn(ao,{y:-5,children:t})}}),yn((function(){return e=t.reviews,[mn(Wt,{get when(){return(null==e?void 0:e.rtCrit)&&"0"!==(null==e?void 0:e.rtCrit)},get children(){return[mn(Kt,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),mn($t,{style:so,get children(){return e.rtCrit+"%"}})]}}),mn(Wt,{get when(){return(null==e?void 0:e.rtFan)&&"0"!==(null==e?void 0:e.rtFan)},get children(){return[mn(Kt,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),mn($t,{style:so,get children(){return e.rtFan+"%"}})]}})];var e}))]}})},lo=function(t){return mn(Kt,kn(t,{get style(){return m(m({},Fr.flexColumn),{},{width:to,height:160,gap:16})},get children(){return[mn(no,{get children(){return t.title}}),mn(io,{get children(){return t.description}}),mn(uo,{get metaText(){return t.metaText},get badges(){return t.badges},get reviews(){return t.reviews}})]}}))};function co(t){return t.split("-")[0]}function fo(t){var e=t.type,n=t.id;return Vr.get("/".concat(e,"/").concat(n,"/recommendations")).then((function(t){var n=t.results;return n.length?qr(n.slice(0,7)):Vr.get("/trending/".concat(e,"/week?page=1")).then((function(t){return qr(t.results.slice(0,7))}))}))}function ho(t){var e=t.type,n=t.id;return Vr.get("/".concat(e,"/").concat(n,"/credits")).then((function(t){return qr(t.cast.slice(0,7))}))}function po(t){var e=t.type,n=t.id,r="movie"===e?{rtCrit:86,rtFan:92}:{};return Vr.get("/".concat(e,"/").concat(n)).then((function(t){return m({backgroundImage:Gr(t.backdrop_path,"original"),heroContent:{title:t.title||t.name,description:t.overview,badges:["HD"],metaText:"movie"===e?(n=t.runtime,o=n%60,Math.floor(n/60)+"h "+(o<10?"0":"")+o+"m - "+t.release_date):"".concat(co(t.first_air_date)," - ").concat(co(t.last_air_date)),reviews:r}},t);var n,o}))}var vo=function(){var t=Gn(),e=b(nt(0),2),n=e[0],r=e[1],o=b(nt(),2),i=o[0];o[1];st(i,po);var a=b(nt({}),2),u=a[0],l=a[1],c=Hn(),d=ut((function(){return 0})),f=at((function(){return Zr((e=t.filter||"all",function(t){var n="/trending/".concat(e,"/week?page=").concat(t);if(Qr.has(n))return Qr.get(n);var r=Vr.get(n).then((function(t){var n=t.results.filter((function(t){return!t.adult})),r=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=[],r=0,o=t.length;r<o;r+=e)n.push(t.slice(r,r+e));return n}((Jr.has(e)?Jr.get(e):[]).concat(qr(n)));return r[r.length-1].length<7?Jr.set(e,r.pop()):Jr.delete(e),r}));return Qr.set(n,r),r}));var e}));function h(){var t;null===(t=this.children.selected)||void 0===t||t.setFocus(),r(-1*(this.y||0)+24);var e=f().pages().length;(0===e||this.parent.selected&&this.parent.selected>=e-2)&&f().setPage((function(t){return t+1}))}function p(){var t=this.children.selected;s(t&&t.href),c(t.href)}return it(ct(Ht,(function(t){t.backdrop&&Xr(t.backdrop),t.heroContent&&l(t.heroContent)}),{defer:!0})),mn(Wt,{get when(){return f().pages().length},get children(){return[mn(lo,kn({y:360,x:150},u)),mn(Kt,{clipping:!0,get style(){return Er.itemsContainer},get children(){return mn(Rr,{plinko:!0,announce:"All Trending - Week",animate:!0,get y(){return n()},get style(){return Er.Column},get children(){return mn(Xt,{get each(){return f().pages()},children:function(t,e){return mn(Or,{get autofocus(){return d(e())},items:t,onFocus:h,onEnter:p})}})}})}})]}})},go=function(){var t=Hn(),e=ut((function(){return 0}));function n(){var e=this.children.selected;s(e&&e.id),t("/"+e.id)}var r=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"}];function o(t){var e=b(nt(4294967295),2),n=e[0],r=e[1];return mn(Kt,kn(t,{onFocus:function(){return r(255)},onBlur:function(){return r(4294967295)},animate:!0,style:{width:370,height:320,borderRadius:6,scale:1,color:405488895,focus:{scale:1.1,color:4294967295}},get children(){return mn(Kt,{x:30,get children(){return[mn($t,{y:30,fontSize:84,get color(){return n()},get children(){return t.index}}),mn($t,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return n()},get children(){return t.title}}),mn($t,{y:200,fontSize:28,width:330,contain:"width",get color(){return n()},get children(){return t.description}})]}})}}))}var i=b(nt(140),2),a=i[0],u=i[1];function l(t){u(-400*t.selected+140)}return mn(Kt,{colorTop:1147903743,colorBottom:743406847,get children(){return[mn(Kt,{x:120,get children(){return[mn(Kt,{src:"/assets/solidjs.png",width:101,height:90,y:40}),mn($t,{fontSize:90,x:110,y:40,children:"Examples"}),mn(Kt,{y:140,height:1,width:1800,color:3906468351})]}}),mn(Cr,{onSelectedChanged:l,onEnter:n,animationSettings:{delay:20,duration:300},animate:!0,get x(){return a()},y:300,width:4400,get style(){return Er.Row},justifyContent:"flexStart",gap:40,get children(){return mn(Xt,{each:r,children:function(t,n){return mn(o,kn({get autofocus(){return e(n())},get index(){return n()}},t))}})}})]}})},yo=function(){var t={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:Tn("00000000")},e={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:Tn("00000000")},n={fontSize:42},r={width:t.width,fontSize:26,contain:"width"},o={fontSize:26};return dt((function(){Xr("0x000000ff")})),mn(Kt,{autofocus:!0,style:t,get children(){return[mn($t,{style:n,children:"Title of the Page"}),mn($t,{style:r,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),mn(Kt,{style:e,get children(){return[mn($t,{style:o,children:"Subline Text"}),mn(Kt,{width:28,height:28,src:"/assets/rt-popcorn.png"}),mn($t,{style:o,children:"More Text"})]}})]}})},mo=function(){function t(t,e){this.states.toggle("disabled")}var e={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:Tn("00000000"),gap:26,y:400};function n(t){return mn(Kt,kn(t,{forwardStates:!0,animate:!0,get style(){return Nr.container},get children(){return mn($t,{get style(){return Nr.text},get children(){return t.children}})}}))}var r=function(t){return e=xn("node"),Sn(fr,e,(function(){return[10,15]})),bn(e,kn(t,{get style(){return{color:Tn("#000000be"),borderRadius:8,border:{width:2,color:Tn("#ffffff")}}}}),!0),wn(e,mn($t,{style:{fontSize:20},get children(){return t.children}})),e;var e};return[mn(Cr,{x:100,y:200,gap:5,style:e,get children(){return[mn(r,{children:"HD"}),mn(r,{children:"PG13"}),mn(r,{children:"NC17"}),mn($t,{fontSize:30,children:"I like bananas"}),mn(r,{children:"DOLBY"})]}}),mn(Cr,{x:100,gap:40,style:e,get children(){return[mn(n,{autofocus:!0,onEnter:t,children:"TV Shows"}),mn(n,{states:{active:!0,disabled:!1},children:"Movies"}),mn(n,{states:"active",children:"Sports"}),mn(n,{states:"disabled",children:"News"})]}})]},xo=function(){var t={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:Tn("#4dabf5")},e={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function n(t){return mn(Kt,kn(t,{style:{width:200,height:100,y:5,color:392801023}}))}var r=b(nt(50),2),o=r[0],i=r[1];function a(){var t;null===(t=this.children.selected)||void 0===t||t.setFocus(),i(150+-1*(this.y||0))}dt((function(){Xr("#333333")}));var s=50;return mn(Rr,{x:160,get y(){return o()},animate:!0,gap:30,height:850,get width(){return t.width},get style(){return Er.Column},get children(){return[mn($t,{style:e,children:"Flex Start"}),mn(Cr,{gap:s,style:t,onFocus:a,get children(){return[mn(n,{autofocus:!0}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn($t,{style:e,children:"Flex Start - Margin Left"}),mn(Cr,{gap:s,style:t,onFocus:a,get children(){return[mn(n,{marginLeft:100}),mn(n,{}),mn(n,{marginLeft:100}),mn(n,{}),mn(n,{})]}}),mn($t,{style:e,children:"Flex End"}),mn(Cr,{gap:s,justifyContent:"flexEnd",style:t,onFocus:a,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn($t,{style:e,children:"Flex End - Margin Right"}),mn(Cr,{gap:s,justifyContent:"flexEnd",style:t,onFocus:a,get children(){return[mn(n,{}),mn(n,{marginRight:100}),mn(n,{}),mn(n,{}),mn(n,{marginRight:100})]}}),mn($t,{style:e,children:"Center - No Margin Support"}),mn(Cr,{gap:s,justifyContent:"center",style:t,onFocus:a,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn($t,{style:e,children:"Space Between - No Margin Support"}),mn(Cr,{gap:s,justifyContent:"spaceBetween",style:t,onFocus:a,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn($t,{style:e,children:"Space Evenly - No Margin Support"}),mn(Cr,{gap:s,justifyContent:"spaceEvenly",style:t,onFocus:a,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}})]}})},wo=function(){var t={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:Tn("#4dabf5")},e={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function n(t){return mn(Kt,kn(t,{style:{width:200,height:100,y:5,color:392801023}}))}function r(){return Math.floor(91*Math.random())+10}var o=b(nt(50),2),i=o[0],a=o[1];function s(){var t;null===(t=this.children.selected)||void 0===t||t.setFocus(),a(150+-1*(this.y||0))}dt((function(){Xr("#333333")}));var u=50;return mn(Rr,{x:160,get y(){return i()},animate:!0,gap:30,height:850,get width(){return t.width},get style(){return Er.Column},get children(){return[mn($t,{style:e,children:"Flex Start - AlignItems: center"}),mn(Cr,{alignItems:"center",gap:u,style:t,onFocus:s,get children(){return[mn(n,{autofocus:!0,get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}})]}}),mn($t,{style:e,children:"Flex Start - Margin Left - AlignItems: flexStart"}),mn(Cr,{gap:u,alignItems:"flexStart",style:t,onFocus:s,get children(){return[mn(n,{marginLeft:100,get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{marginLeft:100,get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}})]}}),mn($t,{style:e,children:"Flex End - AlignItems: flexEnd"}),mn(Cr,{gap:u,justifyContent:"flexEnd",alignItems:"flexEnd",style:t,onFocus:s,get children(){return[mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}})]}}),mn($t,{style:e,children:"Flex End - Margin Right"}),mn(Cr,{gap:u,justifyContent:"flexEnd",style:t,onFocus:s,get children(){return[mn(n,{get height(){return r()}}),mn(n,{marginRight:100,get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{marginRight:100,get height(){return r()}})]}}),mn($t,{style:e,children:"Center - No Margin Support"}),mn(Cr,{gap:u,justifyContent:"center",style:t,onFocus:s,get children(){return[mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}})]}}),mn($t,{style:e,children:"Space Between - No Margin Support"}),mn(Cr,{gap:u,justifyContent:"spaceBetween",style:t,onFocus:s,get children(){return[mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}})]}}),mn($t,{style:e,children:"Space Evenly - No Margin Support"}),mn(Cr,{gap:u,justifyContent:"spaceEvenly",style:t,onFocus:s,get children(){return[mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}}),mn(n,{get height(){return r()}})]}})]}})},bo=function(){var t={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:Tn("00000000")},e={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:Tn("#4dabf5"),height:850,width:80};function n(t){var e={width:Math.floor(61*Math.random())+10,height:80,x:5,color:Tn("#1769aa")};return mn(Kt,kn(t,{style:e}))}var r=b(nt(50),2),o=(r[0],r[1]);function i(){var t;null===(t=this.children.selected)||void 0===t||t.setFocus(),o(150+-1*(this.y||0))}dt((function(){Xr("#333333")}));var a=50;return[mn($t,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),mn(Cr,{gap:a,style:t,onFocus:i,get children(){return[mn(Rr,{gap:30,style:e,alignItems:"center",get children(){return[mn(n,{autofocus:!0}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,style:e,onFocus:i,alignItems:"flexStart",get children(){return[mn(n,{marginTop:100}),mn(n,{}),mn(n,{marginTop:100}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,alignItems:"flexEnd",justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{marginBottom:100}),mn(n,{}),mn(n,{}),mn(n,{marginBottom:100})]}}),mn(Rr,{gap:a,justifyContent:"center",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,justifyContent:"spaceBetween",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,justifyContent:"spaceEvenly",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}})]}})]},_o=function(){var t={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:Tn("00000000")},e={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:Tn("#4dabf5"),height:850,width:60};function n(t){var e={width:50,height:80,x:5,color:Tn("#1769aa")};return mn(Kt,kn(t,{style:e}))}var r=b(nt(50),2),o=(r[0],r[1]);function i(){var t;null===(t=this.children.selected)||void 0===t||t.setFocus(),o(150+-1*(this.y||0))}dt((function(){Xr("#333333")}));var a=50;return[mn($t,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),mn(Cr,{gap:a,style:t,onFocus:i,get children(){return[mn(Rr,{gap:30,style:e,get children(){return[mn(n,{autofocus:!0}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,style:e,onFocus:i,get children(){return[mn(n,{marginTop:100}),mn(n,{}),mn(n,{marginTop:100}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,justifyContent:"flexEnd",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{marginBottom:100}),mn(n,{}),mn(n,{}),mn(n,{marginBottom:100})]}}),mn(Rr,{gap:a,justifyContent:"center",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,justifyContent:"spaceBetween",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}}),mn(Rr,{gap:a,justifyContent:"spaceEvenly",style:e,onFocus:i,get children(){return[mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{}),mn(n,{})]}})]}})]},ko=function(){function t(t,e){this.states.toggle("disabled")}var e={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:Tn("00000000"),gap:26,y:400,x:100},n={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},r=["RoundedRectangle",{radius:65}];function o(t){return mn(Kt,kn(t,{forwardStates:!0,animate:!0,style:n,shader:r,get children(){return mn($t,{style:Pr,get children(){return t.children}})}}))}return mn(Cr,{style:e,get children(){return[mn(o,{autofocus:!0,onEnter:t,children:"Focused"}),mn(o,{states:{active:!0,disabled:!1},children:"Normal"}),mn(o,{states:"disabled",children:"Disabled"})]}})},So=function(){var t=Gn(),e=Hn(),n=b(st((function(){return m({},t)}),po),1)[0],r=b(st((function(){return m({},t)}),ho),1)[0],o=b(st((function(){return m({},t)}),fo),1)[0];it(ct(n,(function(t){Xr(t.backgroundImage)}),{defer:!0}));var i,a,u=600,l={color:Tn("#000000"),alpha:0,width:1900,height:890,x:10,y:u,borderRadius:30};function c(){var t;null===(t=this.children.selected)||void 0===t||t.setFocus(),i.y=u,a.y=u,a.alpha=0}function d(){var t;null===(t=this.children.selected)||void 0===t||t.setFocus(),i.y=200,a.y=160,a.alpha=.9}function f(){var t=this.children.selected;s(t&&t.href),e(t.href)}return mn(Wt,{get when(){return n()},keyed:!0,get children(){return[mn(lo,kn({y:360,x:150},(function(){return n().heroContent}))),mn(Rr,{animate:!0,ref:function(t){"function"==typeof i?i(t):i=t},y:u,x:140,get style(){return Er.Column},get children(){return mn(Wt,{get when(){return yn((function(){return!!o()}))()&&r()},get children(){return[mn($t,{skipFocus:!0,get style(){return Er.RowTitle},children:"Recommendations"}),mn(Or,{autofocus:!0,onFocus:c,onEnter:f,get items(){return o()}}),mn($t,{skipFocus:!0,get style(){return Er.RowTitle},children:"Cast and Crew"}),mn(Or,{onFocus:d,onEnter:f,get items(){return r()}})]}})}}),mn(Kt,{ref:function(t){"function"==typeof a?a(t):a=t},animate:!0,style:l})]}})};function To(t){var e=t.id;return Vr.get("/person/".concat(e,"/combined_credits")).then((function(t){return qr(t.cast.slice(0,7))}))}function Co(t){var e=t.id;return Vr.get("/person/".concat(e)).then((function(t){return m({backgroundImage:Gr(t.profile_path,"original"),heroContent:{title:t.title||t.name,description:t.biography}},t)}))}var Ro=function(){var t=Gn(),e=Hn(),n=b(st((function(){return m({},t)}),Co),1)[0],r=b(st((function(){return m({},t)}),To),1)[0];it(ct(n,(function(t){Xr(t.backgroundImage)}),{defer:!0}));var o={color:Tn("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function i(){var t=this.children.selected;s(t&&t.href),e(t.href)}return mn(Wt,{get when(){return n()},keyed:!0,get children(){return[mn(Kt,{x:150,y:200,get style(){return Er.Column},zIndex:3,get children(){return[mn($t,{get style(){return Fr.typography.display2},get children(){return n().name}}),mn($t,{get style(){return Er.peopleBio},get children(){return n().biography}})]}}),mn(Kt,{style:o}),mn(Rr,{y:670,x:140,get style(){return Er.Column},get children(){return mn(Wt,{get when(){return r()},get children(){return[mn($t,{skipFocus:!0,get style(){return Er.RowTitle},children:"Credits"}),mn(Or,{autofocus:!0,onEnter:i,get items(){return r()}})]}})}})]}})},Fo=function(){return t=xn("node"),_n(t,"style",{width:1920,height:1080,color:868483072}),t;var t};function Eo(){var t,e,n=0,r={alpha:1,color:4294967295},o={duration:1e3,easing:"ease-in-out"};return it(ct(Yr,(function(r){return r.startsWith("#")?(t.color=r,t.src="",t.alpha=1,n=1,void(e.alpha=0)):(t.color=4294967295,0===n?(t.src=r,void(n=1)):1===n?(e.src=r,n=2,e.alpha=[1],void(t.alpha=[0])):void(2===n&&(t.src=r,n=1,t.alpha=1,e.alpha=0)))}),{defer:!0})),mn(Kt,{width:1920,height:1080,get children(){return[mn(Kt,{ref:function(e){"function"==typeof t?t(e):t=e},animate:!0,animationSettings:o,style:r}),mn(Kt,{ref:function(t){"function"==typeof e?e(t):e=t},animate:!0,animationSettings:o,style:r,alpha:0}),mn(Kt,{get effects(){return{radialGradient:{colors:[124,124,Tn(Fr.color.container)],stops:[0,.4,.9],height:800,width:1920,pivot:[.8,0]}}}})]}})}var Io,No={Column:m(m({},Fr.flexColumn),{},{width:320,height:600,y:360,gap:20,zIndex:101,x:[8,{duration:250,easing:"ease-in-out"}],focus:{x:[Fr.layout.marginX,{duration:250,easing:"ease-in-out"}]}}),Gradient:{zIndex:99,linearGradient:{angle:(Io=270,Io*Math.PI/180),stops:[0,.4,.8],colors:[Tn(Fr.color.primary),Tn(Fr.color.primary),Tn("#00000000")]},alpha:[0],focus:{width:1600,alpha:[1]},width:100,height:1080},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:Tn(Fr.color.container)},active:{width:328,height:70}}},zo="/solid-demo-app/",Ao=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Po(t){var e,n,r,o=(e=zo+"assets/icons_white.png",n=Ao,r=Ve.createTexture("ImageTexture",{src:e}),n.reduce((function(t,e){var n=e.x,o=e.y,i=e.width,a=e.height;return t[e.name]=Ve.createTexture("SubTexture",{texture:r,x:n,y:o,width:i,height:a}),t}),{}));return mn(Kt,kn(t,{get texture(){return o[t.name]},get width(){return o[t.name].props.width},get height(){return o[t.name].props.height},get x(){return(100-(o[t.name].props.width||0))/2},get y(){return(100-(o[t.name].props.height||0))/2}}))}function Mo(t){return mn(Kt,kn(t,{forwardStates:!0,get style(){return No.NavButton},get children(){return[mn(Kt,{y:-16,get children(){return mn(Po,{scale:.5,get name(){return t.icon}})}}),mn($t,{get style(){return m(m({},Fr.typography.button1),{},{fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}})},get children(){return t.children}})]}}))}function Lo(t){var e,n=Hn();return[mn(Rr,kn(t,{onFocus:function(){e.states.add("focus"),this.children.forEach((function(t){return t.states.add("active")})),this.children.selected.setFocus()},onBlur:function(){e.states.remove("focus"),this.selected=0,this.children.forEach((function(t){return t.states.remove("active")}))},get style(){return No.Column},animate:!0,get children(){return[mn(Mo,{onEnter:function(){return n("/browse/all")},icon:"trending",children:"Trending"}),mn(Mo,{icon:"movie",onEnter:function(){return n("/browse/movie")},children:"Movies"}),mn(Mo,{icon:"tv",onEnter:function(){return n("/browse/tv")},children:"TV"}),mn(Mo,{icon:"experiment",onEnter:function(){return n("/examples")},children:"Examples"})]}})),mn(Kt,{ref:function(t){"function"==typeof e?e(t):e=t},get style(){return No.Gradient}})]}var Oo=function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=or();ur=m(m({},ur),t);var n=Object.entries(ur);it(ct(Ht,(function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=t,o=[];r;){var i;r.states.has("focus")||(r.states.add("focus"),ir(r.onFocus)&&r.onFocus.call(r,t,null!=e?e:null)),o.push(r),r=null!==(i=r.parent)&&void 0!==i?i:null}return n.forEach((function(n){o.includes(n)||(n.states.remove("focus"),ir(n.onBlur)&&n.onBlur.call(n,t,null!=e?e:null))})),dr(o),o}),{defer:!0})),it((function(){var t=e();if(t){var r=n.find((function(e){var n=b(e,2);return n[0],n[1]===t.key}));lt((function(){var e,n=_(cr());try{for(n.s();!(e=n.n()).done;){var o=e.value,i=r?r[0]:void 0;if(i){var a=o["on".concat(i)];if(ir(a)&&!0===a.call(o,t,o))break}if(ir(o.onKeyPress)&&!0===o.onKeyPress.call(o,t,i,o))break}}catch(s){n.e(s)}finally{n.f()}return!1}))}}))}({Menu:"m"}),Sr.setupTimers(),it(ct(cr,Sr.onFocusChange,{defer:!0}));var t,e,n,r=Hn();return it(ct(Ht,(function(e){s(e),setTimeout((function(){e.heroContent?(t.parent=e,t.alpha=1,t.width=e.width+10,t.height=e.height+10,t.zIndex=e.zIndex-1e-8):t.alpha=0}),10)}),{defer:!0})),mn(Kt,{ref:function(t){var e=window.APP;"function"==typeof e?e(t):window.APP=t},onLast:function(){return history.back()},onMenu:function(){return r("/")},style:{width:1920,height:1080},onLeft:function(){if(e.states.has("focus"))return!1;n=Ht(),e.setFocus()},onRight:function(){return e.states.has("focus")&&n.setFocus()},get children(){return[mn(Eo,{}),mn(Lr,{get color(){return Tn(Fr.color.focus)},ref:function(e){"function"==typeof t?t(e):t=e}}),mn(Zn,{get children(){return[mn(tr,{path:"",component:vo}),mn(tr,{path:"examples",component:go}),mn(tr,{path:"browse/:filter",component:vo}),mn(tr,{path:"text",component:yo}),mn(tr,{path:"buttons",component:mo}),mn(tr,{path:"flex",component:xo}),mn(tr,{path:"flexsize",component:wo}),mn(tr,{path:"flexcolumnsize",component:bo}),mn(tr,{path:"flexcolumn",component:_o}),mn(tr,{path:"buttonsmaterial",component:ko}),mn(tr,{path:"entity/people/:id",component:Ro}),mn(tr,{path:"entity/:type/:id",component:So}),mn(tr,{path:"*all",component:Fo})]}}),mn(Lo,{ref:function(t){"function"==typeof e?e(t):e=t}})]}})},Bo=new URL("AppCoreExtensions-legacy-9f34575a.js",o.meta.url).href;en.debug=!1,en.fontSettings.fontFamily="Ubuntu",en.fontSettings.color=Tn("#ffffff"),en.fontSettings.fontSize=100,gn((function(){return mn(fn,{options:{coreExtensionModule:Bo,threadXCoreWorkerUrl:void 0},get children(){return mn(Jn,{get source(){return In((function(){return window.location.hash.slice(1)}),(function(t){var e=t.value,n=t.replace,r=t.scroll,o=t.state;n?window.history.replaceState(o,"","#"+e):window.location.hash=e;var i=e.indexOf("#");En(i>=0?e.slice(i+1):"",r)}),(function(t){return Fn(window,"hashchange",(function(){return t()}))}),{go:function(t){return window.history.go(t)},renderPath:function(t){return"#".concat(t)},parsePath:function(t){var e=t.replace(/^.*?#/,"");if(!e.startsWith("/")){var n=b(window.location.hash.split("#",2),2)[1];return"".concat(void 0===n?"/":n,"#").concat(e)}return e}})},get children(){return mn(Oo,{})}})}})}))}}}))}();
//# sourceMappingURL=index-legacy-402d2911.js.map
