{"version":3,"file":"index-legacy-282f51eb.js","sources":["../../node_modules/.pnpm/solid-js@1.8.3/node_modules/solid-js/dist/solid.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/activeElement.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/components/Text.jsx","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/components/View.jsx","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/TextureUsageTracker.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/ManualCountTextureUsageTracker.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/main-api/texture-usage-trackers/FinalizationRegistryTextureUsageTracker.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/main-api/RendererMain.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainOnlyNode.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/renderer/index.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainOnlyTextNode.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/render-drivers/main/MainRenderDriver.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/render-drivers/threadx/ThreadXMainAnimationController.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/render-drivers/threadx/ThreadXMainNode.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/render-drivers/threadx/ThreadXMainTextNode.js","../../node_modules/.pnpm/@lightningjs+renderer@0.4.0/node_modules/@lightningjs/renderer/dist/src/render-drivers/threadx/ThreadXRenderDriver.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/node/children.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/config.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/utils.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/node/states.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/node/index.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/flex.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/components/Canvas.jsx","../../node_modules/.pnpm/solid-js@1.8.3/node_modules/solid-js/universal/dist/universal.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/universal/lightning.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/universal/dom-inspector.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/core/render.js","../../node_modules/.pnpm/@lightningjs+solid@0.7.0_@babel+core@7.23.0_solid-js@1.8.3_vite@4.4.11/node_modules/@lightningjs/solid/dist/source/utils.js","../../node_modules/.pnpm/solid-js@1.8.3/node_modules/solid-js/web/dist/web.js","../../node_modules/.pnpm/@solidjs+router@0.8.3_solid-js@1.8.3/node_modules/@solidjs/router/dist/integration.js","../../node_modules/.pnpm/@solidjs+router@0.8.3_solid-js@1.8.3/node_modules/@solidjs/router/dist/utils.js","../../node_modules/.pnpm/@solidjs+router@0.8.3_solid-js@1.8.3/node_modules/@solidjs/router/dist/routing.js","../../node_modules/.pnpm/@solidjs+router@0.8.3_solid-js@1.8.3/node_modules/@solidjs/router/dist/lifecycle.js","../../node_modules/.pnpm/@solidjs+router@0.8.3_solid-js@1.8.3/node_modules/@solidjs/router/dist/components.jsx","../../node_modules/.pnpm/@solid-primitives+utils@6.2.1_solid-js@1.8.3/node_modules/@solid-primitives/utils/dist/chunk/R5675YMU.js","../../node_modules/.pnpm/@solid-primitives+rootless@1.4.2_solid-js@1.8.3/node_modules/@solid-primitives/rootless/dist/index.js","../../node_modules/.pnpm/@solid-primitives+keyboard@1.2.5_solid-js@1.8.3/node_modules/@solid-primitives/keyboard/dist/index.js","../../node_modules/.pnpm/@solid-primitives+event-listener@2.3.0_solid-js@1.8.3/node_modules/@solid-primitives/event-listener/dist/index.js","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/utils.js","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/useFocusManager.js","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/withPadding.js","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/announcer/speech.js","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/announcer/announcer.js","../../node_modules/.pnpm/@solid-primitives+scheduled@1.4.1_solid-js@1.8.3/node_modules/@solid-primitives/scheduled/dist/index.js","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/navigation.js","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/Row.jsx","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/Column.jsx","../../src/styles.ts","../../src/components/index.tsx","../../src/state.ts","../../src/api/index.ts","../../src/api/formatters/ItemFormatter.ts","../../src/api/providers/browse.ts","../../src/components/pagination.ts","../../src/components/ContentBlock.tsx","../../src/api/providers/entity.js","../../src/pages/Browse.tsx","../../src/pages/Examples.tsx","../../src/pages/Text.tsx","../../src/pages/Buttons.tsx","../../src/pages/Flex.tsx","../../src/pages/FlexColumn.tsx","../../src/pages/ButtonsMaterial.tsx","../../src/pages/Entity.tsx","../../src/api/providers/people.js","../../src/pages/People.tsx","../../src/pages/NotFound.tsx","../../src/components/Background.tsx","../../src/components/NavDrawer/NavDrawer.styles.ts","../../src/components/Icon.tsx","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/createSpriteMap.js","../../src/components/NavDrawer/NavDrawer.tsx","../../src/pages/App.tsx","../../node_modules/.pnpm/@lightningjs+solid-primitives@0.4.1_@lightningjs+solid@0.7.0_solid-js@1.8.3/node_modules/@lightningjs/solid-primitives/dist/packages/announcer/index.js","../../AppCoreExtensions.js?importChunkUrl","../../src/index.tsx"],"sourcesContent":["let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = (n + m) >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;\n      else if (cmp < 0) n = k - 1;\n      else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceFactory = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nconst [transPending, setTransPending] = /*@__PURE__*/ createSignal(false);\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    current = detachedOwner === undefined ? owner : detachedOwner,\n    root = unowned\n      ? UNOWNED\n      : {\n          owned: null,\n          cleanups: null,\n          context: current ? current.context : null,\n          owner: current\n        },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);\n      else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);\n  else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(\n      () => {\n        fn ? fn() : untrack(onInvalidate);\n        fn = undefined;\n      },\n      undefined,\n      false,\n      0\n    ),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction isPromise(v) {\n  return v && typeof v === \"object\" && \"then\" in v;\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if ((arguments.length === 2 && typeof pFetcher === \"object\") || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = \"initialValue\" in options,\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;\n    else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v;\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated)\n        queueMicrotask(() =>\n          options.onHydrated(key, {\n            value: v\n          })\n        );\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);\n          else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p =\n      initP !== NO_INIT\n        ? initP\n        : untrack(() =>\n            fetcher(lookup, {\n              value: value(),\n              refetching\n            })\n          );\n    if (!isPromise(p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    if (\"value\" in p) {\n      if (p.status === \"success\") loadEnd(pr, p.value, undefined, lookup);\n      else loadEnd(pr, undefined, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    scheduled = true;\n    queueMicrotask(() => (scheduled = false));\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(\n      v => loadEnd(p, v, undefined, lookup),\n      e => loadEnd(p, undefined, castError(e), lookup)\n    );\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));\n  else load(false);\n  return [\n    read,\n    {\n      refetch: load,\n      mutate: setValue\n    }\n  ];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(\n    () => {\n      if (!t || !t.fn)\n        t = requestCallback(\n          () => setDeferred(() => node.value),\n          timeout !== undefined\n            ? {\n                timeout\n              }\n            : undefined\n        );\n      return source();\n    },\n    undefined,\n    true\n  );\n  const [deferred, setDeferred] = createSignal(\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    options\n  );\n  updateComputation(node);\n  setDeferred(() =>\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n  );\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(\n    p => {\n      const v = source();\n      for (const [key, val] of subs.entries())\n        if (fn(key, v) !== fn(key, p)) {\n          for (const c of val.values()) {\n            c.state = STALE;\n            if (c.pure) Updates.push(c);\n            else Effects.push(c);\n          }\n        }\n      return v;\n    },\n    undefined,\n    true,\n    STALE\n  );\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if ((l = subs.get(key))) l.add(listener);\n      else subs.set(key, (l = new Set([listener])));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(\n      key,\n      Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value\n    );\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return undefined;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null);\n  else if (Owner.cleanups === null) Owner.cleanups = [fn];\n  else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    ...Owner.context,\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t =\n        Transition ||\n        (Transition = {\n          sources: new Set(),\n          effects: [],\n          promises: new Set(),\n          disposed: new Set(),\n          queue: new Set(),\n          running: true\n        });\n      t.done || (t.done = new Promise(res => (t.resolve = res)));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  return Owner && Owner.context && Owner.context[context.id] !== undefined\n    ? Owner.context[context.id]\n    : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext());\n}\nfunction enableExternalSource(factory) {\n  if (ExternalSourceFactory) {\n    const oldFactory = ExternalSourceFactory;\n    ExternalSourceFactory = (fn, trigger) => {\n      const oldSource = oldFactory(fn, trigger);\n      const source = factory(x => oldSource.track(x), trigger);\n      return {\n        track: x => source.track(x),\n        dispose() {\n          source.dispose();\n          oldSource.dispose();\n        }\n      };\n    };\n  } else {\n    ExternalSourceFactory = factory;\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);\n    else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current =\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || (!isComp && Transition.sources.has(node))) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);\n            else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;\n          else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false);\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const owner = Owner,\n    listener = Listener,\n    time = ExecCount;\n  Listener = Owner = node;\n  runComputation(\n    node,\n    Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value,\n    time\n  );\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n  Listener = listener;\n  Owner = owner;\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null);\n  else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];\n      else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];\n      else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceFactory) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceFactory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceFactory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;\n  else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);\n    else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);\n    else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    } else if (sharedConfig.effects) {\n      queue = [...sharedConfig.effects, ...queue];\n      userLength += sharedConfig.effects.length;\n      delete sharedConfig.effects;\n    }\n    setHydrateContext();\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;\n  else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount))\n          runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;\n      else o.state = PENDING;\n      if (o.pure) Updates.push(o);\n      else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;\n  else node.state = 0;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, (owner && owner.owner) || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) throw error;\n  if (Effects)\n    Effects.push({\n      fn() {\n        runErrors(error, fns, owner);\n      },\n      state: STALE\n    });\n  else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(\n      () =>\n        (res = untrack(() => {\n          Owner.context = {\n            ...Owner.context,\n            [id]: props.value\n          };\n          return children(() => props.children);\n        })),\n      undefined\n    );\n    return res;\n  };\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null);\n  else if (Owner.context === null || !Owner.context[ERROR]) {\n    Owner.context = {\n      ...Owner.context,\n      [ERROR]: [fn]\n    };\n    mutateContext(Owner, ERROR, [fn]);\n  } else Owner.context[ERROR].push(fn);\n}\nfunction mutateContext(o, key, value) {\n  if (o.owned) {\n    for (let i = 0; i < o.owned.length; i++) {\n      if (o.owned[i].context === o.context) mutateContext(o.owned[i], key, value);\n      if (!o.owned[i].context) {\n        o.owned[i].context = o.context;\n        mutateContext(o.owned[i], key, value);\n      } else if (!o.owned[i].context[key]) {\n        o.owned[i].context[key] = value;\n        mutateContext(o.owned[i], key, value);\n      }\n    }\n  }\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler =\n        typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => (\"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub()));\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      } else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (\n          start = 0, end = Math.min(len, newLen);\n          start < end && items[start] === newItems[start];\n          start++\n        );\n        for (\n          end = len - 1, newEnd = newLen - 1;\n          end >= start && newEnd >= start && items[end] === newItems[newEnd];\n          end--, newEnd--\n        ) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, (len = newLen));\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return (mapped = mapped.slice(0, len));\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || (!!s && $PROXY in s);\n    sources[i] = typeof s === \"function\" ? ((proxy = true), createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy(\n      {\n        get(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            const v = resolveSource(sources[i])[property];\n            if (v !== undefined) return v;\n          }\n        },\n        has(property) {\n          for (let i = sources.length - 1; i >= 0; i--) {\n            if (property in resolveSource(sources[i])) return true;\n          }\n          return false;\n        },\n        keys() {\n          const keys = [];\n          for (let i = 0; i < sources.length; i++)\n            keys.push(...Object.keys(resolveSource(sources[i])));\n          return [...new Set(keys)];\n        }\n      },\n      propTraps\n    );\n  }\n  const target = {};\n  const sourcesMap = {};\n  const defined = new Set();\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = 0, length = sourceKeys.length; i < length; i++) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined.has(key)) {\n        if (desc.get) {\n          defined.add(key);\n          Object.defineProperty(target, key, {\n            enumerable: true,\n            configurable: true,\n            get: resolveSources.bind((sourcesMap[key] = [desc.get.bind(source)]))\n          });\n        } else {\n          if (desc.value !== undefined) defined.add(key);\n          target[key] = desc.value;\n        }\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) {\n            sources.push(desc.get.bind(source));\n          } else if (desc.value !== undefined) {\n            sources.push(() => desc.value);\n          }\n        } else if (target[key] === undefined) target[key] = desc.value;\n      }\n    }\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if ($PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy(\n        {\n          get(property) {\n            return k.includes(property) ? props[property] : undefined;\n          },\n          has(property) {\n            return k.includes(property) && property in props;\n          },\n          keys() {\n            return k.filter(property => property in props);\n          }\n        },\n        propTraps\n      );\n    });\n    res.push(\n      new Proxy(\n        {\n          get(property) {\n            return blocked.has(property) ? undefined : props[property];\n          },\n          has(property) {\n            return blocked.has(property) ? false : property in props;\n          },\n          keys() {\n            return Object.keys(props).filter(k => !blocked.has(k));\n          }\n        },\n        propTraps\n      )\n    );\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc =\n      !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc\n          ? (objects[objectIndex][propName] = desc.value)\n          : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc\n        ? (otherObject[propName] = desc.value)\n        : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(\n      () =>\n        (Comp = comp()) &&\n        untrack(() => {\n          if (false);\n          if (!ctx) return Comp(props);\n          const c = sharedConfig.context;\n          setHydrateContext(ctx);\n          const r = Comp(props);\n          setHydrateContext(c);\n          return r;\n        })\n    );\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => (comp = () => mod.default)), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => (keyed ? a === b : !a === !b)\n  });\n  return createMemo(\n    () => {\n      const c = condition();\n      if (c) {\n        const child = props.children;\n        const fn = typeof child === \"function\" && child.length > 0;\n        return fn\n          ? untrack(() =>\n              child(\n                keyed\n                  ? c\n                  : () => {\n                      if (!untrack(condition)) throw narrowedError(\"Show\");\n                      return props.when;\n                    }\n              )\n            )\n          : child;\n      }\n      return props.fallback;\n    },\n    undefined,\n    undefined\n  );\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) =>\n    a[0] === b[0] && (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(\n      () => {\n        let conds = conditions();\n        if (!Array.isArray(conds)) conds = [conds];\n        for (let i = 0; i < conds.length; i++) {\n          const c = conds[i].when;\n          if (c) {\n            keyed = !!conds[i].keyed;\n            return [i, c, conds[i]];\n          }\n        }\n        return [-1];\n      },\n      undefined,\n      {\n        equals\n      }\n    );\n  return createMemo(\n    () => {\n      const [index, when, cond] = evalConditions();\n      if (index < 0) return props.fallback;\n      const c = cond.children;\n      const fn = typeof c === \"function\" && c.length > 0;\n      return fn\n        ? untrack(() =>\n            c(\n              keyed\n                ? when\n                : () => {\n                    if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n                    return cond.when;\n                  }\n            )\n          )\n        : c;\n    },\n    undefined,\n    undefined\n  );\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  if (sharedConfig.context && sharedConfig.load)\n    err = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count);\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(\n    () => {\n      let e;\n      if ((e = errored())) {\n        const f = props.fallback;\n        return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n      }\n      return catchError(() => props.children, setErrored);\n    },\n    undefined,\n    undefined\n  );\n}\n\nconst suspenseListEquals = (a, b) =>\n  a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(\n    prev => {\n      const reveal = props.revealOrder,\n        tail = props.tail,\n        { showContent = true, showFallback = true } = show ? show() : {},\n        reg = registry(),\n        reverse = reveal === \"backwards\";\n      if (reveal === \"together\") {\n        const all = reg.every(inFallback => !inFallback());\n        const res = reg.map(() => ({\n          showContent: all && showContent,\n          showFallback\n        }));\n        res.inFallback = !all;\n        return res;\n      }\n      let stop = false;\n      let inFallback = prev.inFallback;\n      const res = [];\n      for (let i = 0, len = reg.length; i < len; i++) {\n        const n = reverse ? len - i - 1 : i,\n          s = reg[n]();\n        if (!stop && !s) {\n          res[n] = {\n            showContent,\n            showFallback\n          };\n        } else {\n          const next = !stop;\n          if (next) inFallback = true;\n          res[n] = {\n            showContent: next,\n            showFallback: !tail || (next && tail === \"collapsed\") ? showFallback : false\n          };\n          stop = true;\n        }\n      }\n      if (!stop) inFallback = false;\n      res.inFallback = inFallback;\n      return res;\n    },\n    {\n      inFallback: false\n    }\n  );\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref && (typeof ref !== \"object\" || ref.status !== \"success\")) p = ref;\n    if (p && p !== \"$$f\") {\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(() => {\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      }).catch(err => {\n        if (err || sharedConfig.done) {\n          err && (error = err);\n          return set();\n        }\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return (flicker = undefined);\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            { showContent = true, showFallback = true } = show ? show() : {};\n          if ((!inFallback || (p && p !== \"$$f\")) && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport {\n  $DEVCOMP,\n  $PROXY,\n  $TRACK,\n  DEV,\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  batch,\n  cancelCallback,\n  catchError,\n  children,\n  createComponent,\n  createComputed,\n  createContext,\n  createDeferred,\n  createEffect,\n  createMemo,\n  createReaction,\n  createRenderEffect,\n  createResource,\n  createRoot,\n  createSelector,\n  createSignal,\n  createUniqueId,\n  enableExternalSource,\n  enableHydration,\n  enableScheduling,\n  equalFn,\n  from,\n  getListener,\n  getOwner,\n  indexArray,\n  lazy,\n  mapArray,\n  mergeProps,\n  observable,\n  on,\n  onCleanup,\n  onError,\n  onMount,\n  requestCallback,\n  resetErrorBoundaries,\n  runWithOwner,\n  sharedConfig,\n  splitProps,\n  startTransition,\n  untrack,\n  useContext,\n  useTransition\n};\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createSignal } from 'solid-js';\nexport const [activeElement, setActiveElement] = createSignal(null);\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nexport function Text(props) {\n    return <text {...props}></text>;\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nexport function View(props) {\n    return <node {...props}></node>;\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Texture Usage Tracker for Usage Based Texture Garbage Collection\n */\nexport class TextureUsageTracker {\n    releaseCallback;\n    constructor(releaseCallback) {\n        this.releaseCallback = releaseCallback;\n    }\n}\n//# sourceMappingURL=TextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { TextureUsageTracker } from './TextureUsageTracker.js';\n/**\n * Usage-based Texture Garbage Collection Registry\n */\nexport class ManualCountTextureUsageTracker extends TextureUsageTracker {\n    textureMap = new Map();\n    zeroReferenceTextureSet = new Set();\n    options;\n    constructor(releaseCallback, options) {\n        super(releaseCallback);\n        this.options = {\n            textureCleanupIntervalMs: options.textureCleanupIntervalMs ?? 10000,\n            textureCleanupAgeThreadholdMs: options.textureCleanupAgeThreadholdMs ?? 60000,\n        };\n        // Periodically check for textures that are no longer referenced by any\n        // Nodes and notify RendererMain to release them.\n        setInterval(() => {\n            const now = Date.now();\n            const thresholdMs = this.options.textureCleanupAgeThreadholdMs;\n            for (const textureRefInfo of this.zeroReferenceTextureSet) {\n                if (now - textureRefInfo.lastUpdate > thresholdMs) {\n                    this.releaseCallback(textureRefInfo.id);\n                    this.textureMap.delete(textureRefInfo.id);\n                    this.zeroReferenceTextureSet.delete(textureRefInfo);\n                }\n            }\n        }, this.options.textureCleanupIntervalMs);\n    }\n    registerTexture(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        if (!this.textureMap.has(textureId)) {\n            const textureRefInfo = {\n                id: textureId,\n                nodeRefCount: 0,\n                lastUpdate: Date.now(),\n            };\n            this.textureMap.set(textureId, textureRefInfo);\n            this.zeroReferenceTextureSet.add(textureRefInfo);\n        }\n    }\n    incrementTextureRefCount(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        let textureRefInfo = this.textureMap.get(textureId);\n        if (!textureRefInfo) {\n            // Texture has not been registered yet, so register it now.\n            // This may happen if the TextureRef was cleaned up from the registry\n            // but was still alive in memory and eventually re-used.\n            this.registerTexture(texture);\n            textureRefInfo = this.textureMap.get(textureId);\n        }\n        assertTruthy(textureRefInfo, 'Texture must have been registered');\n        if (texture.txType === 'SubTexture') {\n            // If this is a SubTexture, then increment the reference count of the\n            // parent texture as well.\n            this.incrementTextureRefCount(texture.props.texture);\n        }\n        textureRefInfo.nodeRefCount++;\n        textureRefInfo.lastUpdate = Date.now();\n        if (this.zeroReferenceTextureSet.has(textureRefInfo)) {\n            this.zeroReferenceTextureSet.delete(textureRefInfo);\n        }\n    }\n    decrementTextureRefCount(texture) {\n        const textureId = texture.options?.id;\n        assertTruthy(textureId, 'Texture must have an id to be registered');\n        const textureRefInfo = this.textureMap.get(textureId);\n        assertTruthy(textureRefInfo, 'Texture must have been registered');\n        textureRefInfo.nodeRefCount--;\n        textureRefInfo.lastUpdate = Date.now();\n        if (textureRefInfo.nodeRefCount === 0) {\n            this.zeroReferenceTextureSet.add(textureRefInfo);\n        }\n        if (texture.txType === 'SubTexture') {\n            // If this is a SubTexture, then decrement the reference count of the\n            // parent texture as well.\n            this.decrementTextureRefCount(texture.props.texture);\n        }\n    }\n}\n//# sourceMappingURL=ManualCountTextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { TextureUsageTracker } from './TextureUsageTracker.js';\nexport class FinalizationRegistryTextureUsageTracker extends TextureUsageTracker {\n    registry;\n    constructor(releaseCallback) {\n        super(releaseCallback);\n        this.registry = new FinalizationRegistry(releaseCallback);\n    }\n    registerTexture(texture) {\n        assertTruthy(texture.options?.id, 'Texture must have an ID to be registered');\n        this.registry.register(texture, texture.options?.id);\n    }\n    incrementTextureRefCount() {\n        // No-op for FinalizationRegistry\n    }\n    decrementTextureRefCount() {\n        // No-op for FinalizationRegistry\n    }\n}\n//# sourceMappingURL=FinalizationRegistryTextureUsageTracker.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ManualCountTextureUsageTracker, } from './texture-usage-trackers/ManualCountTextureUsageTracker.js';\nimport { FinalizationRegistryTextureUsageTracker } from './texture-usage-trackers/FinalizationRegistryTextureUsageTracker.js';\n/**\n * The Renderer Main API\n *\n * @remarks\n * This is the primary class used to configure and operate the Renderer.\n *\n * It is used to create and destroy Nodes, as well as Texture and Shader\n * references.\n *\n * Example:\n * ```ts\n * import { RendererMain, MainRenderDriver } from '@lightningjs/renderer';\n *\n * // Initialize the Renderer\n * const renderer = new RendererMain(\n *   {\n *     appWidth: 1920,\n *     appHeight: 1080\n *   },\n *   'app',\n *   new MainRenderDriver(),\n * );\n * ```\n */\nexport class RendererMain {\n    root = null;\n    driver;\n    canvas;\n    settings;\n    nodes = new Map();\n    nextTextureId = 1;\n    /**\n     * Texture Usage Tracker for Usage Based Texture Garbage Collection\n     *\n     * @remarks\n     * For internal use only. DO NOT ACCESS.\n     */\n    textureTracker;\n    /**\n     * Constructs a new Renderer instance\n     *\n     * @param settings Renderer settings\n     * @param target Element ID or HTMLElement to insert the canvas into\n     * @param driver Core Driver to use\n     */\n    constructor(settings, target, driver) {\n        const resolvedSettings = {\n            appWidth: settings.appWidth || 1920,\n            appHeight: settings.appHeight || 1080,\n            deviceLogicalPixelRatio: settings.deviceLogicalPixelRatio || 1,\n            devicePhysicalPixelRatio: settings.devicePhysicalPixelRatio || window.devicePixelRatio,\n            clearColor: settings.clearColor ?? 0x00000000,\n            coreExtensionModule: settings.coreExtensionModule || null,\n            experimental_FinalizationRegistryTextureUsageTracker: settings.experimental_FinalizationRegistryTextureUsageTracker ?? false,\n            textureCleanupOptions: settings.textureCleanupOptions || {},\n        };\n        this.settings = resolvedSettings;\n        const { appWidth, appHeight, deviceLogicalPixelRatio, devicePhysicalPixelRatio, } = resolvedSettings;\n        const releaseCallback = (textureId) => {\n            this.driver.releaseTexture(textureId);\n        };\n        const useFinalizationRegistryTracker = resolvedSettings.experimental_FinalizationRegistryTextureUsageTracker &&\n            typeof FinalizationRegistry === 'function';\n        this.textureTracker = useFinalizationRegistryTracker\n            ? new FinalizationRegistryTextureUsageTracker(releaseCallback)\n            : new ManualCountTextureUsageTracker(releaseCallback, this.settings.textureCleanupOptions);\n        const deviceLogicalWidth = appWidth * deviceLogicalPixelRatio;\n        const deviceLogicalHeight = appHeight * deviceLogicalPixelRatio;\n        this.driver = driver;\n        const canvas = document.createElement('canvas');\n        this.canvas = canvas;\n        canvas.width = deviceLogicalWidth * devicePhysicalPixelRatio;\n        canvas.height = deviceLogicalHeight * devicePhysicalPixelRatio;\n        canvas.style.width = `${deviceLogicalWidth}px`;\n        canvas.style.height = `${deviceLogicalHeight}px`;\n        let targetEl;\n        if (typeof target === 'string') {\n            targetEl = document.getElementById(target);\n        }\n        else {\n            targetEl = target;\n        }\n        if (!targetEl) {\n            throw new Error('Could not find target element');\n        }\n        // Hook up the driver's callbacks\n        driver.onCreateNode = (node) => {\n            this.nodes.set(node.id, node);\n        };\n        driver.onBeforeDestroyNode = (node) => {\n            this.nodes.delete(node.id);\n        };\n        targetEl.appendChild(canvas);\n    }\n    /**\n     * Initialize the renderer\n     *\n     * @remarks\n     * This method must be called and resolved asyncronously before any other\n     * methods are called.\n     */\n    async init() {\n        await this.driver.init(this, this.settings, this.canvas);\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n        this.root = this.driver.getRootNode();\n    }\n    /**\n     * Create a new scene graph node\n     *\n     * @remarks\n     * A node is the main graphical building block of the Renderer scene graph. It\n     * can be a container for other nodes, or it can be a leaf node that renders a\n     * solid color, gradient, image, or specific texture, using a specific shader.\n     *\n     * To create a text node, see {@link createTextNode}.\n     *\n     * See {@link INode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createNode(props) {\n        return this.driver.createNode(this.resolveNodeDefaults(props));\n    }\n    /**\n     * Create a new scene graph text node\n     *\n     * @remarks\n     * A text node is the second graphical building block of the Renderer scene\n     * graph. It renders text using a specific text renderer that is automatically\n     * chosen based on the font requested and what type of fonts are installed\n     * into an app via a CoreExtension.\n     *\n     * See {@link ITextNode} for more details.\n     *\n     * @param props\n     * @returns\n     */\n    createTextNode(props) {\n        return this.driver.createTextNode({\n            ...this.resolveNodeDefaults(props),\n            text: props.text ?? '',\n            textRendererOverride: props.textRendererOverride ?? null,\n            fontSize: props.fontSize ?? 16,\n            fontFamily: props.fontFamily ?? 'sans-serif',\n            fontStyle: props.fontStyle ?? 'normal',\n            fontWeight: props.fontWeight ?? 'normal',\n            fontStretch: props.fontStretch ?? 'normal',\n            textAlign: props.textAlign ?? 'left',\n            contain: props.contain ?? 'none',\n            scrollable: props.scrollable ?? false,\n            scrollY: props.scrollY ?? 0,\n            offsetY: props.offsetY ?? 0,\n            letterSpacing: props.letterSpacing ?? 0,\n            debug: props.debug ?? {},\n        });\n    }\n    /**\n     * Resolves the default property values for a Node\n     *\n     * @remarks\n     * This method is used internally by the RendererMain to resolve the default\n     * property values for a Node. It is exposed publicly so that it can be used\n     * by Core Driver implementations.\n     *\n     * @param props\n     * @returns\n     */\n    resolveNodeDefaults(props) {\n        const color = props.color ?? 0xffffffff;\n        const colorTl = props.colorTl ?? props.colorTop ?? props.colorLeft ?? color;\n        const colorTr = props.colorTr ?? props.colorTop ?? props.colorRight ?? color;\n        const colorBl = props.colorBl ?? props.colorBottom ?? props.colorLeft ?? color;\n        const colorBr = props.colorBr ?? props.colorBottom ?? props.colorRight ?? color;\n        return {\n            x: props.x ?? 0,\n            y: props.y ?? 0,\n            width: props.width ?? 0,\n            height: props.height ?? 0,\n            alpha: props.alpha ?? 1,\n            clipping: props.clipping ?? false,\n            color,\n            colorTop: props.colorTop ?? color,\n            colorBottom: props.colorBottom ?? color,\n            colorLeft: props.colorLeft ?? color,\n            colorRight: props.colorRight ?? color,\n            colorBl,\n            colorBr,\n            colorTl,\n            colorTr,\n            zIndex: props.zIndex ?? 0,\n            zIndexLocked: props.zIndexLocked ?? 0,\n            parent: props.parent ?? null,\n            texture: props.texture ?? null,\n            shader: props.shader ?? null,\n            // Since setting the `src` will trigger a texture load, we need to set it after\n            // we set the texture. Otherwise, problems happen.\n            src: props.src ?? '',\n            scale: props.scale ?? 1,\n            mount: props.mount ?? 0,\n            mountX: props.mountX ?? props.mount ?? 0,\n            mountY: props.mountY ?? props.mount ?? 0,\n            pivot: props.pivot ?? 0.5,\n            pivotX: props.pivotX ?? props.pivot ?? 0.5,\n            pivotY: props.pivotY ?? props.pivot ?? 0.5,\n            rotation: props.rotation ?? 0,\n        };\n    }\n    /**\n     * Destroy a node\n     *\n     * @remarks\n     * This method destroys a node but does not destroy its children.\n     *\n     * @param node\n     * @returns\n     */\n    destroyNode(node) {\n        return this.driver.destroyNode(node);\n    }\n    /**\n     * Create a new texture reference\n     *\n     * @remarks\n     * This method creates a new reference to a texture. The texture is not\n     * loaded until it is used on a node.\n     *\n     * It can be assigned to a node's `texture` property, or it can be used\n     * when creating a SubTexture.\n     *\n     * @param textureType\n     * @param props\n     * @param options\n     * @returns\n     */\n    createTexture(textureType, props, options) {\n        const id = this.nextTextureId++;\n        const desc = {\n            descType: 'texture',\n            txType: textureType,\n            props,\n            options: {\n                ...options,\n                // This ID is used to identify the texture in the CoreTextureManager's\n                // ID Texture Map cache.\n                id,\n            },\n        };\n        this.textureTracker.registerTexture(desc);\n        return desc;\n    }\n    /**\n     * Create a new shader reference\n     *\n     * @remarks\n     * This method creates a new reference to a shader. The shader is not\n     * loaded until it is used on a Node.\n     *\n     * It can be assigned to a Node's `shader` property.\n     *\n     * @param shaderType\n     * @param props\n     * @returns\n     */\n    createShader(shaderType, props) {\n        return {\n            descType: 'shader',\n            shType: shaderType,\n            props: props,\n        };\n    }\n    /**\n     * Get a Node by its ID\n     *\n     * @param id\n     * @returns\n     */\n    getNodeById(id) {\n        return this.nodes.get(id) || null;\n    }\n    toggleFreeze() {\n        throw new Error('Not implemented');\n    }\n    advanceFrame() {\n        throw new Error('Not implemented');\n    }\n    /**\n     * Re-render the current frame without advancing any running animations.\n     *\n     * @remarks\n     * Any state changes will be reflected in the re-rendered frame. Useful for\n     * debugging.\n     *\n     * May not do anything if the render loop is running on a separate worker.\n     */\n    rerender() {\n        throw new Error('Not implemented');\n    }\n}\n//# sourceMappingURL=RendererMain.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { CoreAnimation } from '../../core/animations/CoreAnimation.js';\nimport { CoreAnimationController } from '../../core/animations/CoreAnimationController.js';\nimport { CoreNode } from '../../core/CoreNode.js';\nimport { EventEmitter } from '../../common/EventEmitter.js';\nlet nextId = 1;\nexport function getNewId() {\n    return nextId++;\n}\nexport class MainOnlyNode extends EventEmitter {\n    rendererMain;\n    stage;\n    id;\n    coreNode;\n    // Prop stores\n    _children = [];\n    _src = '';\n    _parent = null;\n    _texture = null;\n    _shader = null;\n    constructor(props, rendererMain, stage, coreNode) {\n        super();\n        this.rendererMain = rendererMain;\n        this.stage = stage;\n        this.id = coreNode?.id ?? getNewId();\n        this.coreNode =\n            coreNode ||\n                new CoreNode(this.stage, {\n                    id: this.id,\n                    x: props.x,\n                    y: props.y,\n                    width: props.width,\n                    height: props.height,\n                    alpha: props.alpha,\n                    clipping: props.clipping,\n                    color: props.color,\n                    colorTop: props.colorTop,\n                    colorBottom: props.colorBottom,\n                    colorLeft: props.colorLeft,\n                    colorRight: props.colorRight,\n                    colorTl: props.colorTl,\n                    colorTr: props.colorTr,\n                    colorBl: props.colorBl,\n                    colorBr: props.colorBr,\n                    zIndex: props.zIndex,\n                    zIndexLocked: props.zIndexLocked,\n                    scale: props.scale,\n                    mountX: props.mountX,\n                    mountY: props.mountY,\n                    mount: props.mount,\n                    pivot: props.pivot,\n                    pivotX: props.pivotX,\n                    pivotY: props.pivotY,\n                    rotation: props.rotation,\n                    parent: null,\n                    shader: null,\n                    shaderProps: null,\n                    texture: null,\n                    textureOptions: null,\n                });\n        // Forward texture events\n        this.coreNode.on('txLoaded', this.onTextureLoaded);\n        this.coreNode.on('txFailed', this.onTextureFailed);\n        // Assign properties to this object\n        this.parent = props.parent;\n        this.shader = props.shader;\n        this.texture = props.texture;\n        this.src = props.src;\n    }\n    get x() {\n        return this.coreNode.x;\n    }\n    set x(value) {\n        this.coreNode.x = value;\n    }\n    get y() {\n        return this.coreNode.y;\n    }\n    set y(value) {\n        this.coreNode.y = value;\n    }\n    get worldX() {\n        return this.coreNode.worldX;\n    }\n    get worldY() {\n        return this.coreNode.worldY;\n    }\n    get width() {\n        return this.coreNode.width;\n    }\n    set width(value) {\n        this.coreNode.width = value;\n    }\n    get height() {\n        return this.coreNode.height;\n    }\n    set height(value) {\n        this.coreNode.height = value;\n    }\n    get alpha() {\n        return this.coreNode.alpha;\n    }\n    set alpha(value) {\n        this.coreNode.alpha = value;\n    }\n    get clipping() {\n        return this.coreNode.clipping;\n    }\n    set clipping(value) {\n        this.coreNode.clipping = value;\n    }\n    get color() {\n        return this.coreNode.color;\n    }\n    set color(value) {\n        this.coreNode.color = value;\n    }\n    get colorTop() {\n        return this.coreNode.colorTop;\n    }\n    set colorTop(value) {\n        this.coreNode.colorTop = value;\n    }\n    get colorBottom() {\n        return this.coreNode.colorBottom;\n    }\n    set colorBottom(value) {\n        this.coreNode.colorBottom = value;\n    }\n    get colorLeft() {\n        return this.coreNode.colorLeft;\n    }\n    set colorLeft(value) {\n        this.coreNode.colorLeft = value;\n    }\n    get colorRight() {\n        return this.coreNode.colorRight;\n    }\n    set colorRight(value) {\n        this.coreNode.colorRight = value;\n    }\n    get colorTl() {\n        return this.coreNode.colorTl;\n    }\n    set colorTl(value) {\n        this.coreNode.colorTl = value;\n    }\n    get colorTr() {\n        return this.coreNode.colorTr;\n    }\n    set colorTr(value) {\n        this.coreNode.colorTr = value;\n    }\n    get colorBl() {\n        return this.coreNode.colorBl;\n    }\n    set colorBl(value) {\n        this.coreNode.colorBl = value;\n    }\n    get colorBr() {\n        return this.coreNode.colorBr;\n    }\n    set colorBr(value) {\n        this.coreNode.colorBr = value;\n    }\n    get scale() {\n        return this.coreNode.scale;\n    }\n    set scale(value) {\n        this.coreNode.scale = value;\n    }\n    get mount() {\n        return this.coreNode.mount;\n    }\n    set mount(value) {\n        this.coreNode.mount = value;\n    }\n    get mountX() {\n        return this.coreNode.mountX;\n    }\n    set mountX(value) {\n        this.coreNode.mountX = value;\n    }\n    get mountY() {\n        return this.coreNode.mountY;\n    }\n    set mountY(value) {\n        this.coreNode.mountY = value;\n    }\n    get pivot() {\n        return this.coreNode.pivot;\n    }\n    set pivot(value) {\n        this.coreNode.pivot = value;\n    }\n    get pivotX() {\n        return this.coreNode.pivotX;\n    }\n    set pivotX(value) {\n        this.coreNode.pivotX = value;\n    }\n    get pivotY() {\n        return this.coreNode.pivotY;\n    }\n    set pivotY(value) {\n        this.coreNode.pivotY = value;\n    }\n    get rotation() {\n        return this.coreNode.rotation;\n    }\n    set rotation(value) {\n        this.coreNode.rotation = value;\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(newParent) {\n        const oldParent = this._parent;\n        this._parent = newParent;\n        this.coreNode.parent = newParent?.coreNode ?? null;\n        if (oldParent) {\n            const index = oldParent.children.indexOf(this);\n            assertTruthy(index !== -1, \"MainOnlyNode.parent: Node not found in old parent's children!\");\n            oldParent.children.splice(index, 1);\n        }\n        if (newParent) {\n            newParent.children.push(this);\n        }\n    }\n    get children() {\n        return this._children;\n    }\n    get zIndex() {\n        return this.coreNode.zIndex;\n    }\n    set zIndex(value) {\n        this.coreNode.zIndex = value;\n    }\n    get zIndexLocked() {\n        return this.coreNode.zIndexLocked;\n    }\n    set zIndexLocked(value) {\n        this.coreNode.zIndexLocked = value;\n    }\n    get src() {\n        return this._src;\n    }\n    set src(imageUrl) {\n        if (this._src === imageUrl) {\n            return;\n        }\n        this._src = imageUrl;\n        if (!imageUrl) {\n            this.texture = null;\n            return;\n        }\n        this.texture = this.rendererMain.createTexture('ImageTexture', {\n            src: imageUrl,\n        });\n    }\n    //#region Texture\n    get texture() {\n        return this._texture;\n    }\n    set texture(texture) {\n        if (this._texture === texture) {\n            return;\n        }\n        if (this._texture) {\n            this.rendererMain.textureTracker.decrementTextureRefCount(this._texture);\n        }\n        if (texture) {\n            this.rendererMain.textureTracker.incrementTextureRefCount(texture);\n        }\n        this._texture = texture;\n        if (texture) {\n            this.coreNode.loadTexture(texture.txType, texture.props, texture.options);\n        }\n        else {\n            this.coreNode.unloadTexture();\n        }\n    }\n    onTextureLoaded = (target, dimensions) => {\n        this.emit('txLoaded', dimensions);\n    };\n    onTextureFailed = (target, error) => {\n        this.emit('txFailed', error);\n    };\n    //#endregion Texture\n    get shader() {\n        return this._shader;\n    }\n    set shader(shader) {\n        if (this._shader === shader) {\n            return;\n        }\n        this._shader = shader;\n        if (shader) {\n            this.coreNode.loadShader(shader.shType, shader.props);\n        }\n    }\n    destroy() {\n        this.emit('beforeDestroy', {});\n        this.parent = null;\n        this.texture = null;\n        this.emit('afterDestroy', {});\n        this.removeAllListeners();\n    }\n    flush() {\n        // No-op\n    }\n    animate(props, settings) {\n        const animation = new CoreAnimation(this.coreNode, props, settings);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-call\n        const controller = new CoreAnimationController(this.stage.animationManager, animation);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return controller;\n    }\n}\n//# sourceMappingURL=MainOnlyNode.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { MainRenderDriver, RendererMain, ThreadXRenderDriver, } from '@lightningjs/renderer';\nexport let renderer;\nexport let createShader;\nconst defaultOptions = {\n    appWidth: 1920,\n    appHeight: 1080,\n    deviceLogicalPixelRatio: 0.6666667,\n    devicePhysicalPixelRatio: 1,\n    rootId: 'app',\n    threadXCoreWorkerUrl: undefined,\n};\nexport function startLightningRenderer(options = {}) {\n    let driver;\n    const resolvedOptions = {\n        ...defaultOptions,\n        ...options,\n    };\n    if (!resolvedOptions.threadXCoreWorkerUrl) {\n        driver = new MainRenderDriver();\n    }\n    else {\n        driver = new ThreadXRenderDriver({\n            coreWorkerUrl: resolvedOptions.threadXCoreWorkerUrl,\n        });\n    }\n    renderer = new RendererMain({\n        appWidth: resolvedOptions.appWidth,\n        appHeight: resolvedOptions.appHeight,\n        deviceLogicalPixelRatio: resolvedOptions.deviceLogicalPixelRatio,\n        devicePhysicalPixelRatio: resolvedOptions.devicePhysicalPixelRatio,\n        clearColor: resolvedOptions.clearColor,\n        coreExtensionModule: resolvedOptions.coreExtensionModule,\n    }, resolvedOptions.rootId, driver);\n    createShader = renderer.createShader.bind(renderer);\n    return renderer;\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { MainOnlyNode, getNewId } from './MainOnlyNode.js';\nimport { CoreTextNode } from '../../core/CoreTextNode.js';\nexport class MainOnlyTextNode extends MainOnlyNode {\n    constructor(props, rendererMain, stage) {\n        super(props, rendererMain, stage, new CoreTextNode(stage, {\n            id: getNewId(),\n            x: props.x,\n            y: props.y,\n            width: props.width,\n            height: props.height,\n            alpha: props.alpha,\n            clipping: props.clipping,\n            color: props.color,\n            colorTop: props.colorTop,\n            colorBottom: props.colorBottom,\n            colorLeft: props.colorLeft,\n            colorRight: props.colorRight,\n            colorTl: props.colorTl,\n            colorTr: props.colorTr,\n            colorBl: props.colorBl,\n            colorBr: props.colorBr,\n            zIndex: props.zIndex,\n            zIndexLocked: props.zIndexLocked,\n            scale: props.scale,\n            mountX: props.mountX,\n            mountY: props.mountY,\n            mount: props.mount,\n            pivot: props.pivot,\n            pivotX: props.pivotX,\n            pivotY: props.pivotY,\n            rotation: props.rotation,\n            // Text properties\n            text: props.text,\n            fontSize: props.fontSize,\n            fontFamily: props.fontFamily,\n            fontWeight: props.fontWeight,\n            fontStretch: props.fontStretch,\n            fontStyle: props.fontStyle,\n            contain: props.contain,\n            scrollable: props.scrollable,\n            letterSpacing: props.letterSpacing,\n            textAlign: props.textAlign,\n            scrollY: props.scrollY,\n            offsetY: props.offsetY,\n            textRendererOverride: props.textRendererOverride,\n            debug: props.debug,\n            // These properties will get set appropriately in the base MainOnlyNode class\n            parent: null,\n            texture: null,\n            textureOptions: null,\n            shader: null,\n            shaderProps: null,\n        }));\n        this.coreNode.on('textLoaded', this.onTextLoaded);\n        this.coreNode.on('textFailed', this.onTextFailed);\n    }\n    onTextLoaded = (target, dimensions) => {\n        this.emit('textLoaded', dimensions);\n    };\n    onTextFailed = (target, error) => {\n        this.emit('textFailed', error);\n    };\n    get text() {\n        return this.coreNode.text;\n    }\n    set text(value) {\n        this.coreNode.text = value;\n    }\n    get textRendererOverride() {\n        return this.coreNode.textRendererOverride;\n    }\n    set textRendererOverride(value) {\n        this.coreNode.textRendererOverride = value;\n    }\n    get fontSize() {\n        return this.coreNode.fontSize;\n    }\n    set fontSize(value) {\n        this.coreNode.fontSize = value;\n    }\n    get fontFamily() {\n        return this.coreNode.fontFamily;\n    }\n    set fontFamily(value) {\n        this.coreNode.fontFamily = value;\n    }\n    get fontWeight() {\n        return this.coreNode.fontWeight;\n    }\n    set fontWeight(value) {\n        this.coreNode.fontWeight = value;\n    }\n    get fontStretch() {\n        return this.coreNode.fontStretch;\n    }\n    set fontStretch(value) {\n        this.coreNode.fontStretch = value;\n    }\n    get fontStyle() {\n        return this.coreNode.fontStyle;\n    }\n    set fontStyle(value) {\n        this.coreNode.fontStyle = value;\n    }\n    get textAlign() {\n        return this.coreNode.textAlign;\n    }\n    set textAlign(value) {\n        this.coreNode.textAlign = value;\n    }\n    get contain() {\n        return this.coreNode.contain;\n    }\n    set contain(value) {\n        this.coreNode.contain = value;\n    }\n    get scrollable() {\n        return this.coreNode.scrollable;\n    }\n    set scrollable(value) {\n        this.coreNode.scrollable = value;\n    }\n    get scrollY() {\n        return this.coreNode.scrollY;\n    }\n    set scrollY(value) {\n        this.coreNode.scrollY = value;\n    }\n    get offsetY() {\n        return this.coreNode.offsetY;\n    }\n    set offsetY(value) {\n        this.coreNode.offsetY = value;\n    }\n    get letterSpacing() {\n        return this.coreNode.letterSpacing;\n    }\n    set letterSpacing(value) {\n        this.coreNode.letterSpacing = value;\n    }\n    get debug() {\n        return this.coreNode.debug;\n    }\n    set debug(value) {\n        this.coreNode.debug = value;\n    }\n}\n//# sourceMappingURL=MainOnlyTextNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { MainOnlyNode } from './MainOnlyNode.js';\nimport { Stage } from '../../core/Stage.js';\nimport { MainOnlyTextNode } from './MainOnlyTextNode.js';\nimport { loadCoreExtension } from '../utils.js';\nexport class MainRenderDriver {\n    root = null;\n    stage = null;\n    rendererMain = null;\n    async init(rendererMain, rendererSettings, canvas) {\n        this.stage = new Stage({\n            rootId: 1,\n            appWidth: rendererSettings.appWidth,\n            appHeight: rendererSettings.appHeight,\n            deviceLogicalPixelRatio: rendererSettings.deviceLogicalPixelRatio,\n            devicePhysicalPixelRatio: rendererSettings.devicePhysicalPixelRatio,\n            clearColor: rendererSettings.clearColor,\n            canvas,\n            debug: {\n                monitorTextureCache: false,\n            },\n        });\n        this.rendererMain = rendererMain;\n        assertTruthy(this.stage.root);\n        const node = new MainOnlyNode(rendererMain.resolveNodeDefaults({}), this.rendererMain, this.stage, this.stage.root);\n        this.root = node;\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        // Load the Core Extension Module if one was specified.\n        if (rendererSettings.coreExtensionModule) {\n            await loadCoreExtension(rendererSettings.coreExtensionModule, this.stage);\n        }\n    }\n    createNode(props) {\n        assertTruthy(this.rendererMain);\n        assertTruthy(this.stage);\n        const node = new MainOnlyNode(props, this.rendererMain, this.stage);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        return node;\n    }\n    createTextNode(props) {\n        assertTruthy(this.rendererMain);\n        assertTruthy(this.stage);\n        const node = new MainOnlyTextNode(props, this.rendererMain, this.stage);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.onCreateNode(node);\n        return node;\n    }\n    // TODO: Remove?\n    destroyNode(node) {\n        node.destroy();\n    }\n    releaseTexture(id) {\n        const { stage } = this;\n        assertTruthy(stage);\n        stage.txManager.removeTextureIdFromCache(id);\n    }\n    getRootNode() {\n        assertTruthy(this.root);\n        return this.root;\n    }\n    onCreateNode(node) {\n        throw new Error('Method not implemented.');\n    }\n    onBeforeDestroyNode(node) {\n        throw new Error('Method not implemented.');\n    }\n}\n//# sourceMappingURL=MainRenderDriver.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nexport class ThreadXMainAnimationController {\n    node;\n    id;\n    stoppedPromise = null;\n    /**\n     * If this is null, then the animation is in a finished / stopped state.\n     */\n    stoppedResolve = null;\n    constructor(node, id) {\n        this.node = node;\n        this.id = id;\n        this.onAnimationFinished = this.onAnimationFinished.bind(this);\n        this.state = 'stopped';\n    }\n    state;\n    start() {\n        if (this.stoppedResolve === null) {\n            this.makeStoppedPromise();\n            this.node.on('animationFinished', this.onAnimationFinished);\n        }\n        this.state = 'running';\n        this.node.emit('startAnimation', { id: this.id });\n        return this;\n    }\n    stop() {\n        this.node.emit('stopAnimation', { id: this.id });\n        this.node.off('animationFinished', this.onAnimationFinished);\n        if (this.stoppedResolve !== null) {\n            this.stoppedResolve();\n            this.stoppedResolve = null;\n        }\n        this.state = 'stopped';\n        return this;\n    }\n    pause() {\n        this.node.emit('pauseAnimation', { id: this.id });\n        this.state = 'paused';\n        return this;\n    }\n    restore() {\n        return this;\n    }\n    waitUntilStopped() {\n        this.makeStoppedPromise();\n        const promise = this.stoppedPromise;\n        assertTruthy(promise);\n        return promise;\n    }\n    onAnimationFinished(target, { id, loop }) {\n        if (id === this.id) {\n            this.node.off('animationFinished', this.onAnimationFinished);\n            this.stoppedResolve?.();\n            this.stoppedResolve = null;\n            this.state = 'stopped';\n        }\n    }\n    makeStoppedPromise() {\n        if (this.stoppedResolve === null) {\n            this.stoppedPromise = new Promise((resolve) => {\n                this.stoppedResolve = resolve;\n            });\n        }\n    }\n}\n//# sourceMappingURL=ThreadXMainAnimationController.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { assertTruthy } from '../../utils.js';\nimport { SharedNode } from './SharedNode.js';\nimport { ThreadXMainAnimationController } from './ThreadXMainAnimationController.js';\nexport class ThreadXMainNode extends SharedNode {\n    rendererMain;\n    nextAnimationId = 1;\n    _parent = null;\n    _children = [];\n    _texture = null;\n    _shader = null;\n    _src = '';\n    /**\n     * FinalizationRegistry for animation controllers. When an animation\n     * controller is garbage collected, we let the render worker know so that\n     * it can remove it's corresponding animation controler from it's stored\n     * Set. This should ultimately allow the render worker to garbage collect\n     * it's animation controller. The animation itself independent from the animation\n     * controller, so it will continue to run until it's finished regardless of\n     * whether or not the animation controller is garbage collected.\n     */\n    animationRegistry = new FinalizationRegistry((id) => {\n        this.emit('destroyAnimation', { id });\n    });\n    constructor(rendererMain, sharedNodeStruct, extendedCurProps) {\n        super(sharedNodeStruct, extendedCurProps);\n        this.rendererMain = rendererMain;\n    }\n    get texture() {\n        return this._texture;\n    }\n    set texture(texture) {\n        if (this._texture === texture) {\n            return;\n        }\n        if (this._texture) {\n            this.rendererMain.textureTracker.decrementTextureRefCount(this._texture);\n        }\n        if (texture) {\n            this.rendererMain.textureTracker.incrementTextureRefCount(texture);\n        }\n        this._texture = texture;\n        if (texture) {\n            this.emit('loadTexture', texture);\n        }\n        else {\n            this.emit('unloadTexture', {});\n        }\n    }\n    get shader() {\n        return this._shader;\n    }\n    set shader(shader) {\n        if (this._shader === shader) {\n            return;\n        }\n        this._shader = shader;\n        if (shader) {\n            this.emit('loadShader', shader);\n        }\n    }\n    animate(props, settings) {\n        const id = this.nextAnimationId++;\n        this.emit('createAnimation', { id, props, settings });\n        const controller = new ThreadXMainAnimationController(this, id);\n        this.animationRegistry.register(controller, id);\n        return controller;\n    }\n    get src() {\n        return this._src;\n    }\n    set src(imageUrl) {\n        if (this._src === imageUrl) {\n            return;\n        }\n        this._src = imageUrl;\n        if (!imageUrl) {\n            this.texture = null;\n            return;\n        }\n        this.texture = this.rendererMain.createTexture('ImageTexture', {\n            src: imageUrl,\n        });\n    }\n    //#region Parent/Child Props\n    get parent() {\n        return this._parent;\n    }\n    set parent(newParent) {\n        const oldParent = this._parent;\n        this._parent = newParent;\n        this.parentId = newParent?.id ?? 0;\n        if (oldParent) {\n            const index = oldParent.children.indexOf(this);\n            assertTruthy(index !== -1, \"ThreadXMainNode.parent: Node not found in old parent's children!\");\n            oldParent.children.splice(index, 1);\n        }\n        if (newParent) {\n            newParent.children.push(this);\n        }\n    }\n    get children() {\n        return this._children;\n    }\n    //#endregion Parent/Child Props\n    get props() {\n        return this.curProps;\n    }\n    destroy() {\n        super.destroy();\n        this.texture = null;\n    }\n}\n//# sourceMappingURL=ThreadXMainNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ThreadXMainNode } from './ThreadXMainNode.js';\nexport class ThreadXMainTextNode extends ThreadXMainNode {\n    _debug = {};\n    constructor(rendererMain, sharedNodeStruct) {\n        super(rendererMain, sharedNodeStruct, {\n            text: sharedNodeStruct.text,\n            textRendererOverride: sharedNodeStruct.textRendererOverride,\n            fontSize: sharedNodeStruct.fontSize,\n            fontFamily: sharedNodeStruct.fontFamily,\n            fontStretch: sharedNodeStruct.fontStretch,\n            fontStyle: sharedNodeStruct.fontStyle,\n            fontWeight: sharedNodeStruct.fontWeight,\n            contain: sharedNodeStruct.contain,\n            letterSpacing: sharedNodeStruct.letterSpacing,\n            offsetY: sharedNodeStruct.offsetY,\n            scrollable: sharedNodeStruct.scrollable,\n            scrollY: sharedNodeStruct.scrollY,\n            textAlign: sharedNodeStruct.textAlign,\n        });\n    }\n    get debug() {\n        return this._debug;\n    }\n    set debug(debug) {\n        if (this._debug === debug) {\n            return;\n        }\n        this._debug = debug;\n        this.emit('debug', debug);\n    }\n}\n//# sourceMappingURL=ThreadXMainTextNode.js.map","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast Cable Communications Management, LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { ThreadX, BufferStruct } from '@lightningjs/threadx';\nimport { NodeStruct } from './NodeStruct.js';\nimport { ThreadXMainNode } from './ThreadXMainNode.js';\nimport { assertTruthy } from '../../utils.js';\nimport { TextNodeStruct, } from './TextNodeStruct.js';\nimport { ThreadXMainTextNode } from './ThreadXMainTextNode.js';\nexport class ThreadXRenderDriver {\n    settings;\n    threadx;\n    rendererMain = null;\n    root = null;\n    constructor(settings) {\n        this.settings = settings;\n        this.threadx = ThreadX.init({\n            workerId: 1,\n            workerName: 'main',\n            sharedObjectFactory: (buffer) => {\n                const typeId = BufferStruct.extractTypeId(buffer);\n                const rendererMain = this.rendererMain;\n                assertTruthy(rendererMain);\n                if (typeId === NodeStruct.typeId) {\n                    const nodeStruct = new NodeStruct(buffer);\n                    return nodeStruct.lock(() => {\n                        return new ThreadXMainNode(rendererMain, nodeStruct);\n                    });\n                }\n                else if (typeId === TextNodeStruct.typeId) {\n                    const nodeStruct = new TextNodeStruct(buffer);\n                    return nodeStruct.lock(() => {\n                        return new ThreadXMainTextNode(rendererMain, nodeStruct);\n                    });\n                }\n                return null;\n            },\n        });\n        this.threadx.registerWorker('renderer', new Worker(this.settings.coreWorkerUrl, { type: 'module' }));\n    }\n    async init(rendererMain, rendererSettings, canvas) {\n        this.rendererMain = rendererMain;\n        const offscreenCanvas = canvas.transferControlToOffscreen();\n        const rootNodeId = (await this.threadx.sendMessageAsync('renderer', {\n            type: 'init',\n            canvas: offscreenCanvas,\n            appWidth: rendererSettings.appWidth,\n            appHeight: rendererSettings.appHeight,\n            deviceLogicalPixelRatio: rendererSettings.deviceLogicalPixelRatio,\n            devicePhysicalPixelRatio: rendererSettings.devicePhysicalPixelRatio,\n            clearColor: rendererSettings.clearColor,\n            coreExtensionModule: rendererSettings.coreExtensionModule,\n        }, [offscreenCanvas]));\n        // The Render worker shares the root node with this worker during the\n        // 'init' call above. That call returns the ID of the root node, which\n        // we can use to retrieve it from the shared object store.\n        const rootNode = this.threadx.getSharedObjectById(rootNodeId);\n        assertTruthy(rootNode instanceof ThreadXMainNode, 'Unexpected root node type');\n        this.root = rootNode;\n    }\n    getRootNode() {\n        assertTruthy(this.root, 'Driver not initialized');\n        return this.root;\n    }\n    createNode(props) {\n        const rendererMain = this.rendererMain;\n        assertTruthy(rendererMain);\n        const bufferStruct = new NodeStruct();\n        Object.assign(bufferStruct, {\n            // Node specific properties\n            x: props.x,\n            y: props.y,\n            width: props.width,\n            height: props.height,\n            parentId: props.parent ? props.parent.id : 0,\n            clipping: props.clipping,\n            color: props.color,\n            colorTop: props.colorTop,\n            colorRight: props.colorBottom,\n            colorBottom: props.colorBottom,\n            colorLeft: props.colorLeft,\n            colorTl: props.colorTl,\n            colorTr: props.colorTr,\n            colorBl: props.colorBl,\n            colorBr: props.colorBr,\n            alpha: props.alpha,\n            zIndex: props.zIndex,\n            zIndexLocked: props.zIndexLocked,\n            scale: props.scale,\n            mount: props.mount,\n            mountX: props.mountX,\n            mountY: props.mountY,\n            pivot: props.pivot,\n            pivotX: props.pivotX,\n            pivotY: props.pivotY,\n            rotation: props.rotation,\n        });\n        const node = new ThreadXMainNode(rendererMain, bufferStruct);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.threadx.shareObjects('renderer', [node]).catch(console.error);\n        node.shader = props.shader ?? null;\n        node.texture = props.texture ?? null;\n        node.src = props.src ?? '';\n        this.onCreateNode(node);\n        return node;\n    }\n    createTextNode(props) {\n        const rendererMain = this.rendererMain;\n        assertTruthy(rendererMain);\n        const bufferStruct = new TextNodeStruct();\n        Object.assign(bufferStruct, {\n            // Node specific properties\n            x: props.x,\n            y: props.y,\n            width: props.width,\n            height: props.height,\n            parentId: props.parent ? props.parent.id : 0,\n            clipping: props.clipping,\n            color: props.color,\n            colorTop: props.colorTop,\n            colorRight: props.colorBottom,\n            colorBottom: props.colorBottom,\n            colorLeft: props.colorLeft,\n            colorTl: props.colorTl,\n            colorTr: props.colorTr,\n            colorBl: props.colorBl,\n            colorBr: props.colorBr,\n            alpha: props.alpha,\n            zIndex: props.zIndex,\n            zIndexLocked: props.zIndexLocked,\n            scale: props.scale,\n            mount: props.mount,\n            mountX: props.mountX,\n            mountY: props.mountY,\n            pivot: props.pivot,\n            pivotX: props.pivotX,\n            pivotY: props.pivotY,\n            rotation: props.rotation,\n            // Text specific properties\n            text: props.text,\n            textRendererOverride: props.textRendererOverride,\n            fontSize: props.fontSize,\n            fontFamily: props.fontFamily,\n            fontWeight: props.fontWeight,\n            fontStretch: props.fontStretch,\n            fontStyle: props.fontStyle,\n            contain: props.contain,\n            letterSpacing: props.letterSpacing,\n            offsetY: props.offsetY,\n            textAlign: props.textAlign,\n            scrollable: props.scrollable,\n            scrollY: props.scrollY,\n        });\n        const node = new ThreadXMainTextNode(rendererMain, bufferStruct);\n        node.once('beforeDestroy', this.onBeforeDestroyNode.bind(this, node));\n        this.threadx.shareObjects('renderer', [node]).catch(console.error);\n        node.shader = props.shader ?? null;\n        node.texture = props.texture ?? null;\n        node.src = props.src ?? '';\n        node.debug = props.debug ?? {};\n        this.onCreateNode(node);\n        return node;\n    }\n    // TODO: Remove?\n    destroyNode(node) {\n        node.destroy();\n    }\n    releaseTexture(textureDescId) {\n        this.threadx.sendMessage('renderer', {\n            type: 'releaseTexture',\n            textureDescId,\n        });\n    }\n    onCreateNode(node) {\n        return;\n    }\n    onBeforeDestroyNode(node) {\n        return;\n    }\n}\n//# sourceMappingURL=ThreadXRenderDriver.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n/**\n * Children class\n */\nexport default class Children extends Array {\n    _parent;\n    constructor(node) {\n        super();\n        this._parent = node;\n    }\n    get selected() {\n        // For selected Elements should always be an ElementNode\n        return this[this._parent.selected || 0];\n    }\n    get firstChild() {\n        return this[0];\n    }\n    // Commented out because it's not used anywhere and implementation seems wrong\n    // get previousSibling() {\n    //   if (this._parent) {\n    //     const children = this._parent.children;\n    //     const index = children.indexOf(this) - 1;\n    //     if (index >= 0) {\n    //       return children[index];\n    //     }\n    //   }\n    //   return null;\n    // }\n    // get nextSibling() {\n    //   if (this._parent) {\n    //     const children = this._parent.children;\n    //     const index = children.indexOf(this) + 1;\n    //     if (index < children.length) {\n    //       return children[index];\n    //     }\n    //   }\n    //   return null;\n    // }\n    insert(node, beforeNode) {\n        if (beforeNode) {\n            const index = this.indexOf(beforeNode);\n            this.splice(index, 0, node);\n        }\n        else {\n            this.push(node);\n        }\n        node.parent = this._parent;\n        this._parent._isDirty = true;\n    }\n    remove(node) {\n        const nodeIndexToRemove = this.indexOf(node);\n        if (nodeIndexToRemove >= 0) {\n            this.splice(nodeIndexToRemove, 1);\n        }\n    }\n}\n","/*\n * If not stated otherwise in this file or this component's LICENSE file the\n * following copyright and licenses apply:\n *\n * Copyright 2023 Comcast\n *\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const config = {\n    debug: false,\n    animationSettings: {\n        duration: 250,\n        easing: 'ease-in-out',\n    },\n    fontSettings: {\n        fontFamily: 'Ubuntu',\n        fontSize: 100,\n    },\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { config } from '../config.js';\nconst isDev = import.meta?.env?.MODE === 'development';\nexport function log(msg, node, ...args) {\n    if (isDev) {\n        if (config.debug || (isObject(node) && node.debug)) {\n            console.log(msg, node, ...args);\n        }\n    }\n}\nexport function isFunc(item) {\n    return typeof item === 'function';\n}\nexport function isObject(item) {\n    return typeof item === 'object';\n}\nexport function isArray(item) {\n    return Array.isArray(item);\n}\nexport function isString(item) {\n    return typeof item === 'string';\n}\nexport function isNumber(item) {\n    return typeof item === 'number';\n}\nexport function isInteger(item) {\n    return Number.isInteger(item);\n}\nexport function keyExists(obj, keys) {\n    for (const key of keys) {\n        if (key in obj) {\n            return true;\n        }\n    }\n    return false;\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { isArray, isString } from '../utils.js';\nexport default class States extends Array {\n    _node;\n    constructor(node, initialState = []) {\n        if (isArray(initialState)) {\n            super(...initialState);\n        }\n        else if (isString(initialState)) {\n            super(initialState);\n        }\n        else {\n            super(...Object.entries(initialState)\n                .filter(([_key, value]) => value)\n                .map(([key]) => key));\n        }\n        this._node = node;\n        return this;\n    }\n    has(state) {\n        return this.indexOf(state) >= 0;\n    }\n    is(state) {\n        return this.indexOf(state) >= 0;\n    }\n    add(state) {\n        this.push(state);\n        this._node._stateChanged();\n    }\n    toggle(state) {\n        if (this.has(state)) {\n            this.remove(state);\n        }\n        else {\n            this.add(state);\n        }\n    }\n    remove(state) {\n        const stateIndexToRemove = this.indexOf(state);\n        if (stateIndexToRemove >= 0) {\n            this.splice(stateIndexToRemove, 1);\n            this._node._stateChanged();\n        }\n    }\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { renderer, createShader } from '../renderer/index.js';\nimport Children from './children.js';\nimport States from './states.js';\nimport calculateFlex from '../flex.js';\nimport { log, isArray, isNumber, isFunc, keyExists } from '../utils.js';\nimport { config } from '../../config.js';\nimport { setActiveElement } from '../activeElement.js';\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nconst { animationSettings: defaultAnimationSettings } = config;\nfunction convertEffectsToShader(styleEffects) {\n    const effects = [];\n    for (const [type, props] of Object.entries(styleEffects)) {\n        effects.push({ type, props });\n    }\n    return createShader('DynamicShader', { effects: effects });\n}\nfunction borderAccessor(direction = '') {\n    return {\n        set(value) {\n            // Format: width || { width, color }\n            if (isNumber(value)) {\n                value = { width: value, color: 0x000000ff };\n            }\n            this.effects = {\n                ...(this.effects || {}),\n                ...{ [`border${direction}`]: value },\n            };\n            this[`_border${direction}`] = value;\n        },\n        get() {\n            return this[`_border${direction}`];\n        },\n    };\n}\nconst LightningRendererNumberProps = [\n    'alpha',\n    'color',\n    'colorTop',\n    'colorRight',\n    'colorLeft',\n    'colorBottom',\n    'colorTl',\n    'colorTr',\n    'colorBl',\n    'colorBr',\n    'height',\n    'fontSize',\n    'lineHeight',\n    'mount',\n    'mountX',\n    'mountY',\n    'pivot',\n    'pivotX',\n    'pivotY',\n    'rotation',\n    'scale',\n    'width',\n    'worldX',\n    'worldY',\n    'x',\n    'y',\n    'zIndex',\n    'zIndexLocked',\n];\nconst LightningRendererNonAnimatingProps = [\n    'clipping',\n    'contain',\n    'fontFamily',\n    'src',\n    'text',\n    'textAlign',\n    'texture',\n];\n// eslint-disable-next-line @typescript-eslint/no-unsafe-declaration-merging\nexport class ElementNode extends Object {\n    name;\n    lng = null;\n    selected = null;\n    rendered;\n    _undoStates;\n    _renderProps;\n    _effects;\n    _parent = null;\n    _shader;\n    _style;\n    _states;\n    _animationSettings;\n    _updateLayoutOn;\n    _width;\n    _height;\n    _color;\n    _borderRadius;\n    _border;\n    _borderLeft;\n    _borderRight;\n    _borderTop;\n    _borderBottom;\n    _animate; // Public but uses _ prefix\n    _autosized; // Public but uses _ prefix\n    _isDirty; // Public but uses _ prefix\n    /**\n     * Managed by dom-inspector\n     */\n    _dom; // Public but uses _ prefix\n    children;\n    constructor(name) {\n        super();\n        this.name = name;\n        this.rendered = false;\n        this.autofocus = false;\n        this._renderProps = { x: 0, y: 0 };\n        this.children = new Children(this);\n        for (const key of LightningRendererNumberProps) {\n            Object.defineProperty(this, key, {\n                get() {\n                    return this[`_${key}`] || (this.lng && this.lng[key]);\n                },\n                set(v) {\n                    this[`_${key}`] = v;\n                    this._sendToLightningAnimatable(key, v);\n                },\n            });\n        }\n        for (const key of LightningRendererNonAnimatingProps) {\n            Object.defineProperty(this, key, {\n                get() {\n                    return this[`_${key}`] || (this.lng && this.lng[key]);\n                },\n                set(v) {\n                    this[`_${key}`] = v;\n                    this._sendToLightning(key, v);\n                },\n            });\n        }\n        // Add Border Helpers\n        Object.defineProperties(this, {\n            borderRadius: {\n                set(radius) {\n                    this._borderRadius = radius;\n                    this.effects = {\n                        ...(this.effects || {}),\n                        ...{ radius: { radius } },\n                    };\n                },\n                get() {\n                    return this._borderRadius;\n                },\n            },\n            border: borderAccessor(),\n            borderLeft: borderAccessor('Left'),\n            borderRight: borderAccessor('Right'),\n            borderTop: borderAccessor('Top'),\n            borderBottom: borderAccessor('Bottom'),\n        });\n        Object.defineProperties(this, {\n            linearGradient: {\n                set(props = {}) {\n                    this._linearGradient = props;\n                    this.effects = {\n                        ...(this.effects || {}),\n                        ...{ linearGradient: props },\n                    };\n                },\n                get() {\n                    return this._linearGradient;\n                },\n            },\n        });\n    }\n    get effects() {\n        return this._effects;\n    }\n    set effects(v) {\n        this._effects = v;\n        this.shader = convertEffectsToShader(v);\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(p) {\n        this._parent = p;\n        if (this.rendered && this.lng) {\n            this.lng.parent = p?.lng ?? null;\n        }\n    }\n    get shader() {\n        return this._shader;\n    }\n    set shader(v) {\n        if (isArray(v)) {\n            this._shader = createShader(...v);\n        }\n        else {\n            this._shader = v;\n        }\n        this._sendToLightning('shader', this._shader);\n    }\n    _sendToLightningAnimatable(name, value) {\n        if (this.rendered && this.lng) {\n            if (isArray(value)) {\n                return this.createAnimation({ [name]: value[0] }, value[1]).start();\n            }\n            if (this._animate) {\n                return this.createAnimation({ [name]: value }).start();\n            }\n            this.lng[name] = value;\n        }\n        else {\n            // Need to render before animating\n            if (isArray(value)) {\n                value = value[0];\n            }\n            this._renderProps[name] = value;\n        }\n    }\n    _sendToLightning(name, value) {\n        if (this.rendered && this.lng) {\n            this.lng[name] = value;\n        }\n        else {\n            this._renderProps[name] = value;\n        }\n    }\n    createAnimation(props, animationSettings) {\n        assertTruthy(this.lng, 'Node must be rendered before animating');\n        return this.lng.animate(props, animationSettings || this.animationSettings);\n    }\n    setFocus() {\n        if (this.rendered) {\n            setActiveElement(this);\n        }\n        else {\n            this.autofocus = true;\n        }\n    }\n    isTextNode() {\n        return this.name === 'text';\n    }\n    _resizeOnTextLoad() {\n        assertTruthy(this.lng);\n        this.lng.once('textLoaded', (_node, size) => {\n            this.width = size.width;\n            this.height = size.height;\n            assertTruthy(this.parent);\n            this.parent.updateLayout(this, size);\n        });\n    }\n    getText() {\n        return this.children.map((c) => c.text).join('');\n    }\n    destroy() {\n        this.lng && renderer.destroyNode(this.lng);\n    }\n    set style(value) {\n        // Keys set in JSX are more important\n        for (let key in value) {\n            if (key === 'animate') {\n                key = '_animate';\n            }\n            if (!this[key]) {\n                this[key] = value[key];\n            }\n        }\n        this._style = value;\n    }\n    get style() {\n        return this._style;\n    }\n    get hasChildren() {\n        return this.children.length > 0;\n    }\n    set states(v) {\n        this._states = new States(this, v);\n        if (this.rendered) {\n            this._stateChanged();\n        }\n    }\n    get states() {\n        this._states = this._states || new States(this);\n        return this._states;\n    }\n    get animationSettings() {\n        return this._animationSettings || defaultAnimationSettings;\n    }\n    set animationSettings(v) {\n        this._animationSettings = v;\n    }\n    get updateLayoutOn() {\n        return this._updateLayoutOn;\n    }\n    set updateLayoutOn(v) {\n        this._updateLayoutOn = v;\n        queueMicrotask(() => this.updateLayout());\n    }\n    _applyZIndexToChildren() {\n        const zIndex = this.zIndex;\n        assertTruthy(zIndex);\n        const zIndexIsInteger = zIndex >= 1 && parseInt('' + zIndex) === zIndex;\n        const decimalSeparator = zIndexIsInteger ? '.' : '';\n        this.children.forEach((c, i) => {\n            if (!c.zIndex || c.zIndex < 1) {\n                c.zIndex = parseFloat(`${zIndex}${decimalSeparator}${i + 1}`);\n            }\n        });\n    }\n    updateLayout(child, dimensions) {\n        if (this.display === 'flex' && this.hasChildren) {\n            log('Layout: ', this);\n            calculateFlex(this);\n        }\n        isFunc(this.onLayout) && this.onLayout(child, dimensions);\n    }\n    _stateChanged() {\n        log('State Changed: ', this, this.states);\n        if (this.forwardStates) {\n            // apply states to children first\n            const states = this.states.slice();\n            this.children.forEach((c) => (c.states = states));\n        }\n        if (this._undoStates ||\n            (this.style && keyExists(this.style, this.states))) {\n            this._undoStates = this._undoStates || {};\n            let stylesToUndo = {};\n            for (const [state, undoStyles] of Object.entries(this._undoStates)) {\n                // if state is no longer in the states undo it\n                if (!this.states.includes(state)) {\n                    stylesToUndo = {\n                        ...stylesToUndo,\n                        ...undoStyles,\n                    };\n                }\n            }\n            const newStyles = this.states.reduce((acc, state) => {\n                const styles = this.style[state];\n                if (styles) {\n                    acc = {\n                        ...acc,\n                        ...styles,\n                    };\n                    // get current values to undo state\n                    if (this._undoStates && !this._undoStates[state]) {\n                        this._undoStates[state] = {};\n                        Object.keys(styles).forEach((key) => {\n                            assertTruthy(this._undoStates);\n                            this._undoStates[state][key] = this[key];\n                        });\n                    }\n                }\n                return acc;\n            }, {});\n            Object.assign(this, { ...stylesToUndo, ...newStyles });\n        }\n    }\n    render() {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        const node = this;\n        const parent = this.parent;\n        // Parent is dirty whenever a node is inserted after initial render\n        if (parent?._isDirty) {\n            parent.updateLayout();\n            parent._applyZIndexToChildren();\n            parent._isDirty = false;\n        }\n        node.updateLayout();\n        if (this.states.length) {\n            this._stateChanged();\n        }\n        let props = node._renderProps;\n        if (parent?.lng) {\n            props.parent = parent.lng;\n        }\n        if (node.isTextNode()) {\n            props = {\n                ...config.fontSettings,\n                ...props,\n                text: node.getText(),\n            };\n            log('Rendering: ', this, props);\n            node.lng = renderer.createTextNode(props);\n            if (isFunc(node.onLoad)) {\n                node.lng.once('textLoaded', node.onLoad);\n            }\n            if (!node.width || !node.height) {\n                node._autosized = true;\n                node._resizeOnTextLoad();\n            }\n        }\n        else {\n            // If its not an image or texture apply some defaults\n            if (!(props.src || props.texture)) {\n                assertTruthy(parent);\n                // Set width and height to parent less offset\n                if (isNaN(props.width)) {\n                    props.width = (parent.width || 0) - props.x;\n                    node._width = props.width;\n                }\n                if (isNaN(props.height)) {\n                    props.height = (parent.height || 0) - props.y;\n                    node._height = props.height;\n                }\n                if (!props.color) {\n                    //Default color to transparent - If you later set a src, you'll need\n                    // to set color '#ffffffff'\n                    node._color = props.color = 0x00000000;\n                }\n            }\n            log('Rendering: ', this, props);\n            node.hasChildren && node._applyZIndexToChildren();\n            node.lng = renderer.createNode(props);\n            if (node.onLoad) {\n                node.lng.once('txLoaded', node.onLoad);\n            }\n        }\n        node.rendered = true;\n        node.autofocus && node.setFocus();\n        // clean up after first render;\n        delete this._renderProps;\n    }\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nexport default function (node) {\n    const children = node.children;\n    const direction = node.flexDirection || 'row';\n    const dimension = direction === 'row' ? 'width' : 'height';\n    const marginOne = direction === 'row' ? 'marginLeft' : 'marginTop';\n    const marginTwo = direction === 'row' ? 'marginRight' : 'marginBottom';\n    const prop = direction === 'row' ? 'x' : 'y';\n    const containerSize = node[dimension] || 0;\n    const itemSize = children.reduce((prev, c) => prev + (c[dimension] || 0), 0);\n    const gap = node.gap || 0;\n    const numChildren = children.length;\n    const justify = node.justifyContent || 'flexStart';\n    if (justify === 'flexStart') {\n        let start = 0;\n        children.forEach((c) => {\n            c[prop] = start + (c[marginOne] || 0);\n            start +=\n                (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n        });\n    }\n    if (justify === 'flexEnd') {\n        let start = containerSize;\n        for (let i = numChildren - 1; i >= 0; i--) {\n            const c = children[i];\n            assertTruthy(c);\n            c[prop] = start - (c[dimension] || 0) - (c[marginTwo] || 0);\n            start -=\n                (c[dimension] || 0) + gap + (c[marginOne] || 0) + (c[marginTwo] || 0);\n        }\n    }\n    if (justify === 'center') {\n        let start = (containerSize - (itemSize + gap * (numChildren - 1))) / 2;\n        children.forEach((c) => {\n            c[prop] = start;\n            start += (c[dimension] || 0) + gap;\n        });\n    }\n    if (justify === 'spaceBetween') {\n        const toPad = (containerSize - itemSize) / (numChildren - 1);\n        let start = 0;\n        children.forEach((c) => {\n            c[prop] = start;\n            start += (c[dimension] || 0) + toPad;\n        });\n    }\n    if (justify === 'spaceEvenly') {\n        const toPad = (containerSize - itemSize) / (numChildren + 1);\n        let start = toPad;\n        children.forEach((c) => {\n            c[prop] = start;\n            start += (c[dimension] || 0) + toPad;\n        });\n    }\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createEffect } from \"solid-js\";\nimport { startLightningRenderer } from '../core/renderer/index.js';\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\nimport { ElementNode } from \"../core/node/index.js\";\nfunction renderTopDown(node) {\n    if (node.name === 'TextNode') {\n        return;\n    }\n    assertTruthy(node instanceof ElementNode);\n    node.render();\n    node.children.forEach(c => renderTopDown(c));\n}\nexport const Canvas = (props) => {\n    const renderer = startLightningRenderer(props.options);\n    const init = renderer.init();\n    let root;\n    createEffect(() => {\n        init.then(() => {\n            assertTruthy(root);\n            root.lng = renderer.root;\n            root.children.forEach(renderTopDown);\n        }).catch(console.error);\n    });\n    return (<canvas ref={root} zIndex={0.1}>\n      {props.children}\n    </canvas>);\n};\n","import {\n  createRoot,\n  createRenderEffect,\n  mergeProps,\n  createMemo,\n  createComponent,\n  untrack\n} from \"solid-js\";\n\nfunction createRenderer$1({\n  createElement,\n  createTextNode,\n  isTextNode,\n  replaceText,\n  insertNode,\n  removeNode,\n  setProperty,\n  getParentNode,\n  getFirstChild,\n  getNextSibling\n}) {\n  function insert(parent, accessor, marker, initial) {\n    if (marker !== undefined && !initial) initial = [];\n    if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n    createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n  }\n  function insertExpression(parent, value, current, marker, unwrapArray) {\n    while (typeof current === \"function\") current = current();\n    if (value === current) return current;\n    const t = typeof value,\n      multi = marker !== undefined;\n    if (t === \"string\" || t === \"number\") {\n      if (t === \"number\") value = value.toString();\n      if (multi) {\n        let node = current[0];\n        if (node && isTextNode(node)) {\n          replaceText(node, value);\n        } else node = createTextNode(value);\n        current = cleanChildren(parent, current, marker, node);\n      } else {\n        if (current !== \"\" && typeof current === \"string\") {\n          replaceText(getFirstChild(parent), (current = value));\n        } else {\n          cleanChildren(parent, current, marker, createTextNode(value));\n          current = value;\n        }\n      }\n    } else if (value == null || t === \"boolean\") {\n      current = cleanChildren(parent, current, marker);\n    } else if (t === \"function\") {\n      createRenderEffect(() => {\n        let v = value();\n        while (typeof v === \"function\") v = v();\n        current = insertExpression(parent, v, current, marker);\n      });\n      return () => current;\n    } else if (Array.isArray(value)) {\n      const array = [];\n      if (normalizeIncomingArray(array, value, unwrapArray)) {\n        createRenderEffect(\n          () => (current = insertExpression(parent, array, current, marker, true))\n        );\n        return () => current;\n      }\n      if (array.length === 0) {\n        const replacement = cleanChildren(parent, current, marker);\n        if (multi) return (current = replacement);\n      } else {\n        if (Array.isArray(current)) {\n          if (current.length === 0) {\n            appendNodes(parent, array, marker);\n          } else reconcileArrays(parent, current, array);\n        } else if (current == null || current === \"\") {\n          appendNodes(parent, array);\n        } else {\n          reconcileArrays(parent, (multi && current) || [getFirstChild(parent)], array);\n        }\n      }\n      current = array;\n    } else {\n      if (Array.isArray(current)) {\n        if (multi) return (current = cleanChildren(parent, current, marker, value));\n        cleanChildren(parent, current, null, value);\n      } else if (current == null || current === \"\" || !getFirstChild(parent)) {\n        insertNode(parent, value);\n      } else replaceNode(parent, value, getFirstChild(parent));\n      current = value;\n    }\n    return current;\n  }\n  function normalizeIncomingArray(normalized, array, unwrap) {\n    let dynamic = false;\n    for (let i = 0, len = array.length; i < len; i++) {\n      let item = array[i],\n        t;\n      if (item == null || item === true || item === false);\n      else if (Array.isArray(item)) {\n        dynamic = normalizeIncomingArray(normalized, item) || dynamic;\n      } else if ((t = typeof item) === \"string\" || t === \"number\") {\n        normalized.push(createTextNode(item));\n      } else if (t === \"function\") {\n        if (unwrap) {\n          while (typeof item === \"function\") item = item();\n          dynamic =\n            normalizeIncomingArray(normalized, Array.isArray(item) ? item : [item]) || dynamic;\n        } else {\n          normalized.push(item);\n          dynamic = true;\n        }\n      } else normalized.push(item);\n    }\n    return dynamic;\n  }\n  function reconcileArrays(parentNode, a, b) {\n    let bLength = b.length,\n      aEnd = a.length,\n      bEnd = bLength,\n      aStart = 0,\n      bStart = 0,\n      after = getNextSibling(a[aEnd - 1]),\n      map = null;\n    while (aStart < aEnd || bStart < bEnd) {\n      if (a[aStart] === b[bStart]) {\n        aStart++;\n        bStart++;\n        continue;\n      }\n      while (a[aEnd - 1] === b[bEnd - 1]) {\n        aEnd--;\n        bEnd--;\n      }\n      if (aEnd === aStart) {\n        const node =\n          bEnd < bLength ? (bStart ? getNextSibling(b[bStart - 1]) : b[bEnd - bStart]) : after;\n        while (bStart < bEnd) insertNode(parentNode, b[bStart++], node);\n      } else if (bEnd === bStart) {\n        while (aStart < aEnd) {\n          if (!map || !map.has(a[aStart])) removeNode(parentNode, a[aStart]);\n          aStart++;\n        }\n      } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n        const node = getNextSibling(a[--aEnd]);\n        insertNode(parentNode, b[bStart++], getNextSibling(a[aStart++]));\n        insertNode(parentNode, b[--bEnd], node);\n        a[aEnd] = b[bEnd];\n      } else {\n        if (!map) {\n          map = new Map();\n          let i = bStart;\n          while (i < bEnd) map.set(b[i], i++);\n        }\n        const index = map.get(a[aStart]);\n        if (index != null) {\n          if (bStart < index && index < bEnd) {\n            let i = aStart,\n              sequence = 1,\n              t;\n            while (++i < aEnd && i < bEnd) {\n              if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n              sequence++;\n            }\n            if (sequence > index - bStart) {\n              const node = a[aStart];\n              while (bStart < index) insertNode(parentNode, b[bStart++], node);\n            } else replaceNode(parentNode, b[bStart++], a[aStart++]);\n          } else aStart++;\n        } else removeNode(parentNode, a[aStart++]);\n      }\n    }\n  }\n  function cleanChildren(parent, current, marker, replacement) {\n    if (marker === undefined) {\n      let removed;\n      while ((removed = getFirstChild(parent))) removeNode(parent, removed);\n      replacement && insertNode(parent, replacement);\n      return \"\";\n    }\n    const node = replacement || createTextNode(\"\");\n    if (current.length) {\n      let inserted = false;\n      for (let i = current.length - 1; i >= 0; i--) {\n        const el = current[i];\n        if (node !== el) {\n          const isParent = getParentNode(el) === parent;\n          if (!inserted && !i)\n            isParent ? replaceNode(parent, node, el) : insertNode(parent, node, marker);\n          else isParent && removeNode(parent, el);\n        } else inserted = true;\n      }\n    } else insertNode(parent, node, marker);\n    return [node];\n  }\n  function appendNodes(parent, array, marker) {\n    for (let i = 0, len = array.length; i < len; i++) insertNode(parent, array[i], marker);\n  }\n  function replaceNode(parent, newNode, oldNode) {\n    insertNode(parent, newNode, oldNode);\n    removeNode(parent, oldNode);\n  }\n  function spreadExpression(node, props, prevProps = {}, skipChildren) {\n    props || (props = {});\n    if (!skipChildren) {\n      createRenderEffect(\n        () => (prevProps.children = insertExpression(node, props.children, prevProps.children))\n      );\n    }\n    createRenderEffect(() => props.ref && props.ref(node));\n    createRenderEffect(() => {\n      for (const prop in props) {\n        if (prop === \"children\" || prop === \"ref\") continue;\n        const value = props[prop];\n        if (value === prevProps[prop]) continue;\n        setProperty(node, prop, value, prevProps[prop]);\n        prevProps[prop] = value;\n      }\n    });\n    return prevProps;\n  }\n  return {\n    render(code, element) {\n      let disposer;\n      createRoot(dispose => {\n        disposer = dispose;\n        insert(element, code());\n      });\n      return disposer;\n    },\n    insert,\n    spread(node, accessor, skipChildren) {\n      if (typeof accessor === \"function\") {\n        createRenderEffect(current => spreadExpression(node, accessor(), current, skipChildren));\n      } else spreadExpression(node, accessor, undefined, skipChildren);\n    },\n    createElement,\n    createTextNode,\n    insertNode,\n    setProp(node, name, value, prev) {\n      setProperty(node, name, value, prev);\n      return value;\n    },\n    mergeProps,\n    effect: createRenderEffect,\n    memo: createMemo,\n    createComponent,\n    use(fn, element, arg) {\n      return untrack(() => fn(element, arg));\n    }\n  };\n}\n\nfunction createRenderer(options) {\n  const renderer = createRenderer$1(options);\n  renderer.mergeProps = mergeProps;\n  return renderer;\n}\n\nexport { createRenderer };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nimport { renderer } from '../renderer/index.js';\nimport { createEffect } from 'solid-js';\nimport { log } from '../utils.js';\nimport { ElementNode } from '../node/index.js';\nexport default {\n    createElement(name) {\n        const node = new ElementNode(name);\n        renderer.root && createEffect(() => node.render());\n        return node;\n    },\n    createTextNode(text) {\n        // A text node is just a string - not the <text> node\n        return { name: 'TextNode', text, parent: null };\n    },\n    replaceText(node, value) {\n        log('Replace Text: ', node, value);\n        node.text = value;\n        const parent = node.parent;\n        assertTruthy(parent);\n        parent._autosized && parent._resizeOnTextLoad();\n        parent.text = parent.getText();\n    },\n    setProperty(node, name, value = true) {\n        if (name === 'animate') {\n            node._animate = value;\n            return;\n        }\n        // @ts-expect-error Assignment type is difficult to do here. Fix later.\n        node[name] = value;\n    },\n    insertNode(parent, node, anchor) {\n        log('INSERT: ', parent, node, anchor);\n        if (parent) {\n            parent.children.insert(node, anchor);\n            if (node.name === 'TextNode') {\n                if (!parent.isTextNode()) {\n                    console.error('Inserting text outside of a <Text> node is not allowed');\n                }\n                parent._autosized && parent._resizeOnTextLoad();\n                parent.text = parent.getText();\n            }\n        }\n    },\n    isTextNode(node) {\n        return node.isTextNode();\n    },\n    removeNode(parent, node) {\n        log('REMOVE: ', parent, node);\n        parent.children.remove(node);\n        if (node instanceof ElementNode) {\n            node.destroy();\n        }\n    },\n    getParentNode(node) {\n        return node.parent ?? undefined;\n    },\n    getFirstChild(node) {\n        return node.children[0];\n    },\n    getNextSibling(node) {\n        if (node.parent) {\n            const children = node.parent.children || [];\n            const index = children.indexOf(node) + 1;\n            if (index < children.length) {\n                return children[index];\n            }\n        }\n        return undefined;\n    },\n};\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport universalLightning from './lightning.js';\nimport { renderer } from '../renderer/index.js';\nimport { assertTruthy } from '@lightningjs/renderer/utils';\nconst injectCSS = (css) => {\n    const el = document.createElement('style');\n    el.innerText = css;\n    document.head.appendChild(el);\n};\nconst updateRootStyleFromCanvas = function (canvas) {\n    const bcr = canvas.getBoundingClientRect();\n    const p = renderer.settings.deviceLogicalPixelRatio || 1; //0.6666667;\n    const root = document.getElementById('linspector');\n    root.style.left = canvas.offsetLeft + 'px';\n    root.style.top = canvas.offsetTop + 'px';\n    root.style.width = Math.ceil(bcr.width / p) + 'px';\n    root.style.height = Math.ceil(bcr.height / p) + 'px';\n    root.style.transformOrigin = '0 0 0';\n    root.style.transform = 'scale(' + p + ',' + p + ')';\n};\nexport function attachInspector() {\n    injectCSS(`\n    #linspector {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      zIndex: 5;\n      overflow: hidden;\n    }\n    div.lnode {\n      position: absolute;\n      display: inline-block;\n    }\n    .ltext {\n      visibility: hidden;\n    }\n  `);\n    setTimeout(function () {\n        updateRootStyleFromCanvas(renderer.canvas);\n    }, 1000);\n}\nexport default {\n    ...universalLightning,\n    createElement(name) {\n        const dom = document.createElement('div');\n        if (name === 'canvas') {\n            dom.id = 'linspector';\n            assertTruthy(renderer.canvas.parentNode);\n            renderer.canvas.parentNode.appendChild(dom);\n        }\n        else {\n            dom.classList.add('lnode');\n        }\n        if (name === 'text') {\n            dom.classList.add('ltext');\n        }\n        const node = universalLightning.createElement(name);\n        if (name !== 'canvas') {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const origRender = node.render;\n            node.render = () => {\n                origRender.call(node);\n                if (node.id) {\n                    dom.id = node.id;\n                }\n                if (node.clipping) {\n                    dom.style.overflow = 'hidden';\n                }\n                dom.style.width = node.width + 'px';\n                dom.style.height = node.height + 'px';\n                dom.style.top = node.y + 'px';\n                dom.style.left = node.x + 'px';\n                dom.style.zIndex = `${node.zIndex}`;\n            };\n        }\n        node._dom = dom;\n        // TODO: WeakMap might be a good idea instead augmenting properties onto HTMLDivElement\n        dom.solid = node;\n        return node;\n    },\n    setProperty(node, name, value = true) {\n        if (name === 'width') {\n            node._dom.style.width = value + 'px';\n        }\n        else if (name === 'height') {\n            node._dom.style.height = value + 'px';\n        }\n        else if (name === 'y') {\n            node._dom.style.top = value + 'px';\n        }\n        else if (name === 'x') {\n            node._dom.style.left = value + 'px';\n        }\n        else if (name === 'zIndex') {\n            node._dom.style.zIndex = value;\n        }\n        universalLightning.setProperty(node, name, value);\n    },\n    createTextNode(text) {\n        const dom = document.createTextNode(text);\n        const node = universalLightning.createTextNode(text);\n        node._dom = dom;\n        return node;\n    },\n    replaceText(textNode, value) {\n        universalLightning.replaceText(textNode, value);\n        textNode._dom.data = value;\n    },\n    insertNode(parent, node, anchor) {\n        if (parent) {\n            if (anchor && parent._dom === anchor._dom.parentNode) {\n                parent._dom.insertBefore(node._dom, anchor._dom);\n            }\n            else {\n                parent._dom.appendChild(node._dom);\n            }\n            universalLightning.insertNode(parent, node, anchor);\n        }\n    },\n    removeNode(parent, node) {\n        parent._dom.removeChild(node._dom);\n        universalLightning.removeNode(parent, node);\n    },\n};\n","/* eslint-disable @typescript-eslint/unbound-method */\n/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createRenderer } from 'solid-js/universal';\nimport universalLightning from './universal/lightning.js';\nimport universalInspector, { attachInspector, } from './universal/dom-inspector.js';\nconst loadInspector = import.meta?.env?.MODE === 'development';\nif (loadInspector) {\n    attachInspector();\n}\nconst solidRenderer = createRenderer(loadInspector ? universalInspector : universalLightning);\n// TODO: This is a hack to get the `render()` function to work as it is used now in the demo app\n// There's gotta be a better way to fix it\nexport const render = solidRenderer.render;\nexport const { effect, memo, createComponent, createElement, createTextNode, insertNode, insert, spread, setProp, mergeProps, use, } = solidRenderer;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { isInteger } from './core/utils.js';\n/**\n * Converts a color string to a color number value.\n */\nexport function hexColor(color = '') {\n    if (isInteger(color)) {\n        return color;\n    }\n    if (typeof color === 'string') {\n        // Renderer expects RGBA values\n        if (color.startsWith('#')) {\n            return Number(color.replace('#', '0x') + (color.length === 7 ? 'ff' : ''));\n        }\n        if (color.startsWith('0x')) {\n            return Number(color);\n        }\n        return Number('0x' + (color.length === 6 ? color + 'ff' : color));\n    }\n    return 0x00000000;\n}\n/**\n * Converts degrees to radians\n */\nexport function deg2rad(deg) {\n    return (deg * Math.PI) / 180;\n}\n","import {\n  createRoot,\n  sharedConfig,\n  createRenderEffect,\n  untrack,\n  enableHydration,\n  getOwner,\n  createEffect,\n  runWithOwner,\n  createMemo,\n  createSignal,\n  onCleanup,\n  splitProps\n} from \"solid-js\";\nexport {\n  ErrorBoundary,\n  For,\n  Index,\n  Match,\n  Show,\n  Suspense,\n  SuspenseList,\n  Switch,\n  createComponent,\n  createRenderEffect as effect,\n  getOwner,\n  createMemo as memo,\n  mergeProps,\n  untrack\n} from \"solid-js\";\n\nconst booleans = [\n  \"allowfullscreen\",\n  \"async\",\n  \"autofocus\",\n  \"autoplay\",\n  \"checked\",\n  \"controls\",\n  \"default\",\n  \"disabled\",\n  \"formnovalidate\",\n  \"hidden\",\n  \"indeterminate\",\n  \"ismap\",\n  \"loop\",\n  \"multiple\",\n  \"muted\",\n  \"nomodule\",\n  \"novalidate\",\n  \"open\",\n  \"playsinline\",\n  \"readonly\",\n  \"required\",\n  \"reversed\",\n  \"seamless\",\n  \"selected\"\n];\nconst Properties = /*#__PURE__*/ new Set([\n  \"className\",\n  \"value\",\n  \"readOnly\",\n  \"formNoValidate\",\n  \"isMap\",\n  \"noModule\",\n  \"playsInline\",\n  ...booleans\n]);\nconst ChildProperties = /*#__PURE__*/ new Set([\n  \"innerHTML\",\n  \"textContent\",\n  \"innerText\",\n  \"children\"\n]);\nconst Aliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  className: \"class\",\n  htmlFor: \"for\"\n});\nconst PropAliases = /*#__PURE__*/ Object.assign(Object.create(null), {\n  class: \"className\",\n  formnovalidate: {\n    $: \"formNoValidate\",\n    BUTTON: 1,\n    INPUT: 1\n  },\n  ismap: {\n    $: \"isMap\",\n    IMG: 1\n  },\n  nomodule: {\n    $: \"noModule\",\n    SCRIPT: 1\n  },\n  playsinline: {\n    $: \"playsInline\",\n    VIDEO: 1\n  },\n  readonly: {\n    $: \"readOnly\",\n    INPUT: 1,\n    TEXTAREA: 1\n  }\n});\nfunction getPropAlias(prop, tagName) {\n  const a = PropAliases[prop];\n  return typeof a === \"object\" ? (a[tagName] ? a[\"$\"] : undefined) : a;\n}\nconst DelegatedEvents = /*#__PURE__*/ new Set([\n  \"beforeinput\",\n  \"click\",\n  \"dblclick\",\n  \"contextmenu\",\n  \"focusin\",\n  \"focusout\",\n  \"input\",\n  \"keydown\",\n  \"keyup\",\n  \"mousedown\",\n  \"mousemove\",\n  \"mouseout\",\n  \"mouseover\",\n  \"mouseup\",\n  \"pointerdown\",\n  \"pointermove\",\n  \"pointerout\",\n  \"pointerover\",\n  \"pointerup\",\n  \"touchend\",\n  \"touchmove\",\n  \"touchstart\"\n]);\nconst SVGElements = /*#__PURE__*/ new Set([\n  \"altGlyph\",\n  \"altGlyphDef\",\n  \"altGlyphItem\",\n  \"animate\",\n  \"animateColor\",\n  \"animateMotion\",\n  \"animateTransform\",\n  \"circle\",\n  \"clipPath\",\n  \"color-profile\",\n  \"cursor\",\n  \"defs\",\n  \"desc\",\n  \"ellipse\",\n  \"feBlend\",\n  \"feColorMatrix\",\n  \"feComponentTransfer\",\n  \"feComposite\",\n  \"feConvolveMatrix\",\n  \"feDiffuseLighting\",\n  \"feDisplacementMap\",\n  \"feDistantLight\",\n  \"feFlood\",\n  \"feFuncA\",\n  \"feFuncB\",\n  \"feFuncG\",\n  \"feFuncR\",\n  \"feGaussianBlur\",\n  \"feImage\",\n  \"feMerge\",\n  \"feMergeNode\",\n  \"feMorphology\",\n  \"feOffset\",\n  \"fePointLight\",\n  \"feSpecularLighting\",\n  \"feSpotLight\",\n  \"feTile\",\n  \"feTurbulence\",\n  \"filter\",\n  \"font\",\n  \"font-face\",\n  \"font-face-format\",\n  \"font-face-name\",\n  \"font-face-src\",\n  \"font-face-uri\",\n  \"foreignObject\",\n  \"g\",\n  \"glyph\",\n  \"glyphRef\",\n  \"hkern\",\n  \"image\",\n  \"line\",\n  \"linearGradient\",\n  \"marker\",\n  \"mask\",\n  \"metadata\",\n  \"missing-glyph\",\n  \"mpath\",\n  \"path\",\n  \"pattern\",\n  \"polygon\",\n  \"polyline\",\n  \"radialGradient\",\n  \"rect\",\n  \"set\",\n  \"stop\",\n  \"svg\",\n  \"switch\",\n  \"symbol\",\n  \"text\",\n  \"textPath\",\n  \"tref\",\n  \"tspan\",\n  \"use\",\n  \"view\",\n  \"vkern\"\n]);\nconst SVGNamespace = {\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\"\n};\nconst DOMElements = /*#__PURE__*/ new Set([\n  \"html\",\n  \"base\",\n  \"head\",\n  \"link\",\n  \"meta\",\n  \"style\",\n  \"title\",\n  \"body\",\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"footer\",\n  \"header\",\n  \"main\",\n  \"nav\",\n  \"section\",\n  \"body\",\n  \"blockquote\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"figcaption\",\n  \"figure\",\n  \"hr\",\n  \"li\",\n  \"ol\",\n  \"p\",\n  \"pre\",\n  \"ul\",\n  \"a\",\n  \"abbr\",\n  \"b\",\n  \"bdi\",\n  \"bdo\",\n  \"br\",\n  \"cite\",\n  \"code\",\n  \"data\",\n  \"dfn\",\n  \"em\",\n  \"i\",\n  \"kbd\",\n  \"mark\",\n  \"q\",\n  \"rp\",\n  \"rt\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"small\",\n  \"span\",\n  \"strong\",\n  \"sub\",\n  \"sup\",\n  \"time\",\n  \"u\",\n  \"var\",\n  \"wbr\",\n  \"area\",\n  \"audio\",\n  \"img\",\n  \"map\",\n  \"track\",\n  \"video\",\n  \"embed\",\n  \"iframe\",\n  \"object\",\n  \"param\",\n  \"picture\",\n  \"portal\",\n  \"source\",\n  \"svg\",\n  \"math\",\n  \"canvas\",\n  \"noscript\",\n  \"script\",\n  \"del\",\n  \"ins\",\n  \"caption\",\n  \"col\",\n  \"colgroup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"tr\",\n  \"button\",\n  \"datalist\",\n  \"fieldset\",\n  \"form\",\n  \"input\",\n  \"label\",\n  \"legend\",\n  \"meter\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"progress\",\n  \"select\",\n  \"textarea\",\n  \"details\",\n  \"dialog\",\n  \"menu\",\n  \"summary\",\n  \"details\",\n  \"slot\",\n  \"template\",\n  \"acronym\",\n  \"applet\",\n  \"basefont\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"center\",\n  \"content\",\n  \"dir\",\n  \"font\",\n  \"frame\",\n  \"frameset\",\n  \"hgroup\",\n  \"image\",\n  \"keygen\",\n  \"marquee\",\n  \"menuitem\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"plaintext\",\n  \"rb\",\n  \"rtc\",\n  \"shadow\",\n  \"spacer\",\n  \"strike\",\n  \"tt\",\n  \"xmp\",\n  \"a\",\n  \"abbr\",\n  \"acronym\",\n  \"address\",\n  \"applet\",\n  \"area\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"base\",\n  \"basefont\",\n  \"bdi\",\n  \"bdo\",\n  \"bgsound\",\n  \"big\",\n  \"blink\",\n  \"blockquote\",\n  \"body\",\n  \"br\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"center\",\n  \"cite\",\n  \"code\",\n  \"col\",\n  \"colgroup\",\n  \"content\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"dialog\",\n  \"dir\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"embed\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"font\",\n  \"footer\",\n  \"form\",\n  \"frame\",\n  \"frameset\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"image\",\n  \"img\",\n  \"input\",\n  \"ins\",\n  \"kbd\",\n  \"keygen\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"map\",\n  \"mark\",\n  \"marquee\",\n  \"menu\",\n  \"menuitem\",\n  \"meta\",\n  \"meter\",\n  \"nav\",\n  \"nobr\",\n  \"noembed\",\n  \"noframes\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"param\",\n  \"picture\",\n  \"plaintext\",\n  \"portal\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"rb\",\n  \"rp\",\n  \"rt\",\n  \"rtc\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"shadow\",\n  \"slot\",\n  \"small\",\n  \"source\",\n  \"spacer\",\n  \"span\",\n  \"strike\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"template\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"tt\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\",\n  \"wbr\",\n  \"xmp\",\n  \"input\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\"\n]);\n\nfunction reconcileArrays(parentNode, a, b) {\n  let bLength = b.length,\n    aEnd = a.length,\n    bEnd = bLength,\n    aStart = 0,\n    bStart = 0,\n    after = a[aEnd - 1].nextSibling,\n    map = null;\n  while (aStart < aEnd || bStart < bEnd) {\n    if (a[aStart] === b[bStart]) {\n      aStart++;\n      bStart++;\n      continue;\n    }\n    while (a[aEnd - 1] === b[bEnd - 1]) {\n      aEnd--;\n      bEnd--;\n    }\n    if (aEnd === aStart) {\n      const node = bEnd < bLength ? (bStart ? b[bStart - 1].nextSibling : b[bEnd - bStart]) : after;\n      while (bStart < bEnd) parentNode.insertBefore(b[bStart++], node);\n    } else if (bEnd === bStart) {\n      while (aStart < aEnd) {\n        if (!map || !map.has(a[aStart])) a[aStart].remove();\n        aStart++;\n      }\n    } else if (a[aStart] === b[bEnd - 1] && b[bStart] === a[aEnd - 1]) {\n      const node = a[--aEnd].nextSibling;\n      parentNode.insertBefore(b[bStart++], a[aStart++].nextSibling);\n      parentNode.insertBefore(b[--bEnd], node);\n      a[aEnd] = b[bEnd];\n    } else {\n      if (!map) {\n        map = new Map();\n        let i = bStart;\n        while (i < bEnd) map.set(b[i], i++);\n      }\n      const index = map.get(a[aStart]);\n      if (index != null) {\n        if (bStart < index && index < bEnd) {\n          let i = aStart,\n            sequence = 1,\n            t;\n          while (++i < aEnd && i < bEnd) {\n            if ((t = map.get(a[i])) == null || t !== index + sequence) break;\n            sequence++;\n          }\n          if (sequence > index - bStart) {\n            const node = a[aStart];\n            while (bStart < index) parentNode.insertBefore(b[bStart++], node);\n          } else parentNode.replaceChild(b[bStart++], a[aStart++]);\n        } else aStart++;\n      } else a[aStart++].remove();\n    }\n  }\n}\n\nconst $$EVENTS = \"_$DX_DELEGATE\";\nfunction render(code, element, init, options = {}) {\n  let disposer;\n  createRoot(dispose => {\n    disposer = dispose;\n    element === document\n      ? code()\n      : insert(element, code(), element.firstChild ? null : undefined, init);\n  }, options.owner);\n  return () => {\n    disposer();\n    element.textContent = \"\";\n  };\n}\nfunction template(html, isCE, isSVG) {\n  let node;\n  const create = () => {\n    const t = document.createElement(\"template\");\n    t.innerHTML = html;\n    return isSVG ? t.content.firstChild.firstChild : t.content.firstChild;\n  };\n  const fn = isCE\n    ? () => untrack(() => document.importNode(node || (node = create()), true))\n    : () => (node || (node = create())).cloneNode(true);\n  fn.cloneNode = fn;\n  return fn;\n}\nfunction delegateEvents(eventNames, document = window.document) {\n  const e = document[$$EVENTS] || (document[$$EVENTS] = new Set());\n  for (let i = 0, l = eventNames.length; i < l; i++) {\n    const name = eventNames[i];\n    if (!e.has(name)) {\n      e.add(name);\n      document.addEventListener(name, eventHandler);\n    }\n  }\n}\nfunction clearDelegatedEvents(document = window.document) {\n  if (document[$$EVENTS]) {\n    for (let name of document[$$EVENTS].keys()) document.removeEventListener(name, eventHandler);\n    delete document[$$EVENTS];\n  }\n}\nfunction setProperty(node, name, value) {\n  !sharedConfig.context && (node[name] = value);\n}\nfunction setAttribute(node, name, value) {\n  if (sharedConfig.context) return;\n  if (value == null) node.removeAttribute(name);\n  else node.setAttribute(name, value);\n}\nfunction setAttributeNS(node, namespace, name, value) {\n  if (sharedConfig.context) return;\n  if (value == null) node.removeAttributeNS(namespace, name);\n  else node.setAttributeNS(namespace, name, value);\n}\nfunction className(node, value) {\n  if (sharedConfig.context) return;\n  if (value == null) node.removeAttribute(\"class\");\n  else node.className = value;\n}\nfunction addEventListener(node, name, handler, delegate) {\n  if (delegate) {\n    if (Array.isArray(handler)) {\n      node[`$$${name}`] = handler[0];\n      node[`$$${name}Data`] = handler[1];\n    } else node[`$$${name}`] = handler;\n  } else if (Array.isArray(handler)) {\n    const handlerFn = handler[0];\n    node.addEventListener(name, (handler[0] = e => handlerFn.call(node, handler[1], e)));\n  } else node.addEventListener(name, handler);\n}\nfunction classList(node, value, prev = {}) {\n  const classKeys = Object.keys(value || {}),\n    prevKeys = Object.keys(prev);\n  let i, len;\n  for (i = 0, len = prevKeys.length; i < len; i++) {\n    const key = prevKeys[i];\n    if (!key || key === \"undefined\" || value[key]) continue;\n    toggleClassKey(node, key, false);\n    delete prev[key];\n  }\n  for (i = 0, len = classKeys.length; i < len; i++) {\n    const key = classKeys[i],\n      classValue = !!value[key];\n    if (!key || key === \"undefined\" || prev[key] === classValue || !classValue) continue;\n    toggleClassKey(node, key, true);\n    prev[key] = classValue;\n  }\n  return prev;\n}\nfunction style(node, value, prev) {\n  if (!value) return prev ? setAttribute(node, \"style\") : value;\n  const nodeStyle = node.style;\n  if (typeof value === \"string\") return (nodeStyle.cssText = value);\n  typeof prev === \"string\" && (nodeStyle.cssText = prev = undefined);\n  prev || (prev = {});\n  value || (value = {});\n  let v, s;\n  for (s in prev) {\n    value[s] == null && nodeStyle.removeProperty(s);\n    delete prev[s];\n  }\n  for (s in value) {\n    v = value[s];\n    if (v !== prev[s]) {\n      nodeStyle.setProperty(s, v);\n      prev[s] = v;\n    }\n  }\n  return prev;\n}\nfunction spread(node, props = {}, isSVG, skipChildren) {\n  const prevProps = {};\n  if (!skipChildren) {\n    createRenderEffect(\n      () => (prevProps.children = insertExpression(node, props.children, prevProps.children))\n    );\n  }\n  createRenderEffect(() => props.ref && props.ref(node));\n  createRenderEffect(() => assign(node, props, isSVG, true, prevProps, true));\n  return prevProps;\n}\nfunction dynamicProperty(props, key) {\n  const src = props[key];\n  Object.defineProperty(props, key, {\n    get() {\n      return src();\n    },\n    enumerable: true\n  });\n  return props;\n}\nfunction use(fn, element, arg) {\n  return untrack(() => fn(element, arg));\n}\nfunction insert(parent, accessor, marker, initial) {\n  if (marker !== undefined && !initial) initial = [];\n  if (typeof accessor !== \"function\") return insertExpression(parent, accessor, initial, marker);\n  createRenderEffect(current => insertExpression(parent, accessor(), current, marker), initial);\n}\nfunction assign(node, props, isSVG, skipChildren, prevProps = {}, skipRef = false) {\n  props || (props = {});\n  for (const prop in prevProps) {\n    if (!(prop in props)) {\n      if (prop === \"children\") continue;\n      prevProps[prop] = assignProp(node, prop, null, prevProps[prop], isSVG, skipRef);\n    }\n  }\n  for (const prop in props) {\n    if (prop === \"children\") {\n      if (!skipChildren) insertExpression(node, props.children);\n      continue;\n    }\n    const value = props[prop];\n    prevProps[prop] = assignProp(node, prop, value, prevProps[prop], isSVG, skipRef);\n  }\n}\nfunction hydrate$1(code, element, options = {}) {\n  sharedConfig.completed = globalThis._$HY.completed;\n  sharedConfig.events = globalThis._$HY.events;\n  sharedConfig.load = id => globalThis._$HY.r[id];\n  sharedConfig.has = id => id in globalThis._$HY.r;\n  sharedConfig.gather = root => gatherHydratable(element, root);\n  sharedConfig.registry = new Map();\n  sharedConfig.context = {\n    id: options.renderId || \"\",\n    count: 0\n  };\n  gatherHydratable(element, options.renderId);\n  const dispose = render(code, element, [...element.childNodes], options);\n  sharedConfig.context = null;\n  return dispose;\n}\nfunction getNextElement(template) {\n  let node, key;\n  if (!sharedConfig.context || !(node = sharedConfig.registry.get((key = getHydrationKey())))) {\n    return template();\n  }\n  if (sharedConfig.completed) sharedConfig.completed.add(node);\n  sharedConfig.registry.delete(key);\n  return node;\n}\nfunction getNextMatch(el, nodeName) {\n  while (el && el.localName !== nodeName) el = el.nextSibling;\n  return el;\n}\nfunction getNextMarker(start) {\n  let end = start,\n    count = 0,\n    current = [];\n  if (sharedConfig.context) {\n    while (end) {\n      if (end.nodeType === 8) {\n        const v = end.nodeValue;\n        if (v === \"$\") count++;\n        else if (v === \"/\") {\n          if (count === 0) return [end, current];\n          count--;\n        }\n      }\n      current.push(end);\n      end = end.nextSibling;\n    }\n  }\n  return [end, current];\n}\nfunction runHydrationEvents() {\n  if (sharedConfig.events && !sharedConfig.events.queued) {\n    queueMicrotask(() => {\n      const { completed, events } = sharedConfig;\n      events.queued = false;\n      while (events.length) {\n        const [el, e] = events[0];\n        if (!completed.has(el)) return;\n        eventHandler(e);\n        events.shift();\n      }\n    });\n    sharedConfig.events.queued = true;\n  }\n}\nfunction toPropertyName(name) {\n  return name.toLowerCase().replace(/-([a-z])/g, (_, w) => w.toUpperCase());\n}\nfunction toggleClassKey(node, key, value) {\n  const classNames = key.trim().split(/\\s+/);\n  for (let i = 0, nameLen = classNames.length; i < nameLen; i++)\n    node.classList.toggle(classNames[i], value);\n}\nfunction assignProp(node, prop, value, prev, isSVG, skipRef) {\n  let isCE, isProp, isChildProp, propAlias, forceProp;\n  if (prop === \"style\") return style(node, value, prev);\n  if (prop === \"classList\") return classList(node, value, prev);\n  if (value === prev) return prev;\n  if (prop === \"ref\") {\n    if (!skipRef) value(node);\n  } else if (prop.slice(0, 3) === \"on:\") {\n    const e = prop.slice(3);\n    prev && node.removeEventListener(e, prev);\n    value && node.addEventListener(e, value);\n  } else if (prop.slice(0, 10) === \"oncapture:\") {\n    const e = prop.slice(10);\n    prev && node.removeEventListener(e, prev, true);\n    value && node.addEventListener(e, value, true);\n  } else if (prop.slice(0, 2) === \"on\") {\n    const name = prop.slice(2).toLowerCase();\n    const delegate = DelegatedEvents.has(name);\n    if (!delegate && prev) {\n      const h = Array.isArray(prev) ? prev[0] : prev;\n      node.removeEventListener(name, h);\n    }\n    if (delegate || value) {\n      addEventListener(node, name, value, delegate);\n      delegate && delegateEvents([name]);\n    }\n  } else if (prop.slice(0, 5) === \"attr:\") {\n    setAttribute(node, prop.slice(5), value);\n  } else if (\n    (forceProp = prop.slice(0, 5) === \"prop:\") ||\n    (isChildProp = ChildProperties.has(prop)) ||\n    (!isSVG &&\n      ((propAlias = getPropAlias(prop, node.tagName)) || (isProp = Properties.has(prop)))) ||\n    (isCE = node.nodeName.includes(\"-\"))\n  ) {\n    if (forceProp) {\n      prop = prop.slice(5);\n      isProp = true;\n    } else if (sharedConfig.context) return value;\n    if (prop === \"class\" || prop === \"className\") className(node, value);\n    else if (isCE && !isProp && !isChildProp) node[toPropertyName(prop)] = value;\n    else node[propAlias || prop] = value;\n  } else {\n    const ns = isSVG && prop.indexOf(\":\") > -1 && SVGNamespace[prop.split(\":\")[0]];\n    if (ns) setAttributeNS(node, ns, prop, value);\n    else setAttribute(node, Aliases[prop] || prop, value);\n  }\n  return value;\n}\nfunction eventHandler(e) {\n  const key = `$$${e.type}`;\n  let node = (e.composedPath && e.composedPath()[0]) || e.target;\n  if (e.target !== node) {\n    Object.defineProperty(e, \"target\", {\n      configurable: true,\n      value: node\n    });\n  }\n  Object.defineProperty(e, \"currentTarget\", {\n    configurable: true,\n    get() {\n      return node || document;\n    }\n  });\n  if (sharedConfig.registry && !sharedConfig.done) sharedConfig.done = _$HY.done = true;\n  while (node) {\n    const handler = node[key];\n    if (handler && !node.disabled) {\n      const data = node[`${key}Data`];\n      data !== undefined ? handler.call(node, data, e) : handler.call(node, e);\n      if (e.cancelBubble) return;\n    }\n    node = node._$host || node.parentNode || node.host;\n  }\n}\nfunction insertExpression(parent, value, current, marker, unwrapArray) {\n  if (sharedConfig.context) {\n    !current && (current = [...parent.childNodes]);\n    let cleaned = [];\n    for (let i = 0; i < current.length; i++) {\n      const node = current[i];\n      if (node.nodeType === 8 && node.data.slice(0, 2) === \"!$\") node.remove();\n      else cleaned.push(node);\n    }\n    current = cleaned;\n  }\n  while (typeof current === \"function\") current = current();\n  if (value === current) return current;\n  const t = typeof value,\n    multi = marker !== undefined;\n  parent = (multi && current[0] && current[0].parentNode) || parent;\n  if (t === \"string\" || t === \"number\") {\n    if (sharedConfig.context) return current;\n    if (t === \"number\") value = value.toString();\n    if (multi) {\n      let node = current[0];\n      if (node && node.nodeType === 3) {\n        node.data = value;\n      } else node = document.createTextNode(value);\n      current = cleanChildren(parent, current, marker, node);\n    } else {\n      if (current !== \"\" && typeof current === \"string\") {\n        current = parent.firstChild.data = value;\n      } else current = parent.textContent = value;\n    }\n  } else if (value == null || t === \"boolean\") {\n    if (sharedConfig.context) return current;\n    current = cleanChildren(parent, current, marker);\n  } else if (t === \"function\") {\n    createRenderEffect(() => {\n      let v = value();\n      while (typeof v === \"function\") v = v();\n      current = insertExpression(parent, v, current, marker);\n    });\n    return () => current;\n  } else if (Array.isArray(value)) {\n    const array = [];\n    const currentArray = current && Array.isArray(current);\n    if (normalizeIncomingArray(array, value, current, unwrapArray)) {\n      createRenderEffect(() => (current = insertExpression(parent, array, current, marker, true)));\n      return () => current;\n    }\n    if (sharedConfig.context) {\n      if (!array.length) return current;\n      if (marker === undefined) return [...parent.childNodes];\n      let node = array[0];\n      let nodes = [node];\n      while ((node = node.nextSibling) !== marker) nodes.push(node);\n      return (current = nodes);\n    }\n    if (array.length === 0) {\n      current = cleanChildren(parent, current, marker);\n      if (multi) return current;\n    } else if (currentArray) {\n      if (current.length === 0) {\n        appendNodes(parent, array, marker);\n      } else reconcileArrays(parent, current, array);\n    } else {\n      current && cleanChildren(parent);\n      appendNodes(parent, array);\n    }\n    current = array;\n  } else if (value.nodeType) {\n    if (sharedConfig.context && value.parentNode) return (current = multi ? [value] : value);\n    if (Array.isArray(current)) {\n      if (multi) return (current = cleanChildren(parent, current, marker, value));\n      cleanChildren(parent, current, null, value);\n    } else if (current == null || current === \"\" || !parent.firstChild) {\n      parent.appendChild(value);\n    } else parent.replaceChild(value, parent.firstChild);\n    current = value;\n  } else;\n  return current;\n}\nfunction normalizeIncomingArray(normalized, array, current, unwrap) {\n  let dynamic = false;\n  for (let i = 0, len = array.length; i < len; i++) {\n    let item = array[i],\n      prev = current && current[i],\n      t;\n    if (item == null || item === true || item === false);\n    else if ((t = typeof item) === \"object\" && item.nodeType) {\n      normalized.push(item);\n    } else if (Array.isArray(item)) {\n      dynamic = normalizeIncomingArray(normalized, item, prev) || dynamic;\n    } else if (t === \"function\") {\n      if (unwrap) {\n        while (typeof item === \"function\") item = item();\n        dynamic =\n          normalizeIncomingArray(\n            normalized,\n            Array.isArray(item) ? item : [item],\n            Array.isArray(prev) ? prev : [prev]\n          ) || dynamic;\n      } else {\n        normalized.push(item);\n        dynamic = true;\n      }\n    } else {\n      const value = String(item);\n      if (prev && prev.nodeType === 3 && prev.data === value) normalized.push(prev);\n      else normalized.push(document.createTextNode(value));\n    }\n  }\n  return dynamic;\n}\nfunction appendNodes(parent, array, marker = null) {\n  for (let i = 0, len = array.length; i < len; i++) parent.insertBefore(array[i], marker);\n}\nfunction cleanChildren(parent, current, marker, replacement) {\n  if (marker === undefined) return (parent.textContent = \"\");\n  const node = replacement || document.createTextNode(\"\");\n  if (current.length) {\n    let inserted = false;\n    for (let i = current.length - 1; i >= 0; i--) {\n      const el = current[i];\n      if (node !== el) {\n        const isParent = el.parentNode === parent;\n        if (!inserted && !i)\n          isParent ? parent.replaceChild(node, el) : parent.insertBefore(node, marker);\n        else isParent && el.remove();\n      } else inserted = true;\n    }\n  } else parent.insertBefore(node, marker);\n  return [node];\n}\nfunction gatherHydratable(element, root) {\n  const templates = element.querySelectorAll(`*[data-hk]`);\n  for (let i = 0; i < templates.length; i++) {\n    const node = templates[i];\n    const key = node.getAttribute(\"data-hk\");\n    if ((!root || key.startsWith(root)) && !sharedConfig.registry.has(key))\n      sharedConfig.registry.set(key, node);\n  }\n}\nfunction getHydrationKey() {\n  const hydrate = sharedConfig.context;\n  return `${hydrate.id}${hydrate.count++}`;\n}\nfunction NoHydration(props) {\n  return sharedConfig.context ? undefined : props.children;\n}\nfunction Hydration(props) {\n  return props.children;\n}\nfunction voidFn() {}\nfunction innerHTML(parent, content) {\n  !sharedConfig.context && (parent.innerHTML = content);\n}\n\nfunction throwInBrowser(func) {\n  const err = new Error(`${func.name} is not supported in the browser, returning undefined`);\n  console.error(err);\n}\nfunction renderToString(fn, options) {\n  throwInBrowser(renderToString);\n}\nfunction renderToStringAsync(fn, options) {\n  throwInBrowser(renderToStringAsync);\n}\nfunction renderToStream(fn, options) {\n  throwInBrowser(renderToStream);\n}\nfunction ssr(template, ...nodes) {}\nfunction ssrElement(name, props, children, needsId) {}\nfunction ssrClassList(value) {}\nfunction ssrStyle(value) {}\nfunction ssrAttribute(key, value) {}\nfunction ssrHydrationKey() {}\nfunction resolveSSRNode(node) {}\nfunction escape(html) {}\nfunction ssrSpread(props, isSVG, skipChildren) {}\n\nconst isServer = false;\nconst isDev = false;\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nfunction createElement(tagName, isSVG = false) {\n  return isSVG ? document.createElementNS(SVG_NAMESPACE, tagName) : document.createElement(tagName);\n}\nconst hydrate = (...args) => {\n  enableHydration();\n  return hydrate$1(...args);\n};\nfunction Portal(props) {\n  const { useShadow } = props,\n    marker = document.createTextNode(\"\"),\n    mount = () => props.mount || document.body,\n    owner = getOwner();\n  let content;\n  let hydrating = !!sharedConfig.context;\n  createEffect(\n    () => {\n      if (hydrating) getOwner().user = hydrating = false;\n      content || (content = runWithOwner(owner, () => createMemo(() => props.children)));\n      const el = mount();\n      if (el instanceof HTMLHeadElement) {\n        const [clean, setClean] = createSignal(false);\n        const cleanup = () => setClean(true);\n        createRoot(dispose => insert(el, () => (!clean() ? content() : dispose()), null));\n        onCleanup(cleanup);\n      } else {\n        const container = createElement(props.isSVG ? \"g\" : \"div\", props.isSVG),\n          renderRoot =\n            useShadow && container.attachShadow\n              ? container.attachShadow({\n                  mode: \"open\"\n                })\n              : container;\n        Object.defineProperty(container, \"_$host\", {\n          get() {\n            return marker.parentNode;\n          },\n          configurable: true\n        });\n        insert(renderRoot, content);\n        el.appendChild(container);\n        props.ref && props.ref(container);\n        onCleanup(() => el.removeChild(container));\n      }\n    },\n    undefined,\n    {\n      render: !hydrating\n    }\n  );\n  return marker;\n}\nfunction Dynamic(props) {\n  const [p, others] = splitProps(props, [\"component\"]);\n  const cached = createMemo(() => p.component);\n  return createMemo(() => {\n    const component = cached();\n    switch (typeof component) {\n      case \"function\":\n        return untrack(() => component(others));\n      case \"string\":\n        const isSvg = SVGElements.has(component);\n        const el = sharedConfig.context ? getNextElement() : createElement(component, isSvg);\n        spread(el, others, isSvg);\n        return el;\n    }\n  });\n}\n\nexport {\n  Aliases,\n  voidFn as Assets,\n  ChildProperties,\n  DOMElements,\n  DelegatedEvents,\n  Dynamic,\n  Hydration,\n  voidFn as HydrationScript,\n  NoHydration,\n  Portal,\n  Properties,\n  SVGElements,\n  SVGNamespace,\n  addEventListener,\n  assign,\n  classList,\n  className,\n  clearDelegatedEvents,\n  delegateEvents,\n  dynamicProperty,\n  escape,\n  voidFn as generateHydrationScript,\n  voidFn as getAssets,\n  getHydrationKey,\n  getNextElement,\n  getNextMarker,\n  getNextMatch,\n  getPropAlias,\n  hydrate,\n  innerHTML,\n  insert,\n  isDev,\n  isServer,\n  render,\n  renderToStream,\n  renderToString,\n  renderToStringAsync,\n  resolveSSRNode,\n  runHydrationEvents,\n  setAttribute,\n  setAttributeNS,\n  setProperty,\n  spread,\n  ssr,\n  ssrAttribute,\n  ssrClassList,\n  ssrElement,\n  ssrHydrationKey,\n  ssrSpread,\n  ssrStyle,\n  style,\n  template,\n  use,\n  voidFn as useAssets\n};\n","import { createSignal, onCleanup } from \"solid-js\";\nfunction bindEvent(target, type, handler) {\n    target.addEventListener(type, handler);\n    return () => target.removeEventListener(type, handler);\n}\nfunction intercept([value, setValue], get, set) {\n    return [get ? () => get(value()) : value, set ? (v) => setValue(set(v)) : setValue];\n}\nfunction querySelector(selector) {\n    // Guard against selector being an invalid CSS selector\n    try {\n        return document.querySelector(selector);\n    }\n    catch (e) {\n        return null;\n    }\n}\nfunction scrollToHash(hash, fallbackTop) {\n    const el = querySelector(`#${hash}`);\n    if (el) {\n        el.scrollIntoView();\n    }\n    else if (fallbackTop) {\n        window.scrollTo(0, 0);\n    }\n}\nexport function createMemoryHistory() {\n    const entries = [\"/\"];\n    let index = 0;\n    const listeners = [];\n    const go = (n) => {\n        // https://github.com/remix-run/react-router/blob/682810ca929d0e3c64a76f8d6e465196b7a2ac58/packages/router/history.ts#L245\n        index = Math.max(0, Math.min(index + n, entries.length - 1));\n        const value = entries[index];\n        listeners.forEach(listener => listener(value));\n    };\n    return {\n        get: () => entries[index],\n        set: ({ value, scroll, replace }) => {\n            if (replace) {\n                entries[index] = value;\n            }\n            else {\n                entries.splice(index + 1, entries.length - index, value);\n                index++;\n            }\n            if (scroll) {\n                scrollToHash(value.split(\"#\")[1] || \"\", true);\n            }\n        },\n        back: () => {\n            go(-1);\n        },\n        forward: () => {\n            go(1);\n        },\n        go,\n        listen: (listener) => {\n            listeners.push(listener);\n            return () => {\n                const index = listeners.indexOf(listener);\n                listeners.splice(index, 1);\n            };\n        }\n    };\n}\nexport function createIntegration(get, set, init, utils) {\n    let ignore = false;\n    const wrap = (value) => (typeof value === \"string\" ? { value } : value);\n    const signal = intercept(createSignal(wrap(get()), { equals: (a, b) => a.value === b.value }), undefined, next => {\n        !ignore && set(next);\n        return next;\n    });\n    init &&\n        onCleanup(init((value = get()) => {\n            ignore = true;\n            signal[1](wrap(value));\n            ignore = false;\n        }));\n    return {\n        signal,\n        utils\n    };\n}\nexport function normalizeIntegration(integration) {\n    if (!integration) {\n        return {\n            signal: createSignal({ value: \"\" })\n        };\n    }\n    else if (Array.isArray(integration)) {\n        return {\n            signal: integration\n        };\n    }\n    return integration;\n}\nexport function staticIntegration(obj) {\n    return {\n        signal: [() => obj, next => Object.assign(obj, next)]\n    };\n}\nexport function pathIntegration() {\n    return createIntegration(() => ({\n        value: window.location.pathname + window.location.search + window.location.hash,\n        state: history.state\n    }), ({ value, replace, scroll, state }) => {\n        if (replace) {\n            window.history.replaceState(state, \"\", value);\n        }\n        else {\n            window.history.pushState(state, \"\", value);\n        }\n        scrollToHash(window.location.hash.slice(1), scroll);\n    }, notify => bindEvent(window, \"popstate\", () => notify()), {\n        go: delta => window.history.go(delta)\n    });\n}\nexport function hashIntegration() {\n    return createIntegration(() => window.location.hash.slice(1), ({ value, replace, scroll, state }) => {\n        if (replace) {\n            window.history.replaceState(state, \"\", \"#\" + value);\n        }\n        else {\n            window.location.hash = value;\n        }\n        const hashIndex = value.indexOf(\"#\");\n        const hash = hashIndex >= 0 ? value.slice(hashIndex + 1) : \"\";\n        scrollToHash(hash, scroll);\n    }, notify => bindEvent(window, \"hashchange\", () => notify()), {\n        go: delta => window.history.go(delta),\n        renderPath: path => `#${path}`,\n        parsePath: str => {\n            const to = str.replace(/^.*?#/, \"\");\n            // Hash-only hrefs like `#foo` from plain anchors will come in as `/#foo` whereas a link to\n            // `/foo` will be `/#/foo`. Check if the to starts with a `/` and if not append it as a hash\n            // to the current path so we can handle these in-page anchors correctly.\n            if (!to.startsWith(\"/\")) {\n                const [, path = \"/\"] = window.location.hash.split(\"#\", 2);\n                return `${path}#${to}`;\n            }\n            return to;\n        }\n    });\n}\nexport function memoryIntegration() {\n    const memoryHistory = createMemoryHistory();\n    return createIntegration(memoryHistory.get, memoryHistory.set, memoryHistory.listen, {\n        go: memoryHistory.go\n    });\n}\n","import { createMemo, getOwner, runWithOwner } from \"solid-js\";\nconst hasSchemeRegex = /^(?:[a-z0-9]+:)?\\/\\//i;\nconst trimPathRegex = /^\\/+|(\\/)\\/+$/g;\nexport function normalizePath(path, omitSlash = false) {\n    const s = path.replace(trimPathRegex, \"$1\");\n    return s ? (omitSlash || /^[?#]/.test(s) ? s : \"/\" + s) : \"\";\n}\nexport function resolvePath(base, path, from) {\n    if (hasSchemeRegex.test(path)) {\n        return undefined;\n    }\n    const basePath = normalizePath(base);\n    const fromPath = from && normalizePath(from);\n    let result = \"\";\n    if (!fromPath || path.startsWith(\"/\")) {\n        result = basePath;\n    }\n    else if (fromPath.toLowerCase().indexOf(basePath.toLowerCase()) !== 0) {\n        result = basePath + fromPath;\n    }\n    else {\n        result = fromPath;\n    }\n    return (result || \"/\") + normalizePath(path, !result);\n}\nexport function invariant(value, message) {\n    if (value == null) {\n        throw new Error(message);\n    }\n    return value;\n}\nexport function joinPaths(from, to) {\n    return normalizePath(from).replace(/\\/*(\\*.*)?$/g, \"\") + normalizePath(to);\n}\nexport function extractSearchParams(url) {\n    const params = {};\n    url.searchParams.forEach((value, key) => {\n        params[key] = value;\n    });\n    return params;\n}\nexport function createMatcher(path, partial, matchFilters) {\n    const [pattern, splat] = path.split(\"/*\", 2);\n    const segments = pattern.split(\"/\").filter(Boolean);\n    const len = segments.length;\n    return (location) => {\n        const locSegments = location.split(\"/\").filter(Boolean);\n        const lenDiff = locSegments.length - len;\n        if (lenDiff < 0 || (lenDiff > 0 && splat === undefined && !partial)) {\n            return null;\n        }\n        const match = {\n            path: len ? \"\" : \"/\",\n            params: {}\n        };\n        const matchFilter = (s) => matchFilters === undefined ? undefined : matchFilters[s];\n        for (let i = 0; i < len; i++) {\n            const segment = segments[i];\n            const locSegment = locSegments[i];\n            const dynamic = segment[0] === \":\";\n            const key = dynamic ? segment.slice(1) : segment;\n            if (dynamic && matchSegment(locSegment, matchFilter(key))) {\n                match.params[key] = locSegment;\n            }\n            else if (dynamic || !matchSegment(locSegment, segment)) {\n                return null;\n            }\n            match.path += `/${locSegment}`;\n        }\n        if (splat) {\n            const remainder = lenDiff ? locSegments.slice(-lenDiff).join(\"/\") : \"\";\n            if (matchSegment(remainder, matchFilter(splat))) {\n                match.params[splat] = remainder;\n            }\n            else {\n                return null;\n            }\n        }\n        return match;\n    };\n}\nfunction matchSegment(input, filter) {\n    const isEqual = (s) => s.localeCompare(input, undefined, { sensitivity: \"base\" }) === 0;\n    if (filter === undefined) {\n        return true;\n    }\n    else if (typeof filter === \"string\") {\n        return isEqual(filter);\n    }\n    else if (typeof filter === \"function\") {\n        return filter(input);\n    }\n    else if (Array.isArray(filter)) {\n        return filter.some(isEqual);\n    }\n    else if (filter instanceof RegExp) {\n        return filter.test(input);\n    }\n    return false;\n}\nexport function scoreRoute(route) {\n    const [pattern, splat] = route.pattern.split(\"/*\", 2);\n    const segments = pattern.split(\"/\").filter(Boolean);\n    return segments.reduce((score, segment) => score + (segment.startsWith(\":\") ? 2 : 3), segments.length - (splat === undefined ? 0 : 1));\n}\nexport function createMemoObject(fn) {\n    const map = new Map();\n    const owner = getOwner();\n    return new Proxy({}, {\n        get(_, property) {\n            if (!map.has(property)) {\n                runWithOwner(owner, () => map.set(property, createMemo(() => fn()[property])));\n            }\n            return map.get(property)();\n        },\n        getOwnPropertyDescriptor() {\n            return {\n                enumerable: true,\n                configurable: true\n            };\n        },\n        ownKeys() {\n            return Reflect.ownKeys(fn());\n        }\n    });\n}\nexport function mergeSearchString(search, params) {\n    const merged = new URLSearchParams(search);\n    Object.entries(params).forEach(([key, value]) => {\n        if (value == null || value === \"\") {\n            merged.delete(key);\n        }\n        else {\n            merged.set(key, String(value));\n        }\n    });\n    const s = merged.toString();\n    return s ? `?${s}` : \"\";\n}\nexport function expandOptionals(pattern) {\n    let match = /(\\/?\\:[^\\/]+)\\?/.exec(pattern);\n    if (!match)\n        return [pattern];\n    let prefix = pattern.slice(0, match.index);\n    let suffix = pattern.slice(match.index + match[0].length);\n    const prefixes = [prefix, (prefix += match[1])];\n    // This section handles adjacent optional params. We don't actually want all permuations since\n    // that will lead to equivalent routes which have the same number of params. For example\n    // `/:a?/:b?/:c`? only has the unique expansion: `/`, `/:a`, `/:a/:b`, `/:a/:b/:c` and we can\n    // discard `/:b`, `/:c`, `/:b/:c` by building them up in order and not recursing. This also helps\n    // ensure predictability where earlier params have precidence.\n    while ((match = /^(\\/\\:[^\\/]+)\\?/.exec(suffix))) {\n        prefixes.push((prefix += match[1]));\n        suffix = suffix.slice(match[0].length);\n    }\n    return expandOptionals(suffix).reduce((results, expansion) => [...results, ...prefixes.map(p => p + expansion)], []);\n}\n","import { createComponent, createContext, createMemo, createRenderEffect, createSignal, on, onCleanup, untrack, useContext, startTransition, resetErrorBoundaries } from \"solid-js\";\nimport { isServer, delegateEvents } from \"solid-js/web\";\nimport { normalizeIntegration } from \"./integration\";\nimport { createBeforeLeave } from \"./lifecycle\";\nimport { createMemoObject, extractSearchParams, invariant, resolvePath, createMatcher, joinPaths, scoreRoute, mergeSearchString, expandOptionals } from \"./utils\";\nconst MAX_REDIRECTS = 100;\nexport const RouterContextObj = createContext();\nexport const RouteContextObj = createContext();\nexport const useRouter = () => invariant(useContext(RouterContextObj), \"Make sure your app is wrapped in a <Router />\");\nlet TempRoute;\nexport const useRoute = () => TempRoute || useContext(RouteContextObj) || useRouter().base;\nexport const useResolvedPath = (path) => {\n    const route = useRoute();\n    return createMemo(() => route.resolvePath(path()));\n};\nexport const useHref = (to) => {\n    const router = useRouter();\n    return createMemo(() => {\n        const to_ = to();\n        return to_ !== undefined ? router.renderPath(to_) : to_;\n    });\n};\nexport const useNavigate = () => useRouter().navigatorFactory();\nexport const useLocation = () => useRouter().location;\nexport const useIsRouting = () => useRouter().isRouting;\nexport const useMatch = (path, matchFilters) => {\n    const location = useLocation();\n    const matchers = createMemo(() => expandOptionals(path()).map(path => createMatcher(path, undefined, matchFilters)));\n    return createMemo(() => {\n        for (const matcher of matchers()) {\n            const match = matcher(location.pathname);\n            if (match)\n                return match;\n        }\n    });\n};\nexport const useParams = () => useRoute().params;\nexport const useRouteData = () => useRoute().data;\nexport const useSearchParams = () => {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const setSearchParams = (params, options) => {\n        const searchString = untrack(() => location.pathname + mergeSearchString(location.search, params) + location.hash);\n        navigate(searchString, {\n            scroll: false,\n            resolve: false,\n            ...options\n        });\n    };\n    return [location.query, setSearchParams];\n};\nexport const useBeforeLeave = (listener) => {\n    const s = useRouter().beforeLeave.subscribe({\n        listener,\n        location: useLocation(),\n        navigate: useNavigate()\n    });\n    onCleanup(s);\n};\nexport function createRoutes(routeDef, base = \"\", fallback) {\n    const { component, data, children } = routeDef;\n    const isLeaf = !children || (Array.isArray(children) && !children.length);\n    const shared = {\n        key: routeDef,\n        element: component\n            ? () => createComponent(component, {})\n            : () => {\n                const { element } = routeDef;\n                return element === undefined && fallback\n                    ? createComponent(fallback, {})\n                    : element;\n            },\n        preload: routeDef.component\n            ? component.preload\n            : routeDef.preload,\n        data\n    };\n    return asArray(routeDef.path).reduce((acc, path) => {\n        for (const originalPath of expandOptionals(path)) {\n            const path = joinPaths(base, originalPath);\n            const pattern = isLeaf ? path : path.split(\"/*\", 1)[0];\n            acc.push({\n                ...shared,\n                originalPath,\n                pattern,\n                matcher: createMatcher(pattern, !isLeaf, routeDef.matchFilters)\n            });\n        }\n        return acc;\n    }, []);\n}\nexport function createBranch(routes, index = 0) {\n    return {\n        routes,\n        score: scoreRoute(routes[routes.length - 1]) * 10000 - index,\n        matcher(location) {\n            const matches = [];\n            for (let i = routes.length - 1; i >= 0; i--) {\n                const route = routes[i];\n                const match = route.matcher(location);\n                if (!match) {\n                    return null;\n                }\n                matches.unshift({\n                    ...match,\n                    route\n                });\n            }\n            return matches;\n        }\n    };\n}\nfunction asArray(value) {\n    return Array.isArray(value) ? value : [value];\n}\nexport function createBranches(routeDef, base = \"\", fallback, stack = [], branches = []) {\n    const routeDefs = asArray(routeDef);\n    for (let i = 0, len = routeDefs.length; i < len; i++) {\n        const def = routeDefs[i];\n        if (def && typeof def === \"object\" && def.hasOwnProperty(\"path\")) {\n            const routes = createRoutes(def, base, fallback);\n            for (const route of routes) {\n                stack.push(route);\n                const isEmptyArray = Array.isArray(def.children) && def.children.length === 0;\n                if (def.children && !isEmptyArray) {\n                    createBranches(def.children, route.pattern, fallback, stack, branches);\n                }\n                else {\n                    const branch = createBranch([...stack], branches.length);\n                    branches.push(branch);\n                }\n                stack.pop();\n            }\n        }\n    }\n    // Stack will be empty on final return\n    return stack.length ? branches : branches.sort((a, b) => b.score - a.score);\n}\nexport function getRouteMatches(branches, location) {\n    for (let i = 0, len = branches.length; i < len; i++) {\n        const match = branches[i].matcher(location);\n        if (match) {\n            return match;\n        }\n    }\n    return [];\n}\nexport function createLocation(path, state) {\n    const origin = new URL(\"http://sar\");\n    const url = createMemo(prev => {\n        const path_ = path();\n        try {\n            return new URL(path_, origin);\n        }\n        catch (err) {\n            console.error(`Invalid path ${path_}`);\n            return prev;\n        }\n    }, origin, {\n        equals: (a, b) => a.href === b.href\n    });\n    const pathname = createMemo(() => url().pathname);\n    const search = createMemo(() => url().search, true);\n    const hash = createMemo(() => url().hash);\n    const key = createMemo(() => \"\");\n    return {\n        get pathname() {\n            return pathname();\n        },\n        get search() {\n            return search();\n        },\n        get hash() {\n            return hash();\n        },\n        get state() {\n            return state();\n        },\n        get key() {\n            return key();\n        },\n        query: createMemoObject(on(search, () => extractSearchParams(url())))\n    };\n}\nexport function createRouterContext(integration, base = \"\", data, out) {\n    const { signal: [source, setSource], utils = {} } = normalizeIntegration(integration);\n    const parsePath = utils.parsePath || (p => p);\n    const renderPath = utils.renderPath || (p => p);\n    const beforeLeave = utils.beforeLeave || createBeforeLeave();\n    const basePath = resolvePath(\"\", base);\n    const output = isServer && out\n        ? Object.assign(out, {\n            matches: [],\n            url: undefined\n        })\n        : undefined;\n    if (basePath === undefined) {\n        throw new Error(`${basePath} is not a valid base path`);\n    }\n    else if (basePath && !source().value) {\n        setSource({ value: basePath, replace: true, scroll: false });\n    }\n    const [isRouting, setIsRouting] = createSignal(false);\n    const start = async (callback) => {\n        setIsRouting(true);\n        try {\n            await startTransition(callback);\n        }\n        finally {\n            setIsRouting(false);\n        }\n    };\n    const [reference, setReference] = createSignal(source().value);\n    const [state, setState] = createSignal(source().state);\n    const location = createLocation(reference, state);\n    const referrers = [];\n    const baseRoute = {\n        pattern: basePath,\n        params: {},\n        path: () => basePath,\n        outlet: () => null,\n        resolvePath(to) {\n            return resolvePath(basePath, to);\n        }\n    };\n    if (data) {\n        try {\n            TempRoute = baseRoute;\n            baseRoute.data = data({\n                data: undefined,\n                params: {},\n                location,\n                navigate: navigatorFactory(baseRoute)\n            });\n        }\n        finally {\n            TempRoute = undefined;\n        }\n    }\n    function navigateFromRoute(route, to, options) {\n        // Untrack in case someone navigates in an effect - don't want to track `reference` or route paths\n        untrack(() => {\n            if (typeof to === \"number\") {\n                if (!to) {\n                    // A delta of 0 means stay at the current location, so it is ignored\n                }\n                else if (utils.go) {\n                    beforeLeave.confirm(to, options) && utils.go(to);\n                }\n                else {\n                    console.warn(\"Router integration does not support relative routing\");\n                }\n                return;\n            }\n            const { replace, resolve, scroll, state: nextState } = {\n                replace: false,\n                resolve: true,\n                scroll: true,\n                ...options\n            };\n            const resolvedTo = resolve ? route.resolvePath(to) : resolvePath(\"\", to);\n            if (resolvedTo === undefined) {\n                throw new Error(`Path '${to}' is not a routable path`);\n            }\n            else if (referrers.length >= MAX_REDIRECTS) {\n                throw new Error(\"Too many redirects\");\n            }\n            const current = reference();\n            if (resolvedTo !== current || nextState !== state()) {\n                if (isServer) {\n                    if (output) {\n                        output.url = resolvedTo;\n                    }\n                    setSource({ value: resolvedTo, replace, scroll, state: nextState });\n                }\n                else if (beforeLeave.confirm(resolvedTo, options)) {\n                    const len = referrers.push({ value: current, replace, scroll, state: state() });\n                    start(() => {\n                        setReference(resolvedTo);\n                        setState(nextState);\n                        resetErrorBoundaries();\n                    }).then(() => {\n                        if (referrers.length === len) {\n                            navigateEnd({\n                                value: resolvedTo,\n                                state: nextState\n                            });\n                        }\n                    });\n                }\n            }\n        });\n    }\n    function navigatorFactory(route) {\n        // Workaround for vite issue (https://github.com/vitejs/vite/issues/3803)\n        route = route || useContext(RouteContextObj) || baseRoute;\n        return (to, options) => navigateFromRoute(route, to, options);\n    }\n    function navigateEnd(next) {\n        const first = referrers[0];\n        if (first) {\n            if (next.value !== first.value || next.state !== first.state) {\n                setSource({\n                    ...next,\n                    replace: first.replace,\n                    scroll: first.scroll\n                });\n            }\n            referrers.length = 0;\n        }\n    }\n    createRenderEffect(() => {\n        const { value, state } = source();\n        // Untrack this whole block so `start` doesn't cause Solid's Listener to be preserved\n        untrack(() => {\n            if (value !== reference()) {\n                start(() => {\n                    setReference(value);\n                    setState(state);\n                });\n            }\n        });\n    });\n    if (!isServer) {\n        function handleAnchorClick(evt) {\n            if (evt.defaultPrevented ||\n                evt.button !== 0 ||\n                evt.metaKey ||\n                evt.altKey ||\n                evt.ctrlKey ||\n                evt.shiftKey)\n                return;\n            const a = evt\n                .composedPath()\n                .find(el => el instanceof Node && el.nodeName.toUpperCase() === \"A\");\n            if (!a || !a.hasAttribute(\"link\"))\n                return;\n            const href = a.href;\n            if (a.target || (!href && !a.hasAttribute(\"state\")))\n                return;\n            const rel = (a.getAttribute(\"rel\") || \"\").split(/\\s+/);\n            if (a.hasAttribute(\"download\") || (rel && rel.includes(\"external\")))\n                return;\n            const url = new URL(href);\n            if (url.origin !== window.location.origin ||\n                (basePath && url.pathname && !url.pathname.toLowerCase().startsWith(basePath.toLowerCase())))\n                return;\n            const to = parsePath(url.pathname + url.search + url.hash);\n            const state = a.getAttribute(\"state\");\n            evt.preventDefault();\n            navigateFromRoute(baseRoute, to, {\n                resolve: false,\n                replace: a.hasAttribute(\"replace\"),\n                scroll: !a.hasAttribute(\"noscroll\"),\n                state: state && JSON.parse(state)\n            });\n        }\n        // ensure delegated events run first\n        delegateEvents([\"click\"]);\n        document.addEventListener(\"click\", handleAnchorClick);\n        onCleanup(() => document.removeEventListener(\"click\", handleAnchorClick));\n    }\n    return {\n        base: baseRoute,\n        out: output,\n        location,\n        isRouting,\n        renderPath,\n        parsePath,\n        navigatorFactory,\n        beforeLeave\n    };\n}\nexport function createRouteContext(router, parent, child, match, params) {\n    const { base, location, navigatorFactory } = router;\n    const { pattern, element: outlet, preload, data } = match().route;\n    const path = createMemo(() => match().path);\n    preload && preload();\n    const route = {\n        parent,\n        pattern,\n        get child() {\n            return child();\n        },\n        path,\n        params,\n        data: parent.data,\n        outlet,\n        resolvePath(to) {\n            return resolvePath(base.path(), to, path());\n        }\n    };\n    if (data) {\n        try {\n            TempRoute = route;\n            route.data = data({ data: parent.data, params, location, navigate: navigatorFactory(route) });\n        }\n        finally {\n            TempRoute = undefined;\n        }\n    }\n    return route;\n}\n","export function createBeforeLeave() {\n    let listeners = new Set();\n    function subscribe(listener) {\n        listeners.add(listener);\n        return () => listeners.delete(listener);\n    }\n    let ignore = false;\n    function confirm(to, options) {\n        if (ignore)\n            return !(ignore = false);\n        const e = {\n            to,\n            options,\n            defaultPrevented: false,\n            preventDefault: () => (e.defaultPrevented = true)\n        };\n        for (const l of listeners)\n            l.listener({\n                ...e,\n                from: l.location,\n                retry: (force) => {\n                    force && (ignore = true);\n                    l.navigate(to, options);\n                }\n            });\n        return !e.defaultPrevented;\n    }\n    return {\n        subscribe,\n        confirm\n    };\n}\n","/*@refresh skip*/\nimport { children, createMemo, createRoot, mergeProps, on, Show, splitProps } from \"solid-js\";\nimport { isServer } from \"solid-js/web\";\nimport { pathIntegration, staticIntegration } from \"./integration\";\nimport { createBranches, createRouteContext, createRouterContext, getRouteMatches, RouteContextObj, RouterContextObj, useHref, useLocation, useNavigate, useResolvedPath, useRoute, useRouter } from \"./routing\";\nimport { joinPaths, normalizePath, createMemoObject } from \"./utils\";\nexport const Router = (props) => {\n    const { source, url, base, data, out } = props;\n    const integration = source || (isServer ? staticIntegration({ value: url || \"\" }) : pathIntegration());\n    const routerState = createRouterContext(integration, base, data, out);\n    return (<RouterContextObj.Provider value={routerState}>{props.children}</RouterContextObj.Provider>);\n};\nexport const Routes = (props) => {\n    const router = useRouter();\n    const parentRoute = useRoute();\n    const routeDefs = children(() => props.children);\n    const branches = createMemo(() => createBranches(routeDefs(), joinPaths(parentRoute.pattern, props.base || \"\"), Outlet));\n    const matches = createMemo(() => getRouteMatches(branches(), router.location.pathname));\n    const params = createMemoObject(() => {\n        const m = matches();\n        const params = {};\n        for (let i = 0; i < m.length; i++) {\n            Object.assign(params, m[i].params);\n        }\n        return params;\n    });\n    if (router.out) {\n        router.out.matches.push(matches().map(({ route, path, params }) => ({\n            originalPath: route.originalPath,\n            pattern: route.pattern,\n            path,\n            params\n        })));\n    }\n    const disposers = [];\n    let root;\n    const routeStates = createMemo(on(matches, (nextMatches, prevMatches, prev) => {\n        let equal = prevMatches && nextMatches.length === prevMatches.length;\n        const next = [];\n        for (let i = 0, len = nextMatches.length; i < len; i++) {\n            const prevMatch = prevMatches && prevMatches[i];\n            const nextMatch = nextMatches[i];\n            if (prev && prevMatch && nextMatch.route.key === prevMatch.route.key) {\n                next[i] = prev[i];\n            }\n            else {\n                equal = false;\n                if (disposers[i]) {\n                    disposers[i]();\n                }\n                createRoot(dispose => {\n                    disposers[i] = dispose;\n                    next[i] = createRouteContext(router, next[i - 1] || parentRoute, () => routeStates()[i + 1], () => matches()[i], params);\n                });\n            }\n        }\n        disposers.splice(nextMatches.length).forEach(dispose => dispose());\n        if (prev && equal) {\n            return prev;\n        }\n        root = next[0];\n        return next;\n    }));\n    return (<Show when={routeStates() && root} keyed>\n      {route => <RouteContextObj.Provider value={route}>{route.outlet()}</RouteContextObj.Provider>}\n    </Show>);\n};\nexport const useRoutes = (routes, base) => {\n    return () => <Routes base={base}>{routes}</Routes>;\n};\nexport const Route = (props) => {\n    const childRoutes = children(() => props.children);\n    return mergeProps(props, {\n        get children() {\n            return childRoutes();\n        }\n    });\n};\nexport const Outlet = () => {\n    const route = useRoute();\n    return (<Show when={route.child} keyed>\n      {child => <RouteContextObj.Provider value={child}>{child.outlet()}</RouteContextObj.Provider>}\n    </Show>);\n};\nexport function A(props) {\n    props = mergeProps({ inactiveClass: \"inactive\", activeClass: \"active\" }, props);\n    const [, rest] = splitProps(props, [\n        \"href\",\n        \"state\",\n        \"class\",\n        \"activeClass\",\n        \"inactiveClass\",\n        \"end\"\n    ]);\n    const to = useResolvedPath(() => props.href);\n    const href = useHref(to);\n    const location = useLocation();\n    const isActive = createMemo(() => {\n        const to_ = to();\n        if (to_ === undefined)\n            return false;\n        const path = normalizePath(to_.split(/[?#]/, 1)[0]).toLowerCase();\n        const loc = normalizePath(location.pathname).toLowerCase();\n        return props.end ? path === loc : loc.startsWith(path);\n    });\n    return (<a link {...rest} href={href() || props.href} state={JSON.stringify(props.state)} classList={{\n            ...(props.class && { [props.class]: true }),\n            [props.inactiveClass]: !isActive(),\n            [props.activeClass]: isActive(),\n            ...rest.classList\n        }} aria-current={isActive() ? \"page\" : undefined}/>);\n}\n// deprecated alias exports\nexport { A as Link, A as NavLink };\nexport function Navigate(props) {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const { href, state } = props;\n    const path = typeof href === \"function\" ? href({ navigate, location }) : href;\n    navigate(path, { replace: true, state });\n    return null;\n}\n","import { DEV, equalFn, untrack, getOwner, onCleanup, createSignal, sharedConfig, onMount } from 'solid-js';\nimport { isServer } from 'solid-js/web';\nexport { isServer } from 'solid-js/web';\n\n// src/index.ts\nvar isClient = !isServer;\nvar isDev = isClient && !!DEV;\nvar isProd = !isDev;\nvar noop = () => void 0;\nvar trueFn = () => true;\nvar falseFn = () => false;\nvar defaultEquals = equalFn;\nvar EQUALS_FALSE_OPTIONS = { equals: false };\nvar INTERNAL_OPTIONS = { internal: true };\nvar ofClass = (v, c) => v instanceof c || v && v.constructor === c;\nfunction isObject(value) {\n  return value !== null && (typeof value === \"object\" || typeof value === \"function\");\n}\nvar isNonNullable = (i) => i != null;\nvar filterNonNullable = (arr) => arr.filter(isNonNullable);\nvar compare = (a, b) => a < b ? -1 : a > b ? 1 : 0;\nvar arrayEquals = (a, b) => a === b || a.length === b.length && a.every((e, i) => e === b[i]);\nfunction chain(callbacks) {\n  return (...args) => {\n    for (const callback of callbacks)\n      callback && callback(...args);\n  };\n}\nfunction reverseChain(callbacks) {\n  return (...args) => {\n    for (let i = callbacks.length - 1; i >= 0; i--) {\n      const callback = callbacks[i];\n      callback && callback(...args);\n    }\n  };\n}\nvar clamp = (n, min, max) => Math.min(Math.max(n, min), max);\nvar access = (v) => typeof v === \"function\" && !v.length ? v() : v;\nvar asArray = (value) => Array.isArray(value) ? value : value ? [value] : [];\nvar accessArray = (list) => list.map((v) => access(v));\nvar withAccess = (value, fn) => {\n  const _value = access(value);\n  typeof _value != null && fn(_value);\n};\nvar asAccessor = (v) => typeof v === \"function\" ? v : () => v;\nfunction accessWith(valueOrFn, ...args) {\n  return typeof valueOrFn === \"function\" ? valueOrFn(...args) : valueOrFn;\n}\nfunction defer(deps, fn, initialValue) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let shouldDefer = true;\n  return (prevValue) => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++)\n        input[i] = deps[i]();\n    } else\n      input = deps();\n    if (shouldDefer) {\n      shouldDefer = false;\n      prevInput = input;\n      return initialValue;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nvar entries = Object.entries;\nvar keys = Object.keys;\nvar tryOnCleanup = isDev ? (fn) => getOwner() ? onCleanup(fn) : fn : onCleanup;\nvar createCallbackStack = () => {\n  let stack = [];\n  const clear = () => stack = [];\n  return {\n    push: (...callbacks) => stack.push(...callbacks),\n    execute(arg0, arg1, arg2, arg3) {\n      stack.forEach((cb) => cb(arg0, arg1, arg2, arg3));\n      clear();\n    },\n    clear\n  };\n};\nfunction createMicrotask(fn) {\n  let calls = 0;\n  let args;\n  onCleanup(() => calls = 0);\n  return (...a) => {\n    args = a, calls++;\n    queueMicrotask(() => --calls === 0 && fn(...args));\n  };\n}\nfunction createHydratableSignal(serverValue, update, options) {\n  if (isServer) {\n    return createSignal(serverValue, options);\n  }\n  if (sharedConfig.context) {\n    const [state, setState] = createSignal(serverValue, options);\n    onMount(() => setState(() => update()));\n    return [state, setState];\n  }\n  return createSignal(update(), options);\n}\nvar createHydrateSignal = createHydratableSignal;\nfunction handleDiffArray(current, prev, handleAdded, handleRemoved) {\n  const currLength = current.length;\n  const prevLength = prev.length;\n  let i = 0;\n  if (!prevLength) {\n    for (; i < currLength; i++)\n      handleAdded(current[i]);\n    return;\n  }\n  if (!currLength) {\n    for (; i < prevLength; i++)\n      handleRemoved(prev[i]);\n    return;\n  }\n  for (; i < prevLength; i++) {\n    if (prev[i] !== current[i])\n      break;\n  }\n  let prevEl;\n  let currEl;\n  prev = prev.slice(i);\n  current = current.slice(i);\n  for (prevEl of prev) {\n    if (!current.includes(prevEl))\n      handleRemoved(prevEl);\n  }\n  for (currEl of current) {\n    if (!prev.includes(currEl))\n      handleAdded(currEl);\n  }\n}\n\nexport { EQUALS_FALSE_OPTIONS, INTERNAL_OPTIONS, access, accessArray, accessWith, arrayEquals, asAccessor, asArray, chain, clamp, compare, createCallbackStack, createHydratableSignal, createHydrateSignal, createMicrotask, defaultEquals, defer, entries, falseFn, filterNonNullable, handleDiffArray, isClient, isDev, isNonNullable, isObject, isProd, keys, noop, ofClass, reverseChain, trueFn, tryOnCleanup, withAccess };\n","import { getOwner, createRoot, runWithOwner, onCleanup, sharedConfig, createSignal, batch } from 'solid-js';\nimport { isServer } from 'solid-js/web';\nimport { asArray, access, trueFn, noop, createMicrotask } from '@solid-primitives/utils';\n\n// src/index.ts\nfunction createSubRoot(fn, ...owners) {\n  if (owners.length === 0)\n    owners = [getOwner()];\n  return createRoot((dispose) => {\n    asArray(access(owners)).forEach(\n      (owner) => owner && runWithOwner(owner, onCleanup.bind(void 0, dispose))\n    );\n    return fn(dispose);\n  }, owners[0]);\n}\nvar createBranch = createSubRoot;\nvar createCallback = (callback, owner = getOwner()) => owner ? (...args) => runWithOwner(owner, () => callback(...args)) : callback;\nfunction createDisposable(fn, ...owners) {\n  return createSubRoot((dispose) => {\n    fn(dispose);\n    return dispose;\n  }, ...owners);\n}\nfunction createSingletonRoot(factory, detachedOwner = getOwner()) {\n  let listeners = 0, value, disposeRoot;\n  return () => {\n    listeners++;\n    onCleanup(() => {\n      listeners--;\n      queueMicrotask(() => {\n        if (!listeners && disposeRoot) {\n          disposeRoot();\n          disposeRoot = value = void 0;\n        }\n      });\n    });\n    if (!disposeRoot) {\n      createRoot((dispose) => value = factory(disposeRoot = dispose), detachedOwner);\n    }\n    return value;\n  };\n}\nvar createSharedRoot = createSingletonRoot;\nfunction createHydratableSingletonRoot(factory) {\n  const owner = getOwner();\n  const singleton = createSingletonRoot(factory, owner);\n  return () => isServer || sharedConfig.context ? createRoot(factory, owner) : singleton();\n}\nfunction createRootPool(factory, options = {}) {\n  if (isServer) {\n    const owner2 = getOwner();\n    return (args) => createRoot((dispose) => factory(() => args, trueFn, dispose), owner2);\n  }\n  let length = 0;\n  const { limit = 100 } = options, pool = new Array(limit), owner = getOwner(), mapRoot = factory.length > 1 ? (dispose, [args, set]) => {\n    const [active, setA] = createSignal(true);\n    const root = {\n      dispose,\n      set,\n      setA,\n      active,\n      v: factory(args, active, () => disposeRoot(root))\n    };\n    return root;\n  } : (dispose, [args, set]) => ({\n    dispose,\n    set,\n    setA: trueFn,\n    active: trueFn,\n    v: factory(args, trueFn, noop)\n  }), limitPool = createMicrotask(() => {\n    if (length > limit) {\n      for (let i = limit; i < length; i++) {\n        pool[i].dispose();\n        pool[i] = void 0;\n      }\n      length = limit;\n    }\n  }), cleanupRoot = (root) => {\n    if (root.dispose !== noop) {\n      pool[length++] = root;\n      root.setA(false);\n      limitPool();\n    }\n  }, disposeRoot = (root) => {\n    root.dispose();\n    root.dispose = noop;\n    if (root.active())\n      root.setA(false);\n    else {\n      pool[pool.indexOf(root)] = pool[--length];\n      pool[length] = void 0;\n    }\n  };\n  onCleanup(() => {\n    for (let i = 0; i < length; i++)\n      pool[i].dispose();\n    length = 0;\n  });\n  return (arg) => {\n    let root;\n    if (length) {\n      root = pool[--length];\n      pool[length] = void 0;\n      batch(() => {\n        root.set(() => arg);\n        root.setA(true);\n      });\n    } else\n      root = createRoot((dispose) => mapRoot(dispose, createSignal(arg)), owner);\n    onCleanup(() => cleanupRoot(root));\n    return root.v;\n  };\n}\n\nexport { createBranch, createCallback, createDisposable, createHydratableSingletonRoot, createRootPool, createSharedRoot, createSingletonRoot, createSubRoot };\n","import { makeEventListener } from '@solid-primitives/event-listener';\nimport { createSingletonRoot } from '@solid-primitives/rootless';\nimport { arrayEquals } from '@solid-primitives/utils';\nimport { createSignal, untrack, createMemo, createEffect, on } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\n// src/index.ts\nfunction equalsKeyHoldSequence(sequence, model) {\n  for (let i = sequence.length - 1; i >= 0; i--) {\n    const _model = model.slice(0, i + 1);\n    if (!arrayEquals(sequence[i], _model))\n      return false;\n  }\n  return true;\n}\nvar useKeyDownEvent = /* @__PURE__ */ createSingletonRoot(\n  () => {\n    if (isServer) {\n      return () => null;\n    }\n    const [event, setEvent] = createSignal(null);\n    makeEventListener(window, \"keydown\", (e) => {\n      setEvent(e);\n      setTimeout(() => setEvent(null));\n    });\n    return event;\n  }\n);\nvar useKeyDownList = /* @__PURE__ */ createSingletonRoot(() => {\n  if (isServer) {\n    const keys = () => [];\n    keys[0] = keys;\n    keys[1] = { event: () => null };\n    keys[Symbol.iterator] = function* () {\n      yield keys[0];\n      yield keys[1];\n    };\n    return keys;\n  }\n  const [pressedKeys, setPressedKeys] = createSignal([]), reset = () => setPressedKeys([]), event = useKeyDownEvent();\n  makeEventListener(window, \"keydown\", (e) => {\n    if (e.repeat || typeof e.key !== \"string\")\n      return;\n    const key = e.key.toUpperCase(), currentKeys = pressedKeys();\n    if (currentKeys.includes(key))\n      return;\n    const keys = [...currentKeys, key];\n    if (currentKeys.length === 0 && key !== \"ALT\" && key !== \"CONTROL\" && key !== \"META\" && key !== \"SHIFT\") {\n      if (e.shiftKey)\n        keys.unshift(\"SHIFT\");\n      if (e.altKey)\n        keys.unshift(\"ALT\");\n      if (e.ctrlKey)\n        keys.unshift(\"CONTROL\");\n      if (e.metaKey)\n        keys.unshift(\"META\");\n    }\n    setPressedKeys(keys);\n  });\n  makeEventListener(window, \"keyup\", (e) => {\n    if (typeof e.key !== \"string\")\n      return;\n    const key = e.key.toUpperCase();\n    setPressedKeys((prev) => prev.filter((_key) => _key !== key));\n  });\n  makeEventListener(window, \"blur\", reset);\n  makeEventListener(window, \"contextmenu\", (e) => {\n    e.defaultPrevented || reset();\n  });\n  pressedKeys[0] = pressedKeys;\n  pressedKeys[1] = { event };\n  pressedKeys[Symbol.iterator] = function* () {\n    yield pressedKeys[0];\n    yield pressedKeys[1];\n  };\n  return pressedKeys;\n});\nvar useCurrentlyHeldKey = /* @__PURE__ */ createSingletonRoot(\n  () => {\n    if (isServer) {\n      return () => null;\n    }\n    const keys = useKeyDownList();\n    let prevKeys = untrack(keys);\n    return createMemo(() => {\n      const _keys = keys();\n      const prev = prevKeys;\n      prevKeys = _keys;\n      if (prev.length === 0 && _keys.length === 1)\n        return _keys[0];\n      return null;\n    });\n  }\n);\nvar useKeyDownSequence = /* @__PURE__ */ createSingletonRoot(() => {\n  if (isServer) {\n    return () => [];\n  }\n  const keys = useKeyDownList();\n  return createMemo((prev) => {\n    if (keys().length === 0)\n      return [];\n    return [...prev, keys()];\n  }, []);\n});\nfunction createKeyHold(key, options = {}) {\n  if (isServer) {\n    return () => false;\n  }\n  key = key.toUpperCase();\n  const { preventDefault = true } = options, event = useKeyDownEvent(), heldKey = useCurrentlyHeldKey();\n  return createMemo(() => heldKey() === key && (preventDefault && event()?.preventDefault(), true));\n}\nfunction createShortcut(keys, callback, options = {}) {\n  if (isServer || !keys.length) {\n    return;\n  }\n  keys = keys.map((key) => key.toUpperCase());\n  const { preventDefault = true } = options, event = useKeyDownEvent(), sequence = useKeyDownSequence();\n  let reset = false;\n  const handleSequenceWithReset = (sequence2) => {\n    if (!sequence2.length)\n      return reset = false;\n    if (reset)\n      return;\n    const e = event();\n    if (sequence2.length < keys.length) {\n      if (equalsKeyHoldSequence(sequence2, keys.slice(0, sequence2.length))) {\n        preventDefault && e && e.preventDefault();\n      } else {\n        reset = true;\n      }\n    } else {\n      reset = true;\n      if (equalsKeyHoldSequence(sequence2, keys)) {\n        preventDefault && e && e.preventDefault();\n        callback(e);\n      }\n    }\n  };\n  const handleSequenceWithoutReset = (sequence2) => {\n    const last = sequence2.at(-1);\n    if (!last)\n      return;\n    const e = event();\n    if (preventDefault && last.length < keys.length) {\n      if (arrayEquals(last, keys.slice(0, keys.length - 1))) {\n        e && e.preventDefault();\n      }\n      return;\n    }\n    if (arrayEquals(last, keys)) {\n      const prev = sequence2.at(-2);\n      if (!prev || arrayEquals(prev, keys.slice(0, keys.length - 1))) {\n        preventDefault && e && e.preventDefault();\n        callback(e);\n      }\n    }\n  };\n  createEffect(\n    on(sequence, options.requireReset ? handleSequenceWithReset : handleSequenceWithoutReset)\n  );\n}\n\nexport { createKeyHold, createShortcut, useCurrentlyHeldKey, useKeyDownEvent, useKeyDownList, useKeyDownSequence };\n","import { tryOnCleanup, entries, createCallbackStack, asArray, access, keys } from '@solid-primitives/utils';\nimport { createEffect, createRenderEffect, createSignal, onCleanup } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\n// src/eventListener.ts\nfunction makeEventListener(target, type, handler, options) {\n  target.addEventListener(type, handler, options);\n  return tryOnCleanup(target.removeEventListener.bind(target, type, handler, options));\n}\nfunction createEventListener(targets, type, handler, options) {\n  if (isServer)\n    return;\n  const attachListeners = () => {\n    asArray(access(targets)).forEach((el) => {\n      if (el)\n        asArray(access(type)).forEach((type2) => makeEventListener(el, type2, handler, options));\n    });\n  };\n  if (typeof targets === \"function\")\n    createEffect(attachListeners);\n  else\n    createRenderEffect(attachListeners);\n}\nfunction createEventSignal(target, type, options) {\n  if (isServer) {\n    return () => void 0;\n  }\n  const [lastEvent, setLastEvent] = createSignal();\n  createEventListener(target, type, setLastEvent, options);\n  return lastEvent;\n}\nvar eventListener = (target, props) => {\n  createEffect(() => {\n    const [type, handler, options] = props();\n    makeEventListener(target, type, handler, options);\n  });\n};\nfunction createEventListenerMap(targets, handlersMap, options) {\n  if (isServer) {\n    return;\n  }\n  for (const [eventName, handler] of entries(handlersMap)) {\n    if (handler)\n      createEventListener(targets, eventName, handler, options);\n  }\n}\nvar attachPropListeners = (target, props) => {\n  keys(props).forEach((attr) => {\n    if (attr.startsWith(\"on\") && typeof props[attr] === \"function\")\n      makeEventListener(target, attr.substring(2).toLowerCase(), props[attr]);\n  });\n};\nvar WindowEventListener = (props) => {\n  if (isServer)\n    return null;\n  attachPropListeners(window, props);\n};\nvar DocumentEventListener = (props) => {\n  if (isServer)\n    return null;\n  attachPropListeners(document, props);\n};\nfunction makeEventListenerStack(target, options) {\n  if (isServer) {\n    return [() => () => void 0, () => void 0];\n  }\n  const { push, execute } = createCallbackStack();\n  return [\n    (type, handler, overwriteOptions) => {\n      const clear = makeEventListener(target, type, handler, overwriteOptions ?? options);\n      push(clear);\n      return clear;\n    },\n    onCleanup(execute)\n  ];\n}\n\n// src/callbackWrappers.ts\nvar preventDefault = (callback) => (e) => {\n  e.preventDefault();\n  callback(e);\n};\nvar stopPropagation = (callback) => (e) => {\n  e.stopPropagation();\n  callback(e);\n};\nvar stopImmediatePropagation = (callback) => (e) => {\n  e.stopImmediatePropagation();\n  callback(e);\n};\n\nexport { DocumentEventListener, WindowEventListener, createEventListener, createEventListenerMap, createEventSignal, eventListener, makeEventListener, makeEventListenerStack, preventDefault, stopImmediatePropagation, stopPropagation };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nexport function isFunc(item) {\n    return typeof item === 'function';\n}\nexport function isObject(item) {\n    return typeof item === 'object';\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isArray(item) {\n    return Array.isArray(item);\n}\nexport function isString(item) {\n    return typeof item === 'string';\n}\nexport function isNumber(item) {\n    return typeof item === 'number';\n}\nexport function isInteger(item) {\n    return Number.isInteger(item);\n}\nexport function keyExists(obj, keys) {\n    for (const key of keys) {\n        if (key in obj) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Asserts a condition is truthy, otherwise throws an error\n *\n * @remarks\n * Useful at the top of functions to ensure certain conditions, arguments and\n * properties are set/met before continuing. When using this function,\n * TypeScript will narrow away falsy types from the condition.\n *\n * @param condition\n * @param message\n * @returns\n */\nexport function assertTruthy(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\n//# sourceMappingURL=utils.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createEffect, on, createSignal, untrack } from 'solid-js';\nimport { useKeyDownEvent } from '@solid-primitives/keyboard';\nimport { activeElement, ElementNode } from '@lightningjs/solid';\nimport { isFunc } from './utils.js';\nlet keyMap = {\n    Left: 'ArrowLeft',\n    Right: 'ArrowRight',\n    Up: 'ArrowUp',\n    Down: 'ArrowDown',\n    Enter: 'Enter',\n    Last: 'l'\n};\nconst [focusPath, setFocusPath] = createSignal([]);\nexport { focusPath };\nexport const useFocusManager = (userKeyMap = {}) => {\n    const keypressEvent = useKeyDownEvent();\n    keyMap = {\n        ...keyMap,\n        ...userKeyMap,\n    };\n    const keyMapEntries = Object.entries(keyMap);\n    createEffect(on(activeElement, (currentFocusedElm, prevFocusedElm, prevFocusPath = []) => {\n        const newFocusedElms = [];\n        let current = currentFocusedElm;\n        const fp = [];\n        while (current) {\n            if (!current.states.has('focus')) {\n                current.states.add('focus');\n                isFunc(current.onFocus) &&\n                    current.onFocus.call(current, currentFocusedElm, prevFocusedElm ?? null);\n                newFocusedElms.push(current);\n            }\n            fp.push(current);\n            current = current.parent ?? null;\n        }\n        prevFocusPath.forEach((elm) => {\n            if (!fp.includes(elm)) {\n                elm.states.remove('focus');\n                isFunc(elm.onBlur) &&\n                    elm.onBlur.call(elm, currentFocusedElm, prevFocusedElm ?? null);\n            }\n        });\n        setFocusPath(fp);\n        return fp;\n    }, { defer: true }));\n    createEffect(() => {\n        const e = keypressEvent();\n        if (e) {\n            // Search keyMap for the value of the pressed key\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const foundKeyEntry = keyMapEntries.find(([key, value]) => {\n                return (value === e.key);\n            });\n            untrack(() => {\n                const fp = focusPath();\n                for (const elm of fp) {\n                    const mappedKeyEvent = foundKeyEntry ? foundKeyEntry[0] : undefined;\n                    if (mappedKeyEvent) {\n                        const onKeyHandler = elm[`on${mappedKeyEvent}`];\n                        if (isFunc(onKeyHandler)) {\n                            if (onKeyHandler.call(elm, e, elm) === true) {\n                                break;\n                            }\n                        }\n                    }\n                    if (isFunc(elm.onKeyPress)) {\n                        if (elm.onKeyPress.call(elm, e, mappedKeyEvent, elm) === true) {\n                            break;\n                        }\n                    }\n                }\n                return false;\n            });\n        }\n    });\n    return focusPath;\n};\n//# sourceMappingURL=useFocusManager.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ElementNode } from \"@lightningjs/solid\";\nexport function withPadding(el, padding) {\n    const pad = padding();\n    let top, left, right, bottom;\n    if (Array.isArray(pad)) {\n        // top right bottom left\n        if (pad.length === 2) {\n            top = bottom = pad[0];\n            left = right = pad[1];\n        }\n        else if (pad.length === 3) {\n            top = pad[0];\n            left = right = pad[1];\n            bottom = pad[2];\n        }\n        else {\n            [top, right, bottom, left] = pad;\n        }\n    }\n    else {\n        top = right = bottom = left = pad;\n    }\n    el.onLayout = (node, size) => {\n        if (size) {\n            el.width = size.width + left + right;\n            el.height = size.height + top + bottom;\n            node.x = left;\n            node.y = top;\n            el.parent.updateLayout(el, { width: el.width, height: el.height });\n        }\n    };\n}\n//# sourceMappingURL=withPadding.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n/* global SpeechSynthesisErrorEvent */\nfunction flattenStrings(series = []) {\n    const flattenedSeries = [];\n    let i;\n    for (i = 0; i < series.length; i++) {\n        const s = series[i];\n        if (typeof s === 'string' && !s.includes('PAUSE-')) {\n            flattenedSeries.push(series[i]);\n        }\n        else {\n            break;\n        }\n    }\n    // add a \"word boundary\" to ensure the Announcer doesn't automatically try to\n    // interpret strings that look like dates but are not actually dates\n    // for example, if \"Rising Sun\" and \"1993\" are meant to be two separate lines,\n    // when read together, \"Sun 1993\" is interpretted as \"Sunday 1993\"\n    return [flattenedSeries.join(',\\b ')].concat(series.slice(i));\n}\nfunction delay(pause) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, pause);\n    });\n}\n/**\n * Speak a string\n *\n * @param phrase Phrase to speak\n * @param utterances An array which the new SpeechSynthesisUtterance instance representing this utterance will be appended\n * @param lang Language to speak in\n * @return {Promise<void>} Promise resolved when the utterance has finished speaking, and rejected if there's an error\n */\nfunction speak(phrase, utterances, lang = 'en-US') {\n    const synth = window.speechSynthesis;\n    return new Promise((resolve, reject) => {\n        const utterance = new SpeechSynthesisUtterance(phrase);\n        utterance.lang = lang;\n        utterance.onend = () => {\n            resolve();\n        };\n        utterance.onerror = (e) => {\n            reject(e);\n        };\n        utterances.push(utterance);\n        synth.speak(utterance);\n    });\n}\nfunction speakSeries(series, lang, root = true) {\n    const synth = window.speechSynthesis;\n    const remainingPhrases = flattenStrings(Array.isArray(series) ? series : [series]);\n    const nestedSeriesResults = [];\n    /*\n      We hold this array of SpeechSynthesisUtterances in order to prevent them from being\n      garbage collected prematurely on STB hardware which can cause the 'onend' events of\n      utterances to not fire consistently.\n    */\n    const utterances = [];\n    let active = true;\n    const seriesChain = (async () => {\n        try {\n            while (active && remainingPhrases.length) {\n                const phrase = await Promise.resolve(remainingPhrases.shift());\n                if (!active) {\n                    // Exit\n                    // Need to check this after the await in case it was cancelled in between\n                    break;\n                }\n                else if (typeof phrase === 'string' && phrase.includes('PAUSE-')) {\n                    // Pause it\n                    let pause = Number(phrase.split('PAUSE-')[1]) * 1000;\n                    if (isNaN(pause)) {\n                        pause = 0;\n                    }\n                    await delay(pause);\n                }\n                else if (typeof phrase === 'string' && phrase.length) {\n                    // Speak it\n                    const totalRetries = 3;\n                    let retriesLeft = totalRetries;\n                    while (active && retriesLeft > 0) {\n                        try {\n                            await speak(phrase, utterances, lang);\n                            retriesLeft = 0;\n                        }\n                        catch (e) {\n                            // eslint-disable-next-line no-undef\n                            if (e instanceof SpeechSynthesisErrorEvent) {\n                                if (e.error === 'network') {\n                                    retriesLeft--;\n                                    console.warn(`Speech synthesis network error. Retries left: ${retriesLeft}`);\n                                    await delay(500 * (totalRetries - retriesLeft));\n                                }\n                                else if (e.error === 'canceled' ||\n                                    e.error === 'interrupted') {\n                                    // Cancel or interrupt error (ignore)\n                                    retriesLeft = 0;\n                                }\n                                else {\n                                    throw new Error(`SpeechSynthesisErrorEvent: ${e.error}`);\n                                }\n                            }\n                            else {\n                                throw e;\n                            }\n                        }\n                    }\n                }\n                else if (typeof phrase === 'function') {\n                    const seriesResult = speakSeries(phrase(), lang, false);\n                    nestedSeriesResults.push(seriesResult);\n                    await seriesResult.series;\n                }\n                else if (Array.isArray(phrase)) {\n                    // Speak it (recursively)\n                    const seriesResult = speakSeries(phrase, lang, false);\n                    nestedSeriesResults.push(seriesResult);\n                    await seriesResult.series;\n                }\n            }\n        }\n        finally {\n            active = false;\n        }\n    })();\n    return {\n        series: seriesChain,\n        get active() {\n            return active;\n        },\n        append: (toSpeak) => {\n            remainingPhrases.push(toSpeak);\n        },\n        cancel: () => {\n            if (!active) {\n                return;\n            }\n            if (root) {\n                synth.cancel();\n            }\n            nestedSeriesResults.forEach((nestedSeriesResults) => {\n                nestedSeriesResults.cancel();\n            });\n            active = false;\n        },\n    };\n}\nlet currentSeries;\nexport default function (toSpeak, lang = 'en-US') {\n    currentSeries && currentSeries.cancel();\n    currentSeries = speakSeries(toSpeak, lang);\n    return currentSeries;\n}\n//# sourceMappingURL=speech.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport SpeechEngine, {} from './speech.js';\nimport { debounce } from '@solid-primitives/scheduled';\nlet resetFocusPathTimer;\nlet prevFocusPath = [];\nlet currentlySpeaking;\nlet voiceOutDisabled = false;\nconst fiveMinutes = 300000;\nfunction debounceWithFlush(callback, time) {\n    const trigger = debounce(callback, time);\n    let scopedValue;\n    const debounced = (newValue) => {\n        scopedValue = newValue;\n        trigger(newValue);\n    };\n    debounced.flush = () => {\n        trigger.clear();\n        callback(scopedValue);\n    };\n    debounced.clear = trigger.clear;\n    return debounced;\n}\n;\nfunction getElmName(elm) {\n    return elm.id || elm.name;\n}\nfunction onFocusChangeCore(focusPath = []) {\n    if (!Announcer.onFocusChange) {\n        return;\n    }\n    const loaded = focusPath.every((elm) => !elm.loading);\n    const focusDiff = focusPath.filter((elm) => !prevFocusPath.includes(elm));\n    resetFocusPathTimer();\n    if (!loaded && Announcer.onFocusChange) {\n        Announcer.onFocusChange([]);\n        return;\n    }\n    prevFocusPath = focusPath.slice(0);\n    const toAnnounceText = [];\n    const toAnnounce = focusDiff.reduce((acc, elm) => {\n        if (elm.announce) {\n            acc.push([getElmName(elm), 'Announce', elm.announce]);\n            toAnnounceText.push(elm.announce);\n        }\n        else if (elm.title) {\n            acc.push([getElmName(elm), 'Title', elm.title]);\n            toAnnounceText.push(elm.title);\n        }\n        else {\n            acc.push([getElmName(elm), 'No Announce', '']);\n        }\n        return acc;\n    }, []);\n    focusDiff.reverse().reduce((acc, elm) => {\n        if (elm.announceContext) {\n            acc.push([getElmName(elm), 'Context', elm.announceContext]);\n            toAnnounceText.push(elm.announceContext);\n        }\n        else {\n            acc.push([getElmName(elm), 'No Context', '']);\n        }\n        return acc;\n    }, toAnnounce);\n    if (Announcer.debug) {\n        console.table(toAnnounce);\n    }\n    if (toAnnounceText.length) {\n        return Announcer.speak(toAnnounceText.reduce((acc, val) => acc.concat(val), []));\n    }\n}\nfunction textToSpeech(toSpeak) {\n    if (voiceOutDisabled) {\n        return;\n    }\n    return (currentlySpeaking = SpeechEngine(toSpeak));\n}\nexport const Announcer = {\n    debug: false,\n    cancel: function () {\n        currentlySpeaking && currentlySpeaking.cancel();\n    },\n    clearPrevFocus: function (depth = 0) {\n        prevFocusPath = prevFocusPath.slice(0, depth);\n        resetFocusPathTimer();\n    },\n    speak: function (text, { append = false, notification = false } = {}) {\n        if (Announcer.onFocusChange) {\n            Announcer.onFocusChange.flush();\n            if (append && currentlySpeaking && currentlySpeaking.active) {\n                currentlySpeaking.append(text);\n            }\n            else {\n                Announcer.cancel();\n                textToSpeech(text);\n            }\n            if (notification) {\n                voiceOutDisabled = true;\n                currentlySpeaking?.series.finally(() => {\n                    voiceOutDisabled = false;\n                    // TODO: Implement refresh\n                    // Announcer.refresh();\n                }).catch(console.error);\n            }\n        }\n        return currentlySpeaking;\n    },\n    setupTimers: function ({ focusDebounce = 400, focusChangeTimeout = fiveMinutes, } = {}) {\n        Announcer.onFocusChange = debounceWithFlush(onFocusChangeCore, focusDebounce);\n        resetFocusPathTimer = debounceWithFlush(() => {\n            // Reset focus path for full announce\n            prevFocusPath = [];\n        }, focusChangeTimeout);\n    },\n};\n//# sourceMappingURL=announcer.js.map","import { getOwner, onCleanup, createSignal, getListener } from 'solid-js';\nimport { isServer } from 'solid-js/web';\n\n// src/index.ts\nvar debounce = (callback, wait) => {\n  if (isServer) {\n    return Object.assign(() => void 0, { clear: () => void 0 });\n  }\n  let timeoutId;\n  const clear = () => clearTimeout(timeoutId);\n  if (getOwner())\n    onCleanup(clear);\n  const debounced = (...args) => {\n    if (timeoutId !== void 0)\n      clear();\n    timeoutId = setTimeout(() => callback(...args), wait);\n  };\n  return Object.assign(debounced, { clear });\n};\nvar throttle = (callback, wait) => {\n  if (isServer) {\n    return Object.assign(() => void 0, { clear: () => void 0 });\n  }\n  let isThrottled = false, timeoutId, lastArgs;\n  const throttled = (...args) => {\n    lastArgs = args;\n    if (isThrottled)\n      return;\n    isThrottled = true;\n    timeoutId = setTimeout(() => {\n      callback(...lastArgs);\n      isThrottled = false;\n    }, wait);\n  };\n  const clear = () => {\n    clearTimeout(timeoutId);\n    isThrottled = false;\n  };\n  if (getOwner())\n    onCleanup(clear);\n  return Object.assign(throttled, { clear });\n};\nvar scheduleIdle = isServer ? () => Object.assign(() => void 0, { clear: () => void 0 }) : (\n  // requestIdleCallback is not supported in Safari\n  window.requestIdleCallback ? (callback, maxWait) => {\n    let isDeferred = false, id, lastArgs;\n    const deferred = (...args) => {\n      lastArgs = args;\n      if (isDeferred)\n        return;\n      isDeferred = true;\n      id = requestIdleCallback(\n        () => {\n          callback(...lastArgs);\n          isDeferred = false;\n        },\n        { timeout: maxWait }\n      );\n    };\n    const clear = () => {\n      cancelIdleCallback(id);\n      isDeferred = false;\n    };\n    if (getOwner())\n      onCleanup(clear);\n    return Object.assign(deferred, { clear });\n  } : (\n    // fallback to setTimeout (throttle)\n    (callback) => throttle(callback)\n  )\n);\nfunction leading(schedule, callback, wait) {\n  if (isServer) {\n    let called = false;\n    const scheduled2 = (...args) => {\n      if (called)\n        return;\n      called = true;\n      callback(...args);\n    };\n    return Object.assign(scheduled2, { clear: () => void 0 });\n  }\n  let isScheduled = false;\n  const scheduled = schedule(() => isScheduled = false, wait);\n  const func = (...args) => {\n    if (!isScheduled)\n      callback(...args);\n    isScheduled = true;\n    scheduled();\n  };\n  const clear = () => {\n    isScheduled = false;\n    scheduled.clear();\n  };\n  if (getOwner())\n    onCleanup(clear);\n  return Object.assign(func, { clear });\n}\nfunction leadingAndTrailing(schedule, callback, wait) {\n  if (isServer) {\n    let called = false;\n    const scheduled2 = (...args) => {\n      if (called)\n        return;\n      called = true;\n      callback(...args);\n    };\n    return Object.assign(scheduled2, { clear: () => void 0 });\n  }\n  let State;\n  ((State2) => {\n    State2[State2[\"Ready\"] = 0] = \"Ready\";\n    State2[State2[\"Leading\"] = 1] = \"Leading\";\n    State2[State2[\"Trailing\"] = 2] = \"Trailing\";\n  })(State || (State = {}));\n  let state = 0 /* Ready */;\n  const scheduled = schedule((args) => {\n    state === 2 /* Trailing */ && callback(...args);\n    state = 0 /* Ready */;\n  }, wait);\n  const fn = (...args) => {\n    if (state !== 2 /* Trailing */) {\n      if (state === 0 /* Ready */)\n        callback(...args);\n      state += 1;\n    }\n    scheduled(args);\n  };\n  const clear = () => {\n    state = 0 /* Ready */;\n    scheduled.clear();\n  };\n  if (getOwner())\n    onCleanup(clear);\n  return Object.assign(fn, { clear });\n}\nfunction createScheduled(schedule) {\n  let listeners = 0;\n  let isDirty = false;\n  const [track, dirty] = createSignal(void 0, { equals: false });\n  const call = schedule(() => {\n    isDirty = true;\n    dirty();\n  });\n  return () => {\n    if (!isDirty)\n      call(), track();\n    if (isDirty) {\n      isDirty = !!listeners;\n      return true;\n    }\n    if (getListener()) {\n      listeners++;\n      onCleanup(() => listeners--);\n    }\n    return false;\n  };\n}\n\nexport { createScheduled, debounce, leading, leadingAndTrailing, scheduleIdle, throttle };\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ElementNode, setActiveElement } from '@lightningjs/solid';\nimport { assertTruthy } from './utils.js';\nexport function handleNavigation(direction) {\n    return function () {\n        const numChildren = this.children.length;\n        const wrap = this.wrap;\n        const lastSelected = this.selected;\n        if (direction === 'right' || direction === 'down') {\n            do {\n                this.selected = ((this.selected || 0) % numChildren) + 1;\n                if (this.selected >= numChildren) {\n                    if (!wrap) {\n                        this.selected = null;\n                        break;\n                    }\n                    this.selected = 0;\n                }\n            } while (this.children[this.selected]?.skipFocus);\n        }\n        else if (direction === 'left' || direction === 'up') {\n            do {\n                this.selected = ((this.selected || 0) % numChildren) - 1;\n                if (this.selected < 0) {\n                    if (!wrap) {\n                        this.selected = null;\n                        break;\n                    }\n                    this.selected = numChildren - 1;\n                }\n            } while (this.children[this.selected]?.skipFocus);\n        }\n        if (this.selected === null) {\n            this.selected = lastSelected;\n            return false;\n        }\n        const active = this.children[this.selected];\n        assertTruthy(active instanceof ElementNode);\n        this.onSelectedChanged &&\n            this.onSelectedChanged.call(this, this, active, this.selected, lastSelected);\n        if (this.plinko && lastSelected !== null) {\n            // Set the next item to have the same selected index\n            // so we move up / down directly\n            const lastSelectedChild = this.children[lastSelected];\n            assertTruthy(lastSelectedChild instanceof ElementNode);\n            const num = lastSelectedChild.selected;\n            active.selected = num;\n        }\n        setActiveElement(active);\n        return true;\n    };\n}\n//# sourceMappingURL=navigation.js.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { handleNavigation } from \"./navigation.js\";\nimport { ElementNode } from '@lightningjs/solid';\nexport function Row(props) {\n    const left = handleNavigation('left');\n    const right = handleNavigation('right');\n    return <node onLeft={left} onRight={right} selected={0} onFocus={props.onFocus || (elm => {\n            if (!elm || !elm.selected)\n                return;\n            const child = elm.children[elm.selected];\n            if (!(child instanceof ElementNode))\n                return;\n            child.setFocus();\n        })} {...props}>{props.children}</node>;\n}\n//# sourceMappingURL=Row.jsx.map","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { ElementNode } from \"@lightningjs/solid\";\nimport { handleNavigation } from \"./navigation.js\";\nexport function Column(props) {\n    const up = handleNavigation('up');\n    const down = handleNavigation('down');\n    return <node onUp={up} onDown={down} onFocus={props.onFocus || (elm => {\n            if (!elm || !elm.selected)\n                return;\n            const child = elm.children[elm.selected];\n            if (!(child instanceof ElementNode))\n                return;\n            child.setFocus();\n        })} selected={0} {...props}>{props.children}</node>;\n}\n//# sourceMappingURL=Column.jsx.map","import { IntrinsicNodeStyleProps, IntrinsicTextNodeStyleProps, hexColor } from '@lightningjs/solid';\nimport theme from 'theme';\n\n// Augment existing intrinsic style prop interfaces to include our own\n// app-specific states\ndeclare module '@lightningjs/solid' {\n  interface IntrinsicNodeStyleProps {\n    // TODO: Refactor states to use a $ prefix\n    active?: IntrinsicNodeStyleProps;\n    disabled?: IntrinsicNodeStyleProps;\n  }\n\n  interface IntrinsicTextNodeStyleProps {\n    // TODO: Refactor states to use a $ prefix\n    active?: IntrinsicTextNodeStyleProps;\n    disabled?: IntrinsicTextNodeStyleProps;\n  }\n}\n\nexport default {\n  Page: {\n    width: 1920, height: 1080\n  } satisfies IntrinsicNodeStyleProps,\n  headlineText: {\n    width: 1200, height: 240,\n    x: 360,\n    // lineHeight: 170, // TODO: Add back when lineHeight is supported\n    y: 455, contain: 'both',\n    fontSize: 66,\n    textAlign: 'center'\n  } satisfies IntrinsicTextNodeStyleProps,\n  headlineSubText: {\n    width: 960,\n    height: 170,\n    // lineHeight: 170, // TODO: Add back when lineHeight is supported\n    x: 530,\n    y: 655, contain: 'both',\n    fontSize: 48,\n    textAlign: 'center'\n  } satisfies IntrinsicTextNodeStyleProps,\n  itemsContainer: {\n    width: theme.layout.screenW,\n    height: 600,\n    y: 560,\n    x: 0\n  } satisfies IntrinsicNodeStyleProps,\n  Thumbnail: {\n    borderRadius: 16,\n    width: 185, height: 278, scale: 1, zIndex: 2,\n    focus: { scale: 1.1 }\n  } satisfies IntrinsicNodeStyleProps,\n  FocusRing: {\n    borderRadius: 16,\n    width: 194, height: 286, y: -5, x: -5\n  } satisfies IntrinsicNodeStyleProps,\n  showHeadline: { x: 70, y: 20 } satisfies IntrinsicNodeStyleProps,\n  headlineBlur: {\n    width: 1920,\n    height: 150,\n    x: 0,\n    y: 0,\n    zIndex: 14,\n    alpha: 0.9,\n    color: hexColor('#000000')\n  } satisfies IntrinsicNodeStyleProps,\n  RowTitle: {\n    height: 60,\n    width: 300,\n    marginTop: 20,\n    fontSize: 36,\n    color: hexColor('#f0f0f0'),\n    zIndex: 2\n  } satisfies IntrinsicTextNodeStyleProps,\n  Row: {\n    display: 'flex',\n    justifyContent: 'spaceBetween',\n    height: 300,\n  } satisfies IntrinsicNodeStyleProps,\n  Column: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flexStart',\n    gap: 20,\n    width: theme.layout.screenW - (2 * theme.layout.marginX),\n    x: theme.layout.marginX + theme.layout.gutterX,\n    y: 48\n  } satisfies IntrinsicNodeStyleProps,\n  Rect: {\n    width: 250,\n    height: 100,\n    y: 10,\n    x: 300,\n    color: hexColor('#0000ff')\n  } satisfies IntrinsicNodeStyleProps,\n  peopleBio: {\n    ...theme.typography.body1,\n    contain: 'both',\n    width: 1500,\n    height: 400\n  } satisfies IntrinsicTextNodeStyleProps,\n};\n\nconst Button = {\n  width: 386,\n  height: 136,\n  color: hexColor('#000000'),\n  alpha: 0.3,\n  borderRadius: 30,\n  border: { width: 5, color: hexColor('#cc33ff') },\n  scale: 1,\n  focus: {\n    color: ['#58807d', {duration: 2000}] as any, // TODO: Fix this type\n    scale: 1.2,\n    border: { width: 5, color: hexColor('#ff0000') },\n    alpha: [1, {duration: 1500, delay: 200, timing: \"easy-in\"}] as any, // TODO: Fix this type\n  },\n  active: {\n    color: hexColor('#33ff55')\n  },\n  disabled: {\n    alpha: 1,\n  }\n} satisfies IntrinsicNodeStyleProps;\n\nconst TopBar = {\n  color: hexColor('#00A699'),\n  height: 8,\n  y: 2,\n  x: -4,\n  width: Button.width + 8\n} satisfies IntrinsicNodeStyleProps;\n\nconst ButtonText = {\n  fontSize: 32,\n  // lineHeight: Button.height, // TODO: Add back when lineHeight is supported\n  contain: 'width',\n  textAlign: 'center',\n  mountY: -0.35,\n  color: hexColor('#F6F6F9'),\n  height: Button.height,\n  width: Button.width,\n  focus: {\n    fontSize: 64\n  }\n} satisfies IntrinsicTextNodeStyleProps;\n\nexport const buttonStyles = {\n  container: Button,\n  topBar: TopBar,\n  text: ButtonText\n} satisfies Record<string, IntrinsicTextNodeStyleProps>;\n\n\nexport const MaterialButton = {\n  width: 386,\n  height: 136,\n  color: hexColor('#715cab'),\n  focus: {\n    color: hexColor('#5a39a2'),\n  },\n  disabled: {\n    color: hexColor('#291d43'),\n  }\n} satisfies IntrinsicNodeStyleProps;\n\nexport const MaterialButtonText = {\n  fontSize: 32,\n  contain: 'width',\n  textAlign: 'center',\n  mountY: -0.35,\n  color: hexColor('#FFFFFF'),\n  height: MaterialButton.height,\n  width: MaterialButton.width,\n  // lineHeight: MaterialButton.height, // TODO: Add back when lineHeight is supported\n  focus: {\n    fontSize: 40\n  },\n  disabled: {\n    color: hexColor('#909090'),\n  }\n} satisfies IntrinsicTextNodeStyleProps;\n","import { IntrinsicNodeProps, View } from '@lightningjs/solid';\nimport { Row } from '@lightningjs/solid-primitives';\nimport { For, splitProps } from 'solid-js';\nimport styles from '../styles';\n\nexport function Thumbnail(props: IntrinsicNodeProps) {\n  return <View {...props} animate style={styles.Thumbnail} />\n}\n\nexport function FocusRing(props: IntrinsicNodeProps) {\n  return <View {...props} style={styles.FocusRing} />\n}\n\nexport interface TileRowProps extends IntrinsicNodeProps {\n  items: IntrinsicNodeProps[];\n}\n\nexport function TileRow(props: TileRowProps) {\n  const [local, others] = splitProps(props, [\"items\"]);\n\n  return <Row {...others} style={styles.Row}>\n   <For each={local.items}>\n      {(item) => <Thumbnail {...item} /> }\n    </For>\n  </Row>\n\n}\n","import { createSignal } from \"solid-js\";\nexport const [globalBackground, setGlobalBackground] = createSignal<string>('');\n","import API_KEY_V4 from './key';\nconst API_BASE = 'https://api.themoviedb.org/3';\nlet tmdbConfig;\nlet baseImageUrl;\nconst basePosterSize = 'w185';\n\nconst defaultFetchParams = {\n  headers: {\n    'Content-Type': 'application/json',\n    Authorization: 'Bearer ' + API_KEY_V4,\n  },\n};\n\nexport function getImageUrl(path: string, posterSize: string = basePosterSize) {\n  return baseImageUrl + posterSize + path;\n}\n\nfunction get(path: string, params: RequestInit = {}) {\n  if (tmdbConfig) {\n    return _get(path, params);\n  } else {\n    return loadConfig().then(() => _get(path, params))\n  }\n}\n\nfunction _get(path: string, params: RequestInit = {}) {\n  return fetch(API_BASE + path, {\n    ...defaultFetchParams,\n    ...params,\n  }).then((r) => r.json());\n}\n\nfunction loadConfig() {\n  return _get('/configuration').then((data) => {\n    tmdbConfig = data;\n    baseImageUrl = data.images?.secure_base_url;\n    return data;\n  });\n}\n\nexport default {\n  get,\n  loadConfig,\n};\n","import { getImageUrl } from '../index';\n\nfunction truncateString(str: string, maxLength: number): string {\n  if (str.length > maxLength) {\n    return str.substring(0, maxLength - 3) + '...';\n  }\n  return str;\n}\n\nexport function chunkArray(array: string[], size = 7) {\n  let result: string[][] = [];\n  for (let i = 0, j = array.length; i < j; i += size) {\n    result.push(array.slice(i, i + size));\n  }\n  return result;\n}\n\nexport interface Tile {\n  src: string;\n  tileSrc: string;\n  backdrop: string;\n  href: string;\n  shortTitle: string;\n  title: string;\n  data: unknown;\n  entityInfo: {\n      type: string;\n      id: string;\n  };\n  heroContent: {\n      title: string;\n      description: string;\n  };\n}\n\n// TODO: Remove `any` type\nexport function convertItemsToTiles(items: any[] = []): Tile[] {\n  return items.map((item) => ({\n      src: getImageUrl(item.poster_path || item.profile_path),\n      tileSrc: getImageUrl(item.backdrop_path || item.profile_path, 'w300'),\n      backdrop: getImageUrl(item.backdrop_path, 'original'),\n      href: `/entity/${item.media_type || 'people'}/${item.id}`,\n      shortTitle: truncateString(item.title || item.name, 30),\n      title: item.title || item.name,\n      data: item,\n      entityInfo: {\n        type: item.media_type || 'people',\n        id: item.id\n      },\n      heroContent: {\n        title: item.title || item.name,\n        description: item.overview\n      }\n  }));\n}\n","import api from '..';\nimport { convertItemsToTiles, chunkArray } from '../formatters/ItemFormatter';\n\nlet cache = new Map();\nconst leftoverTiles = new Map();\n\nexport default function (filter: string) {\n  return (pageIndex: number): Promise<any> => {\n    const url = `/trending/${filter}/week?page=${pageIndex}`;\n    if (cache.has(url)) {\n      return cache.get(url);\n    }\n\n    let result = api.get(url).then((trending) => {\n      let results = trending.results.filter((r) => !r.adult);\n      let tiles = (leftoverTiles.has(filter) ? leftoverTiles.get(filter) : []).concat(convertItemsToTiles(results));\n      let chunks = chunkArray(tiles);\n      if (chunks[chunks.length - 1].length < 7) {\n        leftoverTiles.set(filter, chunks.pop());\n      } else {\n        leftoverTiles.delete(filter);\n      }\n      return chunks;\n    });\n\n    cache.set(url, result);\n    return result;\n  }\n}\n","import { createSignal, createComputed, batch, createResource } from \"solid-js\";\n\nexport function createInfiniteScroll(fetcher: (page: number) => Promise<any>) {\n  const [pages, setPages] = createSignal<any[]>([]);\n  const [page, setPage] = createSignal(1);\n  const [end, setEnd] = createSignal(false);\n\n  const [contents] = createResource(page, fetcher);\n\n  createComputed(() => {\n    const content = contents();\n    if (!content)\n      return;\n    batch(() => {\n      if (content.length === 0)\n        setEnd(true);\n      setPages((p) => [...p, ...content]);\n    });\n  });\n\n  return {\n      pages,\n      page,\n      setPage,\n      setPages,\n      end,\n      setEnd\n    };\n}\n","import { View, Text, Show, IntrinsicNodeStyleProps, For } from '@lightningjs/solid';\nimport { withPadding } from '@lightningjs/solid-primitives';\nimport theme from 'theme';\nwithPadding;\n\nconst blockWidth = 1100;\nconst HeadlineStyles = {\n  ...theme.typography.display2,\n  width: blockWidth,\n  height: 58,\n  contain: 'both',\n};\nconst Headline = (props) => (\n  <Text {...props} style={HeadlineStyles}>\n    {props.children}\n  </Text>\n);\n\nconst DescriptionStyles = {\n  ...theme.typography.body1,\n  width: blockWidth,\n  height: 72,\n  contain: 'both',\n};\n\nconst BadgeStyle = {\n  fontSize: 20,\n  lineHeight: 20,\n};\n\nconst Description = (props) => (\n  <Text {...props} style={DescriptionStyles}>\n    {props.children}\n  </Text>\n);\n\nfunction getReviews(reviews) {\n  return (\n    <>\n      <Show when={reviews?.rtCrit && reviews?.rtCrit !== '0'}>\n        <View\n          src=\"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png\"\n          title=\"Rotten Tomatoes Rating\"\n          style={{ width: 30, height: 30, marginRight: -6 }}\n        />\n        <Text style={MetaTextStyle}>{reviews.rtCrit + '%'}</Text>\n      </Show>\n      <Show when={reviews?.rtFan && reviews?.rtFan !== '0'}>\n        <View\n          src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png\"\n          title=\"Rotten Tomatoes Rating\"\n          style={{ width: 24, height: 30, marginRight: -6 }}\n        />\n        <Text style={MetaTextStyle}>{reviews.rtFan + '%'}</Text>\n      </Show>\n    </>\n  );\n}\n\nconst Badge = (props) => {\n  return (\n    <node\n      use:withPadding={[8, 15, 13, 15]}\n      {...props}\n      style={{\n        color: '#00000099',\n        borderRadius: 8,\n        border: { width: 3, color: '#ffffff' },\n      }}\n    >\n      <Text style={BadgeStyle}>{props.children}</Text>\n    </node>\n  );\n};\n\nconst MetaTextStyle = theme.typography.body2;\n\nconst Metadata = (props) => (\n  <View\n    style={{\n      ...theme.flexRow as IntrinsicNodeStyleProps,\n      gap: 12,\n      width: blockWidth,\n      height: 48,\n    }}\n  >\n    <Text style={MetaTextStyle}>{props.metaText}</Text>\n    <For each={props.badges}>{(item) => <Badge y={-5}>{item}</Badge>}</For>\n    {getReviews(props.reviews)}\n  </View>\n);\n\nconst ContentBlock = (props) => {\n  return <View\n      {...props}\n      style={{\n        ...theme.flexColumn,\n        width: blockWidth,\n        height: 160,\n        gap: 16,\n      }}\n    >\n      <Headline>{props.title}</Headline>\n      <Description>{props.description}</Description>\n      <Metadata\n        metaText={props.metaText}\n        badges={props.badges}\n        reviews={props.reviews}\n      />\n    </View>;\n};\n\nexport default ContentBlock;\n","import api, { getImageUrl } from '..';\nimport { convertItemsToTiles } from '../formatters/ItemFormatter';\n\nexport function minutesToHMM(minutes) {\n  const hours = Math.floor(minutes / 60);\n  const remainingMinutes = minutes % 60;\n  return hours + 'h ' + (remainingMinutes < 10 ? '0' : '') + remainingMinutes + 'm';\n}\n\nfunction justYear(dateString) {\n  const parts = dateString.split(\"-\");\n  return parts[0];\n}\n\nexport function getRecommendations({type, id}) {\n  return api.get(`/${type}/${id}/recommendations`).then(\n    ({ results }) => {\n      if (results.length) {\n        return convertItemsToTiles(results.slice(0, 7));\n      }\n      return api.get(`/trending/${type}/week?page=1`).then(\n        ({ results }) => convertItemsToTiles(results.slice(0, 7)));\n    }\n  );\n}\n\nexport function getCredits({type, id}) {\n  return api.get(`/${type}/${id}/credits`).then(\n    ({ cast }) => convertItemsToTiles(cast.slice(0, 7))\n  );\n}\n\nexport function getInfo({type, id}) {\n  let rt = type === 'movie' ? {\n    rtCrit: 86,\n    rtFan: 92\n  } : {};\n\n  return api.get(`/${type}/${id}`).then(\n    (data) => ({\n      backgroundImage: getImageUrl(data.backdrop_path, 'original'),\n      heroContent: {\n        title: data.title || data.name,\n        description: data.overview,\n        badges: ['HD'],\n        metaText: type === 'movie' ?\n          minutesToHMM(data.runtime) + ' - ' + data.release_date : `${justYear(data.first_air_date)} - ${justYear(data.last_air_date)}`,\n        reviews: rt,\n      },\n      ...data\n    }));\n}\n","import { createEffect, createMemo, on, createSignal,\n  Show, createResource, createSelector, For } from \"solid-js\";\nimport { ElementNode, View, activeElement } from '@lightningjs/solid';\nimport { Column } from '@lightningjs/solid-primitives';\nimport { useNavigate, useParams } from \"@solidjs/router\";\nimport { TileRow } from '../components';\nimport styles from '../styles';\nimport { setGlobalBackground } from \"../state\";\nimport browseProvider from '../api/providers/browse';\nimport { createInfiniteScroll } from '../components/pagination';\nimport ContentBlock from \"../components/ContentBlock\";\nimport * as entityProvider from '../api/providers/entity';\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\n\nconst Browse = () => {\n  const params = useParams();\n  const [columnY, setcolumnY] = createSignal(0);\n  const [entityInfo, setEntityInfo] = createSignal();\n  const [entityData] = createResource(entityInfo, entityProvider.getInfo);\n  const [heroContent, setHeroContent] = createSignal({});\n  const navigate = useNavigate();\n  const isFirst = createSelector(() => {\n    return 0;\n  });\n\n  const provider = createMemo(() => {\n    return createInfiniteScroll(browseProvider(params.filter || 'all'));\n  });\n\n  createEffect(on(activeElement, (elm) => {\n    if (elm.backdrop) {\n      setGlobalBackground(elm.backdrop);\n    }\n    // if (elm.entityInfo) {\n    //   setEntityInfo(elm.entityInfo);\n    // }\n    if (elm.heroContent) {\n      setHeroContent(elm.heroContent);\n    }\n  }, { defer: true}))\n\n  function onRowFocus(this: ElementNode) {\n    this.children.selected?.setFocus();\n    setcolumnY((this.y || 0) * -1 + 24);\n    let numPages = provider().pages().length;\n\n    if (numPages === 0 || this.parent.selected && this.parent.selected >= numPages - 2) {\n      provider().setPage(p => p + 1);\n    }\n  }\n\n  function onEnter(this: ElementNode) {\n    let entity = this.children.selected;\n    assertTruthy(entity && entity.href);\n    navigate(entity.href)\n  };\n\n  return (\n    <Show when={provider().pages().length}>\n      <ContentBlock y={360} x={150} {...heroContent()}></ContentBlock>\n      <View clipping style={styles.itemsContainer}>\n        <Column plinko announce=\"All Trending - Week\" animate y={columnY()} style={styles.Column}>\n          <For each={provider().pages()}>\n            {(items, i) =>\n              <TileRow autofocus={isFirst(i())}\n                  items={items} onFocus={onRowFocus} onEnter={onEnter} />\n            }\n          </For>\n        </Column>\n      </View>\n    </Show>\n  );\n};\n\nexport default Browse;\n","import { Text } from '@lightningjs/solid';\nimport styles from '../styles';\n\nconst HelloWorld = () => {\n  return <>\n      <Text autofocus style={styles.headlineText}>Learn more about Solid + Lightning through other pages:</Text>\n      <Text style={styles.headlineSubText}>\n        Press B for buttons, T for Text pages, M for Browse,\n        F for Flex, C for Column Flex\n      </Text>\n    </>\n};\n\nexport default HelloWorld;\n","import { IntrinsicNodeStyleProps, IntrinsicTextNodeStyleProps, Text, View, hexColor } from '@lightningjs/solid';\nimport { onMount } from 'solid-js';\nimport { setGlobalBackground } from \"../state\";\n\nconst TextPage = () => {\n  const OverviewContainer = {\n    width: 900,\n    height: 500,\n    y: 350,\n    x: 150,\n    gap: 25,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flexStart',\n    color: hexColor('00000000')\n  } satisfies IntrinsicNodeStyleProps\n\n  const SublineContainer = {\n    width: 900,\n    height: 36,\n    gap: 6,\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'flexStart',\n    color: hexColor('00000000')\n  } satisfies IntrinsicNodeStyleProps\n\n  const Title = {\n    fontSize: 42,\n  };\n\n  const Overview = {\n    width: OverviewContainer.width,\n    fontSize: 26,\n    contain: 'width'\n  } satisfies IntrinsicTextNodeStyleProps;\n\n  const Subline = {\n    fontSize: 26,\n  };\n\n  onMount(() => {\n    setGlobalBackground('#000000');\n  });\n\n  return (\n    <View autofocus style={OverviewContainer}>\n      <Text style={Title}>Title of the Page</Text>\n      <Text style={Overview}>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc.</Text>\n      <View style={SublineContainer}>\n        <Text style={Subline}>Subline Text</Text>\n        <View width={28} height={28} src={'/assets/rt-popcorn.png'}></View>\n        <Text style={Subline}>More Text</Text>\n      </View>\n    </View>\n  );\n};\n\nexport default TextPage;\n","import { View, Text, ElementNode, IntrinsicNodeProps, hexColor, IntrinsicNodeStyleProps } from '@lightningjs/solid';\nimport { Row } from '@lightningjs/solid-primitives';\nimport { buttonStyles } from '../styles';\n\nconst ButtonsPage = () => {\n  function onEnter(this: ElementNode, event, elm) {\n    this.states.toggle('disabled');\n  }\n\n  const RowStyles = {\n    display: 'flex',\n    justifyContent: 'flexStart',\n    width: 1500,\n    height: 300,\n    color: hexColor('00000000'),\n    gap: 26,\n    y: 400\n  } satisfies IntrinsicNodeStyleProps;\n\n  function Button(props) {\n    return (\n      <View {...props} forwardStates animate\n        style={buttonStyles.container}>\n        <Text style={buttonStyles.text}>{props.children}</Text>\n      </View>\n    );\n  }\n\n  const Badge = (props: IntrinsicNodeProps) => {\n    return <node\n          use:withPadding={[10, 15]}\n          {...props}\n          style={{\n            color: hexColor('#000000be'),\n            borderRadius: 8,\n            border: { width: 2, color: hexColor('#ffffff') },\n          }}>\n          <Text style={{\n              fontSize: 20,\n              // TODO: lineHeight is not supported by renderer yet\n              // lineHeight: 20,\n            }}>\n            {props.children}\n          </Text>\n        </node>;\n    };\n  return (\n    <>\n      <Row x={100} y={200} gap={5} style={RowStyles}>\n        <Badge>HD</Badge>\n        <Badge>PG13</Badge>\n        <Badge>NC17</Badge>\n        <Text fontSize={30}>I like bananas</Text>\n        <Badge>DOLBY</Badge>\n      </Row>\n\n      <Row x={100} gap={40} style={RowStyles}>\n        <Button autofocus onEnter={onEnter}>TV Shows</Button>\n        <Button states={{ active: true, disabled: false }}>Movies</Button>\n        <Button states={'active'}>Sports</Button>\n        <Button states='disabled'>News</Button>\n      </Row>\n    </>\n  );\n};\n\nexport default ButtonsPage;\n","import { ElementNode, IntrinsicNodeStyleProps, Text, View, hexColor } from '@lightningjs/solid';\nimport { Column, Row } from '@lightningjs/solid-primitives';\nimport { createSignal, onMount } from 'solid-js';\nimport styles from '../styles';\nimport { setGlobalBackground } from \"../state\";\n\nconst FlexPage = () => {\n  const RowStyles = {\n    display: 'flex',\n    justifyContent: 'flexStart',\n    width: 1600,\n    height: 110,\n    color: hexColor('#4dabf5'),\n  } satisfies IntrinsicNodeStyleProps;\n\n  const rowTitle = {\n    fontSize: 44,\n    marginTop: 25,\n    marginBottom: -20,\n    skipFocus: true,\n  }\n\n  function Block(props) {\n    const styles = {\n      width: 200,\n      height: 100,\n      y: 5,\n      color: 0x1769aaff,\n    }\n\n    return <View {...props} style={styles} />;\n  }\n\n  const [columnY, setColumnY] = createSignal(50);\n  function onFocus(this: ElementNode) {\n    this.children.selected?.setFocus();\n    setColumnY(150 + (this.y || 0) * -1);\n  }\n\n  onMount(() => {\n    setGlobalBackground('#333333');\n  })\n\n  const gap = 50;\n\n  return (\n    <>\n      <Column x={160} y={columnY()} animate gap={30} height={850} width={RowStyles.width} style={styles.Column}>\n        <Text style={rowTitle}>Flex Start</Text>\n        <Row gap={gap} style={RowStyles} onFocus={onFocus}>\n          <Block autofocus />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Row>\n        <Text style={rowTitle}>Flex Start - Margin Left</Text>\n        <Row gap={gap} style={RowStyles} onFocus={onFocus}>\n          <Block marginLeft={100} />\n          <Block />\n          <Block marginLeft={100} />\n          <Block />\n          <Block />\n        </Row>\n        <Text style={rowTitle}>Flex End</Text>\n        <Row gap={gap} justifyContent={'flexEnd'} style={RowStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Row>\n\n        <Text style={rowTitle}>Flex End - Margin Right</Text>\n        <Row gap={gap} justifyContent={'flexEnd'} style={RowStyles} onFocus={onFocus}>\n          <Block />\n          <Block marginRight={100} />\n          <Block />\n          <Block />\n          <Block marginRight={100} />\n        </Row>\n\n        <Text style={rowTitle}>Center - No Margin Support</Text>\n        <Row gap={gap} justifyContent={'center'} style={RowStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Row>\n\n        <Text style={rowTitle}>Space Between - No Margin Support</Text>\n        <Row gap={gap} justifyContent={'spaceBetween'} style={RowStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Row>\n\n        <Text style={rowTitle}>Space Evenly - No Margin Support</Text>\n        <Row gap={gap} justifyContent={'spaceEvenly'} style={RowStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Row>\n      </Column>\n    </>\n  );\n};\n\nexport default FlexPage;\n","import { ElementNode, IntrinsicNodeStyleProps, Text, View, hexColor } from '@lightningjs/solid';\nimport { Column, Row } from '@lightningjs/solid-primitives';\nimport { createSignal, onMount } from 'solid-js';\nimport styles from '../styles';\nimport { setGlobalBackground } from \"../state\";\n\nconst FlexColumnPage = () => {\n  const RowStyles = {\n    display: 'flex',\n    justifyContent: 'spaceEvenly',\n    width: 1920,\n    y: 100,\n    height: 880,\n    color: hexColor('00000000'),\n  } satisfies IntrinsicNodeStyleProps;\n\n  const ColumnStyles = {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flexStart',\n    color: hexColor('#4dabf5'),\n    height: 850,\n    width: 60\n  } satisfies IntrinsicNodeStyleProps;\n\n  const rowTitle = {\n    fontSize: 44,\n    y: 20,\n    x: 150,\n  }\n\n  function Block(props) {\n    const styles = {\n      width: 50,\n      height: 80,\n      x: 5,\n      color: hexColor('#1769aa'),\n    }\n\n    return <View {...props} style={styles} />;\n  }\n\n  const [columnY, setColumnY] = createSignal(50);\n  function onFocus(this: ElementNode) {\n    this.children.selected?.setFocus();\n    setColumnY(150 + (this.y || 0) * -1);\n  }\n\n  onMount(() => {\n    setGlobalBackground('#333333');\n  })\n\n  const gap = 50;\n\n  return (\n    <>\n      <Text style={rowTitle}>Start, MarginTop, End, MarginBottom, Center, Between, Evenly</Text>\n      <Row gap={gap} style={RowStyles} onFocus={onFocus}>\n        <Column gap={30} style={ColumnStyles}>\n          <Block autofocus />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Column>\n\n        <Column gap={gap} style={ColumnStyles} onFocus={onFocus}>\n          <Block marginTop={100} />\n          <Block />\n          <Block marginTop={100} />\n          <Block />\n          <Block />\n        </Column>\n\n        <Column gap={gap} justifyContent={'flexEnd'} style={ColumnStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Column>\n\n        <Column gap={gap} justifyContent={'flexEnd'} style={ColumnStyles} onFocus={onFocus}>\n          <Block />\n          <Block marginBottom={100} />\n          <Block />\n          <Block />\n          <Block marginBottom={100} />\n        </Column>\n\n        <Column gap={gap} justifyContent={'center'} style={ColumnStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Column>\n\n        <Column gap={gap} justifyContent={'spaceBetween'} style={ColumnStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Column>\n\n        <Column gap={gap} justifyContent={'spaceEvenly'} style={ColumnStyles} onFocus={onFocus}>\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n          <Block />\n        </Column>\n      </Row>\n    </>\n  );\n};\n\nexport default FlexColumnPage;\n","import { ElementNode, IntrinsicNodeStyleProps, Text, View, hexColor } from '@lightningjs/solid';\nimport { Row } from '@lightningjs/solid-primitives';\n\nimport { MaterialButtonText } from '../styles';\n\nconst MaterialButtonsPage = () => {\n  function onEnter(this: ElementNode, event, elm) {\n    this.states.toggle('disabled');\n  }\n\n  const RowStyles = {\n    display: 'flex',\n    justifyContent: 'flexStart',\n    width: 1500,\n    height: 300,\n    color: hexColor('00000000'),\n    gap: 26,\n    y: 400,\n    x: 100\n  } satisfies IntrinsicNodeStyleProps;\n\n  const MaterialButton = {\n    width: 386,\n    height: 136,\n    color: '#715cab',\n    focus: {\n      color: '#5a39a2',\n    },\n    disabled: {\n      color: '#291d43',\n    }\n  };\n  const RoundedRectangle = ['RoundedRectangle', { radius: 65 }];\n  function Button(props) {\n    return (\n      <View {...props} forwardStates animate\n        style={MaterialButton} shader={RoundedRectangle}>\n        <Text style={MaterialButtonText}>{props.children}</Text>\n      </View>\n    );\n  }\n\n  return (\n    <Row style={RowStyles}>\n      <Button autofocus onEnter={onEnter}>Focused</Button>\n      <Button states={{ active: true, disabled: false }}>Normal</Button>\n      <Button states='disabled'>Disabled</Button>\n    </Row>\n  );\n};\n\nexport default MaterialButtonsPage;\n","import { ElementNode, Text, View, Show, hexColor } from '@lightningjs/solid';\nimport { Column } from '@lightningjs/solid-primitives';\nimport { useParams } from \"@solidjs/router\";\nimport { createEffect, createResource, on } from \"solid-js\";\nimport { TileRow } from '../components';\nimport { setGlobalBackground } from \"../state\";\nimport ContentBlock from \"../components/ContentBlock\";\nimport { useNavigate } from \"@solidjs/router\";\nimport styles from '../styles';\nimport * as provider from '../api/providers/entity';\nimport { assertTruthy } from '@lightningjs/renderer/utils';\n\nconst Entity = () => {\n  const params = useParams();\n  const navigate = useNavigate();\n\n  const [data] = createResource(() => ({...params}), provider.getInfo);\n  const [credits] = createResource(() => ({...params}), provider.getCredits);\n  const [recommendations] = createResource(() => ({...params}), provider.getRecommendations);\n\n  createEffect(on(data, (data) => {\n    setGlobalBackground(data.backgroundImage);\n  }, { defer: true}))\n\n  const columnY = 600;\n\n  const Backdrop = {\n    color: hexColor('#000000'),\n    alpha: 0,\n    width: 1900,\n    height: 890,\n    x: 10,\n    y: columnY,\n    borderRadius: 30,\n  }\n\n  function onRowFocus(this: ElementNode) {\n    this.children.selected?.setFocus();\n    columnRef.y = columnY;\n    backdropRef.y = columnY;\n    backdropRef.alpha = 0;\n  }\n\n  function onRowFocusAnimate(this: ElementNode) {\n    this.children.selected?.setFocus();\n    columnRef.y = 200;\n    backdropRef.y = 160;\n    backdropRef.alpha = 0.9;\n  }\n\n  function onEnter(this: ElementNode) {\n    let entity = this.children.selected;\n    assertTruthy(entity && entity.href);\n    navigate(entity.href);\n  };\n\n  let columnRef, backdropRef;\n\n  return (\n    <Show when={data()} keyed>\n      <ContentBlock y={360} x={150} {...data().heroContent}></ContentBlock>\n      <Column animate ref={columnRef} y={columnY} x={140} style={styles.Column}>\n        <Show when={recommendations() && credits()}>\n          <Text skipFocus style={styles.RowTitle}>Recommendations</Text>\n          <TileRow autofocus onFocus={onRowFocus} onEnter={onEnter} items={recommendations()} />\n          <Text skipFocus style={styles.RowTitle}>Cast and Crew</Text>\n          <TileRow onFocus={onRowFocusAnimate} onEnter={onEnter} items={credits()} />\n        </Show>\n      </Column>\n      <View ref={backdropRef} animate style={Backdrop} />\n\n    </Show>\n  );\n};\n\nexport default Entity;\n","import api, { getImageUrl } from '..';\nimport { convertItemsToTiles } from '../formatters/ItemFormatter';\n\nexport function minutesToHMM(minutes) {\n  const hours = Math.floor(minutes / 60);\n  const remainingMinutes = minutes % 60;\n  return hours + 'h ' + (remainingMinutes < 10 ? '0' : '') + remainingMinutes + 'm';\n}\n\nfunction justYear(dateString) {\n  const parts = dateString.split(\"-\");\n  return parts[0];\n}\n\nexport function getCredits({id}) {\n  return api.get(`/person/${id}/combined_credits`).then(\n    ({ cast }) => convertItemsToTiles(cast.slice(0, 7))\n  );\n}\n\nexport function getInfo({id}) {\n  return api.get(`/person/${id}`).then(\n    (data) => ({\n      backgroundImage: getImageUrl(data.profile_path, 'original'),\n      heroContent: {\n        title: data.title || data.name,\n        description: data.biography,\n      },\n      ...data\n    }));\n}\n","import { ElementNode, Text, View, Show, hexColor } from '@lightningjs/solid';\nimport { Column } from '@lightningjs/solid-primitives';\nimport { useParams } from \"@solidjs/router\";\nimport { createEffect, createResource, on } from \"solid-js\";\nimport { TileRow } from '../components';\nimport { setGlobalBackground } from \"../state\";\nimport { useNavigate } from \"@solidjs/router\";\nimport theme from 'theme';\nimport styles from '../styles';\nimport * as provider from '../api/providers/people';\nimport { assertTruthy } from '@lightningjs/renderer/utils';\n\nconst People = () => {\n  const params = useParams();\n  const navigate = useNavigate();\n\n  const [data] = createResource(() => ({...params}), provider.getInfo);\n  const [credits] = createResource(() => ({...params}), provider.getCredits);\n\n  createEffect(on(data, (data) => {\n    setGlobalBackground(data.backgroundImage);\n  }, { defer: true}))\n\n  const Backdrop = {\n    color: hexColor('#000000'),\n    alpha: 0.8,\n    width: 1540,\n    height: 440,\n    x: 130,\n    y: 180,\n    borderRadius: 30,\n  }\n\n  function onEnter(this: ElementNode) {\n    let entity = this.children.selected;\n    assertTruthy(entity && entity.href);\n    navigate(entity.href);\n  };\n\n  return (\n    <Show when={data()} keyed>\n      <View x={150} y={200} style={styles.Column} zIndex={3}>\n        <Text style={theme.typography.display2}>{data().name}</Text>\n        <Text style={styles.peopleBio}>{data().biography}</Text>\n      </View>\n      <View style={Backdrop} />\n      <Column y={670} x={140} style={styles.Column}>\n        <Show when={credits()}>\n          <Text skipFocus style={styles.RowTitle}>Credits</Text>\n          <TileRow autofocus onEnter={onEnter} items={credits()} />\n        </Show>\n      </Column>\n    </Show>\n  );\n};\n\nexport default People;\n","const NotFound = () => {\n  return (\n    <node style={{ width: 1920, height: 1080, color: 0x33c40000 }}></node>\n  );\n};\n\nexport default NotFound;\n","import { type AnimationSettings } from \"@lightningjs/renderer\";\nimport { globalBackground } from \"../state.js\";\nimport { type IntrinsicNodeStyleProps, View, hexColor } from \"@lightningjs/solid\";\nimport { createEffect, on } from \"solid-js\";\nimport theme from 'theme';\n\nexport default function Background() {\n  let bg1, bg2;\n  let active = 0;\n  const alpha = 1;\n  const bgStyles = { alpha, color: 0xffffffff } satisfies IntrinsicNodeStyleProps;\n  const animationSettings = { duration: 1000, easing: 'ease-in-out' } satisfies Partial<AnimationSettings>;\n\n  createEffect(on(globalBackground, (img: string) => {\n    if (img.startsWith('#')) {\n      bg1.color = img;\n      bg1.src = '';\n      bg1.alpha = 1;\n      active = 1;\n      bg2.alpha = 0;\n      return;\n    } else {\n      bg1.color = 0xffffffff;\n    }\n\n    if (active === 0) {\n      bg1.src = img;\n      active = 1;\n      return;\n    }\n\n    if (active === 1) {\n      bg2.src = img;\n      active = 2;\n      // array animation works\n      bg2.alpha = [alpha];\n      bg1.alpha = [0];\n      return;\n    }\n\n    if (active === 2) {\n      bg1.src = img;\n      active = 1;\n      // or use the animate property\n      bg1.alpha = alpha;\n      bg2.alpha = 0;\n    }\n  }, { defer: true}))\n\n  return (<>\n  <View width={1920} height={1080}>\n    <View ref={bg1} animate animationSettings={animationSettings} style={bgStyles} />\n    <View ref={bg2} animate animationSettings={animationSettings} style={bgStyles} alpha={0} />\n    <View\n      effects={{\n        radialGradient: {\n          colors: [0x0000007C, 0x0000007C, hexColor(theme.color.container)],\n          stops: [0, 0.4, 0.9],\n          height: 800,\n          width: 1920,\n          pivot: [0.8, 0], \n        },\n      }}\n    />\n    </View>\n  </>);\n}\n","import { IntrinsicNodeStyleProps, deg2rad, hexColor } from '@lightningjs/solid';\nimport theme from 'theme';\n\nexport default {\n  Column: {\n    ...(theme.flexColumn as IntrinsicNodeStyleProps),\n    width: 320,\n    height: 600,\n    y: 360,\n    gap: 20,\n    zIndex: 101,\n    x: [8,\n      {\n        duration: 250,\n        easing: 'ease-in-out'\n      },\n    ] as any, // TODO: Fix this type\n    focus: {\n      x: [\n        theme.layout.marginX,\n        {\n          duration: 250,\n          easing: 'ease-in-out'\n        },\n      ] as any, // TODO: Fix this type\n    },\n  } satisfies IntrinsicNodeStyleProps,\n  Gradient: {\n    zIndex: 99,\n    linearGradient: {\n      angle: deg2rad(270),\n      stops: [0, 0.4, 0.8],\n      colors: [hexColor(theme.color.primary), hexColor(theme.color.primary), hexColor('#00000000')],\n    },\n    alpha: [0] as any, // TODO: Fix this type\n    focus: {\n      width: 1600,\n      alpha: [1] as any, // TODO: Fix this type\n    },\n    width: 100,\n    height: 1080,\n  } satisfies IntrinsicNodeStyleProps,\n  NavButton: {\n    zIndex: 102,\n    height: 70,\n    width: 100,\n    borderRadius: 8,\n    focus: {\n      color: hexColor(theme.color.container),\n    },\n    active: {\n      width: 328,\n      height: 70,\n    },\n  } satisfies IntrinsicNodeStyleProps,\n};\n","import { For, IntrinsicNodeProps, View } from '@lightningjs/solid';\nimport { createSpriteMap } from '@lightningjs/solid-primitives';\n// Icons from https://uxwing.com/\n\nconst basePath = import.meta.env.BASE_URL;\n\nconst icons = [\n  { name: 'experiment', width: 81, height: 100, x: 0, y: 0 },\n  { name: 'trending', width: 100, height: 56, x: 81, y: 0 },\n  { name: 'tv', width: 100, height: 68, x: 181, y: 0 },\n  { name: 'movie', width: 94, height: 100, x: 281, y: 0 },\n];\n\ninterface IconProps extends IntrinsicNodeProps {\n  name: string;\n}\n\nfunction Icon(props: IconProps) {\n  const sprite = createSpriteMap(basePath + 'assets/icons_white.png', icons);\n\n  return (\n    <View\n      {...props}\n      texture={sprite[props.name]}\n      width={sprite[props.name].props.width}\n      height={sprite[props.name].props.height}\n      x={(100 - (sprite[props.name].props.width || 0)) / 2}\n      y={(100 - (sprite[props.name].props.height || 0)) / 2}\n    ></View>\n  );\n}\n\nexport default Icon;\nexport function PreviewIcons() {\n  return (\n    <>\n      <View\n        src={`${basePath}assets/icons.png`}\n        width={375}\n        height={100}\n        y={10}\n      />\n      <For each={icons}>\n        {(icon, i) => <Icon name={icon.name} y={100} x={i() * 105} />}\n      </For>\n    </>\n  );\n}\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { renderer } from '@lightningjs/solid';\nimport {} from '@lightningjs/renderer';\nexport function createSpriteMap(src, subTextures) {\n    const spriteMapTexture = renderer.createTexture('ImageTexture', {\n        src,\n    });\n    return subTextures.reduce((acc, t) => {\n        const { x, y, width, height } = t;\n        acc[t.name] = renderer.createTexture('SubTexture', {\n            texture: spriteMapTexture,\n            x,\n            y,\n            width,\n            height,\n        });\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=createSpriteMap.js.map","import { useNavigate } from '@solidjs/router';\nimport { View, Text, IntrinsicNodeProps, ElementNode } from '@lightningjs/solid';\nimport { Column } from '@lightningjs/solid-primitives';\nimport styles from './NavDrawer.styles';\nimport Icon from '../Icon';\nimport theme from 'theme';\n\ninterface NavButtonProps extends IntrinsicNodeProps {\n  icon: string;\n}\n\nfunction NavButton(props: NavButtonProps) {\n  return (\n    <View {...props} forwardStates style={styles.NavButton}>\n      <View y={-16}>\n        <Icon scale={0.5} name={props.icon} />\n      </View>\n      <Text\n        style={{\n          ...theme.typography.button1,\n          fontSize: 38,\n          x: 116,\n          y: 16,\n          height: 50,\n          alpha: 0,\n          active: {\n            alpha: 1,\n          },\n        }}\n      >\n        {props.children}\n      </Text>\n    </View>\n  );\n}\n\nexport default function NavDrawer(props) {\n  let backdrop;\n  const navigate = useNavigate();\n\n  function onFocus(this: ElementNode) {\n    backdrop.states.add('focus');\n    this.children.forEach((c) => c.states!.add('active'));\n    this.children.selected!.setFocus();\n  }\n\n  function onBlur(this: ElementNode) {\n    backdrop.states.remove('focus');\n    this.selected = 0;\n    this.children.forEach((c) => c.states!.remove('active'));\n  }\n\n  return (\n    <>\n      <Column {...props} onFocus={onFocus} onBlur={onBlur} style={styles.Column} animate>\n        <NavButton onEnter={() => navigate('/browse/all')} icon='trending'>Trending</NavButton>\n        <NavButton icon='movie' onEnter={() => navigate('/browse/movie')}>Movies</NavButton>\n        <NavButton icon='tv' onEnter={() => navigate('/browse/tv')}>TV</NavButton>\n        <NavButton icon='experiment' onEnter={() => navigate('/examples')}>Examples</NavButton>\n      </Column>\n      <View ref={backdrop} style={styles.Gradient}></View>\n    </>\n  );\n}\n","import { createEffect, on } from \"solid-js\";\nimport { Route, Routes, useNavigate } from \"@solidjs/router\";\nimport { View, activeElement, hexColor} from \"@lightningjs/solid\";\nimport { useFocusManager, useAnnouncer } from \"@lightningjs/solid-primitives\";\nimport Browse from './Browse';\nimport Examples from './Examples';\nimport TextPage from './Text';\nimport ButtonsPage from './Buttons';\nimport FlexPage from './Flex';\nimport FlexColumnPage from './FlexColumn';\nimport ButtonsMaterialPage from './ButtonsMaterial';\nimport Entity from './Entity';\nimport People from './People';\nimport NotFound from './NotFound';\nimport Background from '../components/Background';\nimport NavDrawer from '../components/NavDrawer/NavDrawer';\nimport {FocusRing} from '../components';\nimport theme from 'theme';\nimport { assertTruthy } from \"@lightningjs/renderer/utils\";\n\ndeclare module '@lightningjs/solid-primitives' {\n  // Augment the FocusManager KeyMap interface with our custom keys\n  interface KeyMap {\n    Menu: string;\n    Flex: string;\n    FlexColumn: string;\n    Text: string;\n    Buttons: string;\n  }\n}\n\ndeclare module '@lightningjs/solid' {\n  interface ElementNode {\n    heroContent?: boolean;\n    backdrop?: any;\n    entityInfo?: any;\n    href?: string;\n  }\n}\n\nconst App = () => {\n  useFocusManager({\n    Menu: 'm',\n    Flex: 'f',\n    FlexColumn: 'c',\n    Text: 't',\n    Buttons: 'b'\n  });\n  useAnnouncer();\n  const navigate = useNavigate();\n\n  let focusRingRef, navDrawer, lastFocused;\n\n  createEffect(on(activeElement, (elm) => {\n    assertTruthy(elm);\n    setTimeout(() => {\n      if (elm.heroContent) {\n        focusRingRef.parent = elm;\n        focusRingRef.alpha = 1;\n        focusRingRef.width = elm.width! + 10;\n        focusRingRef.height = elm.height! + 10;\n        focusRingRef.zIndex = (elm.zIndex! - 0.00000001);\n      } else {\n        focusRingRef.alpha = 0;\n      }\n    }, 10)\n  }, { defer: true}))\n\n  return (\n    <View ref={window.APP}\n      onLast={() => history.back()}\n      onText={() => navigate('/text')}\n      onFlex={() => navigate('/flex')}\n      onFlexColumn={() => navigate('/flexcolumn')}\n      onButtons={() => navigate('/buttons')}\n      onMenu={() => navigate('/')} style={{ width: 1920, height: 1080 }}\n      onLeft={() => {\n        if (navDrawer.states.has('focus')) {\n          return false;\n        }\n        lastFocused = activeElement();\n        navDrawer.setFocus();\n      }}\n      onRight={() => navDrawer.states.has('focus') && lastFocused.setFocus()}>\n      <Background />\n      <FocusRing color={hexColor(theme.color.focus)} ref={focusRingRef} />\n      <Routes>\n        <Route path={import.meta.env.BASE_URL}>\n          <Route path=\"\" component={Browse} />\n          <Route path=\"examples\" component={Examples} />\n          <Route path=\"browse/:filter\" component={Browse} />\n          <Route path=\"text\" component={TextPage} />\n          <Route path=\"buttons\" component={ButtonsPage} />\n          <Route path=\"flex\" component={FlexPage} />\n          <Route path=\"flexcolumn\" component={FlexColumnPage} />\n          <Route path=\"buttonsmaterial\" component={ButtonsMaterialPage} />\n          <Route path=\"entity/people/:id\" component={People} />\n          <Route path=\"entity/:type/:id\" component={Entity} />\n          <Route path=\"*all\" component={NotFound} />\n        </Route>\n      </Routes>\n      <NavDrawer ref={navDrawer} />\n    </View>\n  )\n};\n\nexport default App;\n","/*\n * Copyright 2023 Comcast Cable Communications Management, LLC\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport { createEffect, on } from 'solid-js';\nimport { Announcer } from './announcer.js';\nimport { focusPath } from '../useFocusManager.js';\nexport const useAnnouncer = () => {\n    Announcer.setupTimers();\n    createEffect(on(focusPath, Announcer.onFocusChange, { defer: true }));\n    return Announcer;\n};\n//# sourceMappingURL=index.js.map","export default import.meta.ROLLUP_FILE_URL_471a4607;","import { render, Canvas, Config, SolidNode, SolidRendererOptions, hexColor } from '@lightningjs/solid';\nimport { Router } from \"@solidjs/router\";\nimport App from './pages/App';\nimport coreExtensionModuleUrl from './AppCoreExtensions.js?importChunkUrl';\nimport coreWorkerUrl from './threadx-core-worker.js?importChunkUrl';\n\nConfig.debug = false;\nConfig.fontSettings.fontFamily = 'Ubuntu';\nConfig.fontSettings.color = hexColor('#ffffff');\nConfig.fontSettings.fontSize = 100;\n\nconst driver = 'main' as 'main' | 'threadx'; // Use 'main' for main thread-only rendering\n\nrender(() =>  (\n  <Canvas options={{\n    coreExtensionModule: coreExtensionModuleUrl,\n    threadXCoreWorkerUrl: driver === 'threadx' ? coreWorkerUrl : undefined,\n    // deviceLogicalPixelRatio: 1\n  }}>\n    <Router>\n      <App />\n    </Router>\n  </Canvas>\n));\n\n"],"names":["equalFn","a","b","$PROXY","Symbol","$TRACK","signalOptions","equals","runEffects","runQueue","STALE","PENDING","UNOWNED","owned","cleanups","context","owner","NO_INIT","Owner","SuspenseContext","Transition","Listener","Updates","Effects","ExecCount","createRoot","fn","detachedOwner","listener","unowned","length","current","undefined","root","updateFn","untrack","cleanNode","runUpdates","createSignal","value","options","s","observers","observerSlots","comparator","Object","assign","readSignal","bind","writeSignal","createComputed","updateComputation","createComputation","createRenderEffect","createEffect","runUserEffects","c","render","user","push","createMemo","createResource","pSource","pFetcher","pOptions","source","fetcher","arguments","pr","initP","scheduled","resolved","dynamic","contexts","Set","setValue","storage","initialValue","error","setError","track","trigger","state","setState","loadEnd","p","v","key","onHydrated","queueMicrotask","err","keys","decrement","clear","completeLoad","read","has","increment","add","load","refetching","lookup","status","then","e","castError","defineProperties","get","loading","latest","refetch","mutate","on","deps","isArray","Array","prevInput","defer","prevValue","input","i","result","onMount","onCleanup","getOwner","createContext","defaultValue","id","Provider","createProvider","useContext","children","memo","resolveChildren","toArray","this","sources","updates","lookUpstream","sSlot","sourceSlots","node","isComp","o","TransitionRunning","running","disposed","tState","pure","markDownstream","Error","time","nextValue","forEach","updatedAt","handleError","runComputation","init","runTop","suspense","inFallback","effects","ancestors","wait","res","completeUpdates","queue","userLength","ignore","pop","index","obs","n","cause","results","apply","props","FALLBACK","dispose","d","createComponent","Comp","trueFn","propTraps","_","property","receiver","set","deleteProperty","getOwnPropertyDescriptor","configurable","enumerable","ownKeys","resolveSource","resolveSources","mergeProps","proxy","Proxy","target","sourcesMap","defined","sourceKeys","getOwnPropertyNames","desc","defineProperty","narrowedError","name","For","fallback","list","mapFn","items","mapped","disposers","len","indexes","j","newItems","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","start","end","newEnd","item","newLen","disposer","mapper","Math","min","Map","slice","mapArray","each","Show","keyed","condition","when","child","activeElement","setActiveElement","Text","_el$","_$createElement","_$spread","View","TextureUsageTracker","releaseCallback","constructor","ManualCountTextureUsageTracker","textureMap","zeroReferenceTextureSet","super","textureCleanupIntervalMs","textureCleanupAgeThreadholdMs","setInterval","now","Date","thresholdMs","textureRefInfo","lastUpdate","delete","registerTexture","texture","textureId","assertTruthy","nodeRefCount","incrementTextureRefCount","txType","decrementTextureRefCount","FinalizationRegistryTextureUsageTracker","registry","FinalizationRegistry","register","RendererMain","driver","canvas","settings","nodes","nextTextureId","textureTracker","resolvedSettings","appWidth","appHeight","deviceLogicalPixelRatio","devicePhysicalPixelRatio","window","devicePixelRatio","clearColor","coreExtensionModule","experimental_FinalizationRegistryTextureUsageTracker","textureCleanupOptions","releaseTexture","useFinalizationRegistryTracker","deviceLogicalWidth","deviceLogicalHeight","document","createElement","targetEl","width","height","style","getElementById","onCreateNode","onBeforeDestroyNode","appendChild","getRootNode","createNode","resolveNodeDefaults","createTextNode","text","textRendererOverride","fontSize","fontFamily","fontStyle","fontWeight","fontStretch","textAlign","contain","scrollable","scrollY","offsetY","letterSpacing","debug","color","colorTl","colorTop","colorLeft","colorTr","colorRight","colorBl","colorBottom","colorBr","x","y","alpha","clipping","zIndex","zIndexLocked","parent","shader","src","scale","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","destroyNode","createTexture","textureType","descType","createShader","shaderType","shType","getNodeById","toggleFreeze","advanceFrame","rerender","renderer","nextId","getNewId","MainOnlyNode","EventEmitter","rendererMain","stage","coreNode","_children","_src","_parent","_texture","_shader","CoreNode","shaderProps","textureOptions","onTextureLoaded","onTextureFailed","worldX","worldY","newParent","oldParent","indexOf","splice","imageUrl","loadTexture","unloadTexture","dimensions","emit","loadShader","destroy","removeAllListeners","flush","animate","animation","CoreAnimation","CoreAnimationController","animationManager","MainOnlyTextNode","CoreTextNode","onTextLoaded","onTextFailed","MainRenderDriver","rendererSettings","Stage","rootId","monitorTextureCache","once","loadCoreExtension","txManager","removeTextureIdFromCache","ThreadXMainAnimationController","stoppedPromise","stoppedResolve","onAnimationFinished","makeStoppedPromise","stop","off","pause","restore","waitUntilStopped","promise","loop","Promise","resolve","ThreadXMainNode","SharedNode","nextAnimationId","animationRegistry","sharedNodeStruct","extendedCurProps","controller","parentId","curProps","ThreadXMainTextNode","_debug","ThreadXRenderDriver","threadx","ThreadX","workerId","workerName","sharedObjectFactory","buffer","typeId","BufferStruct","extractTypeId","NodeStruct","nodeStruct","lock","TextNodeStruct","registerWorker","Worker","coreWorkerUrl","type","offscreenCanvas","transferControlToOffscreen","rootNodeId","sendMessageAsync","rootNode","getSharedObjectById","bufferStruct","shareObjects","catch","console","textureDescId","sendMessage","defaultOptions","threadXCoreWorkerUrl","startLightningRenderer","resolvedOptions","Children","selected","firstChild","insert","beforeNode","_isDirty","remove","nodeIndexToRemove","config","animationSettings","duration","easing","fontSettings","isDev","module","meta","env","MODE","log","msg","args","isFunc","States","_node","initialState","entries","filter","_key","map","is","_stateChanged","toggle","stateIndexToRemove","defaultAnimationSettings","borderAccessor","direction","LightningRendererNumberProps","LightningRendererNonAnimatingProps","ElementNode","lng","rendered","_undoStates","_renderProps","_effects","_style","_states","_animationSettings","_updateLayoutOn","_width","_height","_color","_borderRadius","_border","_borderLeft","_borderRight","_borderTop","_borderBottom","_animate","_autosized","_dom","autofocus","_sendToLightningAnimatable","_sendToLightning","borderRadius","radius","border","borderLeft","borderRight","borderTop","borderBottom","linearGradient","_linearGradient","styleEffects","convertEffectsToShader","createAnimation","setFocus","isTextNode","_resizeOnTextLoad","size","updateLayout","getText","join","hasChildren","states","updateLayoutOn","_applyZIndexToChildren","decimalSeparator","parseInt","parseFloat","display","flexDirection","dimension","marginOne","marginTwo","prop","containerSize","itemSize","reduce","prev","gap","numChildren","justify","justifyContent","toPad","calculateFlex","onLayout","forwardStates","obj","keyExists","stylesToUndo","undoStyles","includes","newStyles","acc","styles","onLoad","isNaN","renderTopDown","Canvas","_$use","_$setProp","_$insert","createRenderer$1","replaceText","insertNode","removeNode","setProperty","getParentNode","getFirstChild","getNextSibling","accessor","marker","initial","insertExpression","unwrapArray","t","multi","toString","cleanChildren","array","normalizeIncomingArray","replacement","appendNodes","reconcileArrays","replaceNode","normalized","unwrap","parentNode","bLength","aEnd","bEnd","aStart","bStart","after","sequence","removed","inserted","el","isParent","newNode","oldNode","spreadExpression","prevProps","skipChildren","ref","code","element","spread","setProp","effect","use","arg","universalLightning","anchor","universalInspector","dom","classList","origRender","call","overflow","top","left","solid","textNode","data","insertBefore","removeChild","loadInspector","css","innerText","head","injectCSS","setTimeout","bcr","getBoundingClientRect","offsetLeft","offsetTop","ceil","transformOrigin","transform","updateRootStyleFromCanvas","solidRenderer","createRenderer","hexColor","Number","isInteger","startsWith","replace","$$EVENTS","eventHandler","composedPath","handler","disabled","cancelBubble","_$host","host","scrollToHash","hash","fallbackTop","selector","querySelector","scrollIntoView","scrollTo","pathIntegration","utils","wrap","signal","intercept","next","createIntegration","location","pathname","search","history","scroll","replaceState","pushState","notify","bindEvent","addEventListener","removeEventListener","go","delta","hasSchemeRegex","trimPathRegex","normalizePath","path","omitSlash","test","resolvePath","base","from","basePath","fromPath","toLowerCase","joinPaths","to","createMatcher","partial","matchFilters","pattern","splat","split","segments","Boolean","locSegments","lenDiff","match","params","matchFilter","segment","locSegment","matchSegment","remainder","isEqual","localeCompare","sensitivity","some","RegExp","scoreRoute","route","score","createMemoObject","prevListener","runWithOwner","Reflect","expandOptionals","exec","prefix","suffix","prefixes","expansion","RouterContextObj","RouteContextObj","useRouter","message","invariant","TempRoute","useRoute","useNavigate","navigatorFactory","useParams","createRoutes","routeDef","component","isLeaf","shared","preload","asArray","originalPath","matcher","createBranch","routes","matches","unshift","createBranches","stack","branches","routeDefs","def","hasOwnProperty","isEmptyArray","branch","sort","createRouterContext","integration","out","setSource","normalizeIntegration","parsePath","renderPath","beforeLeave","listeners","subscribe","confirm","defaultPrevented","preventDefault","l","retry","force","navigate","createBeforeLeave","isRouting","setIsRouting","async","startTransition","callback","reference","setReference","origin","URL","url","path_","href","query","searchParams","extractSearchParams","createLocation","referrers","baseRoute","outlet","navigateFromRoute","warn","nextState","resolvedTo","first","navigateEnd","handleAnchorClick","evt","button","metaKey","altKey","ctrlKey","shiftKey","find","Node","nodeName","toUpperCase","hasAttribute","rel","getAttribute","JSON","parse","eventNames","delegateEvents","createRouteContext","router","Router","routerState","_$createComponent","Routes","parentRoute","Outlet","getRouteMatches","m","routeStates","nextMatches","prevMatches","equal","prevMatch","nextMatch","Route","childRoutes","tryOnCleanup","createSingletonRoot","factory","disposeRoot","useKeyDownEvent","event","setEvent","keyMap","Left","Right","Up","Down","Enter","Last","focusPath","setFocusPath","withPadding","padding","pad","right","bottom","delay","speak","phrase","utterances","lang","synth","speechSynthesis","reject","utterance","SpeechSynthesisUtterance","onend","onerror","speakSeries","series","remainingPhrases","flattenedSeries","concat","flattenStrings","nestedSeriesResults","active","shift","totalRetries","retriesLeft","SpeechSynthesisErrorEvent","seriesResult","append","toSpeak","cancel","currentSeries","SpeechEngine","resetFocusPathTimer","currentlySpeaking","prevFocusPath","voiceOutDisabled","debounceWithFlush","debounce","timeoutId","clearTimeout","debounced","scopedValue","newValue","getElmName","elm","onFocusChangeCore","Announcer","onFocusChange","loaded","every","focusDiff","toAnnounceText","toAnnounce","announce","title","reverse","announceContext","table","val","clearPrevFocus","depth","notification","finally","setupTimers","focusDebounce","focusChangeTimeout","handleNavigation","lastSelected","skipFocus","onSelectedChanged","plinko","lastSelectedChild","num","Row","_$mergeProps","onFocus","Column","up","down","styles$1","Page","headlineText","headlineSubText","itemsContainer","theme","layout","screenW","Thumbnail","focus","FocusRing","showHeadline","headlineBlur","RowTitle","marginTop","marginX","gutterX","Rect","peopleBio","typography","body1","Button","timing","buttonStyles","container","topBar","MaterialButton","MaterialButtonText","TileRow","local","others","blocked","flat","k","otherObject","objects","propName","isDefaultDesc","writable","objectIndex","splitProps","globalBackground","setGlobalBackground","API_BASE","tmdbConfig","baseImageUrl","basePosterSize","defaultFetchParams","headers","Authorization","getImageUrl","posterSize","_get","fetch","r","json","loadConfig","images","secure_base_url","api","convertItemsToTiles","poster_path","profile_path","tileSrc","backdrop_path","backdrop","media_type","shortTitle","str","maxLength","substring","entityInfo","heroContent","description","overview","cache","leftoverTiles","createInfiniteScroll","pages","setPages","page","setPage","setEnd","contents","content","blockWidth","HeadlineStyles","display2","Headline","DescriptionStyles","BadgeStyle","lineHeight","Description","Badge","MetaTextStyle","body2","Metadata","flexRow","metaText","badges","_$memo","getReviews","reviews","rtCrit","marginRight","rtFan","ContentBlock","flexColumn","minutesToHMM","minutes","remainingMinutes","floor","justYear","dateString","getRecommendations","getCredits","cast","getInfo","rt","backgroundImage","runtime","release_date","first_air_date","last_air_date","Browse","columnY","setcolumnY","setEntityInfo","entityProvider","setHeroContent","isFirst","subs","values","createSelector","provider","pageIndex","trending","adult","chunks","chunkArray","onRowFocus","numPages","onEnter","entity","HelloWorld","TextPage","OverviewContainer","SublineContainer","Title","Overview","Subline","ButtonsPage","RowStyles","FlexPage","rowTitle","marginBottom","Block","setColumnY","marginLeft","FlexColumnPage","ColumnStyles","MaterialButtonsPage","RoundedRectangle","Entity","credits","recommendations","Backdrop","columnRef","backdropRef","onRowFocusAnimate","r$","biography","People","NotFound","Background","bg1","bg2","bgStyles","img","radialGradient","colors","stops","Gradient","angle","deg","PI","primary","NavButton","import","icons","Icon","sprite","subTextures","spriteMapTexture","createSpriteMap","icon","button1","NavDrawer","onBlur","App","useFocusManager","userKeyMap","keypressEvent","keyMapEntries","currentFocusedElm","prevFocusedElm","fp","foundKeyEntry","mappedKeyEvent","onKeyHandler","onKeyPress","Menu","Flex","FlexColumn","Buttons","focusRingRef","navDrawer","lastFocused","_ref$","APP","onLast","back","onText","onFlex","onFlexColumn","onButtons","onMenu","onLeft","onRight","Examples","ButtonsMaterialPage","coreExtensionModuleUrl","Config"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,70,73]}